"use strict";function B(g,i){for(var s=0;s<i.length;s++){const a=i[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in g)){const c=Object.getOwnPropertyDescriptor(a,n);c&&Object.defineProperty(g,n,c.get?c:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}))}var d={};(function(){var g=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.Env");const s=e=>t=>t.options.get(e),a=e=>{const t=e.options.register;t("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),t("pagebreak_split_block",{processor:"boolean",default:!1})},n=s("pagebreak_separator"),c=s("pagebreak_split_block"),u="mce-pagebreak",b=e=>{const t=`<img src="${i.transparentSrc}" class="${u}" data-mce-resize="false" data-mce-placeholder />`;return e?`<p>${t}</p>`:t},y=e=>{const t=n(e),l=()=>c(e),_=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,r=>"\\"+r),"gi");e.on("BeforeSetContent",r=>{r.content=r.content.replace(_,b(l()))}),e.on("PreInit",()=>{e.serializer.addNodeFilter("img",r=>{let f=r.length,o,m;for(;f--;)if(o=r[f],m=o.attr("class"),m&&m.indexOf(u)!==-1){const p=o.parent;if(p&&e.schema.getBlockElements()[p.name]&&l()){p.type=3,p.value=t,p.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}})})},h=e=>{e.addCommand("mcePageBreak",()=>{e.insertContent(b(c(e)))})},v=e=>{e.on("ResolveName",t=>{t.target.nodeName==="IMG"&&e.dom.hasClass(t.target,u)&&(t.name="pagebreak")})},k=e=>t=>{const l=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",l),l(),()=>{e.off("NodeChange",l)}},P=e=>{const t=()=>e.execCommand("mcePageBreak");e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:t,onSetup:k(e)}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:t,onSetup:k(e)})};var S=()=>{g.add("pagebreak",e=>{a(e),h(e),P(e),y(e),v(e)})};S()})();const C=B({__proto__:null,default:d},[d]);exports.index=C;
//# sourceMappingURL=index-DOLD1GSS.cjs.map
