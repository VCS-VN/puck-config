{"version":3,"file":"index-DDBlkCaO.cjs","sources":["../node_modules/.pnpm/tinymce@6.8.6/node_modules/tinymce/themes/silver/theme.js"],"sourcesContent":["/**\n * TinyMCE version 6.8.6 (TBD)\n */\n\n(function () {\n    'use strict';\n\n    const getPrototypeOf$2 = Object.getPrototypeOf;\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType$1 = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq$1 = t => a => t === a;\n    const is$2 = (value, constructor) => isObject(value) && hasProto(value, constructor, (o, proto) => getPrototypeOf$2(o) === proto);\n    const isString = isType$1('string');\n    const isObject = isType$1('object');\n    const isPlainObject = value => is$2(value, Object);\n    const isArray = isType$1('array');\n    const isNull = eq$1(null);\n    const isBoolean = isSimpleType('boolean');\n    const isUndefined = eq$1(undefined);\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isNumber = isSimpleType('number');\n    const isArrayOf = (value, pred) => {\n      if (isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const noarg = f => () => f();\n    const compose = (fa, fb) => {\n      return (...args) => {\n        return fa(fb.apply(null, args));\n      };\n    };\n    const compose1 = (fbc, fab) => a => fbc(fab(a));\n    const constant$1 = value => {\n      return () => {\n        return value;\n      };\n    };\n    const identity = x => {\n      return x;\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n    function curry(fn, ...initialArgs) {\n      return (...restArgs) => {\n        const all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    const not = f => t => !f(t);\n    const die = msg => {\n      return () => {\n        throw new Error(msg);\n      };\n    };\n    const apply$1 = f => {\n      return f();\n    };\n    const never = constant$1(false);\n    const always = constant$1(true);\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeSlice = Array.prototype.slice;\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const indexOf = (xs, x) => {\n      const r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    const contains$2 = (xs, x) => rawIndexOf(xs, x) > -1;\n    const exists = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const range$2 = (num, f) => {\n      const r = [];\n      for (let i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    const chunk$1 = (array, size) => {\n      const r = [];\n      for (let i = 0; i < array.length; i += size) {\n        const s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    const map$2 = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$1 = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const eachr = (xs, f) => {\n      for (let i = xs.length - 1; i >= 0; i--) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const partition$3 = (xs, pred) => {\n      const pass = [];\n      const fail = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        const arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass,\n        fail\n      };\n    };\n    const filter$2 = (xs, pred) => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    const foldr = (xs, f, acc) => {\n      eachr(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const foldl = (xs, f, acc) => {\n      each$1(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const findUntil = (xs, pred, until) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const find$5 = (xs, pred) => {\n      return findUntil(xs, pred, never);\n    };\n    const findIndex$1 = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind$3 = (xs, f) => flatten(map$2(xs, f));\n    const forall = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        const x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const reverse = xs => {\n      const r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    const difference = (a1, a2) => filter$2(a1, x => !contains$2(a2, x));\n    const mapToObject = (xs, f) => {\n      const r = {};\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    const pure$2 = x => [x];\n    const sort = (xs, comparator) => {\n      const copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    const get$h = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = xs => get$h(xs, 0);\n    const last$1 = xs => get$h(xs, xs.length - 1);\n    const from = isFunction(Array.from) ? Array.from : x => nativeSlice.call(x);\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    const keys = Object.keys;\n    const hasOwnProperty = Object.hasOwnProperty;\n    const each = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const map$1 = (obj, f) => {\n      return tupleMap(obj, (x, i) => ({\n        k: i,\n        v: f(x, i)\n      }));\n    };\n    const tupleMap = (obj, f) => {\n      const r = {};\n      each(obj, (x, i) => {\n        const tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const bifilter = (obj, pred) => {\n      const t = {};\n      const f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t,\n        f\n      };\n    };\n    const filter$1 = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const mapToArray = (obj, f) => {\n      const r = [];\n      each(obj, (value, name) => {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    const find$4 = (obj, pred) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    const values = obj => {\n      return mapToArray(obj, identity);\n    };\n    const get$g = (obj, key) => {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    const has$2 = (obj, key) => hasOwnProperty.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n\n    const is$1 = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const equals = (lhs, rhs, comparator = tripleEquals) => lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const sequence = arr => {\n      const r = [];\n      for (let i = 0; i < arr.length; i++) {\n        const x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    const lift2 = (oa, ob, f) => oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    const lift3 = (oa, ob, oc, f) => oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    const mapFrom = (a, f) => a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const addToEnd = (str, suffix) => {\n      return str + suffix;\n    };\n    const removeFromStart = (str, numChars) => {\n      return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    const ensureTrailing = (str, suffix) => {\n      return endsWith(str, suffix) ? str : addToEnd(str, suffix);\n    };\n    const contains$1 = (str, substr, start = 0, end) => {\n      const idx = str.indexOf(substr, start);\n      if (idx !== -1) {\n        return isUndefined(end) ? true : idx + substr.length <= end;\n      } else {\n        return false;\n      }\n    };\n    const startsWith = (str, prefix) => {\n      return checkRange(str, prefix, 0);\n    };\n    const endsWith = (str, suffix) => {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    const blank = r => s => s.replace(r, '');\n    const trim$1 = blank(/^\\s+|\\s+$/g);\n    const isNotEmpty = s => s.length > 0;\n    const isEmpty = s => !isNotEmpty(s);\n\n    const isSupported$1 = dom => dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n\n    const fromHtml$2 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        const message = 'HTML does not have a single root node';\n        console.error(message, html);\n        throw new Error(message);\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    const fromTag = (tag, scope) => {\n      const doc = scope || document;\n      const node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    const fromText = (text, scope) => {\n      const doc = scope || document;\n      const node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    const fromDom = node => {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    const fromPoint = (docElm, x, y) => Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    const SugarElement = {\n      fromHtml: fromHtml$2,\n      fromTag,\n      fromText,\n      fromDom,\n      fromPoint\n    };\n\n    const Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    const path$1 = (parts, scope) => {\n      let o = scope !== undefined && scope !== null ? scope : Global;\n      for (let i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    const resolve = (p, scope) => {\n      const parts = p.split('.');\n      return path$1(parts, scope);\n    };\n\n    const unsafe = (name, scope) => {\n      return resolve(name, scope);\n    };\n    const getOrDie$1 = (name, scope) => {\n      const actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n\n    const getPrototypeOf$1 = Object.getPrototypeOf;\n    const sandHTMLElement = scope => {\n      return getOrDie$1('HTMLElement', scope);\n    };\n    const isPrototypeOf = x => {\n      const scope = resolve('ownerDocument.defaultView', x);\n      return isObject(x) && (sandHTMLElement(scope).prototype.isPrototypeOf(x) || /^HTML\\w*Element$/.test(getPrototypeOf$1(x).constructor.name));\n    };\n\n    const DOCUMENT = 9;\n    const DOCUMENT_FRAGMENT = 11;\n    const ELEMENT = 1;\n    const TEXT = 3;\n\n    const name$3 = element => {\n      const r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    const type$1 = element => element.dom.nodeType;\n    const isType = t => element => type$1(element) === t;\n    const isHTMLElement = element => isElement$1(element) && isPrototypeOf(element.dom);\n    const isElement$1 = isType(ELEMENT);\n    const isText = isType(TEXT);\n    const isDocument = isType(DOCUMENT);\n    const isDocumentFragment = isType(DOCUMENT_FRAGMENT);\n    const isTag = tag => e => isElement$1(e) && name$3(e) === tag;\n\n    const is = (element, selector) => {\n      const dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        const elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    const bypassSelector = dom => dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    const all$3 = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$2(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    const one = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    const eq = (e1, e2) => e1.dom === e2.dom;\n    const contains = (e1, e2) => {\n      const d1 = e1.dom;\n      const d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n\n    const owner$4 = element => SugarElement.fromDom(element.dom.ownerDocument);\n    const documentOrOwner = dos => isDocument(dos) ? dos : owner$4(dos);\n    const documentElement = element => SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    const defaultView = element => SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    const parent = element => Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    const parentNode = element => parent(element);\n    const parentElement = element => Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    const parents = (element, isRoot) => {\n      const stop = isFunction(isRoot) ? isRoot : never;\n      let dom = element.dom;\n      const ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        const rawParent = dom.parentNode;\n        const p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    const offsetParent = element => Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    const nextSibling = element => Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    const children = element => map$2(element.dom.childNodes, SugarElement.fromDom);\n    const child$2 = (element, index) => {\n      const cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    const firstChild = element => child$2(element, 0);\n    const spot = (element, offset) => ({\n      element,\n      offset\n    });\n    const leaf = (element, offset) => {\n      const cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    const isShadowRoot = dos => isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    const supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    const isSupported = constant$1(supported);\n    const getRootNode = supported ? e => SugarElement.fromDom(e.dom.getRootNode()) : documentOrOwner;\n    const getContentContainer = dos => isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    const isInShadowRoot = e => getShadowRoot(e).isSome();\n    const getShadowRoot = e => {\n      const r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    const getShadowHost = e => SugarElement.fromDom(e.dom.host);\n    const getOriginalEventTarget = event => {\n      if (isSupported() && isNonNullable(event.target)) {\n        const el = SugarElement.fromDom(event.target);\n        if (isElement$1(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            const composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    const isOpenShadowHost = element => isNonNullable(element.dom.shadowRoot);\n\n    const inBody = element => {\n      const dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      const doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(() => doc.body.contains(dom), compose1(inBody, getShadowHost));\n    };\n    const body = () => getBody(SugarElement.fromDom(document));\n    const getBody = doc => {\n      const b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    const rawSet = (dom, key, value) => {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    const set$9 = (element, key, value) => {\n      rawSet(element.dom, key, value);\n    };\n    const setAll$1 = (element, attrs) => {\n      const dom = element.dom;\n      each(attrs, (v, k) => {\n        rawSet(dom, k, v);\n      });\n    };\n    const get$f = (element, key) => {\n      const v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    const getOpt = (element, key) => Optional.from(get$f(element, key));\n    const has$1 = (element, key) => {\n      const dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    const remove$7 = (element, key) => {\n      element.dom.removeAttribute(key);\n    };\n    const clone$2 = element => foldl(element.dom.attributes, (acc, attr) => {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n\n    const internalSet = (dom, property, value) => {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    const internalRemove = (dom, property) => {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    const set$8 = (element, property, value) => {\n      const dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    const setAll = (element, css) => {\n      const dom = element.dom;\n      each(css, (v, k) => {\n        internalSet(dom, k, v);\n      });\n    };\n    const setOptions = (element, css) => {\n      const dom = element.dom;\n      each(css, (v, k) => {\n        v.fold(() => {\n          internalRemove(dom, k);\n        }, value => {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    const get$e = (element, property) => {\n      const dom = element.dom;\n      const styles = window.getComputedStyle(dom);\n      const r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    const getUnsafeProperty = (dom, property) => isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    const getRaw = (element, property) => {\n      const dom = element.dom;\n      const raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(r => r.length > 0);\n    };\n    const getAllRaw = element => {\n      const css = {};\n      const dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (let i = 0; i < dom.style.length; i++) {\n          const ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    const isValidValue$1 = (tag, property, value) => {\n      const element = SugarElement.fromTag(tag);\n      set$8(element, property, value);\n      const style = getRaw(element, property);\n      return style.isSome();\n    };\n    const remove$6 = (element, property) => {\n      const dom = element.dom;\n      internalRemove(dom, property);\n      if (is$1(getOpt(element, 'style').map(trim$1), '')) {\n        remove$7(element, 'style');\n      }\n    };\n    const reflow = e => e.dom.offsetWidth;\n\n    const Dimension = (name, getOffset) => {\n      const set = (element, h) => {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        const dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      const get = element => {\n        const r = getOffset(element);\n        if (r <= 0 || r === null) {\n          const css = get$e(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      const getOuter = get;\n      const aggregate = (element, properties) => foldl(properties, (acc, property) => {\n        const val = get$e(element, property);\n        const value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n      const max = (element, value, properties) => {\n        const cumulativeInclusions = aggregate(element, properties);\n        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set,\n        get,\n        getOuter,\n        aggregate,\n        max\n      };\n    };\n\n    const api$2 = Dimension('height', element => {\n      const dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    const get$d = element => api$2.get(element);\n    const getOuter$2 = element => api$2.getOuter(element);\n    const setMax$1 = (element, value) => {\n      const inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      const absMax = api$2.max(element, value, inclusions);\n      set$8(element, 'max-height', absMax + 'px');\n    };\n\n    const r$1 = (left, top) => {\n      const translate = (x, y) => r$1(left + x, top + y);\n      return {\n        left,\n        top,\n        translate\n      };\n    };\n    const SugarPosition = r$1;\n\n    const boxPosition = dom => {\n      const box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    const firstDefinedOrZero = (a, b) => {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    const absolute$3 = element => {\n      const doc = element.dom.ownerDocument;\n      const body = doc.body;\n      const win = doc.defaultView;\n      const html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      const scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      const scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport$1(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    const viewport$1 = element => {\n      const dom = element.dom;\n      const doc = dom.ownerDocument;\n      const body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    const api$1 = Dimension('width', element => element.dom.offsetWidth);\n    const set$7 = (element, h) => api$1.set(element, h);\n    const get$c = element => api$1.get(element);\n    const getOuter$1 = element => api$1.getOuter(element);\n    const setMax = (element, value) => {\n      const inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      const absMax = api$1.max(element, value, inclusions);\n      set$8(element, 'max-width', absMax + 'px');\n    };\n\n    const cached = f => {\n      let called = false;\n      let r;\n      return (...args) => {\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    const DeviceType = (os, browser, userAgent, mediaMatch) => {\n      const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      const isiPhone = os.isiOS() && !isiPad;\n      const isMobile = os.isiOS() || os.isAndroid();\n      const isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      const isPhone = isiPhone || isMobile && !isTablet;\n      const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      const isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant$1(isiPad),\n        isiPhone: constant$1(isiPhone),\n        isTablet: constant$1(isTablet),\n        isPhone: constant$1(isPhone),\n        isTouch: constant$1(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant$1(iOSwebview),\n        isDesktop: constant$1(isDesktop)\n      };\n    };\n\n    const firstMatch = (regexes, s) => {\n      for (let i = 0; i < regexes.length; i++) {\n        const x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    const find$3 = (regexes, agent) => {\n      const r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      const group = i => {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$d(group(1), group(2));\n    };\n    const detect$5 = (versionRegexes, agent) => {\n      const cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$3();\n      }\n      return find$3(versionRegexes, cleanedAgent);\n    };\n    const unknown$3 = () => {\n      return nu$d(0, 0);\n    };\n    const nu$d = (major, minor) => {\n      return {\n        major,\n        minor\n      };\n    };\n    const Version = {\n      nu: nu$d,\n      detect: detect$5,\n      unknown: unknown$3\n    };\n\n    const detectBrowser$1 = (browsers, userAgentData) => {\n      return findMap(userAgentData.brands, uaBrand => {\n        const lcBrand = uaBrand.brand.toLowerCase();\n        return find$5(browsers, browser => {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(info => ({\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        }));\n      });\n    };\n\n    const detect$4 = (candidates, userAgent) => {\n      const agent = String(userAgent).toLowerCase();\n      return find$5(candidates, candidate => {\n        return candidate.search(agent);\n      });\n    };\n    const detectBrowser = (browsers, userAgent) => {\n      return detect$4(browsers, userAgent).map(browser => {\n        const version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version\n        };\n      });\n    };\n    const detectOs = (oses, userAgent) => {\n      return detect$4(oses, userAgent).map(os => {\n        const version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version\n        };\n      });\n    };\n\n    const normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    const checkContains = target => {\n      return uastring => {\n        return contains$1(uastring, target);\n      };\n    };\n    const browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: uastring => {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chromium',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: uastring => {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    const oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: uastring => {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'macOS',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    const PlatformInfo = {\n      browsers: constant$1(browsers),\n      oses: constant$1(oses)\n    };\n\n    const edge = 'Edge';\n    const chromium = 'Chromium';\n    const ie = 'IE';\n    const opera = 'Opera';\n    const firefox = 'Firefox';\n    const safari = 'Safari';\n    const unknown$2 = () => {\n      return nu$c({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$c = info => {\n      const current = info.current;\n      const version = info.version;\n      const isBrowser = name => () => current === name;\n      return {\n        current,\n        version,\n        isEdge: isBrowser(edge),\n        isChromium: isBrowser(chromium),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    const Browser = {\n      unknown: unknown$2,\n      nu: nu$c,\n      edge: constant$1(edge),\n      chromium: constant$1(chromium),\n      ie: constant$1(ie),\n      opera: constant$1(opera),\n      firefox: constant$1(firefox),\n      safari: constant$1(safari)\n    };\n\n    const windows = 'Windows';\n    const ios = 'iOS';\n    const android = 'Android';\n    const linux = 'Linux';\n    const macos = 'macOS';\n    const solaris = 'Solaris';\n    const freebsd = 'FreeBSD';\n    const chromeos = 'ChromeOS';\n    const unknown$1 = () => {\n      return nu$b({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$b = info => {\n      const current = info.current;\n      const version = info.version;\n      const isOS = name => () => current === name;\n      return {\n        current,\n        version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isMacOS: isOS(macos),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    const OperatingSystem = {\n      unknown: unknown$1,\n      nu: nu$b,\n      windows: constant$1(windows),\n      ios: constant$1(ios),\n      android: constant$1(android),\n      linux: constant$1(linux),\n      macos: constant$1(macos),\n      solaris: constant$1(solaris),\n      freebsd: constant$1(freebsd),\n      chromeos: constant$1(chromeos)\n    };\n\n    const detect$3 = (userAgent, userAgentDataOpt, mediaMatch) => {\n      const browsers = PlatformInfo.browsers();\n      const oses = PlatformInfo.oses();\n      const browser = userAgentDataOpt.bind(userAgentData => detectBrowser$1(browsers, userAgentData)).orThunk(() => detectBrowser(browsers, userAgent)).fold(Browser.unknown, Browser.nu);\n      const os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      const deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser,\n        os,\n        deviceType\n      };\n    };\n    const PlatformDetection = { detect: detect$3 };\n\n    const mediaMatch = query => window.matchMedia(query).matches;\n    let platform = cached(() => PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch));\n    const detect$2 = () => platform();\n\n    const mkEvent = (target, x, y, stop, prevent, kill, raw) => ({\n      target,\n      x,\n      y,\n      stop,\n      prevent,\n      kill,\n      raw\n    });\n    const fromRawEvent$1 = rawEvent => {\n      const target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      const stop = () => rawEvent.stopPropagation();\n      const prevent = () => rawEvent.preventDefault();\n      const kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    const handle = (filter, handler) => rawEvent => {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent$1(rawEvent));\n      }\n    };\n    const binder = (element, event, filter, handler, useCapture) => {\n      const wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    const bind$2 = (element, event, filter, handler) => binder(element, event, filter, handler, false);\n    const capture$1 = (element, event, filter, handler) => binder(element, event, filter, handler, true);\n    const unbind = (element, event, handler, useCapture) => {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    const before$1 = (marker, element) => {\n      const parent$1 = parent(marker);\n      parent$1.each(v => {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    const after$2 = (marker, element) => {\n      const sibling = nextSibling(marker);\n      sibling.fold(() => {\n        const parent$1 = parent(marker);\n        parent$1.each(v => {\n          append$2(v, element);\n        });\n      }, v => {\n        before$1(v, element);\n      });\n    };\n    const prepend$1 = (parent, element) => {\n      const firstChild$1 = firstChild(parent);\n      firstChild$1.fold(() => {\n        append$2(parent, element);\n      }, v => {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    const append$2 = (parent, element) => {\n      parent.dom.appendChild(element.dom);\n    };\n    const appendAt = (parent, element, index) => {\n      child$2(parent, index).fold(() => {\n        append$2(parent, element);\n      }, v => {\n        before$1(v, element);\n      });\n    };\n\n    const append$1 = (parent, elements) => {\n      each$1(elements, x => {\n        append$2(parent, x);\n      });\n    };\n\n    const empty = element => {\n      element.dom.textContent = '';\n      each$1(children(element), rogue => {\n        remove$5(rogue);\n      });\n    };\n    const remove$5 = element => {\n      const dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    const get$b = _DOC => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      const y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    const to = (x, y, _DOC) => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    const get$a = _win => {\n      const win = _win === undefined ? window : _win;\n      if (detect$2().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win.visualViewport);\n      }\n    };\n    const bounds$1 = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const getBounds$3 = _win => {\n      const win = _win === undefined ? window : _win;\n      const doc = win.document;\n      const scroll = get$b(SugarElement.fromDom(doc));\n      return get$a(win).fold(() => {\n        const html = win.document.documentElement;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        return bounds$1(scroll.left, scroll.top, width, height);\n      }, visualViewport => bounds$1(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height));\n    };\n\n    const getDocument = () => SugarElement.fromDom(document);\n\n    const walkUp = (navigation, doc) => {\n      const frame = navigation.view(doc);\n      return frame.fold(constant$1([]), f => {\n        const parent = navigation.owner(f);\n        const rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    const pathTo = (element, navigation) => {\n      const d = navigation.owner(element);\n      const paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    const view = doc => {\n      var _a;\n      const element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    const owner$3 = element => owner$4(element);\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$3\n    });\n\n    const find$2 = element => {\n      const doc = getDocument();\n      const scroll = get$b(doc);\n      const path = pathTo(element, Navigation);\n      return path.fold(curry(absolute$3, element), frames => {\n        const offset = viewport$1(element);\n        const r = foldr(frames, (b, a) => {\n          const loc = viewport$1(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    const pointed = (point, width, height) => ({\n      point,\n      width,\n      height\n    });\n    const rect = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height\n    });\n    const bounds = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const box$1 = element => {\n      const xy = absolute$3(element);\n      const w = getOuter$1(element);\n      const h = getOuter$2(element);\n      return bounds(xy.left, xy.top, w, h);\n    };\n    const absolute$2 = element => {\n      const position = find$2(element);\n      const width = getOuter$1(element);\n      const height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    const constrain = (original, constraint) => {\n      const left = Math.max(original.x, constraint.x);\n      const top = Math.max(original.y, constraint.y);\n      const right = Math.min(original.right, constraint.right);\n      const bottom = Math.min(original.bottom, constraint.bottom);\n      const width = right - left;\n      const height = bottom - top;\n      return bounds(left, top, width, height);\n    };\n    const constrainByMany = (original, constraints) => {\n      return foldl(constraints, (acc, c) => constrain(acc, c), original);\n    };\n    const win = () => getBounds$3(window);\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    const value$4 = value => {\n      const applyHelper = fn => fn(value);\n      const constHelper = constant$1(value);\n      const outputHelper = () => output;\n      const output = {\n        tag: true,\n        inner: value,\n        fold: (_onError, onValue) => onValue(value),\n        isValue: always,\n        isError: never,\n        map: mapper => Result.value(mapper(value)),\n        mapError: outputHelper,\n        bind: applyHelper,\n        exists: applyHelper,\n        forall: applyHelper,\n        getOr: constHelper,\n        or: outputHelper,\n        getOrThunk: constHelper,\n        orThunk: outputHelper,\n        getOrDie: constHelper,\n        each: fn => {\n          fn(value);\n        },\n        toOptional: () => Optional.some(value)\n      };\n      return output;\n    };\n    const error$1 = error => {\n      const outputHelper = () => output;\n      const output = {\n        tag: false,\n        inner: error,\n        fold: (onError, _onValue) => onError(error),\n        isValue: never,\n        isError: always,\n        map: outputHelper,\n        mapError: mapper => Result.error(mapper(error)),\n        bind: outputHelper,\n        exists: never,\n        forall: always,\n        getOr: identity,\n        or: identity,\n        getOrThunk: apply$1,\n        orThunk: apply$1,\n        getOrDie: die(String(error)),\n        each: noop,\n        toOptional: Optional.none\n      };\n      return output;\n    };\n    const fromOption = (optional, err) => optional.fold(() => error$1(err), value$4);\n    const Result = {\n      value: value$4,\n      error: error$1,\n      fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    const fold$1 = (res, onError, onValue) => res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    const partition$2 = results => {\n      const values = [];\n      const errors = [];\n      each$1(results, obj => {\n        fold$1(obj, err => errors.push(err), val => values.push(val));\n      });\n      return {\n        values,\n        errors\n      };\n    };\n    const mapError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    const map = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    const bind$1 = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    const bindError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    const svalue = v => ({\n      stype: SimpleResultType.Value,\n      svalue: v\n    });\n    const serror = e => ({\n      stype: SimpleResultType.Error,\n      serror: e\n    });\n    const toResult$1 = res => fold$1(res, Result.error, Result.value);\n    const fromResult$1 = res => res.fold(serror, svalue);\n    const SimpleResult = {\n      fromResult: fromResult$1,\n      toResult: toResult$1,\n      svalue,\n      partition: partition$2,\n      serror,\n      bind: bind$1,\n      bindError,\n      map,\n      mapError,\n      fold: fold$1\n    };\n\n    const field$2 = (key, newKey, presence, prop) => ({\n      tag: 'field',\n      key,\n      newKey,\n      presence,\n      prop\n    });\n    const customField$1 = (newKey, instantiator) => ({\n      tag: 'custom',\n      newKey,\n      instantiator\n    });\n    const fold = (value, ifField, ifCustom) => {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    const shallow$1 = (old, nu) => {\n      return nu;\n    };\n    const deep$1 = (old, nu) => {\n      const bothObjects = isPlainObject(old) && isPlainObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    const baseMerge = merger => {\n      return (...objects) => {\n        if (objects.length === 0) {\n          throw new Error(`Can't merge zero objects`);\n        }\n        const ret = {};\n        for (let j = 0; j < objects.length; j++) {\n          const curObject = objects[j];\n          for (const key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    const deepMerge = baseMerge(deep$1);\n    const merge$1 = baseMerge(shallow$1);\n\n    const required$2 = () => ({\n      tag: 'required',\n      process: {}\n    });\n    const defaultedThunk = fallbackThunk => ({\n      tag: 'defaultedThunk',\n      process: fallbackThunk\n    });\n    const defaulted$1 = fallback => defaultedThunk(constant$1(fallback));\n    const asOption = () => ({\n      tag: 'option',\n      process: {}\n    });\n    const mergeWithThunk = baseThunk => ({\n      tag: 'mergeWithThunk',\n      process: baseThunk\n    });\n    const mergeWith = base => mergeWithThunk(constant$1(base));\n\n    const mergeValues$1 = (values, base) => values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge$1.apply(undefined, values))) : SimpleResult.svalue(base);\n    const mergeErrors$1 = errors => compose(SimpleResult.serror, flatten)(errors);\n    const consolidateObj = (objects, base) => {\n      const partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    const consolidateArr = objects => {\n      const partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    const ResultCombine = {\n      consolidateObj,\n      consolidateArr\n    };\n\n    const formatObj = input => {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    const formatErrors = errors => {\n      const es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant$1('... (only showing first ten failures)')\n        }]) : errors;\n      return map$2(es, e => {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    const nu$a = (path, getErrorInfo) => {\n      return SimpleResult.serror([{\n          path,\n          getErrorInfo\n        }]);\n    };\n    const missingRequired = (path, key, obj) => nu$a(path, () => 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj));\n    const missingKey = (path, key) => nu$a(path, () => 'Choice schema did not contain choice key: \"' + key + '\"');\n    const missingBranch = (path, branches, branch) => nu$a(path, () => 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches));\n    const unsupportedFields = (path, unsupported) => nu$a(path, () => 'There are unsupported fields: [' + unsupported.join(', ') + '] specified');\n    const custom = (path, err) => nu$a(path, constant$1(err));\n\n    const value$3 = validator => {\n      const extract = (path, val) => {\n        return SimpleResult.bindError(validator(val), err => custom(path, err));\n      };\n      const toString = constant$1('val');\n      return {\n        extract,\n        toString\n      };\n    };\n    const anyValue$1 = value$3(SimpleResult.svalue);\n\n    const requiredAccess = (path, obj, key, bundle) => get$g(obj, key).fold(() => missingRequired(path, key, obj), bundle);\n    const fallbackAccess = (obj, key, fallback, bundle) => {\n      const v = get$g(obj, key).getOrThunk(() => fallback(obj));\n      return bundle(v);\n    };\n    const optionAccess = (obj, key, bundle) => bundle(get$g(obj, key));\n    const optionDefaultedAccess = (obj, key, fallback, bundle) => {\n      const opt = get$g(obj, key).map(val => val === true ? fallback(obj) : val);\n      return bundle(opt);\n    };\n    const extractField = (field, path, obj, key, prop) => {\n      const bundle = av => prop.extract(path.concat([key]), av);\n      const bundleAsOption = optValue => optValue.fold(() => SimpleResult.svalue(Optional.none()), ov => {\n        const result = prop.extract(path.concat([key]), ov);\n        return SimpleResult.map(result, Optional.some);\n      });\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant$1({}), v => {\n            const result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    const extractFields = (path, obj, fields) => {\n      const success = {};\n      const errors = [];\n      for (const field of fields) {\n        fold(field, (key, newKey, presence, prop) => {\n          const result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, err => {\n            errors.push(...err);\n          }, res => {\n            success[newKey] = res;\n          });\n        }, (newKey, instantiator) => {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    const valueThunk = getDelegate => {\n      const extract = (path, val) => getDelegate().extract(path, val);\n      const toString = () => getDelegate().toString();\n      return {\n        extract,\n        toString\n      };\n    };\n    const getSetKeys = obj => keys(filter$1(obj, isNonNullable));\n    const objOfOnly = fields => {\n      const delegate = objOf(fields);\n      const fieldNames = foldr(fields, (acc, value) => {\n        return fold(value, key => deepMerge(acc, { [key]: true }), constant$1(acc));\n      }, {});\n      const extract = (path, o) => {\n        const keys = isBoolean(o) ? [] : getSetKeys(o);\n        const extra = filter$2(keys, k => !hasNonNullableKey(fieldNames, k));\n        return extra.length === 0 ? delegate.extract(path, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract,\n        toString: delegate.toString\n      };\n    };\n    const objOf = values => {\n      const extract = (path, o) => extractFields(path, o, values);\n      const toString = () => {\n        const fieldStrings = map$2(values, value => fold(value, (key, _okey, _presence, prop) => key + ' -> ' + prop.toString(), (newKey, _instantiator) => 'state(' + newKey + ')'));\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOf = prop => {\n      const extract = (path, array) => {\n        const results = map$2(array, (a, i) => prop.extract(path.concat(['[' + i + ']']), a));\n        return ResultCombine.consolidateArr(results);\n      };\n      const toString = () => 'array(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n    const oneOf = (props, rawF) => {\n      const f = rawF !== undefined ? rawF : identity;\n      const extract = (path, val) => {\n        const errors = [];\n        for (const prop of props) {\n          const res = prop.extract(path, val);\n          if (res.stype === SimpleResultType.Value) {\n            return {\n              stype: SimpleResultType.Value,\n              svalue: f(res.svalue)\n            };\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      const toString = () => 'oneOf(' + map$2(props, prop => prop.toString()).join(', ') + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n    const setOf$1 = (validator, prop) => {\n      const validateKeys = (path, keys) => arrOf(value$3(validator)).extract(path, keys);\n      const extract = (path, o) => {\n        const keys$1 = keys(o);\n        const validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, validKeys => {\n          const schema = map$2(validKeys, vk => {\n            return field$2(vk, vk, required$2(), prop);\n          });\n          return objOf(schema).extract(path, o);\n        });\n      };\n      const toString = () => 'setOf(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n    const thunk = (_desc, processor) => {\n      const getP = cached(processor);\n      const extract = (path, val) => getP().extract(path, val);\n      const toString = () => getP().toString();\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOfObj = compose(arrOf, objOf);\n\n    const anyValue = constant$1(anyValue$1);\n    const typedValue = (validator, expectedType) => value$3(a => {\n      const actualType = typeof a;\n      return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror(`Expected type: ${ expectedType } but got: ${ actualType }`);\n    });\n    const number = typedValue(isNumber, 'number');\n    const string = typedValue(isString, 'string');\n    const boolean = typedValue(isBoolean, 'boolean');\n    const functionProcessor = typedValue(isFunction, 'function');\n    const isPostMessageable = val => {\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(prop => isPostMessageable(val[prop]));\n      default:\n        return false;\n      }\n    };\n    const postMessageable = value$3(a => {\n      if (isPostMessageable(a)) {\n        return SimpleResult.svalue(a);\n      } else {\n        return SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n      }\n    });\n\n    const chooseFrom = (path, input, branches, ch) => {\n      const fields = get$g(branches, ch);\n      return fields.fold(() => missingBranch(path, branches, ch), vp => vp.extract(path.concat(['branch: ' + ch]), input));\n    };\n    const choose$2 = (key, branches) => {\n      const extract = (path, input) => {\n        const choice = get$g(input, key);\n        return choice.fold(() => missingKey(path, key), chosen => chooseFrom(path, input, branches, chosen));\n      };\n      const toString = () => 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const arrOfVal = () => arrOf(anyValue$1);\n    const valueOf = validator => value$3(v => validator(v).fold(SimpleResult.serror, SimpleResult.svalue));\n    const setOf = (validator, prop) => setOf$1(v => SimpleResult.fromResult(validator(v)), prop);\n    const extractValue = (label, prop, obj) => {\n      const res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, errs => ({\n        input: obj,\n        errors: errs\n      }));\n    };\n    const asRaw = (label, prop, obj) => SimpleResult.toResult(extractValue(label, prop, obj));\n    const getOrDie = extraction => {\n      return extraction.fold(errInfo => {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    const asRawOrDie$1 = (label, prop, obj) => getOrDie(asRaw(label, prop, obj));\n    const formatError = errInfo => {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    const choose$1 = (key, branches) => choose$2(key, map$1(branches, objOf));\n    const thunkOf = (desc, schema) => thunk(desc, schema);\n\n    const field$1 = field$2;\n    const customField = customField$1;\n    const validateEnum = values => valueOf(value => contains$2(values, value) ? Result.value(value) : Result.error(`Unsupported value: \"${ value }\", choose one of \"${ values.join(', ') }\".`));\n    const required$1 = key => field$1(key, key, required$2(), anyValue());\n    const requiredOf = (key, schema) => field$1(key, key, required$2(), schema);\n    const requiredNumber = key => requiredOf(key, number);\n    const requiredString = key => requiredOf(key, string);\n    const requiredStringEnum = (key, values) => field$1(key, key, required$2(), validateEnum(values));\n    const requiredBoolean = key => requiredOf(key, boolean);\n    const requiredFunction = key => requiredOf(key, functionProcessor);\n    const forbid = (key, message) => field$1(key, key, asOption(), value$3(_v => SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message)));\n    const requiredObjOf = (key, objSchema) => field$1(key, key, required$2(), objOf(objSchema));\n    const requiredArrayOfObj = (key, objFields) => field$1(key, key, required$2(), arrOfObj(objFields));\n    const requiredArrayOf = (key, schema) => field$1(key, key, required$2(), arrOf(schema));\n    const option$3 = key => field$1(key, key, asOption(), anyValue());\n    const optionOf = (key, schema) => field$1(key, key, asOption(), schema);\n    const optionNumber = key => optionOf(key, number);\n    const optionString = key => optionOf(key, string);\n    const optionStringEnum = (key, values) => optionOf(key, validateEnum(values));\n    const optionFunction = key => optionOf(key, functionProcessor);\n    const optionArrayOf = (key, schema) => optionOf(key, arrOf(schema));\n    const optionObjOf = (key, objSchema) => optionOf(key, objOf(objSchema));\n    const optionObjOfOnly = (key, objSchema) => optionOf(key, objOfOnly(objSchema));\n    const defaulted = (key, fallback) => field$1(key, key, defaulted$1(fallback), anyValue());\n    const defaultedOf = (key, fallback, schema) => field$1(key, key, defaulted$1(fallback), schema);\n    const defaultedNumber = (key, fallback) => defaultedOf(key, fallback, number);\n    const defaultedString = (key, fallback) => defaultedOf(key, fallback, string);\n    const defaultedStringEnum = (key, fallback, values) => defaultedOf(key, fallback, validateEnum(values));\n    const defaultedBoolean = (key, fallback) => defaultedOf(key, fallback, boolean);\n    const defaultedFunction = (key, fallback) => defaultedOf(key, fallback, functionProcessor);\n    const defaultedPostMsg = (key, fallback) => defaultedOf(key, fallback, postMessageable);\n    const defaultedArrayOf = (key, fallback, schema) => defaultedOf(key, fallback, arrOf(schema));\n    const defaultedObjOf = (key, fallback, objSchema) => defaultedOf(key, fallback, objOf(objSchema));\n\n    const Cell = initial => {\n      let value = initial;\n      const get = () => {\n        return value;\n      };\n      const set = v => {\n        value = v;\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    const generate$7 = cases => {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      const constructors = [];\n      const adt = {};\n      each$1(cases, (acase, count) => {\n        const keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        const key = keys$1[0];\n        const value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = (...args) => {\n          const argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          const match = branches => {\n            const branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            const allReqd = forall(constructors, reqKey => {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: (...foldArgs) => {\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              const target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match,\n            log: label => {\n              console.log(label, {\n                constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    const Adt = { generate: generate$7 };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    const partition$1 = results => {\n      const errors = [];\n      const values = [];\n      each$1(results, result => {\n        result.fold(err => {\n          errors.push(err);\n        }, value => {\n          values.push(value);\n        });\n      });\n      return {\n        errors,\n        values\n      };\n    };\n\n    const exclude$1 = (obj, fields) => {\n      const r = {};\n      each(obj, (v, k) => {\n        if (!contains$2(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    const wrap$2 = (key, value) => ({ [key]: value });\n    const wrapAll$1 = keyvalues => {\n      const r = {};\n      each$1(keyvalues, kv => {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    const exclude = (obj, fields) => exclude$1(obj, fields);\n    const wrap$1 = (key, value) => wrap$2(key, value);\n    const wrapAll = keyvalues => wrapAll$1(keyvalues);\n    const mergeValues = (values, base) => {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge$1.apply(undefined, values)));\n    };\n    const mergeErrors = errors => Result.error(flatten(errors));\n    const consolidate = (objs, base) => {\n      const partitions = partition$1(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    const ensureIsRoot = isRoot => isFunction(isRoot) ? isRoot : never;\n    const ancestor$2 = (scope, transform, isRoot) => {\n      let element = scope.dom;\n      const stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        const transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$4 = (scope, transform, isRoot) => {\n      const current = transform(scope);\n      const stop = ensureIsRoot(isRoot);\n      return current.orThunk(() => stop(scope) ? Optional.none() : ancestor$2(scope, transform, stop));\n    };\n\n    const isSource = (component, simulatedEvent) => eq(component.element, simulatedEvent.event.target);\n\n    const defaultEventHandler = {\n      can: always,\n      abort: never,\n      run: noop\n    };\n    const nu$9 = parts => {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return {\n        ...defaultEventHandler,\n        ...parts\n      };\n    };\n    const all$2 = (handlers, f) => (...args) => foldl(handlers, (acc, handler) => acc && f(handler).apply(undefined, args), true);\n    const any = (handlers, f) => (...args) => foldl(handlers, (acc, handler) => acc || f(handler).apply(undefined, args), false);\n    const read$2 = handler => isFunction(handler) ? {\n      can: always,\n      abort: never,\n      run: handler\n    } : handler;\n    const fuse$1 = handlers => {\n      const can = all$2(handlers, handler => handler.can);\n      const abort = any(handlers, handler => handler.abort);\n      const run = (...args) => {\n        each$1(handlers, handler => {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return {\n        can,\n        abort,\n        run\n      };\n    };\n\n    const constant = constant$1;\n    const touchstart = constant('touchstart');\n    const touchmove = constant('touchmove');\n    const touchend = constant('touchend');\n    const touchcancel = constant('touchcancel');\n    const mousedown = constant('mousedown');\n    const mousemove = constant('mousemove');\n    const mouseout = constant('mouseout');\n    const mouseup = constant('mouseup');\n    const mouseover = constant('mouseover');\n    const focusin = constant('focusin');\n    const focusout = constant('focusout');\n    const keydown = constant('keydown');\n    const keyup = constant('keyup');\n    const input = constant('input');\n    const change = constant('change');\n    const click = constant('click');\n    const transitioncancel = constant('transitioncancel');\n    const transitionend = constant('transitionend');\n    const transitionstart = constant('transitionstart');\n    const selectstart = constant('selectstart');\n\n    const prefixName = name => constant$1('alloy.' + name);\n    const alloy = { tap: prefixName('tap') };\n    const focus$4 = prefixName('focus');\n    const postBlur = prefixName('blur.post');\n    const postPaste = prefixName('paste.post');\n    const receive = prefixName('receive');\n    const execute$5 = prefixName('execute');\n    const focusItem = prefixName('focus.item');\n    const tap = alloy.tap;\n    const longpress = prefixName('longpress');\n    const sandboxClose = prefixName('sandbox.close');\n    const typeaheadCancel = prefixName('typeahead.cancel');\n    const systemInit = prefixName('system.init');\n    const documentTouchmove = prefixName('system.touchmove');\n    const documentTouchend = prefixName('system.touchend');\n    const windowScroll = prefixName('system.scroll');\n    const windowResize = prefixName('system.resize');\n    const attachedToDom = prefixName('system.attached');\n    const detachedFromDom = prefixName('system.detached');\n    const dismissRequested = prefixName('system.dismissRequested');\n    const repositionRequested = prefixName('system.repositionRequested');\n    const focusShifted = prefixName('focusmanager.shifted');\n    const slotVisibility = prefixName('slotcontainer.visibility');\n    const externalElementScroll = prefixName('system.external.element.scroll');\n    const changeTab = prefixName('change.tab');\n    const dismissTab = prefixName('dismiss.tab');\n    const highlight$1 = prefixName('highlight');\n    const dehighlight$1 = prefixName('dehighlight');\n\n    const emit = (component, event) => {\n      dispatchWith(component, component.element, event, {});\n    };\n    const emitWith = (component, event, properties) => {\n      dispatchWith(component, component.element, event, properties);\n    };\n    const emitExecute = component => {\n      emit(component, execute$5());\n    };\n    const dispatch = (component, target, event) => {\n      dispatchWith(component, target, event, {});\n    };\n    const dispatchWith = (component, target, event, properties) => {\n      const data = {\n        target,\n        ...properties\n      };\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    const retargetAndDispatchWith = (component, target, eventName, properties) => {\n      const data = {\n        ...properties,\n        target\n      };\n      component.getSystem().triggerEvent(eventName, target, data);\n    };\n    const dispatchEvent = (component, target, event, simulatedEvent) => {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    const derive$2 = configs => wrapAll(configs);\n    const abort = (name, predicate) => {\n      return {\n        key: name,\n        value: nu$9({ abort: predicate })\n      };\n    };\n    const can = (name, predicate) => {\n      return {\n        key: name,\n        value: nu$9({ can: predicate })\n      };\n    };\n    const preventDefault = name => {\n      return {\n        key: name,\n        value: nu$9({\n          run: (component, simulatedEvent) => {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    const run$1 = (name, handler) => {\n      return {\n        key: name,\n        value: nu$9({ run: handler })\n      };\n    };\n    const runActionExtra = (name, action, extra) => {\n      return {\n        key: name,\n        value: nu$9({\n          run: (component, simulatedEvent) => {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    const runOnName = name => {\n      return handler => run$1(name, handler);\n    };\n    const runOnSourceName = name => {\n      return handler => ({\n        key: name,\n        value: nu$9({\n          run: (component, simulatedEvent) => {\n            if (isSource(component, simulatedEvent)) {\n              handler(component, simulatedEvent);\n            }\n          }\n        })\n      });\n    };\n    const redirectToUid = (name, uid) => {\n      return run$1(name, (component, simulatedEvent) => {\n        component.getSystem().getByUid(uid).each(redirectee => {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    const redirectToPart = (name, detail, partName) => {\n      const uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    const runWithTarget = (name, f) => {\n      return run$1(name, (component, simulatedEvent) => {\n        const ev = simulatedEvent.event;\n        const target = component.getSystem().getByDom(ev.target).getOrThunk(() => {\n          const closest = closest$4(ev.target, el => component.getSystem().getByDom(el).toOptional(), never);\n          return closest.getOr(component);\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    const cutter = name => {\n      return run$1(name, (component, simulatedEvent) => {\n        simulatedEvent.cut();\n      });\n    };\n    const stopper = name => {\n      return run$1(name, (component, simulatedEvent) => {\n        simulatedEvent.stop();\n      });\n    };\n    const runOnSource = (name, f) => {\n      return runOnSourceName(name)(f);\n    };\n    const runOnAttached = runOnSourceName(attachedToDom());\n    const runOnDetached = runOnSourceName(detachedFromDom());\n    const runOnInit = runOnSourceName(systemInit());\n    const runOnExecute$1 = runOnName(execute$5());\n\n    const fromHtml$1 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    const get$9 = element => element.dom.innerHTML;\n    const set$6 = (element, content) => {\n      const owner = owner$4(element);\n      const docDom = owner.dom;\n      const fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      const contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append$2(element, fragment);\n    };\n    const getOuter = element => {\n      const container = SugarElement.fromTag('div');\n      const clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$2(container, clone);\n      return get$9(container);\n    };\n\n    const clone$1 = (original, isDeep) => SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    const shallow = original => clone$1(original, false);\n    const deep = original => clone$1(original, true);\n\n    const getHtml = element => {\n      if (isShadowRoot(element)) {\n        return '#shadow-root';\n      } else {\n        const clone = shallow(element);\n        return getOuter(clone);\n      }\n    };\n\n    const element = elem => getHtml(elem);\n\n    const isRecursive = (component, originator, target) => eq(originator, component.element) && !eq(originator, target);\n    const events$i = derive$2([can(focus$4(), (component, simulatedEvent) => {\n        const event = simulatedEvent.event;\n        const originator = event.originator;\n        const target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus$4() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus$4() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$i\n    });\n\n    let unique = 0;\n    const generate$6 = prefix => {\n      const date = new Date();\n      const time = date.getTime();\n      const random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    const prefix$1 = constant$1('alloy-id-');\n    const idAttr$1 = constant$1('data-alloy-id');\n\n    const prefix = prefix$1();\n    const idAttr = idAttr$1();\n    const write = (label, elem) => {\n      const id = generate$6(prefix + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    const writeOnly = (elem, uid) => {\n      Object.defineProperty(elem.dom, idAttr, {\n        value: uid,\n        writable: true\n      });\n    };\n    const read$1 = elem => {\n      const id = isElement$1(elem) ? elem.dom[idAttr] : null;\n      return Optional.from(id);\n    };\n    const generate$5 = prefix => generate$6(prefix);\n\n    const make$8 = identity;\n\n    const NoContextApi = getComp => {\n      const getMessage = event => `The component must be in a context to execute: ${ event }` + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : '');\n      const fail = event => () => {\n        throw new Error(getMessage(event));\n      };\n      const warn = event => () => {\n        console.warn(getMessage(event));\n      };\n      return {\n        debugInfo: constant$1('fake'),\n        triggerEvent: warn('triggerEvent'),\n        triggerFocus: warn('triggerFocus'),\n        triggerEscape: warn('triggerEscape'),\n        broadcast: warn('broadcast'),\n        broadcastOn: warn('broadcastOn'),\n        broadcastEvent: warn('broadcastEvent'),\n        build: fail('build'),\n        buildOrPatch: fail('buildOrPatch'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        isConnected: never\n      };\n    };\n    const singleton$1 = NoContextApi();\n\n    const markAsBehaviourApi = (f, apiName, apiFunction) => {\n      const delegate = apiFunction.toString();\n      const endIndex = delegate.indexOf(')') + 1;\n      const openBracketIndex = delegate.indexOf('(');\n      const parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = () => ({\n        name: apiName,\n        parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n      });\n      return f;\n    };\n    const cleanParameters = parameters => map$2(parameters, p => endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p);\n    const markAsExtraApi = (f, extraName) => {\n      const delegate = f.toString();\n      const endIndex = delegate.indexOf(')') + 1;\n      const openBracketIndex = delegate.indexOf('(');\n      const parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = () => ({\n        name: extraName,\n        parameters: cleanParameters(parameters)\n      });\n      return f;\n    };\n    const markAsSketchApi = (f, apiFunction) => {\n      const delegate = apiFunction.toString();\n      const endIndex = delegate.indexOf(')') + 1;\n      const openBracketIndex = delegate.indexOf('(');\n      const parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = () => ({\n        name: 'OVERRIDE',\n        parameters: cleanParameters(parameters.slice(1))\n      });\n      return f;\n    };\n\n    const premadeTag = generate$6('alloy-premade');\n    const premade$1 = comp => {\n      Object.defineProperty(comp.element.dom, premadeTag, {\n        value: comp.uid,\n        writable: true\n      });\n      return wrap$1(premadeTag, comp);\n    };\n    const isPremade = element => has$2(element.dom, premadeTag);\n    const getPremade = spec => get$g(spec, premadeTag);\n    const makeApi = f => markAsSketchApi((component, ...rest) => f(component.getApis(), component, ...rest), f);\n\n    const NoState = { init: () => nu$8({ readState: constant$1('No State required') }) };\n    const nu$8 = spec => spec;\n\n    const generateFrom$1 = (spec, all) => {\n      const schema = map$2(all, a => optionObjOf(a.name(), [\n        required$1('config'),\n        defaulted('state', NoState)\n      ]));\n      const validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(errInfo => {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, identity);\n      return {\n        list: all,\n        data: map$1(validated, optBlobThunk => {\n          const output = optBlobThunk.map(blob => ({\n            config: blob.config,\n            state: blob.state.init(blob.config)\n          }));\n          return constant$1(output);\n        })\n      };\n    };\n    const getBehaviours$3 = bData => bData.list;\n    const getData$2 = bData => bData.data;\n\n    const byInnerKey = (data, tuple) => {\n      const r = {};\n      each(data, (detail, key) => {\n        each(detail, (value, indexKey) => {\n          const chain = get$g(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    const nu$7 = s => ({\n      classes: isUndefined(s.classes) ? [] : s.classes,\n      attributes: isUndefined(s.attributes) ? {} : s.attributes,\n      styles: isUndefined(s.styles) ? {} : s.styles\n    });\n    const merge = (defnA, mod) => ({\n      ...defnA,\n      attributes: {\n        ...defnA.attributes,\n        ...mod.attributes\n      },\n      styles: {\n        ...defnA.styles,\n        ...mod.styles\n      },\n      classes: defnA.classes.concat(mod.classes)\n    });\n\n    const combine$2 = (info, baseMod, behaviours, base) => {\n      const modsByBehaviour = { ...baseMod };\n      each$1(behaviours, behaviour => {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      const byAspect = byInnerKey(modsByBehaviour, (name, modification) => ({\n        name,\n        modification\n      }));\n      const combineObjects = objects => foldr(objects, (b, a) => ({\n        ...a.modification,\n        ...b\n      }), {});\n      const combinedClasses = foldr(byAspect.classes, (b, a) => a.modification.concat(b), []);\n      const combinedAttributes = combineObjects(byAspect.attributes);\n      const combinedStyles = combineObjects(byAspect.styles);\n      return nu$7({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    const sortKeys = (label, keyName, array, order) => {\n      try {\n        const sorted = sort(array, (a, b) => {\n          const aKey = a[keyName];\n          const bKey = b[keyName];\n          const aIndex = order.indexOf(aKey);\n          const bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    const uncurried = (handler, purpose) => ({\n      handler,\n      purpose\n    });\n    const curried = (handler, purpose) => ({\n      cHandler: handler,\n      purpose\n    });\n    const curryArgs = (descHandler, extraArgs) => curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    const getCurried = descHandler => descHandler.cHandler;\n\n    const behaviourTuple = (name, handler) => ({\n      name,\n      handler\n    });\n    const nameToHandlers = (behaviours, info) => {\n      const r = {};\n      each$1(behaviours, behaviour => {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    const groupByEvents = (info, behaviours, base) => {\n      const behaviourEvents = {\n        ...base,\n        ...nameToHandlers(behaviours, info)\n      };\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    const combine$1 = (info, eventOrder, behaviours, base) => {\n      const byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    const assemble = rawHandler => {\n      const handler = read$2(rawHandler);\n      return (component, simulatedEvent, ...rest) => {\n        const args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    const missingOrderError = (eventName, tuples) => Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map$2(tuples, c => c.name), null, 2)]);\n    const fuse = (tuples, eventOrder, eventName) => {\n      const order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(sortedTuples => {\n          const handlers = map$2(sortedTuples, tuple => tuple.handler);\n          return fuse$1(handlers);\n        });\n      }\n    };\n    const combineGroups = (byEventName, eventOrder) => {\n      const r = mapToArray(byEventName, (tuples, eventName) => {\n        const combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse(tuples, eventOrder, eventName);\n        return combined.map(handler => {\n          const assembled = assemble(handler);\n          const purpose = tuples.length > 1 ? filter$2(eventOrder[eventName], o => exists(tuples, t => t.name === o)).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    const baseBehaviour = 'alloy.base.behaviour';\n    const schema$z = objOf([\n      field$1('dom', 'dom', required$2(), objOf([\n        required$1('tag'),\n        defaulted('styles', {}),\n        defaulted('classes', []),\n        defaulted('attributes', {}),\n        option$3('value'),\n        option$3('innerHtml')\n      ])),\n      required$1('components'),\n      required$1('uid'),\n      defaulted('events', {}),\n      defaulted('apis', {}),\n      field$1('eventOrder', 'eventOrder', mergeWith({\n        [execute$5()]: [\n          'disabling',\n          baseBehaviour,\n          'toggling',\n          'typeaheadevents'\n        ],\n        [focus$4()]: [\n          baseBehaviour,\n          'focusing',\n          'keying'\n        ],\n        [systemInit()]: [\n          baseBehaviour,\n          'disabling',\n          'toggling',\n          'representing'\n        ],\n        [input()]: [\n          baseBehaviour,\n          'representing',\n          'streaming',\n          'invalidating'\n        ],\n        [detachedFromDom()]: [\n          baseBehaviour,\n          'representing',\n          'item-events',\n          'tooltipping'\n        ],\n        [mousedown()]: [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ],\n        [touchstart()]: [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ],\n        [mouseover()]: [\n          'item-type-events',\n          'tooltipping'\n        ],\n        [receive()]: [\n          'receiving',\n          'reflecting',\n          'tooltipping'\n        ]\n      }), anyValue()),\n      option$3('domModification')\n    ]);\n    const toInfo = spec => asRaw('custom.definition', schema$z, spec);\n    const toDefinition = detail => ({\n      ...detail.dom,\n      uid: detail.uid,\n      domChildren: map$2(detail.components, comp => comp.element)\n    });\n    const toModification = detail => detail.domModification.fold(() => nu$7({}), nu$7);\n    const toEvents = info => info.events;\n\n    const read = (element, attr) => {\n      const value = get$f(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    const add$4 = (element, attr, id) => {\n      const old = read(element, attr);\n      const nu = old.concat([id]);\n      set$9(element, attr, nu.join(' '));\n      return true;\n    };\n    const remove$4 = (element, attr, id) => {\n      const nu = filter$2(read(element, attr), v => v !== id);\n      if (nu.length > 0) {\n        set$9(element, attr, nu.join(' '));\n      } else {\n        remove$7(element, attr);\n      }\n      return false;\n    };\n\n    const supports = element => element.dom.classList !== undefined;\n    const get$8 = element => read(element, 'class');\n    const add$3 = (element, clazz) => add$4(element, 'class', clazz);\n    const remove$3 = (element, clazz) => remove$4(element, 'class', clazz);\n    const toggle$5 = (element, clazz) => {\n      if (contains$2(get$8(element), clazz)) {\n        return remove$3(element, clazz);\n      } else {\n        return add$3(element, clazz);\n      }\n    };\n\n    const add$2 = (element, clazz) => {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    const cleanClass = element => {\n      const classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove$7(element, 'class');\n      }\n    };\n    const remove$2 = (element, clazz) => {\n      if (supports(element)) {\n        const classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    const toggle$4 = (element, clazz) => {\n      const result = supports(element) ? element.dom.classList.toggle(clazz) : toggle$5(element, clazz);\n      cleanClass(element);\n      return result;\n    };\n    const has = (element, clazz) => supports(element) && element.dom.classList.contains(clazz);\n\n    const add$1 = (element, classes) => {\n      each$1(classes, x => {\n        add$2(element, x);\n      });\n    };\n    const remove$1 = (element, classes) => {\n      each$1(classes, x => {\n        remove$2(element, x);\n      });\n    };\n    const toggle$3 = (element, classes) => {\n      each$1(classes, x => {\n        toggle$4(element, x);\n      });\n    };\n    const hasAll = (element, classes) => forall(classes, clazz => has(element, clazz));\n    const getNative = element => {\n      const classList = element.dom.classList;\n      const r = new Array(classList.length);\n      for (let i = 0; i < classList.length; i++) {\n        const item = classList.item(i);\n        if (item !== null) {\n          r[i] = item;\n        }\n      }\n      return r;\n    };\n    const get$7 = element => supports(element) ? getNative(element) : get$8(element);\n\n    const get$6 = element => element.dom.value;\n    const set$5 = (element, value) => {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    const determineObsoleted = (parent, index, oldObsoleted) => {\n      const newObsoleted = child$2(parent, index);\n      return newObsoleted.map(newObs => {\n        const elemChanged = oldObsoleted.exists(o => !eq(o, newObs));\n        if (elemChanged) {\n          const oldTag = oldObsoleted.map(name$3).getOr('span');\n          const marker = SugarElement.fromTag(oldTag);\n          before$1(newObs, marker);\n          return marker;\n        } else {\n          return newObs;\n        }\n      });\n    };\n    const ensureInDom = (parent, child, obsoleted) => {\n      obsoleted.fold(() => append$2(parent, child), obs => {\n        if (!eq(obs, child)) {\n          before$1(obs, child);\n          remove$5(obs);\n        }\n      });\n    };\n    const patchChildrenWith = (parent, nu, f) => {\n      const builtChildren = map$2(nu, f);\n      const currentChildren = children(parent);\n      each$1(currentChildren.slice(builtChildren.length), remove$5);\n      return builtChildren;\n    };\n    const patchSpecChild = (parent, index, spec, build) => {\n      const oldObsoleted = child$2(parent, index);\n      const childComp = build(spec, oldObsoleted);\n      const obsoleted = determineObsoleted(parent, index, oldObsoleted);\n      ensureInDom(parent, childComp.element, obsoleted);\n      return childComp;\n    };\n    const patchSpecChildren = (parent, specs, build) => patchChildrenWith(parent, specs, (spec, index) => patchSpecChild(parent, index, spec, build));\n    const patchDomChildren = (parent, nodes) => patchChildrenWith(parent, nodes, (node, index) => {\n      const optObsoleted = child$2(parent, index);\n      ensureInDom(parent, node, optObsoleted);\n      return node;\n    });\n\n    const diffKeyValueSet = (newObj, oldObj) => {\n      const newKeys = keys(newObj);\n      const oldKeys = keys(oldObj);\n      const toRemove = difference(oldKeys, newKeys);\n      const toSet = bifilter(newObj, (v, k) => {\n        return !has$2(oldObj, k) || v !== oldObj[k];\n      }).t;\n      return {\n        toRemove,\n        toSet\n      };\n    };\n    const reconcileToDom = (definition, obsoleted) => {\n      const {\n        class: clazz,\n        style,\n        ...existingAttributes\n      } = clone$2(obsoleted);\n      const {\n        toSet: attrsToSet,\n        toRemove: attrsToRemove\n      } = diffKeyValueSet(definition.attributes, existingAttributes);\n      const updateAttrs = () => {\n        each$1(attrsToRemove, a => remove$7(obsoleted, a));\n        setAll$1(obsoleted, attrsToSet);\n      };\n      const existingStyles = getAllRaw(obsoleted);\n      const {\n        toSet: stylesToSet,\n        toRemove: stylesToRemove\n      } = diffKeyValueSet(definition.styles, existingStyles);\n      const updateStyles = () => {\n        each$1(stylesToRemove, s => remove$6(obsoleted, s));\n        setAll(obsoleted, stylesToSet);\n      };\n      const existingClasses = get$7(obsoleted);\n      const classesToRemove = difference(existingClasses, definition.classes);\n      const classesToAdd = difference(definition.classes, existingClasses);\n      const updateClasses = () => {\n        add$1(obsoleted, classesToAdd);\n        remove$1(obsoleted, classesToRemove);\n      };\n      const updateHtml = html => {\n        set$6(obsoleted, html);\n      };\n      const updateChildren = () => {\n        const children = definition.domChildren;\n        patchDomChildren(obsoleted, children);\n      };\n      const updateValue = () => {\n        const valueElement = obsoleted;\n        const value = definition.value.getOrUndefined();\n        if (value !== get$6(valueElement)) {\n          set$5(valueElement, value !== null && value !== void 0 ? value : '');\n        }\n      };\n      updateAttrs();\n      updateClasses();\n      updateStyles();\n      definition.innerHtml.fold(updateChildren, updateHtml);\n      updateValue();\n      return obsoleted;\n    };\n\n    const introduceToDom = definition => {\n      const subject = SugarElement.fromTag(definition.tag);\n      setAll$1(subject, definition.attributes);\n      add$1(subject, definition.classes);\n      setAll(subject, definition.styles);\n      definition.innerHtml.each(html => set$6(subject, html));\n      const children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(value => {\n        set$5(subject, value);\n      });\n      return subject;\n    };\n    const attemptPatch = (definition, obsoleted) => {\n      try {\n        const e = reconcileToDom(definition, obsoleted);\n        return Optional.some(e);\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    const hasMixedChildren = definition => definition.innerHtml.isSome() && definition.domChildren.length > 0;\n    const renderToDom = (definition, optObsoleted) => {\n      const canBePatched = candidate => name$3(candidate) === definition.tag && !hasMixedChildren(definition) && !isPremade(candidate);\n      const elem = optObsoleted.filter(canBePatched).bind(obsoleted => attemptPatch(definition, obsoleted)).getOrThunk(() => introduceToDom(definition));\n      writeOnly(elem, definition.uid);\n      return elem;\n    };\n\n    const getBehaviours$2 = spec => {\n      const behaviours = get$g(spec, 'behaviours').getOr({});\n      return bind$3(keys(behaviours), name => {\n        const behaviour = behaviours[name];\n        return isNonNullable(behaviour) ? [behaviour.me] : [];\n      });\n    };\n    const generateFrom = (spec, all) => generateFrom$1(spec, all);\n    const generate$4 = spec => {\n      const all = getBehaviours$2(spec);\n      return generateFrom(spec, all);\n    };\n\n    const getDomDefinition = (info, bList, bData) => {\n      const definition = toDefinition(info);\n      const infoModification = toModification(info);\n      const baseModification = { 'alloy.base.modification': infoModification };\n      const modification = bList.length > 0 ? combine$2(bData, baseModification, bList, definition) : infoModification;\n      return merge(definition, modification);\n    };\n    const getEvents = (info, bList, bData) => {\n      const baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    const build$2 = (spec, obsoleted) => {\n      const getMe = () => me;\n      const systemApi = Cell(singleton$1);\n      const info = getOrDie(toInfo(spec));\n      const bBlob = generate$4(spec);\n      const bList = getBehaviours$3(bBlob);\n      const bData = getData$2(bBlob);\n      const modDefinition = getDomDefinition(info, bList, bData);\n      const item = renderToDom(modDefinition, obsoleted);\n      const events = getEvents(info, bList, bData);\n      const subcomponents = Cell(info.components);\n      const connect = newApi => {\n        systemApi.set(newApi);\n      };\n      const disconnect = () => {\n        systemApi.set(NoContextApi(getMe));\n      };\n      const syncComponents = () => {\n        const children$1 = children(item);\n        const subs = bind$3(children$1, child => systemApi.get().getByDom(child).fold(() => [], pure$2));\n        subcomponents.set(subs);\n      };\n      const config = behaviour => {\n        const b = bData;\n        const f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : () => {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      const hasConfigured = behaviour => isFunction(bData[behaviour.name()]);\n      const getApis = () => info.apis;\n      const readState = behaviourName => bData[behaviourName]().map(b => b.state.readState()).getOr('not enabled');\n      const me = {\n        uid: spec.uid,\n        getSystem: systemApi.get,\n        config,\n        hasConfigured,\n        spec,\n        readState,\n        getApis,\n        connect,\n        disconnect,\n        element: item,\n        syncComponents,\n        components: subcomponents.get,\n        events\n      };\n      return me;\n    };\n\n    const buildSubcomponents = (spec, obsoleted) => {\n      const components = get$g(spec, 'components').getOr([]);\n      return obsoleted.fold(() => map$2(components, build$1), obs => map$2(components, (c, i) => {\n        return buildOrPatch(c, child$2(obs, i));\n      }));\n    };\n    const buildFromSpec = (userSpec, obsoleted) => {\n      const {\n        events: specEvents,\n        ...spec\n      } = make$8(userSpec);\n      const components = buildSubcomponents(spec, obsoleted);\n      const completeSpec = {\n        ...spec,\n        events: {\n          ...DefaultEvents,\n          ...specEvents\n        },\n        components\n      };\n      return Result.value(build$2(completeSpec, obsoleted));\n    };\n    const text$2 = textContent => {\n      const element = SugarElement.fromText(textContent);\n      return external$1({ element });\n    };\n    const external$1 = spec => {\n      const extSpec = asRawOrDie$1('external.component', objOfOnly([\n        required$1('element'),\n        option$3('uid')\n      ]), spec);\n      const systemApi = Cell(NoContextApi());\n      const connect = newApi => {\n        systemApi.set(newApi);\n      };\n      const disconnect = () => {\n        systemApi.set(NoContextApi(() => me));\n      };\n      const uid = extSpec.uid.getOrThunk(() => generate$5('external'));\n      writeOnly(extSpec.element, uid);\n      const me = {\n        uid,\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect,\n        disconnect,\n        getApis: () => ({}),\n        element: extSpec.element,\n        spec,\n        readState: constant$1('No state'),\n        syncComponents: noop,\n        components: constant$1([]),\n        events: {}\n      };\n      return premade$1(me);\n    };\n    const uids = generate$5;\n    const isSketchSpec$1 = spec => has$2(spec, 'uid');\n    const buildOrPatch = (spec, obsoleted) => getPremade(spec).getOrThunk(() => {\n      const userSpecWithUid = isSketchSpec$1(spec) ? spec : {\n        uid: uids(''),\n        ...spec\n      };\n      return buildFromSpec(userSpecWithUid, obsoleted).getOrDie();\n    });\n    const build$1 = spec => buildOrPatch(spec, Optional.none());\n    const premade = premade$1;\n\n    var ClosestOrAncestor = (is, ancestor, scope, a, isRoot) => {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    };\n\n    const ancestor$1 = (scope, predicate, isRoot) => {\n      let element = scope.dom;\n      const stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$3 = (scope, predicate, isRoot) => {\n      const is = (s, test) => test(s);\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    const child$1 = (scope, predicate) => {\n      const pred = node => predicate(SugarElement.fromDom(node));\n      const result = find$5(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    const descendant$1 = (scope, predicate) => {\n      const descend = node => {\n        for (let i = 0; i < node.childNodes.length; i++) {\n          const child = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    const closest$2 = (scope, predicate, isRoot) => closest$3(scope, predicate, isRoot).isSome();\n\n    const ancestor = (scope, selector, isRoot) => ancestor$1(scope, e => is(e, selector), isRoot);\n    const child = (scope, selector) => child$1(scope, e => is(e, selector));\n    const descendant = (scope, selector) => one(selector, scope);\n    const closest$1 = (scope, selector, isRoot) => {\n      const is$1 = (element, selector) => is(element, selector);\n      return ClosestOrAncestor(is$1, ancestor, scope, selector, isRoot);\n    };\n\n    const attribute = 'aria-controls';\n    const find$1 = queryElem => {\n      const dependent = closest$3(queryElem, elem => {\n        if (!isElement$1(elem)) {\n          return false;\n        }\n        const id = get$f(elem, 'id');\n        return id !== undefined && id.indexOf(attribute) > -1;\n      });\n      return dependent.bind(dep => {\n        const id = get$f(dep, 'id');\n        const dos = getRootNode(dep);\n        return descendant(dos, `[${ attribute }=\"${ id }\"]`);\n      });\n    };\n    const manager = () => {\n      const ariaId = generate$6(attribute);\n      const link = elem => {\n        set$9(elem, attribute, ariaId);\n      };\n      const unlink = elem => {\n        remove$7(elem, attribute);\n      };\n      return {\n        id: ariaId,\n        link,\n        unlink\n      };\n    };\n\n    const isAriaPartOf = (component, queryElem) => find$1(queryElem).exists(owner => isPartOf$1(component, owner));\n    const isPartOf$1 = (component, queryElem) => closest$2(queryElem, el => eq(el, component.element), never) || isAriaPartOf(component, queryElem);\n\n    const unknown = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    const eventConfig = Cell({});\n    const makeEventLogger = (eventName, initialTarget) => {\n      const sequence = [];\n      const startTime = new Date().getTime();\n      return {\n        logEventCut: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'cut',\n            target,\n            purpose\n          });\n        },\n        logEventStopped: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'stopped',\n            target,\n            purpose\n          });\n        },\n        logNoParent: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'no-parent',\n            target,\n            purpose\n          });\n        },\n        logEventNoHandlers: (_name, target) => {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target\n          });\n        },\n        logEventResponse: (_name, target, purpose) => {\n          sequence.push({\n            outcome: 'response',\n            purpose,\n            target\n          });\n        },\n        write: () => {\n          const finishTime = new Date().getTime();\n          if (contains$2([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map$2(sequence, s => {\n              if (!contains$2([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    const processEvent = (eventName, initialTarget, f) => {\n      const status = get$g(eventConfig.get(), eventName).orThunk(() => {\n        const patterns = keys(eventConfig.get());\n        return findMap(patterns, p => eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none());\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          const logger = makeEventLogger(eventName, initialTarget);\n          const output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    const path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    const getTrace = () => {\n      const err = new Error();\n      if (err.stack !== undefined) {\n        const lines = err.stack.split('\\n');\n        return find$5(lines, line => line.indexOf('alloy') > 0 && !exists(path, p => line.indexOf(p) > -1)).getOr(unknown);\n      } else {\n        return unknown;\n      }\n    };\n    const ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    const monitorEvent = (eventName, initialTarget, f) => processEvent(eventName, initialTarget, f);\n    const noLogger = constant$1(ignoreEvent);\n\n    const menuFields = constant$1([\n      required$1('menu'),\n      required$1('selectedMenu')\n    ]);\n    const itemFields = constant$1([\n      required$1('item'),\n      required$1('selectedItem')\n    ]);\n    constant$1(objOf(itemFields().concat(menuFields())));\n    const itemSchema$3 = constant$1(objOf(itemFields()));\n\n    const _initSize = requiredObjOf('initSize', [\n      required$1('numColumns'),\n      required$1('numRows')\n    ]);\n    const itemMarkers = () => requiredOf('markers', itemSchema$3());\n    const tieredMenuMarkers = () => requiredObjOf('markers', [required$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    const markers$1 = required => requiredObjOf('markers', map$2(required, required$1));\n    const onPresenceHandler = (label, fieldName, presence) => {\n      getTrace();\n      return field$1(fieldName, fieldName, presence, valueOf(f => Result.value((...args) => {\n        return f.apply(undefined, args);\n      })));\n    };\n    const onHandler = fieldName => onPresenceHandler('onHandler', fieldName, defaulted$1(noop));\n    const onKeyboardHandler = fieldName => onPresenceHandler('onKeyboardHandler', fieldName, defaulted$1(Optional.none));\n    const onStrictHandler = fieldName => onPresenceHandler('onHandler', fieldName, required$2());\n    const onStrictKeyboardHandler = fieldName => onPresenceHandler('onKeyboardHandler', fieldName, required$2());\n    const output$1 = (name, value) => customField(name, constant$1(value));\n    const snapshot = name => customField(name, identity);\n    const initSize = constant$1(_initSize);\n\n    const nu$6 = (x, y, bubble, direction, placement, boundsRestriction, labelPrefix, alwaysFit = false) => ({\n      x,\n      y,\n      bubble,\n      direction,\n      placement,\n      restriction: boundsRestriction,\n      label: `${ labelPrefix }-${ placement }`,\n      alwaysFit\n    });\n\n    const adt$a = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    const cata$2 = (subject, southeast, southwest, northeast, northwest, south, north, east, west) => subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    const cataVertical = (subject, south, middle, north) => subject.fold(south, south, north, north, south, north, middle, middle);\n    const cataHorizontal = (subject, east, middle, west) => subject.fold(east, west, east, west, middle, middle, east, west);\n    const southeast$3 = adt$a.southeast;\n    const southwest$3 = adt$a.southwest;\n    const northeast$3 = adt$a.northeast;\n    const northwest$3 = adt$a.northwest;\n    const south$3 = adt$a.south;\n    const north$3 = adt$a.north;\n    const east$3 = adt$a.east;\n    const west$3 = adt$a.west;\n\n    const cycleBy = (value, delta, min, max) => {\n      const r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    const clamp = (value, min, max) => Math.min(Math.max(value, min), max);\n\n    const getRestriction = (anchor, restriction) => {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    const boundsRestriction = (anchor, restrictions) => mapToObject([\n      'left',\n      'right',\n      'top',\n      'bottom'\n    ], dir => get$g(restrictions, dir).map(restriction => getRestriction(anchor, restriction)));\n    const adjustBounds = (bounds$1, restriction, bubbleOffset) => {\n      const applyRestriction = (dir, current) => restriction[dir].map(pos => {\n        const isVerticalAxis = dir === 'top' || dir === 'bottom';\n        const offset = isVerticalAxis ? bubbleOffset.top : bubbleOffset.left;\n        const comparator = dir === 'left' || dir === 'top' ? Math.max : Math.min;\n        const newPos = comparator(pos, current) + offset;\n        return isVerticalAxis ? clamp(newPos, bounds$1.y, bounds$1.bottom) : clamp(newPos, bounds$1.x, bounds$1.right);\n      }).getOr(current);\n      const adjustedLeft = applyRestriction('left', bounds$1.x);\n      const adjustedTop = applyRestriction('top', bounds$1.y);\n      const adjustedRight = applyRestriction('right', bounds$1.right);\n      const adjustedBottom = applyRestriction('bottom', bounds$1.bottom);\n      return bounds(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    const labelPrefix$2 = 'layout';\n    const eastX$1 = anchor => anchor.x;\n    const middleX$1 = (anchor, element) => anchor.x + anchor.width / 2 - element.width / 2;\n    const westX$1 = (anchor, element) => anchor.x + anchor.width - element.width;\n    const northY$2 = (anchor, element) => anchor.y - element.height;\n    const southY$2 = anchor => anchor.y + anchor.height;\n    const centreY$1 = (anchor, element) => anchor.y + anchor.height / 2 - element.height / 2;\n    const eastEdgeX$1 = anchor => anchor.x + anchor.width;\n    const westEdgeX$1 = (anchor, element) => anchor.x - element.width;\n    const southeast$2 = (anchor, element, bubbles) => nu$6(eastX$1(anchor), southY$2(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n      left: 1,\n      top: 3\n    }), labelPrefix$2);\n    const southwest$2 = (anchor, element, bubbles) => nu$6(westX$1(anchor, element), southY$2(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n      right: 0,\n      top: 3\n    }), labelPrefix$2);\n    const northeast$2 = (anchor, element, bubbles) => nu$6(eastX$1(anchor), northY$2(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n      left: 1,\n      bottom: 2\n    }), labelPrefix$2);\n    const northwest$2 = (anchor, element, bubbles) => nu$6(westX$1(anchor, element), northY$2(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n      right: 0,\n      bottom: 2\n    }), labelPrefix$2);\n    const north$2 = (anchor, element, bubbles) => nu$6(middleX$1(anchor, element), northY$2(anchor, element), bubbles.north(), north$3(), 'north', boundsRestriction(anchor, { bottom: 2 }), labelPrefix$2);\n    const south$2 = (anchor, element, bubbles) => nu$6(middleX$1(anchor, element), southY$2(anchor), bubbles.south(), south$3(), 'south', boundsRestriction(anchor, { top: 3 }), labelPrefix$2);\n    const east$2 = (anchor, element, bubbles) => nu$6(eastEdgeX$1(anchor), centreY$1(anchor, element), bubbles.east(), east$3(), 'east', boundsRestriction(anchor, { left: 0 }), labelPrefix$2);\n    const west$2 = (anchor, element, bubbles) => nu$6(westEdgeX$1(anchor, element), centreY$1(anchor, element), bubbles.west(), west$3(), 'west', boundsRestriction(anchor, { right: 1 }), labelPrefix$2);\n    const all$1 = () => [\n      southeast$2,\n      southwest$2,\n      northeast$2,\n      northwest$2,\n      south$2,\n      north$2,\n      east$2,\n      west$2\n    ];\n    const allRtl$1 = () => [\n      southwest$2,\n      southeast$2,\n      northwest$2,\n      northeast$2,\n      south$2,\n      north$2,\n      east$2,\n      west$2\n    ];\n    const aboveOrBelow = () => [\n      northeast$2,\n      northwest$2,\n      southeast$2,\n      southwest$2,\n      north$2,\n      south$2\n    ];\n    const aboveOrBelowRtl = () => [\n      northwest$2,\n      northeast$2,\n      southwest$2,\n      southeast$2,\n      north$2,\n      south$2\n    ];\n    const belowOrAbove = () => [\n      southeast$2,\n      southwest$2,\n      northeast$2,\n      northwest$2,\n      south$2,\n      north$2\n    ];\n    const belowOrAboveRtl = () => [\n      southwest$2,\n      southeast$2,\n      northwest$2,\n      northeast$2,\n      south$2,\n      north$2\n    ];\n\n    const chooseChannels = (channels, message) => message.universal ? channels : filter$2(channels, ch => contains$2(message.channels, ch));\n    const events$h = receiveConfig => derive$2([run$1(receive(), (component, message) => {\n        const channelMap = receiveConfig.channels;\n        const channels = keys(channelMap);\n        const receivingData = message;\n        const targetChannels = chooseChannels(channels, receivingData);\n        each$1(targetChannels, ch => {\n          const channelInfo = channelMap[ch];\n          const channelSchema = channelInfo.schema;\n          const data = asRawOrDie$1('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n          channelInfo.onReceive(component, data);\n        });\n      })]);\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$h\n    });\n\n    var ReceivingSchema = [requiredOf('channels', setOf(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted('schema', anyValue())\n      ])))];\n\n    const executeEvent = (bConfig, bState, executor) => runOnExecute$1(component => {\n      executor(component, bConfig, bState);\n    });\n    const loadEvent = (bConfig, bState, f) => runOnInit((component, _simulatedEvent) => {\n      f(component, bConfig, bState);\n    });\n    const create$5 = (schema, name, active, apis, extra, state) => {\n      const configSchema = objOfOnly(schema);\n      const schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    const createModes$1 = (modes, name, active, apis, extra, state) => {\n      const configSchema = modes;\n      const schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    const wrapApi = (bName, apiFunction, apiName) => {\n      const f = (component, ...rest) => {\n        const args = [component].concat(rest);\n        return component.config({ name: constant$1(bName) }).fold(() => {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, info => {\n          const rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    const revokeBehaviour = name => ({\n      key: name,\n      value: undefined\n    });\n    const doCreate = (configSchema, schemaSchema, name, active, apis, extra, state) => {\n      const getConfig = info => hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      const wrappedApis = map$1(apis, (apiF, apiName) => wrapApi(name, apiF, apiName));\n      const wrappedExtra = map$1(extra, (extraF, extraName) => markAsExtraApi(extraF, extraName));\n      const me = {\n        ...wrappedExtra,\n        ...wrappedApis,\n        revoke: curry(revokeBehaviour, name),\n        config: spec => {\n          const prepared = asRawOrDie$1(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me,\n              configAsRaw: cached(() => asRawOrDie$1(name + '-config', configSchema, spec)),\n              initialConfig: spec,\n              state\n            }\n          };\n        },\n        schema: constant$1(schemaSchema),\n        exhibit: (info, base) => {\n          return lift2(getConfig(info), get$g(active, 'exhibit'), (behaviourInfo, exhibitor) => {\n            return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n          }).getOrThunk(() => nu$7({}));\n        },\n        name: constant$1(name),\n        handlers: info => {\n          return getConfig(info).map(behaviourInfo => {\n            const getEvents = get$g(active, 'events').getOr(() => ({}));\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      };\n      return me;\n    };\n\n    const derive$1 = capabilities => wrapAll(capabilities);\n    const simpleSchema = objOfOnly([\n      required$1('fields'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    const create$4 = data => {\n      const value = asRawOrDie$1('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create$5(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    const modeSchema = objOfOnly([\n      required$1('branchKey'),\n      required$1('branches'),\n      required$1('name'),\n      defaulted('active', {}),\n      defaulted('apis', {}),\n      defaulted('state', NoState),\n      defaulted('extra', {})\n    ]);\n    const createModes = data => {\n      const value = asRawOrDie$1('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes$1(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    const revoke = constant$1(undefined);\n\n    const Receiving = create$4({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    const exhibit$6 = (base, posConfig) => nu$7({\n      classes: [],\n      styles: posConfig.useFixed() ? {} : { position: 'relative' }\n    });\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6\n    });\n\n    const focus$3 = (element, preventScroll = false) => element.dom.focus({ preventScroll });\n    const blur$1 = element => element.dom.blur();\n    const hasFocus = element => {\n      const root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    const active$1 = (root = getDocument()) => Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    const search = element => active$1(getRootNode(element)).filter(e => element.dom.contains(e.dom));\n\n    const preserve$1 = (f, container) => {\n      const dos = getRootNode(container);\n      const refocus = active$1(dos).bind(focused => {\n        const hasFocus = elem => eq(focused, elem);\n        return hasFocus(container) ? Optional.some(container) : descendant$1(container, hasFocus);\n      });\n      const result = f(container);\n      refocus.each(oldFocus => {\n        active$1(dos).filter(newFocus => eq(newFocus, oldFocus)).fold(() => {\n          focus$3(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    const NuPositionCss = (position, left, top, right, bottom) => {\n      const toPx = num => num + 'px';\n      return {\n        position,\n        left: left.map(toPx),\n        top: top.map(toPx),\n        right: right.map(toPx),\n        bottom: bottom.map(toPx)\n      };\n    };\n    const toOptions = position => ({\n      ...position,\n      position: Optional.some(position.position)\n    });\n    const applyPositionCss = (element, position) => {\n      setOptions(element, toOptions(position));\n    };\n\n    const adt$9 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    const positionWithDirection = (posName, decision, x, y, width, height) => {\n      const decisionRect = decision.rect;\n      const decisionX = decisionRect.x - x;\n      const decisionY = decisionRect.y - y;\n      const decisionWidth = decisionRect.width;\n      const decisionHeight = decisionRect.height;\n      const decisionRight = width - (decisionX + decisionWidth);\n      const decisionBottom = height - (decisionY + decisionHeight);\n      const left = Optional.some(decisionX);\n      const top = Optional.some(decisionY);\n      const right = Optional.some(decisionRight);\n      const bottom = Optional.some(decisionBottom);\n      const none = Optional.none();\n      return cata$2(decision.direction, () => NuPositionCss(posName, left, top, none, none), () => NuPositionCss(posName, none, top, right, none), () => NuPositionCss(posName, left, none, none, bottom), () => NuPositionCss(posName, none, none, right, bottom), () => NuPositionCss(posName, left, top, none, none), () => NuPositionCss(posName, left, none, none, bottom), () => NuPositionCss(posName, left, top, none, none), () => NuPositionCss(posName, none, top, right, none));\n    };\n    const reposition = (origin, decision) => origin.fold(() => {\n      const decisionRect = decision.rect;\n      return NuPositionCss('absolute', Optional.some(decisionRect.x), Optional.some(decisionRect.y), Optional.none(), Optional.none());\n    }, (x, y, width, height) => {\n      return positionWithDirection('absolute', decision, x, y, width, height);\n    }, (x, y, width, height) => {\n      return positionWithDirection('fixed', decision, x, y, width, height);\n    });\n    const toBox = (origin, element) => {\n      const rel = curry(find$2, element);\n      const position = origin.fold(rel, rel, () => {\n        const scroll = get$b();\n        return find$2(element).translate(-scroll.left, -scroll.top);\n      });\n      const width = getOuter$1(element);\n      const height = getOuter$2(element);\n      return bounds(position.left, position.top, width, height);\n    };\n    const viewport = (origin, optBounds) => optBounds.fold(() => origin.fold(win, win, bounds), bounds$1 => origin.fold(constant$1(bounds$1), constant$1(bounds$1), () => {\n      const pos = translate$2(origin, bounds$1.x, bounds$1.y);\n      return bounds(pos.left, pos.top, bounds$1.width, bounds$1.height);\n    }));\n    const translate$2 = (origin, x, y) => {\n      const pos = SugarPosition(x, y);\n      const removeScroll = () => {\n        const outerScroll = get$b();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant$1(pos), constant$1(pos), removeScroll);\n    };\n    const cata$1 = (subject, onNone, onRelative, onFixed) => subject.fold(onNone, onRelative, onFixed);\n    adt$9.none;\n    const relative$1 = adt$9.relative;\n    const fixed$1 = adt$9.fixed;\n\n    const anchor = (anchorBox, origin) => ({\n      anchorBox,\n      origin\n    });\n    const box = (anchorBox, origin) => anchor(anchorBox, origin);\n\n    const placementAttribute = 'data-alloy-placement';\n    const setPlacement$1 = (element, placement) => {\n      set$9(element, placementAttribute, placement);\n    };\n    const getPlacement = element => getOpt(element, placementAttribute);\n    const reset$2 = element => remove$7(element, placementAttribute);\n\n    const adt$8 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'visibleW',\n          'visibleH',\n          'isVisible'\n        ]\n      }\n    ]);\n    const determinePosition = (box, bounds) => {\n      const {\n        x: boundsX,\n        y: boundsY,\n        right: boundsRight,\n        bottom: boundsBottom\n      } = bounds;\n      const {x, y, right, bottom, width, height} = box;\n      const xInBounds = x >= boundsX && x <= boundsRight;\n      const yInBounds = y >= boundsY && y <= boundsBottom;\n      const originInBounds = xInBounds && yInBounds;\n      const rightInBounds = right <= boundsRight && right >= boundsX;\n      const bottomInBounds = bottom <= boundsBottom && bottom >= boundsY;\n      const sizeInBounds = rightInBounds && bottomInBounds;\n      const visibleW = Math.min(width, x >= boundsX ? boundsRight - x : right - boundsX);\n      const visibleH = Math.min(height, y >= boundsY ? boundsBottom - y : bottom - boundsY);\n      return {\n        originInBounds,\n        sizeInBounds,\n        visibleW,\n        visibleH\n      };\n    };\n    const calcReposition = (box, bounds$1) => {\n      const {\n        x: boundsX,\n        y: boundsY,\n        right: boundsRight,\n        bottom: boundsBottom\n      } = bounds$1;\n      const {x, y, width, height} = box;\n      const maxX = Math.max(boundsX, boundsRight - width);\n      const maxY = Math.max(boundsY, boundsBottom - height);\n      const restrictedX = clamp(x, boundsX, maxX);\n      const restrictedY = clamp(y, boundsY, maxY);\n      const restrictedWidth = Math.min(restrictedX + width, boundsRight) - restrictedX;\n      const restrictedHeight = Math.min(restrictedY + height, boundsBottom) - restrictedY;\n      return bounds(restrictedX, restrictedY, restrictedWidth, restrictedHeight);\n    };\n    const calcMaxSizes = (direction, box, bounds) => {\n      const upAvailable = constant$1(box.bottom - bounds.y);\n      const downAvailable = constant$1(bounds.bottom - box.y);\n      const maxHeight = cataVertical(direction, downAvailable, downAvailable, upAvailable);\n      const westAvailable = constant$1(box.right - bounds.x);\n      const eastAvailable = constant$1(bounds.right - box.x);\n      const maxWidth = cataHorizontal(direction, eastAvailable, eastAvailable, westAvailable);\n      return {\n        maxWidth,\n        maxHeight\n      };\n    };\n    const attempt = (candidate, width, height, bounds$1) => {\n      const bubble = candidate.bubble;\n      const bubbleOffset = bubble.offset;\n      const adjustedBounds = adjustBounds(bounds$1, candidate.restriction, bubbleOffset);\n      const newX = candidate.x + bubbleOffset.left;\n      const newY = candidate.y + bubbleOffset.top;\n      const box = bounds(newX, newY, width, height);\n      const {originInBounds, sizeInBounds, visibleW, visibleH} = determinePosition(box, adjustedBounds);\n      const fits = originInBounds && sizeInBounds;\n      const fittedBox = fits ? box : calcReposition(box, adjustedBounds);\n      const isPartlyVisible = fittedBox.width > 0 && fittedBox.height > 0;\n      const {maxWidth, maxHeight} = calcMaxSizes(candidate.direction, fittedBox, bounds$1);\n      const reposition = {\n        rect: fittedBox,\n        maxHeight,\n        maxWidth,\n        direction: candidate.direction,\n        placement: candidate.placement,\n        classes: {\n          on: bubble.classesOn,\n          off: bubble.classesOff\n        },\n        layout: candidate.label,\n        testY: newY\n      };\n      return fits || candidate.alwaysFit ? adt$8.fit(reposition) : adt$8.nofit(reposition, visibleW, visibleH, isPartlyVisible);\n    };\n    const attempts = (element, candidates, anchorBox, elementBox, bubbles, bounds) => {\n      const panelWidth = elementBox.width;\n      const panelHeight = elementBox.height;\n      const attemptBestFit = (layout, reposition, visibleW, visibleH, isVisible) => {\n        const next = layout(anchorBox, elementBox, bubbles, element, bounds);\n        const attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(constant$1(attemptLayout), (newReposition, newVisibleW, newVisibleH, newIsVisible) => {\n          const improved = isVisible === newIsVisible ? newVisibleH > visibleH || newVisibleW > visibleW : !isVisible && newIsVisible;\n          return improved ? attemptLayout : adt$8.nofit(reposition, visibleW, visibleH, isVisible);\n        });\n      };\n      const abc = foldl(candidates, (b, a) => {\n        const bestNext = curry(attemptBestFit, a);\n        return b.fold(constant$1(b), bestNext);\n      }, adt$8.nofit({\n        rect: anchorBox,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast$3(),\n        placement: 'southeast',\n        classes: {\n          on: [],\n          off: []\n        },\n        layout: 'none',\n        testY: anchorBox.y\n      }, -1, -1, false));\n      return abc.fold(identity, identity);\n    };\n\n    const singleton = doRevoke => {\n      const subject = Cell(Optional.none());\n      const revoke = () => subject.get().each(doRevoke);\n      const clear = () => {\n        revoke();\n        subject.set(Optional.none());\n      };\n      const isSet = () => subject.get().isSome();\n      const get = () => subject.get();\n      const set = s => {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const destroyable = () => singleton(s => s.destroy());\n    const unbindable = () => singleton(s => s.unbind());\n    const value$2 = () => {\n      const subject = singleton(noop);\n      const on = f => subject.get().each(f);\n      return {\n        ...subject,\n        on\n      };\n    };\n\n    const filter = always;\n    const bind = (element, event, handler) => bind$2(element, event, filter, handler);\n    const capture = (element, event, handler) => capture$1(element, event, filter, handler);\n    const fromRawEvent = fromRawEvent$1;\n\n    const properties = [\n      'top',\n      'bottom',\n      'right',\n      'left'\n    ];\n    const timerAttr = 'data-alloy-transition-timer';\n    const isTransitioning$1 = (element, transition) => hasAll(element, transition.classes);\n    const shouldApplyTransitionCss = (transition, decision, lastPlacement) => {\n      return lastPlacement.exists(placer => {\n        const mode = transition.mode;\n        return mode === 'all' ? true : placer[mode] !== decision[mode];\n      });\n    };\n    const hasChanges = (position, intermediate) => {\n      const round = value => parseFloat(value).toFixed(3);\n      return find$4(intermediate, (value, key) => {\n        const newValue = position[key].map(round);\n        const val = value.map(round);\n        return !equals(newValue, val);\n      }).isSome();\n    };\n    const getTransitionDuration = element => {\n      const get = name => {\n        const style = get$e(element, name);\n        const times = style.split(/\\s*,\\s*/);\n        return filter$2(times, isNotEmpty);\n      };\n      const parse = value => {\n        if (isString(value) && /^[\\d.]+/.test(value)) {\n          const num = parseFloat(value);\n          return endsWith(value, 'ms') ? num : num * 1000;\n        } else {\n          return 0;\n        }\n      };\n      const delay = get('transition-delay');\n      const duration = get('transition-duration');\n      return foldl(duration, (acc, dur, i) => {\n        const time = parse(delay[i]) + parse(dur);\n        return Math.max(acc, time);\n      }, 0);\n    };\n    const setupTransitionListeners = (element, transition) => {\n      const transitionEnd = unbindable();\n      const transitionCancel = unbindable();\n      let timer;\n      const isSourceTransition = e => {\n        var _a;\n        const pseudoElement = (_a = e.raw.pseudoElement) !== null && _a !== void 0 ? _a : '';\n        return eq(e.target, element) && isEmpty(pseudoElement) && contains$2(properties, e.raw.propertyName);\n      };\n      const transitionDone = e => {\n        if (isNullable(e) || isSourceTransition(e)) {\n          transitionEnd.clear();\n          transitionCancel.clear();\n          const type = e === null || e === void 0 ? void 0 : e.raw.type;\n          if (isNullable(type) || type === transitionend()) {\n            clearTimeout(timer);\n            remove$7(element, timerAttr);\n            remove$1(element, transition.classes);\n          }\n        }\n      };\n      const transitionStart = bind(element, transitionstart(), e => {\n        if (isSourceTransition(e)) {\n          transitionStart.unbind();\n          transitionEnd.set(bind(element, transitionend(), transitionDone));\n          transitionCancel.set(bind(element, transitioncancel(), transitionDone));\n        }\n      });\n      const duration = getTransitionDuration(element);\n      requestAnimationFrame(() => {\n        timer = setTimeout(transitionDone, duration + 17);\n        set$9(element, timerAttr, timer);\n      });\n    };\n    const startTransitioning = (element, transition) => {\n      add$1(element, transition.classes);\n      getOpt(element, timerAttr).each(timerId => {\n        clearTimeout(parseInt(timerId, 10));\n        remove$7(element, timerAttr);\n      });\n      setupTransitionListeners(element, transition);\n    };\n    const applyTransitionCss = (element, origin, position, transition, decision, lastPlacement) => {\n      const shouldTransition = shouldApplyTransitionCss(transition, decision, lastPlacement);\n      if (shouldTransition || isTransitioning$1(element, transition)) {\n        set$8(element, 'position', position.position);\n        const rect = toBox(origin, element);\n        const intermediatePosition = reposition(origin, {\n          ...decision,\n          rect\n        });\n        const intermediateCssOptions = mapToObject(properties, prop => intermediatePosition[prop]);\n        if (hasChanges(position, intermediateCssOptions)) {\n          setOptions(element, intermediateCssOptions);\n          if (shouldTransition) {\n            startTransitioning(element, transition);\n          }\n          reflow(element);\n        }\n      } else {\n        remove$1(element, transition.classes);\n      }\n    };\n\n    const elementSize = p => ({\n      width: getOuter$1(p),\n      height: getOuter$2(p)\n    });\n    const layout = (anchorBox, element, bubbles, options) => {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      const elementBox = elementSize(element);\n      return attempts(element, options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    const setClasses = (element, decision) => {\n      const classInfo = decision.classes;\n      remove$1(element, classInfo.off);\n      add$1(element, classInfo.on);\n    };\n    const setHeight = (element, decision, options) => {\n      const maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    const setWidth = (element, decision, options) => {\n      const maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    const position$2 = (element, decision, options) => {\n      const positionCss = reposition(options.origin, decision);\n      options.transition.each(transition => {\n        applyTransitionCss(element, options.origin, positionCss, transition, decision, options.lastPlacement);\n      });\n      applyPositionCss(element, positionCss);\n    };\n    const setPlacement = (element, decision) => {\n      setPlacement$1(element, decision.placement);\n    };\n\n    const setMaxHeight = (element, maxHeight) => {\n      setMax$1(element, Math.floor(maxHeight));\n    };\n    const anchored = constant$1((element, available) => {\n      setMaxHeight(element, available);\n      setAll(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    const expandable$1 = constant$1((element, available) => {\n      setMaxHeight(element, available);\n    });\n\n    const defaultOr = (options, key, dephault) => options[key] === undefined ? dephault : options[key];\n    const simple = (anchor, element, bubble, layouts, lastPlacement, optBounds, overrideOptions, transition) => {\n      const maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      const maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      const anchorBox = anchor.anchorBox;\n      const origin = anchor.origin;\n      const options = {\n        bounds: viewport(origin, optBounds),\n        origin,\n        preference: layouts,\n        maxHeightFunction,\n        maxWidthFunction,\n        lastPlacement,\n        transition\n      };\n      return go(anchorBox, element, bubble, options);\n    };\n    const go = (anchorBox, element, bubble, options) => {\n      const decision = layout(anchorBox, element, bubble, options);\n      position$2(element, decision, options);\n      setPlacement(element, decision);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n      return {\n        layout: decision.layout,\n        placement: decision.placement\n      };\n    };\n\n    const allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'inset'\n    ];\n    const nu$5 = (xOffset, yOffset, classes, insetModifier = 1) => {\n      const insetXOffset = xOffset * insetModifier;\n      const insetYOffset = yOffset * insetModifier;\n      const getClasses = prop => get$g(classes, prop).getOr([]);\n      const make = (xDelta, yDelta, alignmentsOn) => {\n        const alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind$3(alignmentsOn, getClasses),\n          classesOff: bind$3(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: () => make(-xOffset, yOffset, [\n          'top',\n          'alignLeft'\n        ]),\n        southwest: () => make(xOffset, yOffset, [\n          'top',\n          'alignRight'\n        ]),\n        south: () => make(-xOffset / 2, yOffset, [\n          'top',\n          'alignCentre'\n        ]),\n        northeast: () => make(-xOffset, -yOffset, [\n          'bottom',\n          'alignLeft'\n        ]),\n        northwest: () => make(xOffset, -yOffset, [\n          'bottom',\n          'alignRight'\n        ]),\n        north: () => make(-xOffset / 2, -yOffset, [\n          'bottom',\n          'alignCentre'\n        ]),\n        east: () => make(xOffset, -yOffset / 2, [\n          'valignCentre',\n          'left'\n        ]),\n        west: () => make(-xOffset, -yOffset / 2, [\n          'valignCentre',\n          'right'\n        ]),\n        insetNortheast: () => make(insetXOffset, insetYOffset, [\n          'top',\n          'alignLeft',\n          'inset'\n        ]),\n        insetNorthwest: () => make(-insetXOffset, insetYOffset, [\n          'top',\n          'alignRight',\n          'inset'\n        ]),\n        insetNorth: () => make(-insetXOffset / 2, insetYOffset, [\n          'top',\n          'alignCentre',\n          'inset'\n        ]),\n        insetSoutheast: () => make(insetXOffset, -insetYOffset, [\n          'bottom',\n          'alignLeft',\n          'inset'\n        ]),\n        insetSouthwest: () => make(-insetXOffset, -insetYOffset, [\n          'bottom',\n          'alignRight',\n          'inset'\n        ]),\n        insetSouth: () => make(-insetXOffset / 2, -insetYOffset, [\n          'bottom',\n          'alignCentre',\n          'inset'\n        ]),\n        insetEast: () => make(-insetXOffset, -insetYOffset / 2, [\n          'valignCentre',\n          'right',\n          'inset'\n        ]),\n        insetWest: () => make(insetXOffset, -insetYOffset / 2, [\n          'valignCentre',\n          'left',\n          'inset'\n        ])\n      };\n    };\n    const fallback = () => nu$5(0, 0, {});\n\n    const nu$4 = identity;\n\n    const onDirection = (isLtr, isRtl) => element => getDirection(element) === 'rtl' ? isRtl : isLtr;\n    const getDirection = element => get$e(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    const Attribute = 'data-alloy-vertical-dir';\n    const isBottomToTopDir = el => closest$2(el, current => isElement$1(current) && get$f(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop);\n\n    const schema$y = () => optionObjOf('layouts', [\n      required$1('onLtr'),\n      required$1('onRtl'),\n      option$3('onBottomLtr'),\n      option$3('onBottomRtl')\n    ]);\n    const get$5 = (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) => {\n      const isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      const customLtr = info.layouts.map(ls => ls.onLtr(elem));\n      const customRtl = info.layouts.map(ls => ls.onRtl(elem));\n      const ltr = isBottomToTop ? info.layouts.bind(ls => ls.onBottomLtr.map(f => f(elem))).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      const rtl = isBottomToTop ? info.layouts.bind(ls => ls.onBottomRtl.map(f => f(elem))).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      const f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    const placement$4 = (component, anchorInfo, origin) => {\n      const hotspot = anchorInfo.hotspot;\n      const anchorBox = toBox(origin, hotspot.element);\n      const layouts = get$5(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$4({\n        anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts\n      }));\n    };\n    var HotspotAnchor = [\n      required$1('hotspot'),\n      option$3('bubble'),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$4)\n    ];\n\n    const placement$3 = (component, anchorInfo, origin) => {\n      const pos = translate$2(origin, anchorInfo.x, anchorInfo.y);\n      const anchorBox = bounds(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      const layouts = get$5(component.element, anchorInfo, all$1(), allRtl$1(), all$1(), allRtl$1(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts\n      }));\n    };\n    var MakeshiftAnchor = [\n      required$1('x'),\n      required$1('y'),\n      defaulted('height', 0),\n      defaulted('width', 0),\n      defaulted('bubble', fallback()),\n      defaulted('overrides', {}),\n      schema$y(),\n      output$1('placement', placement$3)\n    ];\n\n    const adt$7 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    const toFixed = pos => pos.fold(identity, (point, scrollLeft, scrollTop) => point.translate(-scrollLeft, -scrollTop));\n    const toAbsolute = pos => pos.fold(identity, identity);\n    const sum = points => foldl(points, (b, a) => b.translate(a.left, a.top), SugarPosition(0, 0));\n    const sumAsFixed = positions => {\n      const points = map$2(positions, toFixed);\n      return sum(points);\n    };\n    const sumAsAbsolute = positions => {\n      const points = map$2(positions, toAbsolute);\n      return sum(points);\n    };\n    const screen = adt$7.screen;\n    const absolute$1 = adt$7.absolute;\n\n    const getOffset = (component, origin, anchorInfo) => {\n      const win = defaultView(anchorInfo.root).dom;\n      const hasSameOwner = frame => {\n        const frameOwner = owner$4(frame);\n        const compOwner = owner$4(component.element);\n        return eq(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute$3);\n    };\n    const getRootPoint = (component, origin, anchorInfo) => {\n      const doc = owner$4(component.element);\n      const outerScroll = get$b(doc);\n      const offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$1(offset, outerScroll.left, outerScroll.top);\n    };\n\n    const getBox = (left, top, width, height) => {\n      const point = screen(SugarPosition(left, top));\n      return Optional.some(pointed(point, width, height));\n    };\n    const calcNewAnchor = (optBox, rootPoint, anchorInfo, origin, elem) => optBox.map(box => {\n      const points = [\n        rootPoint,\n        box.point\n      ];\n      const topLeft = cata$1(origin, () => sumAsAbsolute(points), () => sumAsAbsolute(points), () => sumAsFixed(points));\n      const anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n      const layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n      const layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n      const layouts = get$5(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n      return nu$4({\n        anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts\n      });\n    });\n\n    const placement$2 = (component, anchorInfo, origin) => {\n      const rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.filter(inBody).bind(target => {\n        const rect = target.dom.getBoundingClientRect();\n        const nodeBox = getBox(rect.left, rect.top, rect.width, rect.height);\n        const elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      required$1('node'),\n      required$1('root'),\n      option$3('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$2)\n    ];\n\n    const zeroWidth = '\\uFEFF';\n    const nbsp = '\\xA0';\n\n    const create$3 = (start, soffset, finish, foffset) => ({\n      start,\n      soffset,\n      finish,\n      foffset\n    });\n    const SimRange = { create: create$3 };\n\n    const adt$6 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    const cata = (subject, onBefore, onOn, onAfter) => subject.fold(onBefore, onOn, onAfter);\n    const getStart$1 = situ => situ.fold(identity, identity, identity);\n    const before = adt$6.before;\n    const on$1 = adt$6.on;\n    const after$1 = adt$6.after;\n    const Situ = {\n      before,\n      on: on$1,\n      after: after$1,\n      cata,\n      getStart: getStart$1\n    };\n\n    const adt$5 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const exactFromRange = simRange => adt$5.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    const getStart = selection => selection.match({\n      domRange: rng => SugarElement.fromDom(rng.startContainer),\n      relative: (startSitu, _finishSitu) => Situ.getStart(startSitu),\n      exact: (start, _soffset, _finish, _foffset) => start\n    });\n    const domRange = adt$5.domRange;\n    const relative = adt$5.relative;\n    const exact = adt$5.exact;\n    const getWin = selection => {\n      const start = getStart(selection);\n      return defaultView(start);\n    };\n    const range$1 = SimRange.create;\n    const SimSelection = {\n      domRange,\n      relative,\n      exact,\n      exactFromRange,\n      getWin,\n      range: range$1\n    };\n\n    const setStart = (rng, situ) => {\n      situ.fold(e => {\n        rng.setStartBefore(e.dom);\n      }, (e, o) => {\n        rng.setStart(e.dom, o);\n      }, e => {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    const setFinish = (rng, situ) => {\n      situ.fold(e => {\n        rng.setEndBefore(e.dom);\n      }, (e, o) => {\n        rng.setEnd(e.dom, o);\n      }, e => {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    const relativeToNative = (win, startSitu, finishSitu) => {\n      const range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    const exactToNative = (win, start, soffset, finish, foffset) => {\n      const rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    const toRect = rect => ({\n      left: rect.left,\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      width: rect.width,\n      height: rect.height\n    });\n    const getFirstRect$1 = rng => {\n      const rects = rng.getClientRects();\n      const rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n    const getBounds$2 = rng => {\n      const rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    const adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const fromRange = (win, type, range) => type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    const getRanges = (win, selection) => selection.match({\n      domRange: rng => {\n        return {\n          ltr: constant$1(rng),\n          rtl: Optional.none\n        };\n      },\n      relative: (startSitu, finishSitu) => {\n        return {\n          ltr: cached(() => relativeToNative(win, startSitu, finishSitu)),\n          rtl: cached(() => Optional.some(relativeToNative(win, finishSitu, startSitu)))\n        };\n      },\n      exact: (start, soffset, finish, foffset) => {\n        return {\n          ltr: cached(() => exactToNative(win, start, soffset, finish, foffset)),\n          rtl: cached(() => Optional.some(exactToNative(win, finish, foffset, start, soffset)))\n        };\n      }\n    });\n    const doDiagnose = (win, ranges) => {\n      const rng = ranges.ltr();\n      if (rng.collapsed) {\n        const reversed = ranges.rtl().filter(rev => rev.collapsed === false);\n        return reversed.map(rev => adt$4.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset)).getOrThunk(() => fromRange(win, adt$4.ltr, rng));\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    const diagnose = (win, selection) => {\n      const ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    const asLtrRange = (win, selection) => {\n      const diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: (start, soffset, finish, foffset) => {\n          const rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: (start, soffset, finish, foffset) => {\n          const rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    adt$4.ltr;\n    adt$4.rtl;\n\n    const ancestors = (scope, predicate, isRoot) => filter$2(parents(scope, isRoot), predicate);\n\n    const descendants = (scope, selector) => all$3(selector, scope);\n\n    const makeRange = (start, soffset, finish, foffset) => {\n      const doc = owner$4(start);\n      const rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    const after = (start, soffset, finish, foffset) => {\n      const r = makeRange(start, soffset, finish, foffset);\n      const same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    const getNativeSelection = win => Optional.from(win.getSelection());\n    const readRange = selection => {\n      if (selection.rangeCount > 0) {\n        const firstRng = selection.getRangeAt(0);\n        const lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    const doGetExact = selection => {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        const anchor = SugarElement.fromDom(selection.anchorNode);\n        const focus = SugarElement.fromDom(selection.focusNode);\n        return after(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    const getExact = win => getNativeSelection(win).filter(sel => sel.rangeCount > 0).bind(doGetExact);\n    const getFirstRect = (win, selection) => {\n      const rng = asLtrRange(win, selection);\n      return getFirstRect$1(rng);\n    };\n    const getBounds$1 = (win, selection) => {\n      const rng = asLtrRange(win, selection);\n      return getBounds$2(rng);\n    };\n\n    const NodeValue = (is, name) => {\n      const get = element => {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      const getOption = element => is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      const set = (element, value) => {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get,\n        getOption,\n        set\n      };\n    };\n\n    const api = NodeValue(isText, 'text');\n    const get$4 = element => api.get(element);\n\n    const point = (element, offset) => ({\n      element,\n      offset\n    });\n    const descendOnce$1 = (element, offset) => {\n      const children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        const last = children$1[children$1.length - 1];\n        const len = isText(last) ? get$4(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    const descendOnce = (element, offset) => isText(element) ? point(element, offset) : descendOnce$1(element, offset);\n    const isSimRange = detail => detail.foffset !== undefined;\n    const getAnchorSelection = (win, anchorInfo) => {\n      const getSelection = anchorInfo.getSelection.getOrThunk(() => () => getExact(win));\n      return getSelection().map(sel => {\n        if (isSimRange(sel)) {\n          const modStart = descendOnce(sel.start, sel.soffset);\n          const modFinish = descendOnce(sel.finish, sel.foffset);\n          return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n        } else {\n          return sel;\n        }\n      });\n    };\n    const placement$1 = (component, anchorInfo, origin) => {\n      const win = defaultView(anchorInfo.root).dom;\n      const rootPoint = getRootPoint(component, origin, anchorInfo);\n      const selectionBox = getAnchorSelection(win, anchorInfo).bind(sel => {\n        if (isSimRange(sel)) {\n          const optRect = getBounds$1(win, SimSelection.exactFromRange(sel)).orThunk(() => {\n            const zeroWidth$1 = SugarElement.fromText(zeroWidth);\n            before$1(sel.start, zeroWidth$1);\n            const rect = getFirstRect(win, SimSelection.exact(zeroWidth$1, 0, zeroWidth$1, 1));\n            remove$5(zeroWidth$1);\n            return rect;\n          });\n          return optRect.bind(rawRect => {\n            return getBox(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n          });\n        } else {\n          const selectionRect = map$1(sel, cell => cell.dom.getBoundingClientRect());\n          const bounds = {\n            left: Math.min(selectionRect.firstCell.left, selectionRect.lastCell.left),\n            right: Math.max(selectionRect.firstCell.right, selectionRect.lastCell.right),\n            top: Math.min(selectionRect.firstCell.top, selectionRect.lastCell.top),\n            bottom: Math.max(selectionRect.firstCell.bottom, selectionRect.lastCell.bottom)\n          };\n          return getBox(bounds.left, bounds.top, bounds.right - bounds.left, bounds.bottom - bounds.top);\n        }\n      });\n      const targetElement = getAnchorSelection(win, anchorInfo).bind(sel => {\n        if (isSimRange(sel)) {\n          return isElement$1(sel.start) ? Optional.some(sel.start) : parentElement(sel.start);\n        } else {\n          return Optional.some(sel.firstCell);\n        }\n      });\n      const elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option$3('getSelection'),\n      required$1('root'),\n      option$3('bubble'),\n      schema$y(),\n      defaulted('overrides', {}),\n      defaulted('showAbove', false),\n      output$1('placement', placement$1)\n    ];\n\n    const labelPrefix$1 = 'link-layout';\n    const eastX = anchor => anchor.x + anchor.width;\n    const westX = (anchor, element) => anchor.x - element.width;\n    const northY$1 = (anchor, element) => anchor.y - element.height + anchor.height;\n    const southY$1 = anchor => anchor.y;\n    const southeast$1 = (anchor, element, bubbles) => nu$6(eastX(anchor), southY$1(anchor), bubbles.southeast(), southeast$3(), 'southeast', boundsRestriction(anchor, {\n      left: 0,\n      top: 2\n    }), labelPrefix$1);\n    const southwest$1 = (anchor, element, bubbles) => nu$6(westX(anchor, element), southY$1(anchor), bubbles.southwest(), southwest$3(), 'southwest', boundsRestriction(anchor, {\n      right: 1,\n      top: 2\n    }), labelPrefix$1);\n    const northeast$1 = (anchor, element, bubbles) => nu$6(eastX(anchor), northY$1(anchor, element), bubbles.northeast(), northeast$3(), 'northeast', boundsRestriction(anchor, {\n      left: 0,\n      bottom: 3\n    }), labelPrefix$1);\n    const northwest$1 = (anchor, element, bubbles) => nu$6(westX(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest$3(), 'northwest', boundsRestriction(anchor, {\n      right: 1,\n      bottom: 3\n    }), labelPrefix$1);\n    const all = () => [\n      southeast$1,\n      southwest$1,\n      northeast$1,\n      northwest$1\n    ];\n    const allRtl = () => [\n      southwest$1,\n      southeast$1,\n      northwest$1,\n      northeast$1\n    ];\n\n    const placement = (component, submenuInfo, origin) => {\n      const anchorBox = toBox(origin, submenuInfo.item.element);\n      const layouts = get$5(component.element, submenuInfo, all(), allRtl(), all(), allRtl(), Optional.none());\n      return Optional.some(nu$4({\n        anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts\n      }));\n    };\n    var SubmenuAnchor = [\n      required$1('item'),\n      schema$y(),\n      defaulted('overrides', {}),\n      output$1('placement', placement)\n    ];\n\n    var AnchorSchema = choose$1('type', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    const TransitionSchema = [\n      requiredArrayOf('classes', string),\n      defaultedStringEnum('mode', 'all', [\n        'all',\n        'layout',\n        'placement'\n      ])\n    ];\n    const PositionSchema = [\n      defaulted('useFixed', never),\n      option$3('getBounds')\n    ];\n    const PlacementSchema = [\n      requiredOf('anchor', AnchorSchema),\n      optionObjOf('transition', TransitionSchema)\n    ];\n\n    const getFixedOrigin = () => {\n      const html = document.documentElement;\n      return fixed$1(0, 0, html.clientWidth, html.clientHeight);\n    };\n    const getRelativeOrigin = component => {\n      const position = absolute$3(component.element);\n      const bounds = component.element.dom.getBoundingClientRect();\n      return relative$1(position.left, position.top, bounds.width, bounds.height);\n    };\n    const place = (origin, anchoring, optBounds, placee, lastPlace, transition) => {\n      const anchor = box(anchoring.anchorBox, origin);\n      return simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, lastPlace, optBounds, anchoring.overrides, transition);\n    };\n    const position$1 = (component, posConfig, posState, placee, placementSpec) => {\n      const optWithinBounds = Optional.none();\n      positionWithinBounds(component, posConfig, posState, placee, placementSpec, optWithinBounds);\n    };\n    const positionWithinBounds = (component, posConfig, posState, placee, placementSpec, optWithinBounds) => {\n      const placeeDetail = asRawOrDie$1('placement.info', objOf(PlacementSchema), placementSpec);\n      const anchorage = placeeDetail.anchor;\n      const element = placee.element;\n      const placeeState = posState.get(placee.uid);\n      preserve$1(() => {\n        set$8(element, 'position', 'fixed');\n        const oldVisibility = getRaw(element, 'visibility');\n        set$8(element, 'visibility', 'hidden');\n        const origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        anchorage.placement(component, anchorage, origin).each(anchoring => {\n          const optBounds = optWithinBounds.orThunk(() => posConfig.getBounds.map(apply$1));\n          const newState = place(origin, anchoring, optBounds, placee, placeeState, placeeDetail.transition);\n          posState.set(placee.uid, newState);\n        });\n        oldVisibility.fold(() => {\n          remove$6(element, 'visibility');\n        }, vis => {\n          set$8(element, 'visibility', vis);\n        });\n        if (getRaw(element, 'left').isNone() && getRaw(element, 'top').isNone() && getRaw(element, 'right').isNone() && getRaw(element, 'bottom').isNone() && is$1(getRaw(element, 'position'), 'fixed')) {\n          remove$6(element, 'position');\n        }\n      }, element);\n    };\n    const getMode = (component, pConfig, _pState) => pConfig.useFixed() ? 'fixed' : 'absolute';\n    const reset$1 = (component, pConfig, posState, placee) => {\n      const element = placee.element;\n      each$1([\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], prop => remove$6(element, prop));\n      reset$2(element);\n      posState.clear(placee.uid);\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode,\n        reset: reset$1\n    });\n\n    const init$g = () => {\n      let state = {};\n      const set = (id, data) => {\n        state[id] = data;\n      };\n      const get = id => get$g(state, id);\n      const clear = id => {\n        if (isNonNullable(id)) {\n          delete state[id];\n        } else {\n          state = {};\n        }\n      };\n      return nu$8({\n        readState: () => state,\n        clear,\n        set,\n        get\n      });\n    };\n\n    var PositioningState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$g\n    });\n\n    const Positioning = create$4({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis,\n      state: PositioningState\n    });\n\n    const isConnected = comp => comp.getSystem().isConnected();\n    const fireDetaching = component => {\n      emit(component, detachedFromDom());\n      const children = component.components();\n      each$1(children, fireDetaching);\n    };\n    const fireAttaching = component => {\n      const children = component.components();\n      each$1(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    const virtualAttach = (parent, child) => {\n      parent.getSystem().addToWorld(child);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n    };\n    const virtualDetach = comp => {\n      fireDetaching(comp);\n      comp.getSystem().removeFromWorld(comp);\n    };\n    const attach$1 = (parent, child) => {\n      append$2(parent.element, child.element);\n    };\n    const detachChildren$1 = component => {\n      each$1(component.components(), childComp => remove$5(childComp.element));\n      empty(component.element);\n      component.syncComponents();\n    };\n    const replaceChildren = (component, newSpecs, buildNewChildren) => {\n      const subs = component.components();\n      detachChildren$1(component);\n      const newChildren = buildNewChildren(newSpecs);\n      const deleted = difference(subs, newChildren);\n      each$1(deleted, comp => {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each$1(newChildren, childComp => {\n        if (!isConnected(childComp)) {\n          component.getSystem().addToWorld(childComp);\n          attach$1(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach$1(component, childComp);\n        }\n      });\n      component.syncComponents();\n    };\n    const virtualReplaceChildren = (component, newSpecs, buildNewChildren) => {\n      const subs = component.components();\n      const existingComps = bind$3(newSpecs, spec => getPremade(spec).toArray());\n      each$1(subs, childComp => {\n        if (!contains$2(existingComps, childComp)) {\n          virtualDetach(childComp);\n        }\n      });\n      const newChildren = buildNewChildren(newSpecs);\n      const deleted = difference(subs, newChildren);\n      each$1(deleted, deletedComp => {\n        if (isConnected(deletedComp)) {\n          virtualDetach(deletedComp);\n        }\n      });\n      each$1(newChildren, childComp => {\n        if (!isConnected(childComp)) {\n          virtualAttach(component, childComp);\n        }\n      });\n      component.syncComponents();\n    };\n\n    const attach = (parent, child) => {\n      attachWith(parent, child, append$2);\n    };\n    const attachWith = (parent, child, insertion) => {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    const doDetach = component => {\n      fireDetaching(component);\n      remove$5(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    const detach = component => {\n      const parent$1 = parent(component.element).bind(p => component.getSystem().getByDom(p).toOptional());\n      doDetach(component);\n      parent$1.each(p => {\n        p.syncComponents();\n      });\n    };\n    const detachChildren = component => {\n      const subs = component.components();\n      each$1(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    const attachSystem = (element, guiSystem) => {\n      attachSystemWith(element, guiSystem, append$2);\n    };\n    const attachSystemAfter = (element, guiSystem) => {\n      attachSystemWith(element, guiSystem, after$2);\n    };\n    const attachSystemWith = (element, guiSystem, inserter) => {\n      inserter(element, guiSystem.element);\n      const children$1 = children(guiSystem.element);\n      each$1(children$1, child => {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    const detachSystem = guiSystem => {\n      const children$1 = children(guiSystem.element);\n      each$1(children$1, child => {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove$5(guiSystem.element);\n    };\n\n    const rebuild = (sandbox, sConfig, sState, data) => {\n      sState.get().each(_data => {\n        detachChildren(sandbox);\n      });\n      const point = sConfig.getAttachPoint(sandbox);\n      attach(point, sandbox);\n      const built = sandbox.getSystem().build(data);\n      attach(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    const open$1 = (sandbox, sConfig, sState, data) => {\n      const newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    const setContent = (sandbox, sConfig, sState, data) => sState.get().map(() => rebuild(sandbox, sConfig, sState, data));\n    const openWhileCloaked = (sandbox, sConfig, sState, data, transaction) => {\n      cloak(sandbox, sConfig);\n      open$1(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    const close$1 = (sandbox, sConfig, sState) => {\n      sState.get().each(data => {\n        detachChildren(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    const isOpen$1 = (_sandbox, _sConfig, sState) => sState.isOpen();\n    const isPartOf = (sandbox, sConfig, sState, queryElem) => isOpen$1(sandbox, sConfig, sState) && sState.get().exists(data => sConfig.isPartOf(sandbox, data, queryElem));\n    const getState$2 = (_sandbox, _sConfig, sState) => sState.get();\n    const store = (sandbox, cssKey, attr, newValue) => {\n      getRaw(sandbox.element, cssKey).fold(() => {\n        remove$7(sandbox.element, attr);\n      }, v => {\n        set$9(sandbox.element, attr, v);\n      });\n      set$8(sandbox.element, cssKey, newValue);\n    };\n    const restore = (sandbox, cssKey, attr) => {\n      getOpt(sandbox.element, attr).fold(() => remove$6(sandbox.element, cssKey), oldValue => set$8(sandbox.element, cssKey, oldValue));\n    };\n    const cloak = (sandbox, sConfig, _sState) => {\n      const sink = sConfig.getAttachPoint(sandbox);\n      set$8(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    const hasPosition = element => exists([\n      'top',\n      'left',\n      'right',\n      'bottom'\n    ], pos => getRaw(element, pos).isSome());\n    const decloak = (sandbox, sConfig, _sState) => {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open$1,\n        openWhileCloaked: openWhileCloaked,\n        close: close$1,\n        isOpen: isOpen$1,\n        isPartOf: isPartOf,\n        getState: getState$2,\n        setContent: setContent\n    });\n\n    const events$g = (sandboxConfig, sandboxState) => derive$2([run$1(sandboxClose(), (sandbox, _simulatedEvent) => {\n        close$1(sandbox, sandboxConfig, sandboxState);\n      })]);\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$g\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      required$1('isPartOf'),\n      required$1('getAttachPoint'),\n      defaulted('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    const init$f = () => {\n      const contents = value$2();\n      const readState = constant$1('not-implemented');\n      return nu$8({\n        readState,\n        isOpen: contents.isSet,\n        clear: contents.clear,\n        set: contents.set,\n        get: contents.get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    const Sandboxing = create$4({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    const dismissPopups = constant$1('dismiss.popups');\n    const repositionPopups = constant$1('reposition.popups');\n    const mouseReleased = constant$1('mouse.released');\n\n    const schema$x = objOfOnly([\n      defaulted('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted('event', dismissRequested())])\n    ]);\n    const receivingChannel$1 = rawSpec => {\n      const detail = asRawOrDie$1('Dismissal', schema$x, rawSpec);\n      return {\n        [dismissPopups()]: {\n          schema: objOfOnly([required$1('target')]),\n          onReceive: (sandbox, data) => {\n            if (Sandboxing.isOpen(sandbox)) {\n              const isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n              if (!isPart) {\n                detail.fireEventInstead.fold(() => Sandboxing.close(sandbox), fe => emit(sandbox, fe.event));\n              }\n            }\n          }\n        }\n      };\n    };\n\n    const schema$w = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted('event', repositionRequested())]),\n      requiredFunction('doReposition')\n    ]);\n    const receivingChannel = rawSpec => {\n      const detail = asRawOrDie$1('Reposition', schema$w, rawSpec);\n      return {\n        [repositionPopups()]: {\n          onReceive: sandbox => {\n            if (Sandboxing.isOpen(sandbox)) {\n              detail.fireEventInstead.fold(() => detail.doReposition(sandbox), fe => emit(sandbox, fe.event));\n            }\n          }\n        }\n      };\n    };\n\n    const onLoad$5 = (component, repConfig, repState) => {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    const onUnload$2 = (component, repConfig, repState) => {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    const setValue$3 = (component, repConfig, repState, data) => {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    const getValue$3 = (component, repConfig, repState) => repConfig.store.manager.getValue(component, repConfig, repState);\n    const getState$1 = (component, repConfig, repState) => repState;\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$5,\n        onUnload: onUnload$2,\n        setValue: setValue$3,\n        getValue: getValue$3,\n        getState: getState$1\n    });\n\n    const events$f = (repConfig, repState) => {\n      const es = repConfig.resetOnDom ? [\n        runOnAttached((comp, _se) => {\n          onLoad$5(comp, repConfig, repState);\n        }),\n        runOnDetached((comp, _se) => {\n          onUnload$2(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad$5)];\n      return derive$2(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    const memory$1 = () => {\n      const data = Cell(null);\n      const readState = () => ({\n        mode: 'memory',\n        value: data.get()\n      });\n      const isNotSet = () => data.get() === null;\n      const clear = () => {\n        data.set(null);\n      };\n      return nu$8({\n        set: data.set,\n        get: data.get,\n        isNotSet,\n        clear,\n        readState\n      });\n    };\n    const manual = () => {\n      const readState = noop;\n      return nu$8({ readState });\n    };\n    const dataset = () => {\n      const dataByValue = Cell({});\n      const dataByText = Cell({});\n      const readState = () => ({\n        mode: 'dataset',\n        dataByValue: dataByValue.get(),\n        dataByText: dataByText.get()\n      });\n      const clear = () => {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      const lookup = itemString => get$g(dataByValue.get(), itemString).orThunk(() => get$g(dataByText.get(), itemString));\n      const update = items => {\n        const currentDataByValue = dataByValue.get();\n        const currentDataByText = dataByText.get();\n        const newDataByValue = {};\n        const newDataByText = {};\n        each$1(items, item => {\n          newDataByValue[item.value] = item;\n          get$g(item, 'meta').each(meta => {\n            get$g(meta, 'text').each(text => {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set({\n          ...currentDataByValue,\n          ...newDataByValue\n        });\n        dataByText.set({\n          ...currentDataByText,\n          ...newDataByText\n        });\n      };\n      return nu$8({\n        readState,\n        lookup,\n        update,\n        clear\n      });\n    };\n    const init$e = spec => spec.store.manager.state(spec);\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory$1,\n        dataset: dataset,\n        manual: manual,\n        init: init$e\n    });\n\n    const setValue$2 = (component, repConfig, repState, data) => {\n      const store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    const getValue$2 = (component, repConfig, repState) => {\n      const store = repConfig.store;\n      const key = store.getDataKey(component);\n      return repState.lookup(key).getOrThunk(() => store.getFallbackEntry(key));\n    };\n    const onLoad$4 = (component, repConfig, repState) => {\n      const store = repConfig.store;\n      store.initialValue.each(data => {\n        setValue$2(component, repConfig, repState, data);\n      });\n    };\n    const onUnload$1 = (component, repConfig, repState) => {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option$3('initialValue'),\n      required$1('getFallbackEntry'),\n      required$1('getDataKey'),\n      required$1('setValue'),\n      output$1('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$4,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    const getValue$1 = (component, repConfig, _repState) => repConfig.store.getValue(component);\n    const setValue$1 = (component, repConfig, _repState, data) => {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    const onLoad$3 = (component, repConfig, _repState) => {\n      repConfig.store.initialValue.each(data => {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      required$1('getValue'),\n      defaulted('setValue', noop),\n      option$3('initialValue'),\n      output$1('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$3,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    const setValue = (component, repConfig, repState, data) => {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    const getValue = (component, repConfig, repState) => repState.get();\n    const onLoad$2 = (component, repConfig, repState) => {\n      repConfig.store.initialValue.each(initVal => {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    const onUnload = (component, repConfig, repState) => {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option$3('initialValue'),\n      output$1('manager', {\n        setValue,\n        getValue,\n        onLoad: onLoad$2,\n        onUnload,\n        state: memory$1\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted('resetOnDom', false)\n    ];\n\n    const Representing = create$4({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: (component, source) => {\n          const value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    const field = (name, forbidden) => defaultedObjOf(name, {}, map$2(forbidden, f => forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name)).concat([customField('dump', identity)]));\n    const get$3 = data => data.dump;\n    const augment = (data, original) => ({\n      ...derive$1(original),\n      ...data.dump\n    });\n    const SketchBehaviours = {\n      field,\n      augment,\n      get: get$3\n    };\n\n    const _placeholder = 'placeholder';\n    const adt$3 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    const isSubstituted = spec => has$2(spec, 'uiType');\n    const subPlaceholder = (owner, detail, compSpec, placeholders) => {\n      if (owner.exists(o => o !== compSpec.owner)) {\n        return adt$3.single(true, constant$1(compSpec));\n      }\n      return get$g(placeholders, compSpec.name).fold(() => {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, newSpec => newSpec.replace());\n    };\n    const scan = (owner, detail, compSpec, placeholders) => {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$3.single(false, constant$1(compSpec));\n      }\n    };\n    const substitute = (owner, detail, compSpec, placeholders) => {\n      const base = scan(owner, detail, compSpec, placeholders);\n      return base.fold((req, valueThunk) => {\n        const value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        const childSpecs = get$g(value, 'components').getOr([]);\n        const substituted = bind$3(childSpecs, c => substitute(owner, detail, c, placeholders));\n        return [{\n            ...value,\n            components: substituted\n          }];\n      }, (req, valuesThunk) => {\n        if (isSubstituted(compSpec)) {\n          const values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          const preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    const substituteAll = (owner, detail, components, placeholders) => bind$3(components, c => substitute(owner, detail, c, placeholders));\n    const oneReplace = (label, replacements) => {\n      let called = false;\n      const used = () => called;\n      const replace = () => {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      const required = () => replacements.fold((req, _) => req, (req, _) => req);\n      return {\n        name: constant$1(label),\n        required,\n        used,\n        replace\n      };\n    };\n    const substitutePlaces = (owner, detail, components, placeholders) => {\n      const ps = map$1(placeholders, (ph, name) => oneReplace(name, ph));\n      const outcome = substituteAll(owner, detail, components, ps);\n      each(ps, p => {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    const single$2 = adt$3.single;\n    const multiple = adt$3.multiple;\n    const placeholder = constant$1(_placeholder);\n\n    const adt$2 = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    const fFactory = defaulted('factory', { sketch: identity });\n    const fSchema = defaulted('schema', []);\n    const fName = required$1('name');\n    const fPname = field$1('pname', 'pname', defaultedThunk(typeSpec => '<alloy.' + generate$6(typeSpec.name) + '>'), anyValue());\n    const fGroupSchema = customField('schema', () => [option$3('preprocess')]);\n    const fDefaults = defaulted('defaults', constant$1({}));\n    const fOverrides = defaulted('overrides', constant$1({}));\n    const requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    const externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    const optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    const groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      required$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    const asNamedPart = part => {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    const name$2 = part => {\n      const get = data => data.name;\n      return part.fold(get, get, get, get);\n    };\n    const asCommon = part => {\n      return part.fold(identity, identity, identity, identity);\n    };\n    const convert = (adtConstructor, partSchema) => spec => {\n      const data = asRawOrDie$1('Converting part type', partSchema, spec);\n      return adtConstructor(data);\n    };\n    const required = convert(adt$2.required, requiredSpec);\n    const external = convert(adt$2.external, externalSpec);\n    const optional = convert(adt$2.optional, optionalSpec);\n    const group = convert(adt$2.group, groupSpec);\n    const original = constant$1('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$2,\n        asCommon: asCommon,\n        original: original\n    });\n\n    const combine = (detail, data, partSpec, partValidated) => deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    const subs = (owner, detail, parts) => {\n      const internals = {};\n      const externals = {};\n      each$1(parts, part => {\n        part.fold(data => {\n          internals[data.pname] = single$2(true, (detail, partSpec, partValidated) => data.factory.sketch(combine(detail, data, partSpec, partValidated)));\n        }, data => {\n          const partSpec = detail.parts[data.name];\n          externals[data.name] = constant$1(data.factory.sketch(combine(detail, data, partSpec[original()]), partSpec));\n        }, data => {\n          internals[data.pname] = single$2(false, (detail, partSpec, partValidated) => data.factory.sketch(combine(detail, data, partSpec, partValidated)));\n        }, data => {\n          internals[data.pname] = multiple(true, (detail, _partSpec, _partValidated) => {\n            const units = detail[data.name];\n            return map$2(units, u => data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u))));\n          });\n        });\n      });\n      return {\n        internals: constant$1(internals),\n        externals: constant$1(externals)\n      };\n    };\n\n    const generate$3 = (owner, parts) => {\n      const r = {};\n      each$1(parts, part => {\n        asNamedPart(part).each(np => {\n          const g = doGenerateOne(owner, np.pname);\n          r[np.name] = config => {\n            const validated = asRawOrDie$1('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return {\n              ...g,\n              config,\n              validated\n            };\n          };\n        });\n      });\n      return r;\n    };\n    const doGenerateOne = (owner, pname) => ({\n      uiType: placeholder(),\n      owner,\n      name: pname\n    });\n    const generateOne$1 = (owner, pname, config) => ({\n      uiType: placeholder(),\n      owner,\n      name: pname,\n      config,\n      validated: {}\n    });\n    const schemas = parts => bind$3(parts, part => part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(data => requiredObjOf(data.name, data.schema.concat([snapshot(original())]))).toArray());\n    const names = parts => map$2(parts, name$2);\n    const substitutes = (owner, detail, parts) => subs(owner, detail, parts);\n    const components$1 = (owner, detail, internals) => substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    const getPart = (component, detail, partKey) => {\n      const uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    const getPartOrDie = (component, detail, partKey) => getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    const getParts = (component, detail, partKeys) => {\n      const r = {};\n      const uids = detail.partUids;\n      const system = component.getSystem();\n      each$1(partKeys, pk => {\n        r[pk] = constant$1(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    const getAllParts = (component, detail) => {\n      const system = component.getSystem();\n      return map$1(detail.partUids, (pUid, _k) => constant$1(system.getByUid(pUid)));\n    };\n    const getAllPartNames = detail => keys(detail.partUids);\n    const getPartsOrDie = (component, detail, partKeys) => {\n      const r = {};\n      const uids = detail.partUids;\n      const system = component.getSystem();\n      each$1(partKeys, pk => {\n        r[pk] = constant$1(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    const defaultUids = (baseUid, partTypes) => {\n      const partNames = names(partTypes);\n      return wrapAll(map$2(partNames, pn => ({\n        key: pn,\n        value: baseUid + '-' + pn\n      })));\n    };\n    const defaultUidsSchema = partTypes => field$1('partUids', 'partUids', mergeWithThunk(spec => defaultUids(spec.uid, partTypes)), anyValue());\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$3,\n        generateOne: generateOne$1,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components$1,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    const base = (partSchemas, partUidsSchemas) => {\n      const ps = partSchemas.length > 0 ? [requiredObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        required$1('uid'),\n        defaulted('dom', {}),\n        defaulted('components', []),\n        snapshot('originalSpec'),\n        defaulted('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    const asRawOrDie = (label, schema, spec, partSchemas, partUidsSchemas) => {\n      const baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie$1(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    const single$1 = (owner, schema, factory, spec) => {\n      const specWithUid = supplyUid(spec);\n      const detail = asRawOrDie(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    const composite$1 = (owner, schema, partTypes, factory, spec) => {\n      const specWithUid = supplyUid(spec);\n      const partSchemas = schemas(partTypes);\n      const partUidsSchema = defaultUidsSchema(partTypes);\n      const detail = asRawOrDie(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      const subs = substitutes(owner, detail, partTypes);\n      const components = components$1(owner, detail, subs.internals());\n      return factory(detail, components, specWithUid, subs.externals());\n    };\n    const hasUid = spec => has$2(spec, 'uid');\n    const supplyUid = spec => {\n      return hasUid(spec) ? spec : {\n        ...spec,\n        uid: generate$5('uid')\n      };\n    };\n\n    const isSketchSpec = spec => {\n      return spec.uid !== undefined;\n    };\n    const singleSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    const compositeSchema = objOfOnly([\n      required$1('name'),\n      required$1('factory'),\n      required$1('configFields'),\n      required$1('partFields'),\n      defaulted('apis', {}),\n      defaulted('extraApis', {})\n    ]);\n    const single = rawConfig => {\n      const config = asRawOrDie$1('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      const sketch = spec => single$1(config.name, config.configFields, config.factory, spec);\n      const apis = map$1(config.apis, makeApi);\n      const extraApis = map$1(config.extraApis, (f, k) => markAsExtraApi(f, k));\n      return {\n        name: config.name,\n        configFields: config.configFields,\n        sketch,\n        ...apis,\n        ...extraApis\n      };\n    };\n    const composite = rawConfig => {\n      const config = asRawOrDie$1('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      const sketch = spec => composite$1(config.name, config.configFields, config.partFields, config.factory, spec);\n      const parts = generate$3(config.name, config.partFields);\n      const apis = map$1(config.apis, makeApi);\n      const extraApis = map$1(config.extraApis, (f, k) => markAsExtraApi(f, k));\n      return {\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch,\n        parts,\n        ...apis,\n        ...extraApis\n      };\n    };\n\n    const inside = target => isTag('input')(target) && get$f(target, 'type') !== 'radio' || isTag('textarea')(target);\n\n    const getCurrent = (component, composeConfig, _composeState) => composeConfig.find(component);\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    const ComposeSchema = [required$1('find')];\n\n    const Composing = create$4({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    const nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    const onLoad$1 = (component, disableConfig, disableState) => {\n      const f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig);\n    };\n    const hasNative = (component, config) => config.useNative === true && contains$2(nativeDisabled, name$3(component.element));\n    const nativeIsDisabled = component => has$1(component.element, 'disabled');\n    const nativeDisable = component => {\n      set$9(component.element, 'disabled', 'disabled');\n    };\n    const nativeEnable = component => {\n      remove$7(component.element, 'disabled');\n    };\n    const ariaIsDisabled = component => get$f(component.element, 'aria-disabled') === 'true';\n    const ariaDisable = component => {\n      set$9(component.element, 'aria-disabled', 'true');\n    };\n    const ariaEnable = component => {\n      set$9(component.element, 'aria-disabled', 'false');\n    };\n    const disable = (component, disableConfig, _disableState) => {\n      disableConfig.disableClass.each(disableClass => {\n        add$2(component.element, disableClass);\n      });\n      const f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    const enable = (component, disableConfig, _disableState) => {\n      disableConfig.disableClass.each(disableClass => {\n        remove$2(component.element, disableClass);\n      });\n      const f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    const isDisabled = (component, disableConfig) => hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    const set$4 = (component, disableConfig, disableState, disabled) => {\n      const f = disabled ? disable : enable;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$1,\n        set: set$4\n    });\n\n    const exhibit$5 = (base, disableConfig) => nu$7({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    const events$e = (disableConfig, disableState) => derive$2([\n      abort(execute$5(), (component, _simulatedEvent) => isDisabled(component, disableConfig)),\n      loadEvent(disableConfig, disableState, onLoad$1)\n    ]);\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$5,\n        events: events$e\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted('useNative', true),\n      option$3('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    const Disabling = create$4({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    const dehighlightAllExcept = (component, hConfig, hState, skip) => {\n      const highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each$1(highlighted, h => {\n        const shouldSkip = exists(skip, skipComp => eq(skipComp.element, h));\n        if (!shouldSkip) {\n          remove$2(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(target => {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight$1());\n          });\n        }\n      });\n    };\n    const dehighlightAll = (component, hConfig, hState) => dehighlightAllExcept(component, hConfig, hState, []);\n    const dehighlight = (component, hConfig, hState, target) => {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$2(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight$1());\n      }\n    };\n    const highlight = (component, hConfig, hState, target) => {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight$1());\n      }\n    };\n    const highlightFirst = (component, hConfig, hState) => {\n      getFirst(component, hConfig).each(firstComp => {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    const highlightLast = (component, hConfig, hState) => {\n      getLast(component, hConfig).each(lastComp => {\n        highlight(component, hConfig, hState, lastComp);\n      });\n    };\n    const highlightAt = (component, hConfig, hState, index) => {\n      getByIndex(component, hConfig, hState, index).fold(err => {\n        throw err;\n      }, firstComp => {\n        highlight(component, hConfig, hState, firstComp);\n      });\n    };\n    const highlightBy = (component, hConfig, hState, predicate) => {\n      const candidates = getCandidates(component, hConfig);\n      const targetComp = find$5(candidates, predicate);\n      targetComp.each(c => {\n        highlight(component, hConfig, hState, c);\n      });\n    };\n    const isHighlighted = (component, hConfig, hState, queryTarget) => has(queryTarget.element, hConfig.highlightClass);\n    const getHighlighted = (component, hConfig, _hState) => descendant(component.element, '.' + hConfig.highlightClass).bind(e => component.getSystem().getByDom(e).toOptional());\n    const getByIndex = (component, hConfig, hState, index) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(() => Result.error(new Error('No element found with index ' + index)), component.getSystem().getByDom);\n    };\n    const getFirst = (component, hConfig, _hState) => descendant(component.element, '.' + hConfig.itemClass).bind(e => component.getSystem().getByDom(e).toOptional());\n    const getLast = (component, hConfig, _hState) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      const last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(c => component.getSystem().getByDom(c).toOptional());\n    };\n    const getDelta$2 = (component, hConfig, hState, delta) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      const current = findIndex$1(items, item => has(item, hConfig.highlightClass));\n      return current.bind(selected => {\n        const dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    const getPrevious = (component, hConfig, hState) => getDelta$2(component, hConfig, hState, -1);\n    const getNext = (component, hConfig, hState) => getDelta$2(component, hConfig, hState, +1);\n    const getCandidates = (component, hConfig, _hState) => {\n      const items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map$2(items, i => component.getSystem().getByDom(i).toOptional()));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight,\n        highlight: highlight,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      required$1('highlightClass'),\n      required$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    const Highlighting = create$4({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    const BACKSPACE = [8];\n    const TAB = [9];\n    const ENTER = [13];\n    const ESCAPE = [27];\n    const SPACE = [32];\n    const LEFT = [37];\n    const UP = [38];\n    const RIGHT = [39];\n    const DOWN = [40];\n\n    const cyclePrev = (values, index, predicate) => {\n      const before = reverse(values.slice(0, index));\n      const after = reverse(values.slice(index + 1));\n      return find$5(before.concat(after), predicate);\n    };\n    const tryPrev = (values, index, predicate) => {\n      const before = reverse(values.slice(0, index));\n      return find$5(before, predicate);\n    };\n    const cycleNext = (values, index, predicate) => {\n      const before = values.slice(0, index);\n      const after = values.slice(index + 1);\n      return find$5(after.concat(before), predicate);\n    };\n    const tryNext = (values, index, predicate) => {\n      const after = values.slice(index + 1);\n      return find$5(after, predicate);\n    };\n\n    const inSet = keys => event => {\n      const raw = event.raw;\n      return contains$2(keys, raw.which);\n    };\n    const and = preds => event => forall(preds, pred => pred(event));\n    const isShift$1 = event => {\n      const raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    const isControl = event => {\n      const raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    const isNotShift = not(isShift$1);\n\n    const rule = (matches, action) => ({\n      matches,\n      classification: action\n    });\n    const choose = (transitions, event) => {\n      const transition = find$5(transitions, t => t.matches(event));\n      return transition.map(t => t.classification);\n    };\n\n    const reportFocusShifting = (component, prevFocus, newFocus) => {\n      const noChange = prevFocus.exists(p => newFocus.exists(n => eq(n, p)));\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus,\n          newFocus\n        });\n      }\n    };\n    const dom$2 = () => {\n      const get = component => search(component.element);\n      const set = (component, focusee) => {\n        const prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        const newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get,\n        set\n      };\n    };\n    const highlights = () => {\n      const get = component => Highlighting.getHighlighted(component).map(item => item.element);\n      const set = (component, element) => {\n        const prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, item => {\n          Highlighting.highlight(component, item);\n        });\n        const newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    const typical = (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) => {\n      const schema = () => infoSchema.concat([\n        defaulted('focusManager', dom$2()),\n        defaultedOf('focusInside', 'onFocus', valueOf(val => contains$2([\n          'onFocus',\n          'onEnterOrSpace',\n          'onApi'\n        ], val) ? Result.value(val) : Result.error('Invalid value for focusInside'))),\n        output$1('handler', me),\n        output$1('state', stateInit),\n        output$1('sendFocusIn', optFocusIn)\n      ]);\n      const processKey = (component, simulatedEvent, getRules, keyingConfig, keyingState) => {\n        const rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose(rules, simulatedEvent.event).bind(rule => rule(component, simulatedEvent, keyingConfig, keyingState));\n      };\n      const toEvents = (keyingConfig, keyingState) => {\n        const onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(focusIn => run$1(focus$4(), (component, simulatedEvent) => {\n          focusIn(component, keyingConfig, keyingState);\n          simulatedEvent.stop();\n        }));\n        const tryGoInsideComponent = (component, simulatedEvent) => {\n          const isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(focusIn => {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        const keyboardEvents = [\n          run$1(keydown(), (component, simulatedEvent) => {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(() => {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, _ => {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(keyup(), (component, simulatedEvent) => {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(_ => {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive$2(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      const me = {\n        schema,\n        processKey,\n        toEvents\n      };\n      return me;\n    };\n\n    const create$2 = cyclicField => {\n      const schema = [\n        option$3('onEscape'),\n        option$3('onEnter'),\n        defaulted('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted('firstTabstop', 0),\n        defaulted('useTabstopAt', always),\n        option$3('visibilitySelector')\n      ].concat([cyclicField]);\n      const isVisible = (tabbingConfig, element) => {\n        const target = tabbingConfig.visibilitySelector.bind(sel => closest$1(element, sel)).getOr(element);\n        return get$d(target) > 0;\n      };\n      const findInitial = (component, tabbingConfig) => {\n        const tabstops = descendants(component.element, tabbingConfig.selector);\n        const visibles = filter$2(tabstops, elem => isVisible(tabbingConfig, elem));\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      const findCurrent = (component, tabbingConfig) => tabbingConfig.focusManager.get(component).bind(elem => closest$1(elem, tabbingConfig.selector));\n      const isTabstop = (tabbingConfig, element) => isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      const focusIn = (component, tabbingConfig, _tabbingState) => {\n        findInitial(component, tabbingConfig).each(target => {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      const goFromTabstop = (component, tabstops, stopIndex, tabbingConfig, cycle) => cycle(tabstops, stopIndex, elem => isTabstop(tabbingConfig, elem)).fold(() => tabbingConfig.cyclic ? Optional.some(true) : Optional.none(), target => {\n        tabbingConfig.focusManager.set(component, target);\n        return Optional.some(true);\n      });\n      const go = (component, _simulatedEvent, tabbingConfig, cycle) => {\n        const tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(tabstop => {\n          const optStopIndex = findIndex$1(tabstops, curry(eq, tabstop));\n          return optStopIndex.bind(stopIndex => goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle));\n        });\n      };\n      const goBackwards = (component, simulatedEvent, tabbingConfig) => {\n        const navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      const goForwards = (component, simulatedEvent, tabbingConfig) => {\n        const navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      const isFirstChild = elem => parentNode(elem).bind(firstChild).exists(child => eq(child, elem));\n      const goFromPseudoTabstop = (component, simulatedEvent, tabbingConfig) => findCurrent(component, tabbingConfig).filter(elem => !tabbingConfig.useTabstopAt(elem)).bind(elem => (isFirstChild(elem) ? goBackwards : goForwards)(component, simulatedEvent, tabbingConfig));\n      const execute = (component, simulatedEvent, tabbingConfig) => tabbingConfig.onEnter.bind(f => f(component, simulatedEvent));\n      const exit = (component, simulatedEvent, tabbingConfig) => tabbingConfig.onEscape.bind(f => f(component, simulatedEvent));\n      const getKeydownRules = constant$1([\n        rule(and([\n          isShift$1,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      const getKeyupRules = constant$1([\n        rule(inSet(ESCAPE), exit),\n        rule(inSet(TAB), goFromPseudoTabstop)\n      ]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, () => Optional.some(focusIn));\n    };\n\n    var AcyclicType = create$2(customField('cyclic', never));\n\n    var CyclicType = create$2(customField('cyclic', always));\n\n    const doDefaultExecute = (component, _simulatedEvent, focused) => {\n      dispatch(component, focused, execute$5());\n      return Optional.some(true);\n    };\n    const defaultExecute = (component, simulatedEvent, focused) => {\n      const isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    const stopEventForFirefox = (_component, _simulatedEvent) => Optional.some(true);\n\n    const schema$v = [\n      defaulted('execute', defaultExecute),\n      defaulted('useSpace', false),\n      defaulted('useEnter', true),\n      defaulted('useControlEnter', false),\n      defaulted('useDown', false)\n    ];\n    const execute$4 = (component, simulatedEvent, executeConfig) => executeConfig.execute(component, simulatedEvent, component.element);\n    const getKeydownRules$5 = (component, _simulatedEvent, executeConfig, _executeState) => {\n      const spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      const enterExec = executeConfig.useEnter ? ENTER : [];\n      const downExec = executeConfig.useDown ? DOWN : [];\n      const execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$4)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$4)] : []);\n    };\n    const getKeyupRules$5 = (component, _simulatedEvent, executeConfig, _executeState) => executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    var ExecutionType = typical(schema$v, NoState.init, getKeydownRules$5, getKeyupRules$5, () => Optional.none());\n\n    const flatgrid$1 = () => {\n      const dimensions = value$2();\n      const setGridSize = (numRows, numColumns) => {\n        dimensions.set({\n          numRows,\n          numColumns\n        });\n      };\n      const getNumRows = () => dimensions.get().map(d => d.numRows);\n      const getNumColumns = () => dimensions.get().map(d => d.numColumns);\n      return nu$8({\n        readState: () => dimensions.get().map(d => ({\n          numRows: String(d.numRows),\n          numColumns: String(d.numColumns)\n        })).getOr({\n          numRows: '?',\n          numColumns: '?'\n        }),\n        setGridSize,\n        getNumRows,\n        getNumColumns\n      });\n    };\n    const init$d = spec => spec.state(spec);\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid$1,\n        init: init$d\n    });\n\n    const useH = movement => (component, simulatedEvent, config, state) => {\n      const move = movement(component.element);\n      return use(move, component, simulatedEvent, config, state);\n    };\n    const west$1 = (moveLeft, moveRight) => {\n      const movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    const east$1 = (moveLeft, moveRight) => {\n      const movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    const useV = move => (component, simulatedEvent, config, state) => use(move, component, simulatedEvent, config, state);\n    const use = (move, component, simulatedEvent, config, state) => {\n      const outcome = config.focusManager.get(component).bind(focused => move(component.element, focused, config, state));\n      return outcome.map(newFocus => {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    const north$1 = useV;\n    const south$1 = useV;\n    const move$1 = useV;\n\n    const isHidden$1 = dom => dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    const isVisible = element => !isHidden$1(element.dom);\n\n    const locate = (candidates, predicate) => findIndex$1(candidates, predicate).map(index => ({\n      index,\n      candidates\n    }));\n\n    const locateVisible = (container, current, selector) => {\n      const predicate = x => eq(x, current);\n      const candidates = descendants(container, selector);\n      const visible = filter$2(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    const findIndex = (elements, target) => findIndex$1(elements, elem => eq(target, elem));\n\n    const withGrid = (values, index, numCols, f) => {\n      const oldRow = Math.floor(index / numCols);\n      const oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(address => {\n        const newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    const cycleHorizontal$1 = (values, index, numRows, numCols, delta) => withGrid(values, index, numCols, (oldRow, oldColumn) => {\n      const onLastRow = oldRow === numRows - 1;\n      const colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n      const newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n      return Optional.some({\n        row: oldRow,\n        column: newColumn\n      });\n    });\n    const cycleVertical$1 = (values, index, numRows, numCols, delta) => withGrid(values, index, numCols, (oldRow, oldColumn) => {\n      const newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n      const onLastRow = newRow === numRows - 1;\n      const colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n      const newCol = clamp(oldColumn, 0, colsInRow - 1);\n      return Optional.some({\n        row: newRow,\n        column: newCol\n      });\n    });\n    const cycleRight$1 = (values, index, numRows, numCols) => cycleHorizontal$1(values, index, numRows, numCols, +1);\n    const cycleLeft$1 = (values, index, numRows, numCols) => cycleHorizontal$1(values, index, numRows, numCols, -1);\n    const cycleUp$1 = (values, index, numRows, numCols) => cycleVertical$1(values, index, numRows, numCols, -1);\n    const cycleDown$1 = (values, index, numRows, numCols) => cycleVertical$1(values, index, numRows, numCols, +1);\n\n    const schema$u = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('captureTab', false),\n      initSize()\n    ];\n    const focusIn$3 = (component, gridConfig, _gridState) => {\n      descendant(component.element, gridConfig.selector).each(first => {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    const findCurrent$1 = (component, gridConfig) => gridConfig.focusManager.get(component).bind(elem => closest$1(elem, gridConfig.selector));\n    const execute$3 = (component, simulatedEvent, gridConfig, _gridState) => findCurrent$1(component, gridConfig).bind(focused => gridConfig.execute(component, simulatedEvent, focused));\n    const doMove$2 = cycle => (element, focused, gridConfig, gridState) => locateVisible(element, focused, gridConfig.selector).bind(identified => cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns)));\n    const handleTab = (_component, _simulatedEvent, gridConfig) => gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    const doEscape$1 = (component, simulatedEvent, gridConfig) => gridConfig.onEscape(component, simulatedEvent);\n    const moveLeft$3 = doMove$2(cycleLeft$1);\n    const moveRight$3 = doMove$2(cycleRight$1);\n    const moveNorth$1 = doMove$2(cycleUp$1);\n    const moveSouth$1 = doMove$2(cycleDown$1);\n    const getKeydownRules$4 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$1(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$1(moveNorth$1)),\n      rule(inSet(DOWN), south$1(moveSouth$1)),\n      rule(and([\n        isShift$1,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(SPACE.concat(ENTER)), execute$3)\n    ]);\n    const getKeyupRules$4 = constant$1([\n      rule(inSet(ESCAPE), doEscape$1),\n      rule(inSet(SPACE), stopEventForFirefox)\n    ]);\n    var FlatgridType = typical(schema$u, flatgrid$1, getKeydownRules$4, getKeyupRules$4, () => Optional.some(focusIn$3));\n\n    const f = (container, selector, current, delta, getNewIndex) => {\n      const isDisabledButton = candidate => name$3(candidate) === 'button' && get$f(candidate, 'disabled') === 'disabled';\n      const tryNewIndex = (initial, index, candidates) => getNewIndex(initial, index, delta, 0, candidates.length - 1, candidates[index], newIndex => isDisabledButton(candidates[newIndex]) ? tryNewIndex(initial, newIndex, candidates) : Optional.from(candidates[newIndex]));\n      return locateVisible(container, current, selector).bind(identified => {\n        const index = identified.index;\n        const candidates = identified.candidates;\n        return tryNewIndex(index, index, candidates);\n      });\n    };\n    const horizontalWithoutCycles = (container, selector, current, delta) => f(container, selector, current, delta, (prevIndex, v, d, min, max, oldCandidate, onNewIndex) => {\n      const newIndex = clamp(v + d, min, max);\n      return newIndex === prevIndex ? Optional.from(oldCandidate) : onNewIndex(newIndex);\n    });\n    const horizontal = (container, selector, current, delta) => f(container, selector, current, delta, (prevIndex, v, d, min, max, _oldCandidate, onNewIndex) => {\n      const newIndex = cycleBy(v, d, min, max);\n      return newIndex === prevIndex ? Optional.none() : onNewIndex(newIndex);\n    });\n\n    const schema$t = [\n      required$1('selector'),\n      defaulted('getInitial', Optional.none),\n      defaulted('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted('executeOnMove', false),\n      defaulted('allowVertical', true),\n      defaulted('allowHorizontal', true),\n      defaulted('cycles', true)\n    ];\n    const findCurrent = (component, flowConfig) => flowConfig.focusManager.get(component).bind(elem => closest$1(elem, flowConfig.selector));\n    const execute$2 = (component, simulatedEvent, flowConfig) => findCurrent(component, flowConfig).bind(focused => flowConfig.execute(component, simulatedEvent, focused));\n    const focusIn$2 = (component, flowConfig, _state) => {\n      flowConfig.getInitial(component).orThunk(() => descendant(component.element, flowConfig.selector)).each(first => {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    const moveLeft$2 = (element, focused, info) => (info.cycles ? horizontal : horizontalWithoutCycles)(element, info.selector, focused, -1);\n    const moveRight$2 = (element, focused, info) => (info.cycles ? horizontal : horizontalWithoutCycles)(element, info.selector, focused, +1);\n    const doMove$1 = movement => (component, simulatedEvent, flowConfig, flowState) => movement(component, simulatedEvent, flowConfig, flowState).bind(() => flowConfig.executeOnMove ? execute$2(component, simulatedEvent, flowConfig) : Optional.some(true));\n    const doEscape = (component, simulatedEvent, flowConfig) => flowConfig.onEscape(component, simulatedEvent);\n    const getKeydownRules$3 = (_component, _se, flowConfig, _flowState) => {\n      const westMovers = [...flowConfig.allowHorizontal ? LEFT : []].concat(flowConfig.allowVertical ? UP : []);\n      const eastMovers = [...flowConfig.allowHorizontal ? RIGHT : []].concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$1(moveLeft$2, moveRight$2))),\n        rule(inSet(eastMovers), doMove$1(east$1(moveLeft$2, moveRight$2))),\n        rule(inSet(ENTER), execute$2),\n        rule(inSet(SPACE), execute$2)\n      ];\n    };\n    const getKeyupRules$3 = constant$1([\n      rule(inSet(SPACE), stopEventForFirefox),\n      rule(inSet(ESCAPE), doEscape)\n    ]);\n    var FlowType = typical(schema$t, NoState.init, getKeydownRules$3, getKeyupRules$3, () => Optional.some(focusIn$2));\n\n    const toCell = (matrix, rowIndex, columnIndex) => Optional.from(matrix[rowIndex]).bind(row => Optional.from(row[columnIndex]).map(cell => ({\n      rowIndex,\n      columnIndex,\n      cell\n    })));\n    const cycleHorizontal = (matrix, rowIndex, startCol, deltaCol) => {\n      const row = matrix[rowIndex];\n      const colsInRow = row.length;\n      const newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    const cycleVertical = (matrix, colIndex, startRow, deltaRow) => {\n      const nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      const colsInNextRow = matrix[nextRowIndex].length;\n      const nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    const moveHorizontal = (matrix, rowIndex, startCol, deltaCol) => {\n      const row = matrix[rowIndex];\n      const colsInRow = row.length;\n      const newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    const moveVertical = (matrix, colIndex, startRow, deltaRow) => {\n      const nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      const colsInNextRow = matrix[nextRowIndex].length;\n      const nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    const cycleRight = (matrix, startRow, startCol) => cycleHorizontal(matrix, startRow, startCol, +1);\n    const cycleLeft = (matrix, startRow, startCol) => cycleHorizontal(matrix, startRow, startCol, -1);\n    const cycleUp = (matrix, startRow, startCol) => cycleVertical(matrix, startCol, startRow, -1);\n    const cycleDown = (matrix, startRow, startCol) => cycleVertical(matrix, startCol, startRow, +1);\n    const moveLeft$1 = (matrix, startRow, startCol) => moveHorizontal(matrix, startRow, startCol, -1);\n    const moveRight$1 = (matrix, startRow, startCol) => moveHorizontal(matrix, startRow, startCol, +1);\n    const moveUp$1 = (matrix, startRow, startCol) => moveVertical(matrix, startCol, startRow, -1);\n    const moveDown$1 = (matrix, startRow, startCol) => moveVertical(matrix, startCol, startRow, +1);\n\n    const schema$s = [\n      requiredObjOf('selectors', [\n        required$1('row'),\n        required$1('cell')\n      ]),\n      defaulted('cycles', true),\n      defaulted('previousSelector', Optional.none),\n      defaulted('execute', defaultExecute)\n    ];\n    const focusIn$1 = (component, matrixConfig, _state) => {\n      const focused = matrixConfig.previousSelector(component).orThunk(() => {\n        const selectors = matrixConfig.selectors;\n        return descendant(component.element, selectors.cell);\n      });\n      focused.each(cell => {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    const execute$1 = (component, simulatedEvent, matrixConfig) => search(component.element).bind(focused => matrixConfig.execute(component, simulatedEvent, focused));\n    const toMatrix = (rows, matrixConfig) => map$2(rows, row => descendants(row, matrixConfig.selectors.cell));\n    const doMove = (ifCycle, ifMove) => (element, focused, matrixConfig) => {\n      const move = matrixConfig.cycles ? ifCycle : ifMove;\n      return closest$1(focused, matrixConfig.selectors.row).bind(inRow => {\n        const cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n        return findIndex(cellsInRow, focused).bind(colIndex => {\n          const allRows = descendants(element, matrixConfig.selectors.row);\n          return findIndex(allRows, inRow).bind(rowIndex => {\n            const matrix = toMatrix(allRows, matrixConfig);\n            return move(matrix, rowIndex, colIndex).map(next => next.cell);\n          });\n        });\n      });\n    };\n    const moveLeft = doMove(cycleLeft, moveLeft$1);\n    const moveRight = doMove(cycleRight, moveRight$1);\n    const moveNorth = doMove(cycleUp, moveUp$1);\n    const moveSouth = doMove(cycleDown, moveDown$1);\n    const getKeydownRules$2 = constant$1([\n      rule(inSet(LEFT), west$1(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$1(moveLeft, moveRight)),\n      rule(inSet(UP), north$1(moveNorth)),\n      rule(inSet(DOWN), south$1(moveSouth)),\n      rule(inSet(SPACE.concat(ENTER)), execute$1)\n    ]);\n    const getKeyupRules$2 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$s, NoState.init, getKeydownRules$2, getKeyupRules$2, () => Optional.some(focusIn$1));\n\n    const schema$r = [\n      required$1('selector'),\n      defaulted('execute', defaultExecute),\n      defaulted('moveOnTab', false)\n    ];\n    const execute = (component, simulatedEvent, menuConfig) => menuConfig.focusManager.get(component).bind(focused => menuConfig.execute(component, simulatedEvent, focused));\n    const focusIn = (component, menuConfig, _state) => {\n      descendant(component.element, menuConfig.selector).each(first => {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    const moveUp = (element, focused, info) => horizontal(element, info.selector, focused, -1);\n    const moveDown = (element, focused, info) => horizontal(element, info.selector, focused, +1);\n    const fireShiftTab = (component, simulatedEvent, menuConfig, menuState) => menuConfig.moveOnTab ? move$1(moveUp)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    const fireTab = (component, simulatedEvent, menuConfig, menuState) => menuConfig.moveOnTab ? move$1(moveDown)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    const getKeydownRules$1 = constant$1([\n      rule(inSet(UP), move$1(moveUp)),\n      rule(inSet(DOWN), move$1(moveDown)),\n      rule(and([\n        isShift$1,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute),\n      rule(inSet(SPACE), execute)\n    ]);\n    const getKeyupRules$1 = constant$1([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$r, NoState.init, getKeydownRules$1, getKeyupRules$1, () => Optional.some(focusIn));\n\n    const schema$q = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted('stopSpaceKeyup', false),\n      option$3('focusIn')\n    ];\n    const getKeydownRules = (component, simulatedEvent, specialInfo) => [\n      rule(inSet(SPACE), specialInfo.onSpace),\n      rule(and([\n        isNotShift,\n        inSet(ENTER)\n      ]), specialInfo.onEnter),\n      rule(and([\n        isShift$1,\n        inSet(ENTER)\n      ]), specialInfo.onShiftEnter),\n      rule(and([\n        isShift$1,\n        inSet(TAB)\n      ]), specialInfo.onShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), specialInfo.onTab),\n      rule(inSet(UP), specialInfo.onUp),\n      rule(inSet(DOWN), specialInfo.onDown),\n      rule(inSet(LEFT), specialInfo.onLeft),\n      rule(inSet(RIGHT), specialInfo.onRight),\n      rule(inSet(SPACE), specialInfo.onSpace)\n    ];\n    const getKeyupRules = (component, simulatedEvent, specialInfo) => [\n      ...specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [],\n      rule(inSet(ESCAPE), specialInfo.onEscape)\n    ];\n    var SpecialType = typical(schema$q, NoState.init, getKeydownRules, getKeyupRules, specialInfo => specialInfo.focusIn);\n\n    const acyclic = AcyclicType.schema();\n    const cyclic = CyclicType.schema();\n    const flow = FlowType.schema();\n    const flatgrid = FlatgridType.schema();\n    const matrix = MatrixType.schema();\n    const execution = ExecutionType.schema();\n    const menu = MenuType.schema();\n    const special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    const isFlatgridState = keyState => hasNonNullableKey(keyState, 'setGridSize');\n    const Keying = createModes({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: (keyingConfig, keyingState) => {\n          const handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: (component, keyConfig, keyState) => {\n          keyConfig.sendFocusIn(keyConfig).fold(() => {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, sendFocusIn => {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: (component, keyConfig, keyState, numRows, numColumns) => {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    const withoutReuse = (parent, data) => {\n      preserve$1(() => {\n        replaceChildren(parent, data, () => map$2(data, parent.getSystem().build));\n      }, parent.element);\n    };\n    const withReuse = (parent, data) => {\n      preserve$1(() => {\n        virtualReplaceChildren(parent, data, () => {\n          return patchSpecChildren(parent.element, data, parent.getSystem().buildOrPatch);\n        });\n      }, parent.element);\n    };\n\n    const virtualReplace = (component, replacee, replaceeIndex, childSpec) => {\n      virtualDetach(replacee);\n      const child = patchSpecChild(component.element, replaceeIndex, childSpec, component.getSystem().buildOrPatch);\n      virtualAttach(component, child);\n      component.syncComponents();\n    };\n    const insert = (component, insertion, childSpec) => {\n      const child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    const replace = (component, replacee, replaceeIndex, childSpec) => {\n      detach(replacee);\n      insert(component, (p, c) => appendAt(p, c, replaceeIndex), childSpec);\n    };\n    const set$3 = (component, replaceConfig, replaceState, data) => {\n      const replacer = replaceConfig.reuseDom ? withReuse : withoutReuse;\n      return replacer(component, data);\n    };\n    const append = (component, replaceConfig, replaceState, appendee) => {\n      insert(component, append$2, appendee);\n    };\n    const prepend = (component, replaceConfig, replaceState, prependee) => {\n      insert(component, prepend$1, prependee);\n    };\n    const remove = (component, replaceConfig, replaceState, removee) => {\n      const children = contents(component);\n      const foundChild = find$5(children, child => eq(removee.element, child.element));\n      foundChild.each(detach);\n    };\n    const contents = (component, _replaceConfig) => component.components();\n    const replaceAt = (component, replaceConfig, replaceState, replaceeIndex, replacer) => {\n      const children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(replacee => {\n        replacer.fold(() => detach(replacee), r => {\n          const replacer = replaceConfig.reuseDom ? virtualReplace : replace;\n          replacer(component, replacee, replaceeIndex, r);\n        });\n        return replacee;\n      });\n    };\n    const replaceBy = (component, replaceConfig, replaceState, replaceePred, replacer) => {\n      const children = contents(component);\n      return findIndex$1(children, replaceePred).bind(replaceeIndex => replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer));\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append,\n        prepend: prepend,\n        remove: remove,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$3,\n        contents: contents\n    });\n\n    const Replacing = create$4({\n      fields: [defaultedBoolean('reuseDom', true)],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    const events$d = (name, eventHandlers) => {\n      const events = derive$2(eventHandlers);\n      return create$4({\n        fields: [required$1('enabled')],\n        name,\n        active: { events: constant$1(events) }\n      });\n    };\n    const config = (name, eventHandlers) => {\n      const me = events$d(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me,\n          configAsRaw: constant$1({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    const focus$2 = (component, focusConfig) => {\n      if (!focusConfig.ignore) {\n        focus$3(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    const blur = (component, focusConfig) => {\n      if (!focusConfig.ignore) {\n        blur$1(component.element);\n      }\n    };\n    const isFocused = component => hasFocus(component.element);\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur,\n        isFocused: isFocused\n    });\n\n    const exhibit$4 = (base, focusConfig) => {\n      const mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$7(mod);\n    };\n    const events$c = focusConfig => derive$2([run$1(focus$4(), (component, simulatedEvent) => {\n        focus$2(component, focusConfig);\n        simulatedEvent.stop();\n      })].concat(focusConfig.stopMousedown ? [run$1(mousedown(), (_, simulatedEvent) => {\n        simulatedEvent.event.prevent();\n      })] : []));\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4,\n        events: events$c\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted('stopMousedown', false),\n      defaulted('ignore', false)\n    ];\n\n    const Focusing = create$4({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    const SetupBehaviourCellState = initialState => {\n      const init = () => {\n        const cell = Cell(initialState);\n        const get = () => cell.get();\n        const set = newState => cell.set(newState);\n        const clear = () => cell.set(initialState);\n        const readState = () => cell.get();\n        return {\n          get,\n          set,\n          clear,\n          readState\n        };\n      };\n      return { init };\n    };\n\n    const updateAriaState = (component, toggleConfig, toggleState) => {\n      const ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    const updateClass = (component, toggleConfig, toggleState) => {\n      toggleConfig.toggleClass.each(toggleClass => {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$2(component.element, toggleClass);\n        }\n      });\n    };\n    const set$2 = (component, toggleConfig, toggleState, state) => {\n      const initialState = toggleState.get();\n      toggleState.set(state);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n      if (initialState !== state) {\n        toggleConfig.onToggled(component, state);\n      }\n    };\n    const toggle$2 = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    const on = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, true);\n    };\n    const off = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, false);\n    };\n    const isOn = (component, toggleConfig, toggleState) => toggleState.get();\n    const onLoad = (component, toggleConfig, toggleState) => {\n      set$2(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        toggle: toggle$2,\n        isOn: isOn,\n        on: on,\n        off: off,\n        set: set$2\n    });\n\n    const exhibit$3 = () => nu$7({});\n    const events$b = (toggleConfig, toggleState) => {\n      const execute = executeEvent(toggleConfig, toggleState, toggle$2);\n      const load = loadEvent(toggleConfig, toggleState, onLoad);\n      return derive$2(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$b\n    });\n\n    const updatePressed = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    const updateSelected = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-selected', status);\n    };\n    const updateChecked = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-checked', status);\n    };\n    const updateExpanded = (component, ariaInfo, status) => {\n      set$9(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted('selected', false),\n      option$3('toggleClass'),\n      defaulted('toggleOnExecute', true),\n      onHandler('onToggled'),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted('syncWithExpanded', false),\n          output$1('update', updatePressed)\n        ],\n        checked: [output$1('update', updateChecked)],\n        expanded: [output$1('update', updateExpanded)],\n        selected: [output$1('update', updateSelected)],\n        none: [output$1('update', noop)]\n      }))\n    ];\n\n    const Toggling = create$4({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    const pointerEvents = () => {\n      const onClick = (component, simulatedEvent) => {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    const events$a = optAction => {\n      const executeHandler = action => runOnExecute$1((component, simulatedEvent) => {\n        action(component);\n        simulatedEvent.stop();\n      });\n      return derive$2(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    const hoverEvent = 'alloy.item-hover';\n    const focusEvent = 'alloy.item-focus';\n    const toggledEvent = 'alloy.item-toggled';\n    const onHover = item => {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item });\n      }\n    };\n    const onFocus$1 = item => {\n      emitWith(item, focusEvent, { item });\n    };\n    const onToggled = (item, state) => {\n      emitWith(item, toggledEvent, {\n        item,\n        state\n      });\n    };\n    const hover = constant$1(hoverEvent);\n    const focus$1 = constant$1(focusEvent);\n    const toggled = constant$1(toggledEvent);\n\n    const getItemRole = detail => detail.toggling.map(toggling => toggling.exclusive ? 'menuitemradio' : 'menuitemcheckbox').getOr('menuitem');\n    const getTogglingSpec = tConfig => ({\n      aria: { mode: 'checked' },\n      ...filter$1(tConfig, (_value, name) => name !== 'exclusive'),\n      onToggled: (component, state) => {\n        if (isFunction(tConfig.onToggled)) {\n          tConfig.onToggled(component, state);\n        }\n        onToggled(component, state);\n      }\n    });\n    const builder$2 = detail => ({\n      dom: detail.dom,\n      domModification: {\n        ...detail.domModification,\n        attributes: {\n          'role': getItemRole(detail),\n          ...detail.domModification.attributes,\n          'aria-haspopup': detail.hasSubmenu,\n          ...detail.hasSubmenu ? { 'aria-expanded': false } : {}\n        }\n      },\n      behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n        detail.toggling.fold(Toggling.revoke, tConfig => Toggling.config(getTogglingSpec(tConfig))),\n        Focusing.config({\n          ignore: detail.ignoreFocus,\n          stopMousedown: detail.ignoreFocus,\n          onFocus: component => {\n            onFocus$1(component);\n          }\n        }),\n        Keying.config({ mode: 'execution' }),\n        Representing.config({\n          store: {\n            mode: 'memory',\n            initialValue: detail.data\n          }\n        }),\n        config('item-type-events', [\n          ...pointerEvents(),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), Focusing.focus)\n        ])\n      ]),\n      components: detail.components,\n      eventOrder: detail.eventOrder\n    });\n    const schema$p = [\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('hasSubmenu', false),\n      option$3('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted('ignoreFocus', false),\n      defaulted('domModification', {}),\n      output$1('builder', builder$2),\n      defaulted('eventOrder', {})\n    ];\n\n    const builder$1 = detail => ({\n      dom: detail.dom,\n      components: detail.components,\n      events: derive$2([stopper(focusItem())])\n    });\n    const schema$o = [\n      required$1('dom'),\n      required$1('components'),\n      output$1('builder', builder$1)\n    ];\n\n    const owner$2 = constant$1('item-widget');\n    const parts$h = constant$1([required({\n        name: 'widget',\n        overrides: detail => {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: _component => {\n                    return detail.data;\n                  },\n                  setValue: noop\n                }\n              })])\n          };\n        }\n      })]);\n\n    const builder = detail => {\n      const subs = substitutes(owner$2(), detail, parts$h());\n      const components = components$1(owner$2(), detail, subs.internals());\n      const focusWidget = component => getPart(component, detail, 'widget').map(widget => {\n        Keying.focusIn(widget);\n        return widget;\n      });\n      const onHorizontalArrow = (component, simulatedEvent) => inside(simulatedEvent.event.target) ? Optional.none() : (() => {\n        if (detail.autofocus) {\n          simulatedEvent.setSource(component.element);\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      })();\n      return {\n        dom: detail.dom,\n        components,\n        domModification: detail.domModification,\n        events: derive$2([\n          runOnExecute$1((component, simulatedEvent) => {\n            focusWidget(component).each(_widget => {\n              simulatedEvent.stop();\n            });\n          }),\n          run$1(mouseover(), onHover),\n          run$1(focusItem(), (component, _simulatedEvent) => {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: component => {\n              onFocus$1(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? component => {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: (component, simulatedEvent) => {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    const schema$n = [\n      required$1('uid'),\n      required$1('data'),\n      required$1('components'),\n      required$1('dom'),\n      defaulted('autofocus', false),\n      defaulted('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted('domModification', {}),\n      defaultUidsSchema(parts$h()),\n      output$1('builder', builder)\n    ];\n\n    const itemSchema$2 = choose$1('type', {\n      widget: schema$n,\n      item: schema$p,\n      separator: schema$o\n    });\n    const configureGrid = (detail, movementInfo) => ({\n      mode: 'flatgrid',\n      selector: '.' + detail.markers.item,\n      initSize: {\n        numColumns: movementInfo.initSize.numColumns,\n        numRows: movementInfo.initSize.numRows\n      },\n      focusManager: detail.focusManager\n    });\n    const configureMatrix = (detail, movementInfo) => ({\n      mode: 'matrix',\n      selectors: {\n        row: movementInfo.rowSelector,\n        cell: '.' + detail.markers.item\n      },\n      previousSelector: movementInfo.previousSelector,\n      focusManager: detail.focusManager\n    });\n    const configureMenu = (detail, movementInfo) => ({\n      mode: 'menu',\n      selector: '.' + detail.markers.item,\n      moveOnTab: movementInfo.moveOnTab,\n      focusManager: detail.focusManager\n    });\n    const parts$g = constant$1([group({\n        factory: {\n          sketch: spec => {\n            const itemInfo = asRawOrDie$1('menu.spec item', itemSchema$2, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: (detail, u) => {\n          return has$2(u, 'uid') ? u : {\n            ...u,\n            uid: generate$5('item')\n          };\n        },\n        overrides: (detail, u) => {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    const schema$m = constant$1([\n      required$1('value'),\n      required$1('items'),\n      required$1('dom'),\n      required$1('components'),\n      defaulted('eventOrder', {}),\n      field('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output$1('config', configureGrid)\n        ],\n        matrix: [\n          output$1('config', configureMatrix),\n          required$1('rowSelector'),\n          defaulted('previousSelector', Optional.none)\n        ],\n        menu: [\n          defaulted('moveOnTab', true),\n          output$1('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted('fakeFocus', false),\n      defaulted('focusManager', dom$2()),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ]);\n\n    const focus = constant$1('alloy.menu-focus');\n\n    const deselectOtherRadioItems = (menu, item) => {\n      const checkedRadioItems = descendants(menu.element, '[role=\"menuitemradio\"][aria-checked=\"true\"]');\n      each$1(checkedRadioItems, ele => {\n        if (!eq(ele, item.element)) {\n          menu.getSystem().getByDom(ele).each(c => {\n            Toggling.off(c);\n          });\n        }\n      });\n    };\n    const make$7 = (detail, components, _spec, _externals) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      markers: detail.markers,\n      behaviours: augment(detail.menuBehaviours, [\n        Highlighting.config({\n          highlightClass: detail.markers.selectedItem,\n          itemClass: detail.markers.item,\n          onHighlight: detail.onHighlight,\n          onDehighlight: detail.onDehighlight\n        }),\n        Representing.config({\n          store: {\n            mode: 'memory',\n            initialValue: detail.value\n          }\n        }),\n        Composing.config({ find: Optional.some }),\n        Keying.config(detail.movement.config(detail, detail.movement))\n      ]),\n      events: derive$2([\n        run$1(focus$1(), (menu, simulatedEvent) => {\n          const event = simulatedEvent.event;\n          menu.getSystem().getByDom(event.target).each(item => {\n            Highlighting.highlight(menu, item);\n            simulatedEvent.stop();\n            emitWith(menu, focus(), {\n              menu,\n              item\n            });\n          });\n        }),\n        run$1(hover(), (menu, simulatedEvent) => {\n          const item = simulatedEvent.event.item;\n          Highlighting.highlight(menu, item);\n        }),\n        run$1(toggled(), (menu, simulatedEvent) => {\n          const {item, state} = simulatedEvent.event;\n          if (state && get$f(item.element, 'role') === 'menuitemradio') {\n            deselectOtherRadioItems(menu, item);\n          }\n        })\n      ]),\n      components,\n      eventOrder: detail.eventOrder,\n      domModification: { attributes: { role: 'menu' } }\n    });\n\n    const Menu = composite({\n      name: 'Menu',\n      configFields: schema$m(),\n      partFields: parts$g(),\n      factory: make$7\n    });\n\n    const transpose$1 = obj => tupleMap(obj, (v, k) => ({\n      k: v,\n      v: k\n    }));\n    const trace = (items, byItem, byMenu, finish) => get$g(byMenu, finish).bind(triggerItem => get$g(items, triggerItem).bind(triggerMenu => {\n      const rest = trace(items, byItem, byMenu, triggerMenu);\n      return Optional.some([triggerMenu].concat(rest));\n    })).getOr([]);\n    const generate$2 = (menus, expansions) => {\n      const items = {};\n      each(menus, (menuItems, menu) => {\n        each$1(menuItems, item => {\n          items[item] = menu;\n        });\n      });\n      const byItem = expansions;\n      const byMenu = transpose$1(expansions);\n      const menuPaths = map$1(byMenu, (_triggerItem, submenu) => [submenu].concat(trace(items, byItem, byMenu, submenu)));\n      return map$1(items, menu => get$g(menuPaths, menu).getOr([menu]));\n    };\n\n    const init$c = () => {\n      const expansions = Cell({});\n      const menus = Cell({});\n      const paths = Cell({});\n      const primary = value$2();\n      const directory = Cell({});\n      const clear = () => {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.clear();\n      };\n      const isClear = () => primary.get().isNone();\n      const setMenuBuilt = (menuName, built) => {\n        menus.set({\n          ...menus.get(),\n          [menuName]: {\n            type: 'prepared',\n            menu: built\n          }\n        });\n      };\n      const setContents = (sPrimary, sMenus, sExpansions, dir) => {\n        primary.set(sPrimary);\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        const sPaths = generate$2(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      const getTriggeringItem = menuValue => find$4(expansions.get(), (v, _k) => v === menuValue);\n      const getTriggerData = (menuValue, getItemByValue, path) => getPreparedMenu(menuValue).bind(menu => getTriggeringItem(menuValue).bind(triggeringItemValue => getItemByValue(triggeringItemValue).map(triggeredItem => ({\n        triggeredMenu: menu,\n        triggeringItem: triggeredItem,\n        triggeringPath: path\n      }))));\n      const getTriggeringPath = (itemValue, getItemByValue) => {\n        const extraPath = filter$2(lookupItem(itemValue).toArray(), menuValue => getPreparedMenu(menuValue).isSome());\n        return get$g(paths.get(), itemValue).bind(path => {\n          const revPath = reverse(extraPath.concat(path));\n          const triggers = bind$3(revPath, (menuValue, menuIndex) => getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(() => is$1(primary.get(), menuValue) ? [] : [Optional.none()], data => [Optional.some(data)]));\n          return sequence(triggers);\n        });\n      };\n      const expand = itemValue => get$g(expansions.get(), itemValue).map(menu => {\n        const current = get$g(paths.get(), itemValue).getOr([]);\n        return [menu].concat(current);\n      });\n      const collapse = itemValue => get$g(paths.get(), itemValue).bind(path => path.length > 1 ? Optional.some(path.slice(1)) : Optional.none());\n      const refresh = itemValue => get$g(paths.get(), itemValue);\n      const getPreparedMenu = menuValue => lookupMenu(menuValue).bind(extractPreparedMenu);\n      const lookupMenu = menuValue => get$g(menus.get(), menuValue);\n      const lookupItem = itemValue => get$g(expansions.get(), itemValue);\n      const otherMenus = path => {\n        const menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      const getPrimary = () => primary.get().bind(getPreparedMenu);\n      const getMenus = () => menus.get();\n      return {\n        setMenuBuilt,\n        setContents,\n        expand,\n        refresh,\n        collapse,\n        lookupMenu,\n        lookupItem,\n        otherMenus,\n        getPrimary,\n        getMenus,\n        clear,\n        isClear,\n        getTriggeringPath\n      };\n    };\n    const extractPreparedMenu = prep => prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    const LayeredState = {\n      init: init$c,\n      extractPreparedMenu\n    };\n\n    const onMenuItemHighlightedEvent = generate$6('tiered-menu-item-highlight');\n    const onMenuItemDehighlightedEvent = generate$6('tiered-menu-item-dehighlight');\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightMenuAndItem'] = 0] = 'HighlightMenuAndItem';\n      HighlightOnOpen[HighlightOnOpen['HighlightJustMenu'] = 1] = 'HighlightJustMenu';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 2] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n\n    const make$6 = (detail, _rawUiSpec) => {\n      const submenuParentItems = value$2();\n      const buildMenus = (container, primaryName, menus) => map$1(menus, (spec, name) => {\n        const makeSketch = () => Menu.sketch({\n          ...spec,\n          value: name,\n          markers: detail.markers,\n          fakeFocus: detail.fakeFocus,\n          onHighlight: (menuComp, itemComp) => {\n            const highlightData = {\n              menuComp,\n              itemComp\n            };\n            emitWith(menuComp, onMenuItemHighlightedEvent, highlightData);\n          },\n          onDehighlight: (menuComp, itemComp) => {\n            const dehighlightData = {\n              menuComp,\n              itemComp\n            };\n            emitWith(menuComp, onMenuItemDehighlightedEvent, dehighlightData);\n          },\n          focusManager: detail.fakeFocus ? highlights() : dom$2()\n        });\n        return name === primaryName ? {\n          type: 'prepared',\n          menu: container.getSystem().build(makeSketch())\n        } : {\n          type: 'notbuilt',\n          nbMenu: makeSketch\n        };\n      });\n      const layeredState = LayeredState.init();\n      const setup = container => {\n        const componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        const directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      const getItemValue = item => Representing.getValue(item).value;\n      const getItemByValue = (_container, menus, itemValue) => findMap(menus, menu => {\n        if (!menu.getSystem().isConnected()) {\n          return Optional.none();\n        }\n        const candidates = Highlighting.getCandidates(menu);\n        return find$5(candidates, c => getItemValue(c) === itemValue);\n      });\n      const toDirectory = _container => map$1(detail.data.menus, (data, _menuName) => bind$3(data.items, item => item.type === 'separator' ? [] : [item.data.value]));\n      const setActiveMenu = Highlighting.highlight;\n      const setActiveMenuAndItem = (container, menu) => {\n        setActiveMenu(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(() => Highlighting.getFirst(menu)).each(item => {\n          if (detail.fakeFocus) {\n            Highlighting.highlight(menu, item);\n          } else {\n            dispatch(container, item.element, focusItem());\n          }\n        });\n      };\n      const getMenus = (state, menuValues) => cat(map$2(menuValues, mv => state.lookupMenu(mv).bind(prep => prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none())));\n      const closeOthers = (container, state, path) => {\n        const others = getMenus(state, state.otherMenus(path));\n        each$1(others, o => {\n          remove$1(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      const getSubmenuParents = container => submenuParentItems.get().getOrThunk(() => {\n        const r = {};\n        const items = descendants(container.element, `.${ detail.markers.item }`);\n        const parentItems = filter$2(items, i => get$f(i, 'aria-haspopup') === 'true');\n        each$1(parentItems, i => {\n          container.getSystem().getByDom(i).each(itemComp => {\n            const key = getItemValue(itemComp);\n            r[key] = itemComp;\n          });\n        });\n        submenuParentItems.set(r);\n        return r;\n      });\n      const updateAriaExpansions = (container, path) => {\n        const parentItems = getSubmenuParents(container);\n        each(parentItems, (v, k) => {\n          const expanded = contains$2(path, k);\n          set$9(v.element, 'aria-expanded', expanded);\n        });\n      };\n      const updateMenuPath = (container, state, path) => Optional.from(path[0]).bind(latestMenuName => state.lookupMenu(latestMenuName).bind(menuPrep => {\n        if (menuPrep.type === 'notbuilt') {\n          return Optional.none();\n        } else {\n          const activeMenu = menuPrep.menu;\n          const rest = getMenus(state, path.slice(1));\n          each$1(rest, r => {\n            add$2(r.element, detail.markers.backgroundMenu);\n          });\n          if (!inBody(activeMenu.element)) {\n            Replacing.append(container, premade(activeMenu));\n          }\n          remove$1(activeMenu.element, [detail.markers.backgroundMenu]);\n          setActiveMenuAndItem(container, activeMenu);\n          closeOthers(container, state, path);\n          return Optional.some(activeMenu);\n        }\n      }));\n      let ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      const buildIfRequired = (container, menuName, menuPrep) => {\n        if (menuPrep.type === 'notbuilt') {\n          const menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      const expandRight = (container, item, decision = ExpandHighlightDecision.HighlightSubmenu) => {\n        if (item.hasConfigured(Disabling) && Disabling.isDisabled(item)) {\n          return Optional.some(item);\n        } else {\n          const value = getItemValue(item);\n          return layeredState.expand(value).bind(path => {\n            updateAriaExpansions(container, path);\n            return Optional.from(path[0]).bind(menuName => layeredState.lookupMenu(menuName).bind(activeMenuPrep => {\n              const activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Optional.some(item);\n              }\n            }));\n          });\n        }\n      };\n      const collapseLeft = (container, item) => {\n        const value = getItemValue(item);\n        return layeredState.collapse(value).bind(path => {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(activeMenu => {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      const updateView = (container, item) => {\n        const value = getItemValue(item);\n        return layeredState.refresh(value).bind(path => {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      const onRight = (container, item) => inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      const onLeft = (container, item) => inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      const onEscape = (container, item) => collapseLeft(container, item).orThunk(() => detail.onEscape(container, item).map(() => container));\n      const keyOnItem = f => (container, simulatedEvent) => {\n        return closest$1(simulatedEvent.getSource(), `.${ detail.markers.item }`).bind(target => container.getSystem().getByDom(target).toOptional().bind(item => f(container, item).map(always)));\n      };\n      const events = derive$2([\n        run$1(focus(), (tmenu, simulatedEvent) => {\n          const item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(() => {\n            const menu = simulatedEvent.event.menu;\n            Highlighting.highlight(tmenu, menu);\n            const value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(path => closeOthers(tmenu, layeredState, path));\n          });\n        }),\n        runOnExecute$1((component, simulatedEvent) => {\n          const target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(item => {\n            const itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(() => {\n              detail.onExecute(component, item);\n            }, noop);\n          });\n        }),\n        runOnAttached((container, _simulatedEvent) => {\n          setup(container).each(primary => {\n            Replacing.append(container, premade(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightOnOpen === HighlightOnOpen.HighlightMenuAndItem) {\n              setActiveMenuAndItem(container, primary);\n            } else if (detail.highlightOnOpen === HighlightOnOpen.HighlightJustMenu) {\n              setActiveMenu(container, primary);\n            }\n          });\n        }),\n        run$1(onMenuItemHighlightedEvent, (tmenuComp, se) => {\n          detail.onHighlightItem(tmenuComp, se.event.menuComp, se.event.itemComp);\n        }),\n        run$1(onMenuItemDehighlightedEvent, (tmenuComp, se) => {\n          detail.onDehighlightItem(tmenuComp, se.event.menuComp, se.event.itemComp);\n        }),\n        ...detail.navigateOnHover ? [run$1(hover(), (tmenu, simulatedEvent) => {\n            const item = simulatedEvent.event.item;\n            updateView(tmenu, item);\n            expandRight(tmenu, item, ExpandHighlightDecision.HighlightParent);\n            detail.onHover(tmenu, item);\n          })] : []\n      ]);\n      const getActiveItem = container => Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      const collapseMenuApi = container => {\n        getActiveItem(container).each(currentItem => {\n          collapseLeft(container, currentItem);\n        });\n      };\n      const highlightPrimary = container => {\n        layeredState.getPrimary().each(primary => {\n          setActiveMenuAndItem(container, primary);\n        });\n      };\n      const extractMenuFromContainer = container => Optional.from(container.components()[0]).filter(comp => get$f(comp.element, 'role') === 'menu');\n      const repositionMenus = container => {\n        const maybeActivePrimary = layeredState.getPrimary().bind(primary => getActiveItem(container).bind(currentItem => {\n          const itemValue = getItemValue(currentItem);\n          const allMenus = values(layeredState.getMenus());\n          const preparedMenus = cat(map$2(allMenus, LayeredState.extractPreparedMenu));\n          return layeredState.getTriggeringPath(itemValue, v => getItemByValue(container, preparedMenus, v));\n        }).map(triggeringPath => ({\n          primary,\n          triggeringPath\n        })));\n        maybeActivePrimary.fold(() => {\n          extractMenuFromContainer(container).each(primaryMenu => {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, ({primary, triggeringPath}) => {\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      const apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary,\n        repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: (container, _keyInfo) => {\n              layeredState.getPrimary().each(primary => {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: container => {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis,\n        events\n      };\n    };\n    const collapseItem$1 = constant$1('collapse-item');\n\n    const tieredData = (primary, menus, expansions) => ({\n      primary,\n      menus,\n      expansions\n    });\n    const singleData = (name, menu) => ({\n      primary: name,\n      menus: wrap$1(name, menu),\n      expansions: {}\n    });\n    const collapseItem = text => ({\n      value: generate$6(collapseItem$1()),\n      meta: { text }\n    });\n    const tieredMenu = single({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted('highlightOnOpen', HighlightOnOpen.HighlightMenuAndItem),\n        requiredObjOf('data', [\n          required$1('primary'),\n          required$1('menus'),\n          required$1('expansions')\n        ]),\n        defaulted('fakeFocus', false),\n        onHandler('onHighlightItem'),\n        onHandler('onDehighlightItem'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        required$1('dom'),\n        defaulted('navigateOnHover', true),\n        defaulted('stayInDom', false),\n        field('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: (apis, tmenu) => {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: (apis, tmenu) => {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: (apis, tmenu) => {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$6,\n      extraApis: {\n        tieredData,\n        singleData,\n        collapseItem\n      }\n    });\n\n    const makeMenu = (detail, menuSandbox, placementSpec, menuSpec, getBounds) => {\n      const lazySink = () => detail.lazySink(menuSandbox);\n      const layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: () => belowOrAbove(),\n          onRtl: () => belowOrAboveRtl()\n        }\n      } : {};\n      const isFirstTierSubmenu = triggeringPaths => triggeringPaths.length === 2;\n      const getSubmenuLayouts = triggeringPaths => isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightOnOpen: menuSpec.menu.highlightOnOpen,\n        fakeFocus: menuSpec.menu.fakeFocus,\n        onEscape: () => {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(handler => handler(menuSandbox));\n          return Optional.some(true);\n        },\n        onExecute: () => {\n          return Optional.some(true);\n        },\n        onOpenMenu: (tmenu, menu) => {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), menu, placementSpec, getBounds());\n        },\n        onOpenSubmenu: (tmenu, item, submenu, triggeringPaths) => {\n          const sink = lazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: {\n              type: 'submenu',\n              item,\n              ...getSubmenuLayouts(triggeringPaths)\n            }\n          });\n        },\n        onRepositionMenu: (tmenu, primaryMenu, submenuTriggers) => {\n          const sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, primaryMenu, placementSpec, getBounds());\n          each$1(submenuTriggers, st => {\n            const submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: {\n                type: 'submenu',\n                item: st.triggeringItem,\n                ...submenuLayouts\n              }\n            });\n          });\n        }\n      });\n    };\n    const factory$o = (detail, spec) => {\n      const isPartOfRelated = (sandbox, queryElem) => {\n        const related = detail.getRelated(sandbox);\n        return related.exists(rel => isPartOf$1(rel, queryElem));\n      };\n      const setContent = (sandbox, thing) => {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      const showAt = (sandbox, thing, placementSpec) => {\n        const getBounds = Optional.none;\n        showWithinBounds(sandbox, thing, placementSpec, getBounds);\n      };\n      const showWithinBounds = (sandbox, thing, placementSpec, getBounds) => {\n        const sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, () => Positioning.positionWithinBounds(sink, sandbox, placementSpec, getBounds()));\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          config: placementSpec,\n          getBounds\n        }));\n      };\n      const showMenuAt = (sandbox, placementSpec, menuSpec) => {\n        showMenuWithinBounds(sandbox, placementSpec, menuSpec, Optional.none);\n      };\n      const showMenuWithinBounds = (sandbox, placementSpec, menuSpec, getBounds) => {\n        const menu = makeMenu(detail, sandbox, placementSpec, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu\n        }));\n      };\n      const hide = sandbox => {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      const getContent = sandbox => Sandboxing.getState(sandbox);\n      const reposition = sandbox => {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(state => {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(tieredMenu.repositionMenus);\n              break;\n            case 'position':\n              const sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, sandbox, state.config, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      const apis = {\n        setContent,\n        showAt,\n        showWithinBounds,\n        showMenuAt,\n        showMenuWithinBounds,\n        hide,\n        getContent,\n        reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: (sandbox, data, queryElem) => {\n              return isPartOf$1(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: sandbox => {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: sandbox => {\n              detail.onShow(sandbox);\n            },\n            onClose: sandbox => {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: {\n              ...receivingChannel$1({\n                isExtraPart: spec.isExtraPart,\n                ...detail.fireDismissalEventInstead.map(fe => ({ fireEventInstead: { event: fe.event } })).getOr({})\n              }),\n              ...receivingChannel({\n                ...detail.fireRepositionEventInstead.map(fe => ({ fireEventInstead: { event: fe.event } })).getOr({}),\n                doReposition: reposition\n              })\n            }\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis\n      };\n    };\n    const InlineView = single({\n      name: 'InlineView',\n      configFields: [\n        required$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted('event', repositionRequested())]),\n        defaulted('getRelated', Optional.none),\n        defaulted('isExtraPart', never),\n        defaulted('eventOrder', Optional.none)\n      ],\n      factory: factory$o,\n      apis: {\n        showAt: (apis, component, anchor, thing) => {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithinBounds: (apis, component, anchor, thing, bounds) => {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: (apis, component, anchor, menuSpec) => {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: (apis, component, anchor, menuSpec, bounds) => {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: (apis, component) => {\n          apis.hide(component);\n        },\n        isOpen: (apis, component) => apis.isOpen(component),\n        getContent: (apis, component) => apis.getContent(component),\n        setContent: (apis, component, thing) => {\n          apis.setContent(component, thing);\n        },\n        reposition: (apis, component) => {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    const factory$n = detail => {\n      const events = events$a(detail.action);\n      const tag = detail.dom.tag;\n      const lookupAttr = attr => get$g(detail.dom, 'attributes').bind(attrs => get$g(attrs, attr));\n      const getModAttributes = () => {\n        if (tag === 'button') {\n          const type = lookupAttr('type').getOr('button');\n          const roleAttrs = lookupAttr('role').map(role => ({ role })).getOr({});\n          return {\n            type,\n            ...roleAttrs\n          };\n        } else {\n          const role = detail.role.getOr(lookupAttr('role').getOr('button'));\n          return { role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    const Button = single({\n      name: 'Button',\n      factory: factory$n,\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('dom'),\n        defaulted('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option$3('action'),\n        option$3('role'),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    const getAttrs = elem => {\n      const attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, (b, attr) => {\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return {\n            ...b,\n            [attr.name]: attr.value\n          };\n        }\n      }, {});\n    };\n    const getClasses = elem => Array.prototype.slice.call(elem.dom.classList, 0);\n    const fromHtml = html => {\n      const elem = SugarElement.fromHtml(html);\n      const children$1 = children(elem);\n      const attrs = getAttrs(elem);\n      const classes = getClasses(elem);\n      const contents = children$1.length === 0 ? {} : { innerHtml: get$9(elem) };\n      return {\n        tag: name$3(elem),\n        classes,\n        attributes: attrs,\n        ...contents\n      };\n    };\n\n    const record = spec => {\n      const uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$5('memento');\n      const get = anyInSystem => anyInSystem.getSystem().getByUid(uid).getOrDie();\n      const getOpt = anyInSystem => anyInSystem.getSystem().getByUid(uid).toOptional();\n      const asSpec = () => ({\n        ...spec,\n        uid\n      });\n      return {\n        get,\n        getOpt,\n        asSpec\n      };\n    };\n\n    /*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */\n\n    const {\n      entries,\n      setPrototypeOf,\n      isFrozen,\n      getPrototypeOf,\n      getOwnPropertyDescriptor\n    } = Object;\n    let {\n      freeze,\n      seal,\n      create: create$1\n    } = Object; // eslint-disable-line import/no-mutable-exports\n    let {\n      apply,\n      construct\n    } = typeof Reflect !== 'undefined' && Reflect;\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!apply) {\n      apply = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return new Func(...args);\n      };\n    }\n    const arrayForEach = unapply(Array.prototype.forEach);\n    const arrayPop = unapply(Array.prototype.pop);\n    const arrayPush = unapply(Array.prototype.push);\n    const stringToLowerCase = unapply(String.prototype.toLowerCase);\n    const stringToString = unapply(String.prototype.toString);\n    const stringMatch = unapply(String.prototype.match);\n    const stringReplace = unapply(String.prototype.replace);\n    const stringIndexOf = unapply(String.prototype.indexOf);\n    const stringTrim = unapply(String.prototype.trim);\n    const objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n    const regExpTest = unapply(RegExp.prototype.test);\n    const typeErrorCreate = unconstruct(TypeError);\n\n    /**\n     * Creates a new function that calls the given function with a specified thisArg and arguments.\n     *\n     * @param {Function} func - The function to be wrapped and called.\n     * @returns {Function} A new function that calls the given function with a specified thisArg and arguments.\n     */\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply(func, thisArg, args);\n      };\n    }\n\n    /**\n     * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n     *\n     * @param {Function} func - The constructor function to be wrapped and called.\n     * @returns {Function} A new function that constructs an instance of the given constructor function with the provided arguments.\n     */\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n\n    /**\n     * Add properties to a lookup table\n     *\n     * @param {Object} set - The set to which elements will be added.\n     * @param {Array} array - The array containing elements to be added to the set.\n     * @param {Function} transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n     * @returns {Object} The modified set with added elements.\n     */\n    function addToSet(set, array) {\n      let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n      if (setPrototypeOf) {\n        // Make 'in' and truthy checks like Boolean(set.constructor)\n        // independent of any properties defined on Object.prototype.\n        // Prevent prototype setters from intercepting set as a this value.\n        setPrototypeOf(set, null);\n      }\n      let l = array.length;\n      while (l--) {\n        let element = array[l];\n        if (typeof element === 'string') {\n          const lcElement = transformCaseFunc(element);\n          if (lcElement !== element) {\n            // Config presets (e.g. tags.js, attrs.js) are immutable.\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n\n    /**\n     * Clean up an array to harden against CSPP\n     *\n     * @param {Array} array - The array to be cleaned.\n     * @returns {Array} The cleaned version of the array\n     */\n    function cleanArray(array) {\n      for (let index = 0; index < array.length; index++) {\n        const isPropertyExist = objectHasOwnProperty(array, index);\n        if (!isPropertyExist) {\n          array[index] = null;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Shallow clone an object\n     *\n     * @param {Object} object - The object to be cloned.\n     * @returns {Object} A new object that copies the original.\n     */\n    function clone(object) {\n      const newObject = create$1(null);\n      for (const [property, value] of entries(object)) {\n        const isPropertyExist = objectHasOwnProperty(object, property);\n        if (isPropertyExist) {\n          if (Array.isArray(value)) {\n            newObject[property] = cleanArray(value);\n          } else if (value && typeof value === 'object' && value.constructor === Object) {\n            newObject[property] = clone(value);\n          } else {\n            newObject[property] = value;\n          }\n        }\n      }\n      return newObject;\n    }\n\n    /**\n     * This method automatically checks if the prop is function or getter and behaves accordingly.\n     *\n     * @param {Object} object - The object to look up the getter function in its prototype chain.\n     * @param {String} prop - The property name for which to find the getter function.\n     * @returns {Function} The getter function found in the prototype chain or a fallback function.\n     */\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        const desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue() {\n        return null;\n      }\n      return fallbackValue;\n    }\n\n    const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n    // SVG\n    const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n    const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n    // List of SVG elements that are disallowed by default.\n    // We still need to know them so that we can do namespace\n    // checks properly in case one wants to add them to\n    // allow-list.\n    const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n    const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n\n    // Similarly to SVG, we want to know all MathML elements,\n    // even those that we disallow by default.\n    const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n    const text$1 = freeze(['#text']);\n\n    const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\n    const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n    const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n    const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n    // eslint-disable-next-line unicorn/better-regex\n    const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n    const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n    const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n    const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n    const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n    );\n    const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n    );\n    const DOCTYPE_NAME = seal(/^html$/i);\n    const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\n    var EXPRESSIONS = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      MUSTACHE_EXPR: MUSTACHE_EXPR,\n      ERB_EXPR: ERB_EXPR,\n      TMPLIT_EXPR: TMPLIT_EXPR,\n      DATA_ATTR: DATA_ATTR,\n      ARIA_ATTR: ARIA_ATTR,\n      IS_ALLOWED_URI: IS_ALLOWED_URI,\n      IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE: ATTR_WHITESPACE,\n      DOCTYPE_NAME: DOCTYPE_NAME,\n      CUSTOM_ELEMENT: CUSTOM_ELEMENT\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n    const NODE_TYPE = {\n      element: 1,\n      attribute: 2,\n      text: 3,\n      cdataSection: 4,\n      entityReference: 5,\n      // Deprecated\n      entityNode: 6,\n      // Deprecated\n      progressingInstruction: 7,\n      comment: 8,\n      document: 9,\n      documentType: 10,\n      documentFragment: 11,\n      notation: 12 // Deprecated\n    };\n    const getGlobal = function getGlobal() {\n      return typeof window === 'undefined' ? null : window;\n    };\n\n    /**\n     * Creates a no-op policy for internal use only.\n     * Don't export this function outside this module!\n     * @param {TrustedTypePolicyFactory} trustedTypes The policy factory.\n     * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n     * @return {TrustedTypePolicy} The policy created (or null, if Trusted Types\n     * are not supported or creating the policy failed).\n     */\n    const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n      if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n\n      // Allow the callers to control the unique policy name\n      // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n      // Policy creation with duplicate names throws in Trusted Types.\n      let suffix = null;\n      const ATTR_NAME = 'data-tt-policy-suffix';\n      if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n        suffix = purifyHostElement.getAttribute(ATTR_NAME);\n      }\n      const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML(html) {\n            return html;\n          },\n          createScriptURL(scriptUrl) {\n            return scriptUrl;\n          }\n        });\n      } catch (_) {\n        // Policy creation failed (most likely another DOMPurify script has\n        // already run). Skip creating the policy, as this will only cause errors\n        // if TT are enforced.\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      const DOMPurify = root => createDOMPurify(root);\n\n      /**\n       * Version label, exposed for easier checks\n       * if DOMPurify is up to date or not\n       */\n      DOMPurify.version = '3.1.7';\n\n      /**\n       * Array of elements that DOMPurify removed during sanitation.\n       * Empty if nothing was removed.\n       */\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document) {\n        // Not running in a browser, provide a factory function\n        // so that you can pass your own Window\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      let {\n        document\n      } = window;\n      const originalDocument = document;\n      const currentScript = originalDocument.currentScript;\n      const {\n        DocumentFragment,\n        HTMLTemplateElement,\n        Node,\n        Element,\n        NodeFilter,\n        NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n        HTMLFormElement,\n        DOMParser,\n        trustedTypes\n      } = window;\n      const ElementPrototype = Element.prototype;\n      const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      const remove = lookupGetter(ElementPrototype, 'remove');\n      const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n      // As per issue #47, the web-components registry is inherited by a\n      // new document created via createHTMLDocument. As per the spec\n      // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n      // a new empty registry is used when creating a template contents owner\n      // document, so we use that as our parent document to ensure nothing\n      // is inherited.\n      if (typeof HTMLTemplateElement === 'function') {\n        const template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      let trustedTypesPolicy;\n      let emptyHTML = '';\n      const {\n        implementation,\n        createNodeIterator,\n        createDocumentFragment,\n        getElementsByTagName\n      } = document;\n      const {\n        importNode\n      } = originalDocument;\n      let hooks = {};\n\n      /**\n       * Expose whether this browser supports running the full DOMPurify.\n       */\n      DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n      const {\n        MUSTACHE_EXPR,\n        ERB_EXPR,\n        TMPLIT_EXPR,\n        DATA_ATTR,\n        ARIA_ATTR,\n        IS_SCRIPT_OR_DATA,\n        ATTR_WHITESPACE,\n        CUSTOM_ELEMENT\n      } = EXPRESSIONS;\n      let {\n        IS_ALLOWED_URI: IS_ALLOWED_URI$1\n      } = EXPRESSIONS;\n\n      /**\n       * We consider the elements and attributes below to be safe. Ideally\n       * don't add any new ones but feel free to remove unwanted ones.\n       */\n\n      /* allowed element names */\n      let ALLOWED_TAGS = null;\n      const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text$1]);\n\n      /* Allowed attribute names */\n      let ALLOWED_ATTR = null;\n      const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n\n      /*\n       * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n       * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n       * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n       * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n       */\n      let CUSTOM_ELEMENT_HANDLING = Object.seal(create$1(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n\n      /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n      let FORBID_TAGS = null;\n\n      /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n      let FORBID_ATTR = null;\n\n      /* Decide if ARIA attributes are okay */\n      let ALLOW_ARIA_ATTR = true;\n\n      /* Decide if custom data attributes are okay */\n      let ALLOW_DATA_ATTR = true;\n\n      /* Decide if unknown protocols are okay */\n      let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n      /* Decide if self-closing tags in attributes are allowed.\n       * Usually removed due to a mXSS issue in jQuery 3.0 */\n      let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n      /* Output should be safe for common template engines.\n       * This means, DOMPurify removes data attributes, mustaches and ERB\n       */\n      let SAFE_FOR_TEMPLATES = false;\n\n      /* Output should be safe even for XML used within HTML and alike.\n       * This means, DOMPurify removes comments when containing risky content.\n       */\n      let SAFE_FOR_XML = true;\n\n      /* Decide if document with <html>... should be returned */\n      let WHOLE_DOCUMENT = false;\n\n      /* Track whether config is already set on this instance of DOMPurify. */\n      let SET_CONFIG = false;\n\n      /* Decide if all elements (e.g. style, script) must be children of\n       * document.body. By default, browsers might move them to document.head */\n      let FORCE_BODY = false;\n\n      /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n       * string (or a TrustedHTML object if Trusted Types are supported).\n       * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n       */\n      let RETURN_DOM = false;\n\n      /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n       * string  (or a TrustedHTML object if Trusted Types are supported) */\n      let RETURN_DOM_FRAGMENT = false;\n\n      /* Try to return a Trusted Type object instead of a string, return a string in\n       * case Trusted Types are not supported  */\n      let RETURN_TRUSTED_TYPE = false;\n\n      /* Output should be free from DOM clobbering attacks?\n       * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n       */\n      let SANITIZE_DOM = true;\n\n      /* Achieve full DOM Clobbering protection by isolating the namespace of named\n       * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n       *\n       * HTML/DOM spec rules that enable DOM Clobbering:\n       *   - Named Access on Window (§7.3.3)\n       *   - DOM Tree Accessors (§3.1.5)\n       *   - Form Element Parent-Child Relations (§4.10.3)\n       *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n       *   - HTMLCollection (§4.2.10.2)\n       *\n       * Namespace isolation is implemented by prefixing `id` and `name` attributes\n       * with a constant string, i.e., `user-content-`\n       */\n      let SANITIZE_NAMED_PROPS = false;\n      const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n      /* Keep element content when removing element? */\n      let KEEP_CONTENT = true;\n\n      /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n       * of importing it into a new Document and returning a sanitized copy */\n      let IN_PLACE = false;\n\n      /* Allow usage of profiles like html, svg and mathMl */\n      let USE_PROFILES = {};\n\n      /* Tags to ignore content of when KEEP_CONTENT is true */\n      let FORBID_CONTENTS = null;\n      const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n      /* Tags that are safe for data: URIs */\n      let DATA_URI_TAGS = null;\n      const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n      /* Attributes safe for values like \"javascript:\" */\n      let URI_SAFE_ATTRIBUTES = null;\n      const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n      const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      /* Document namespace */\n      let NAMESPACE = HTML_NAMESPACE;\n      let IS_EMPTY_INPUT = false;\n\n      /* Allowed XHTML+XML namespaces */\n      let ALLOWED_NAMESPACES = null;\n      const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n\n      /* Parsing of strict XHTML documents */\n      let PARSER_MEDIA_TYPE = null;\n      const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n      const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      let transformCaseFunc = null;\n\n      /* Keep a reference to config to pass to hooks */\n      let CONFIG = null;\n\n      /* Ideally, do not touch anything below this line */\n      /* ______________________________________________ */\n\n      const formElement = document.createElement('form');\n      const isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n\n      /**\n       * _parseConfig\n       *\n       * @param  {Object} cfg optional config literal\n       */\n      // eslint-disable-next-line complexity\n      const _parseConfig = function _parseConfig() {\n        let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n\n        /* Shield configuration object from tampering */\n        if (!cfg || typeof cfg !== 'object') {\n          cfg = {};\n        }\n\n        /* Shield configuration object from prototype pollution */\n        cfg = clone(cfg);\n        PARSER_MEDIA_TYPE =\n        // eslint-disable-next-line unicorn/prefer-includes\n        SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n\n        // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n\n        /* Set configuration parameters */\n        ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n        ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n        URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n        // eslint-disable-line indent\n        cfg.ADD_URI_SAFE_ATTR,\n        // eslint-disable-line indent\n        transformCaseFunc // eslint-disable-line indent\n        ) // eslint-disable-line indent\n        : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS),\n        // eslint-disable-line indent\n        cfg.ADD_DATA_URI_TAGS,\n        // eslint-disable-line indent\n        transformCaseFunc // eslint-disable-line indent\n        ) // eslint-disable-line indent\n        : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n        FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n        USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n        ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n        SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n        RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n        FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n        SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n        IN_PLACE = cfg.IN_PLACE || false; // Default false\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n\n        /* Parse profile info */\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, text$1);\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n\n        /* Merge configuration parameters */\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n        }\n\n        /* Add #text in case KEEP_CONTENT is set to true */\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n\n        /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n        }\n\n        /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (cfg.TRUSTED_TYPES_POLICY) {\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n          }\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n          }\n\n          // Overwrite existing TrustedTypes policy.\n          trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n          // Sign local variables required by `sanitize`.\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        } else {\n          // Uninitialized policy, attempt to initialize the internal dompurify policy.\n          if (trustedTypesPolicy === undefined) {\n            trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n          }\n\n          // If creating the internal policy succeeded sign internal variables.\n          if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n            emptyHTML = trustedTypesPolicy.createHTML('');\n          }\n        }\n\n        // Prevent further manipulation of configuration.\n        // Not available in IE8, Safari 5, etc.\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n      const HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n      // Certain elements are allowed in both SVG and HTML\n      // namespace. We need to specify them explicitly\n      // so that they don't get erroneously deleted from\n      // HTML namespace.\n      const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n      /* Keep track of all possible SVG and MathML tags\n       * so that we can perform the namespace checks\n       * correctly. */\n      const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n      const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n\n      /**\n       * @param  {Element} element a DOM element whose namespace is being checked\n       * @returns {boolean} Return false if the element has a\n       *  namespace that a spec-compliant parser would never\n       *  return. Return true otherwise.\n       */\n      const _checkValidNamespace = function _checkValidNamespace(element) {\n        let parent = getParentNode(element);\n\n        // In JSDOM, if we're inside shadow DOM, then parentNode\n        // can be null. We just simulate parent in this case.\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        const tagName = stringToLowerCase(element.tagName);\n        const parentTagName = stringToLowerCase(parent.tagName);\n        if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return false;\n        }\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          // The only way to switch from HTML namespace to SVG\n          // is via <svg>. If it happens via any other tag, then\n          // it should be killed.\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n\n          // The only way to switch from MathML to SVG is via`\n          // svg if parent is either <annotation-xml> or MathML\n          // text integration points.\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n\n          // We only allow elements that are defined in SVG\n          // spec. All others are disallowed in SVG namespace.\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          // The only way to switch from HTML namespace to MathML\n          // is via <math>. If it happens via any other tag, then\n          // it should be killed.\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n\n          // The only way to switch from SVG to MathML is via\n          // <math> and HTML integration points\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n\n          // We only allow elements that are defined in MathML\n          // spec. All others are disallowed in MathML namespace.\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          // The only way to switch from SVG to HTML is via\n          // HTML integration points, and from MathML to HTML\n          // is via MathML text integration points\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n\n          // We disallow tags that are specific for MathML\n          // or SVG and should never appear in HTML namespace\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n\n        // For XHTML and XML documents that support custom namespaces\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return true;\n        }\n\n        // The code should never reach this place (this means\n        // that the element somehow got namespace that is not\n        // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n        // Return false just in case.\n        return false;\n      };\n\n      /**\n       * _forceRemove\n       *\n       * @param  {Node} node a DOM node\n       */\n      const _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, {\n          element: node\n        });\n        try {\n          // eslint-disable-next-line unicorn/prefer-dom-node-remove\n          getParentNode(node).removeChild(node);\n        } catch (_) {\n          remove(node);\n        }\n      };\n\n      /**\n       * _removeAttribute\n       *\n       * @param  {String} name an Attribute name\n       * @param  {Node} node a DOM node\n       */\n      const _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n\n        // We void attribute values for unremovable \"is\"\" attributes\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {}\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {}\n          }\n        }\n      };\n\n      /**\n       * _initDocument\n       *\n       * @param  {String} dirty a string of dirty markup\n       * @return {Document} a DOM, filled with the dirty markup\n       */\n      const _initDocument = function _initDocument(dirty) {\n        /* Create a HTML document */\n        let doc = null;\n        let leadingWhitespace = null;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n          const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n          // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        /*\n         * Use the DOMParser API by default, fallback later if needs be\n         * DOMParser not work for svg when has multiple root element.\n         */\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {}\n        }\n\n        /* Use createHTMLDocument in case DOMParser is not available */\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n          } catch (_) {\n            // Syntax error if dirtyPayload is invalid xml\n          }\n        }\n        const body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n\n        /* Work on whole document or just its body */\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n\n      /**\n       * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n       *\n       * @param  {Node} root The root element or node to start traversing on.\n       * @return {NodeIterator} The created NodeIterator\n       */\n      const _createNodeIterator = function _createNodeIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root,\n        // eslint-disable-next-line no-bitwise\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n      };\n\n      /**\n       * _isClobbered\n       *\n       * @param  {Node} elm element to check for clobbering attacks\n       * @return {Boolean} true if clobbered, false if safe\n       */\n      const _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n      };\n\n      /**\n       * Checks whether the given object is a DOM node.\n       *\n       * @param  {Node} object object to check whether it's a DOM node\n       * @return {Boolean} true is object is a DOM node\n       */\n      const _isNode = function _isNode(object) {\n        return typeof Node === 'function' && object instanceof Node;\n      };\n\n      /**\n       * _executeHook\n       * Execute user configurable hooks\n       *\n       * @param  {String} entryPoint  Name of the hook's entry point\n       * @param  {Node} currentNode node to work on with the hook\n       * @param  {Object} data additional hook parameters\n       */\n      const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], hook => {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n\n      /**\n       * _sanitizeElements\n       *\n       * @protect nodeName\n       * @protect textContent\n       * @protect removeChild\n       *\n       * @param   {Node} currentNode to check for permission to exist\n       * @return  {Boolean} true if node was killed, false if left alive\n       */\n      const _sanitizeElements = function _sanitizeElements(currentNode) {\n        let content = null;\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeElements', currentNode, null);\n\n        /* Check if element is clobbered or can clobber */\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Now let's check the element's type and name */\n        const tagName = transformCaseFunc(currentNode.nodeName);\n\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n\n        /* Detect mXSS attempts abusing namespace confusion */\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Remove any occurrence of processing instructions */\n        if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Remove any kind of possibly harmful comments */\n        if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Remove element if anything forbids its presence */\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          /* Check if we have a custom element to handle */\n          if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n              return false;\n            }\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n              return false;\n            }\n          }\n\n          /* Keep content except for bad-listed elements */\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              const childCount = childNodes.length;\n              for (let i = childCount - 1; i >= 0; --i) {\n                const childClone = cloneNode(childNodes[i], true);\n                childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n                parentNode.insertBefore(childClone, getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Check whether element has a valid namespace */\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Make sure that older browsers don't get fallback-tag mXSS */\n        if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Sanitize element content to be template-safe */\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n          /* Get the element's text content */\n          content = currentNode.textContent;\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            content = stringReplace(content, expr, ' ');\n          });\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, {\n              element: currentNode.cloneNode()\n            });\n            currentNode.textContent = content;\n          }\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n\n      /**\n       * _isValidAttribute\n       *\n       * @param  {string} lcTag Lowercase tag name of containing element.\n       * @param  {string} lcName Lowercase attribute name.\n       * @param  {string} value Attribute value.\n       * @return {Boolean} Returns true if `value` is valid, otherwise false.\n       */\n      // eslint-disable-next-line complexity\n      const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        /* Make sure attribute cannot clobber */\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n\n        /* Allow valid data-* attributes: At least one character after \"-\"\n            (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n            XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n            We don't need to check the value; it's always URI safe. */\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (\n          // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n          // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n          // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n          _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n          // Alternative, second condition checks if it's an `is`-attribute, AND\n          // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n          lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n            return false;\n          }\n          /* Check value is safe. First, is attr inert? If so, is safe */\n        } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n          return false;\n        } else ;\n        return true;\n      };\n\n      /**\n       * _isBasicCustomElement\n       * checks if at least one dash is included in tagName, and it's not the first char\n       * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n       *\n       * @param {string} tagName name of the tag of the node to sanitize\n       * @returns {boolean} Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n       */\n      const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n        return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n      };\n\n      /**\n       * _sanitizeAttributes\n       *\n       * @protect attributes\n       * @protect nodeName\n       * @protect removeAttribute\n       * @protect setAttribute\n       *\n       * @param  {Node} currentNode to sanitize\n       */\n      const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        const {\n          attributes\n        } = currentNode;\n\n        /* Check if we have attributes; if not we might have a text node */\n        if (!attributes) {\n          return;\n        }\n        const hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        let l = attributes.length;\n\n        /* Go backwards over all attributes; safely remove bad ones */\n        while (l--) {\n          const attr = attributes[l];\n          const {\n            name,\n            namespaceURI,\n            value: attrValue\n          } = attr;\n          const lcName = transformCaseFunc(name);\n          let value = name === 'value' ? attrValue : stringTrim(attrValue);\n          const initValue = value;\n\n          /* Execute a hook if present */\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n\n          /* Did the hooks approve of the attribute? */\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n\n          /* Did the hooks approve of the attribute? */\n          if (!hookEvent.keepAttr) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Work around a security issue in jQuery 3.0 */\n          if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Sanitize attribute content to be template-safe */\n          if (SAFE_FOR_TEMPLATES) {\n            arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n              value = stringReplace(value, expr, ' ');\n            });\n          }\n\n          /* Is `value` valid for this attribute? */\n          const lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Full DOM Clobbering protection via namespace isolation,\n           * Prefix id and name attributes with `user-content-`\n           */\n          if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n            // Remove the attribute with this value\n            _removeAttribute(name, currentNode);\n\n            // Prefix the value and later re-create the attribute with the sanitized value\n            value = SANITIZE_NAMED_PROPS_PREFIX + value;\n          }\n\n          /* Work around a security issue with comments inside attributes */\n          if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Handle attributes that require Trusted Types */\n          if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n            if (namespaceURI) ; else {\n              switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n                case 'TrustedHTML':\n                  {\n                    value = trustedTypesPolicy.createHTML(value);\n                    break;\n                  }\n                case 'TrustedScriptURL':\n                  {\n                    value = trustedTypesPolicy.createScriptURL(value);\n                    break;\n                  }\n              }\n            }\n          }\n\n          /* Handle invalid data-* attribute set by try-catching it */\n          if (value !== initValue) {\n            try {\n              if (namespaceURI) {\n                currentNode.setAttributeNS(namespaceURI, name, value);\n              } else {\n                /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n                currentNode.setAttribute(name, value);\n              }\n              if (_isClobbered(currentNode)) {\n                _forceRemove(currentNode);\n              } else {\n                arrayPop(DOMPurify.removed);\n              }\n            } catch (_) {}\n          }\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n\n      /**\n       * _sanitizeShadowDOM\n       *\n       * @param  {DocumentFragment} fragment to iterate over recursively\n       */\n      const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        let shadowNode = null;\n        const shadowIterator = _createNodeIterator(fragment);\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          /* Execute a hook if present */\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n          /* Sanitize tags and elements */\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n\n          /* Deep shadow DOM detected */\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n\n          /* Check attributes, sanitize if necessary */\n          _sanitizeAttributes(shadowNode);\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n\n      /**\n       * Sanitize\n       * Public method providing core sanitation functionality\n       *\n       * @param {String|Node} dirty string or DOM node\n       * @param {Object} cfg object\n       */\n      // eslint-disable-next-line complexity\n      DOMPurify.sanitize = function (dirty) {\n        let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        let body = null;\n        let importedNode = null;\n        let currentNode = null;\n        let returnNode = null;\n        /* Make sure we have a string to sanitize.\n          DO NOT return early, as this will return the wrong type if\n          the user has requested a DOM object rather than a string */\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n\n        /* Stringify, in case dirty is an object */\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString === 'function') {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          } else {\n            throw typeErrorCreate('toString is not a function');\n          }\n        }\n\n        /* Return dirty HTML if DOMPurify cannot run */\n        if (!DOMPurify.isSupported) {\n          return dirty;\n        }\n\n        /* Assign config vars */\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n\n        /* Clean up removed elements */\n        DOMPurify.removed = [];\n\n        /* Check if dirty is correctly typed for IN_PLACE */\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          /* Do some early pre-sanitization to avoid unsafe root nodes */\n          if (dirty.nodeName) {\n            const tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          /* If dirty is a DOM element, append to an empty document to avoid\n             elements being stripped by the parser */\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n            /* Node is already a body, use as is */\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            body.appendChild(importedNode);\n          }\n        } else {\n          /* Exit directly if we have nothing to do */\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n          // eslint-disable-next-line unicorn/prefer-includes\n          dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n\n          /* Initialize the document to work on */\n          body = _initDocument(dirty);\n\n          /* Check we have a DOM node from the data */\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n\n        /* Remove first element node (ours) if FORCE_BODY is set */\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n\n        /* Get node iterator */\n        const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n        /* Now start iterating over the created document */\n        while (currentNode = nodeIterator.nextNode()) {\n          /* Sanitize tags and elements */\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n\n          /* Shadow DOM detected, sanitize it */\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n\n          /* Check attributes, sanitize if necessary */\n          _sanitizeAttributes(currentNode);\n        }\n\n        /* If we sanitized `dirty` in-place, return it. */\n        if (IN_PLACE) {\n          return dirty;\n        }\n\n        /* Return sanitized string or DOM */\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              // eslint-disable-next-line unicorn/prefer-dom-node-append\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n            /*\n              AdoptNode() is not used because internal state is not reset\n              (e.g. the past names map of a HTMLFormElement), this is safe\n              in theory but we would rather not risk another attack vector.\n              The state that is cloned by importNode() is explicitly defined\n              by the specs.\n            */\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n        /* Serialize doctype if allowed */\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n\n        /* Sanitize final string template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            serializedHTML = stringReplace(serializedHTML, expr, ' ');\n          });\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n\n      /**\n       * Public method to set the configuration once\n       * setConfig\n       *\n       * @param {Object} cfg configuration object\n       */\n      DOMPurify.setConfig = function () {\n        let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n\n      /**\n       * Public method to remove the configuration\n       * clearConfig\n       *\n       */\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n\n      /**\n       * Public method to check if an attribute value is valid.\n       * Uses last set config, if any. Otherwise, uses config defaults.\n       * isValidAttribute\n       *\n       * @param  {String} tag Tag name of containing element.\n       * @param  {String} attr Attribute name.\n       * @param  {String} value Attribute value.\n       * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n       */\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        /* Initialize shared config vars if necessary. */\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        const lcTag = transformCaseFunc(tag);\n        const lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n\n      /**\n       * AddHook\n       * Public method to add DOMPurify hooks\n       *\n       * @param {String} entryPoint entry point for the hook to add\n       * @param {Function} hookFunction function to execute\n       */\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n\n      /**\n       * RemoveHook\n       * Public method to remove a DOMPurify hook at a given entryPoint\n       * (pops it from the stack of hooks if more are present)\n       *\n       * @param {String} entryPoint entry point for the hook to remove\n       * @return {Function} removed(popped) hook\n       */\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n\n      /**\n       * RemoveHooks\n       * Public method to remove all DOMPurify hooks at a given entryPoint\n       *\n       * @param  {String} entryPoint entry point for the hooks to remove\n       */\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n\n      /**\n       * RemoveAllHooks\n       * Public method to remove all DOMPurify hooks\n       */\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    const sanitizeHtmlString = html => purify().sanitize(html);\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    const rtlTransform = {\n      'indent': true,\n      'outdent': true,\n      'table-insert-column-after': true,\n      'table-insert-column-before': true,\n      'paste-column-after': true,\n      'paste-column-before': true,\n      'unordered-list': true,\n      'list-bull-circle': true,\n      'list-bull-default': true,\n      'list-bull-square': true\n    };\n    const defaultIconName = 'temporary-placeholder';\n    const defaultIcon = icons => () => get$g(icons, defaultIconName).getOr('!not found!');\n    const getIconName = (name, icons) => {\n      const lcName = name.toLowerCase();\n      if (global$8.isRtl()) {\n        const rtlName = ensureTrailing(lcName, '-rtl');\n        return has$2(icons, rtlName) ? rtlName : lcName;\n      } else {\n        return lcName;\n      }\n    };\n    const lookupIcon = (name, icons) => get$g(icons, getIconName(name, icons));\n    const get$2 = (name, iconProvider) => {\n      const icons = iconProvider();\n      return lookupIcon(name, icons).getOrThunk(defaultIcon(icons));\n    };\n    const getOr = (name, iconProvider, fallbackIcon) => {\n      const icons = iconProvider();\n      return lookupIcon(name, icons).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n    };\n    const needsRtlTransform = iconName => global$8.isRtl() ? has$2(rtlTransform, iconName) : false;\n    const addFocusableBehaviour = () => config('add-focusable', [runOnAttached(comp => {\n        child(comp.element, 'svg').each(svg => set$9(svg, 'focusable', 'false'));\n      })]);\n    const renderIcon$3 = (spec, iconName, icons, fallbackIcon) => {\n      var _a, _b;\n      const rtlIconClasses = needsRtlTransform(iconName) ? ['tox-icon--flip'] : [];\n      const iconHtml = get$g(icons, getIconName(iconName, icons)).or(fallbackIcon).getOrThunk(defaultIcon(icons));\n      return {\n        dom: {\n          tag: spec.tag,\n          attributes: (_a = spec.attributes) !== null && _a !== void 0 ? _a : {},\n          classes: spec.classes.concat(rtlIconClasses),\n          innerHtml: iconHtml\n        },\n        behaviours: derive$1([\n          ...(_b = spec.behaviours) !== null && _b !== void 0 ? _b : [],\n          addFocusableBehaviour()\n        ])\n      };\n    };\n    const render$3 = (iconName, spec, iconProvider, fallbackIcon = Optional.none()) => renderIcon$3(spec, iconName, iconProvider(), fallbackIcon);\n    const renderFirst = (iconNames, spec, iconProvider) => {\n      const icons = iconProvider();\n      const iconName = find$5(iconNames, name => has$2(icons, getIconName(name, icons)));\n      return renderIcon$3(spec, iconName.getOr(defaultIconName), icons, Optional.none());\n    };\n\n    const notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    const factory$m = detail => {\n      const memBannerText = record({\n        dom: fromHtml(`<p>${ sanitizeHtmlString(detail.translationProvider(detail.text)) }</p>`),\n        behaviours: derive$1([Replacing.config({})])\n      });\n      const renderPercentBar = percent => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-bar'],\n          styles: { width: `${ percent }%` }\n        }\n      });\n      const renderPercentText = percent => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-text'],\n          innerHtml: `${ percent }%`\n        }\n      });\n      const memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      const updateProgress = (comp, percent) => {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(progress => {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      const updateText = (comp, text) => {\n        if (comp.getSystem().isConnected()) {\n          const banner = memBannerText.get(comp);\n          Replacing.set(banner, [text$2(text)]);\n        }\n      };\n      const apis = {\n        updateProgress,\n        updateText\n      };\n      const iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(level => Optional.from(notificationIconMap[level])).toArray()\n      ]);\n      const memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [render$3('close', {\n            tag: 'span',\n            classes: ['tox-icon'],\n            attributes: { 'aria-label': detail.translationProvider('Close') }\n          }, detail.iconProvider)],\n        action: comp => {\n          detail.onAction(comp);\n        }\n      }));\n      const notificationIconSpec = renderFirst(iconChoices, {\n        tag: 'div',\n        classes: ['tox-notification__icon']\n      }, detail.iconProvider);\n      const notificationBodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-notification__body']\n        },\n        components: [memBannerText.asSpec()],\n        behaviours: derive$1([Replacing.config({})])\n      };\n      const components = [\n        notificationIconSpec,\n        notificationBodySpec\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(level => [\n            'tox-notification',\n            'tox-notification--in',\n            `tox-notification--${ level }`\n          ]).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run$1(focusin(), comp => {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis\n      };\n    };\n    const Notification = single({\n      name: 'Notification',\n      factory: factory$m,\n      configFields: [\n        option$3('level'),\n        required$1('progress'),\n        option$3('icon'),\n        required$1('onAction'),\n        required$1('text'),\n        required$1('iconProvider'),\n        required$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: (apis, comp, percent) => {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: (apis, comp, text) => {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    var NotificationManagerImpl = (editor, extras, uiMothership) => {\n      const sharedBackstage = extras.backstage.shared;\n      const getBounds = () => {\n        const contentArea = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n        const win$1 = win();\n        const x = clamp(win$1.x, contentArea.x, contentArea.right);\n        const y = clamp(win$1.y, contentArea.y, contentArea.bottom);\n        const right = Math.max(contentArea.right, win$1.right);\n        const bottom = Math.max(contentArea.bottom, win$1.bottom);\n        return Optional.some(bounds(x, y, right - x, bottom - y));\n      };\n      const open = (settings, closeCallback) => {\n        const close = () => {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        const notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains$2([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: settings.icon,\n          closeButton: settings.closeButton,\n          onAction: close,\n          iconProvider: sharedBackstage.providers.icons,\n          translationProvider: sharedBackstage.providers.translate\n        }));\n        const notificationWrapper = build$1(InlineView.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: sharedBackstage.getSink,\n          fireDismissalEventInstead: {},\n          ...sharedBackstage.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} }\n        }));\n        uiMothership.add(notificationWrapper);\n        if (isNumber(settings.timeout) && settings.timeout > 0) {\n          global$9.setEditorTimeout(editor, () => {\n            close();\n          }, settings.timeout);\n        }\n        const reposition = () => {\n          const notificationSpec = premade(notification);\n          const anchorOverrides = { maxHeightFunction: expandable$1() };\n          const allNotifications = editor.notificationManager.getNotifications();\n          if (allNotifications[0] === thisNotification) {\n            const anchor = {\n              ...sharedBackstage.anchors.banner(),\n              overrides: anchorOverrides\n            };\n            InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor }, getBounds);\n          } else {\n            indexOf(allNotifications, thisNotification).each(idx => {\n              const previousNotification = allNotifications[idx - 1].getEl();\n              const nodeAnchor = {\n                type: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(previousNotification)),\n                overrides: anchorOverrides,\n                layouts: {\n                  onRtl: () => [south$2],\n                  onLtr: () => [south$2]\n                }\n              };\n              InlineView.showWithinBounds(notificationWrapper, notificationSpec, { anchor: nodeAnchor }, getBounds);\n            });\n          }\n        };\n        const thisNotification = {\n          close,\n          reposition,\n          text: nuText => {\n            Notification.updateText(notification, nuText);\n          },\n          settings,\n          getEl: () => notification.element.dom,\n          progressBar: {\n            value: percent => {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n        return thisNotification;\n      };\n      const close = notification => {\n        notification.close();\n      };\n      const getArgs = notification => {\n        return notification.settings;\n      };\n      return {\n        open,\n        close,\n        getArgs\n      };\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var ToolbarMode$1;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode$1 || (ToolbarMode$1 = {})));\n    var ToolbarLocation$1;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation$1 || (ToolbarLocation$1 = {})));\n    const option$2 = name => editor => editor.options.get(name);\n    const wrapOptional = fn => editor => Optional.from(fn(editor));\n    const register$e = editor => {\n      const isPhone = global$5.deviceType.isPhone();\n      const isMobile = global$5.deviceType.isTablet() || isPhone;\n      const registerOption = editor.options.register;\n      const stringOrFalseProcessor = value => isString(value) || value === false;\n      const stringOrNumberProcessor = value => isString(value) || isNumber(value);\n      registerOption('skin', {\n        processor: value => isString(value) || value === false,\n        default: 'oxide'\n      });\n      registerOption('skin_url', { processor: 'string' });\n      registerOption('height', {\n        processor: stringOrNumberProcessor,\n        default: Math.max(editor.getElement().offsetHeight, 400)\n      });\n      registerOption('width', {\n        processor: stringOrNumberProcessor,\n        default: global$7.DOM.getStyle(editor.getElement(), 'width')\n      });\n      registerOption('min_height', {\n        processor: 'number',\n        default: 100\n      });\n      registerOption('min_width', { processor: 'number' });\n      registerOption('max_height', { processor: 'number' });\n      registerOption('max_width', { processor: 'number' });\n      registerOption('style_formats', { processor: 'object[]' });\n      registerOption('style_formats_merge', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('style_formats_autohide', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('line_height_formats', {\n        processor: 'string',\n        default: '1 1.1 1.2 1.3 1.4 1.5 2'\n      });\n      registerOption('font_family_formats', {\n        processor: 'string',\n        default: 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats'\n      });\n      registerOption('font_size_formats', {\n        processor: 'string',\n        default: '8pt 10pt 12pt 14pt 18pt 24pt 36pt'\n      });\n      registerOption('font_size_input_default_unit', {\n        processor: 'string',\n        default: 'pt'\n      });\n      registerOption('block_formats', {\n        processor: 'string',\n        default: 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre'\n      });\n      registerOption('content_langs', { processor: 'object[]' });\n      registerOption('removed_menuitems', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('menubar', {\n        processor: value => isString(value) || isBoolean(value),\n        default: !isPhone\n      });\n      registerOption('menu', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('toolbar', {\n        processor: value => {\n          if (isBoolean(value) || isString(value) || isArray(value)) {\n            return {\n              value,\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a boolean, string or array.'\n            };\n          }\n        },\n        default: true\n      });\n      range$2(9, num => {\n        registerOption('toolbar' + (num + 1), { processor: 'string' });\n      });\n      registerOption('toolbar_mode', {\n        processor: 'string',\n        default: isMobile ? 'scrolling' : 'floating'\n      });\n      registerOption('toolbar_groups', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('toolbar_location', {\n        processor: 'string',\n        default: ToolbarLocation$1.auto\n      });\n      registerOption('toolbar_persist', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('toolbar_sticky', {\n        processor: 'boolean',\n        default: editor.inline\n      });\n      registerOption('toolbar_sticky_offset', {\n        processor: 'number',\n        default: 0\n      });\n      registerOption('fixed_toolbar_container', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('fixed_toolbar_container_target', { processor: 'object' });\n      registerOption('ui_mode', {\n        processor: 'string',\n        default: 'combined'\n      });\n      registerOption('file_picker_callback', { processor: 'function' });\n      registerOption('file_picker_validator_handler', { processor: 'function' });\n      registerOption('file_picker_types', { processor: 'string' });\n      registerOption('typeahead_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('anchor_top', {\n        processor: stringOrFalseProcessor,\n        default: '#top'\n      });\n      registerOption('anchor_bottom', {\n        processor: stringOrFalseProcessor,\n        default: '#bottom'\n      });\n      registerOption('draggable_modal', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('statusbar', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('elementpath', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('branding', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('promotion', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('resize', {\n        processor: value => value === 'both' || isBoolean(value),\n        default: !global$5.deviceType.isTouch()\n      });\n      registerOption('sidebar_show', { processor: 'string' });\n      registerOption('help_accessibility', {\n        processor: 'boolean',\n        default: editor.hasPlugin('help')\n      });\n      registerOption('default_font_stack', {\n        processor: 'string[]',\n        default: []\n      });\n    };\n    const isReadOnly = option$2('readonly');\n    const getHeightOption = option$2('height');\n    const getWidthOption = option$2('width');\n    const getMinWidthOption = wrapOptional(option$2('min_width'));\n    const getMinHeightOption = wrapOptional(option$2('min_height'));\n    const getMaxWidthOption = wrapOptional(option$2('max_width'));\n    const getMaxHeightOption = wrapOptional(option$2('max_height'));\n    const getUserStyleFormats = wrapOptional(option$2('style_formats'));\n    const shouldMergeStyleFormats = option$2('style_formats_merge');\n    const shouldAutoHideStyleFormats = option$2('style_formats_autohide');\n    const getContentLanguages = option$2('content_langs');\n    const getRemovedMenuItems = option$2('removed_menuitems');\n    const getToolbarMode = option$2('toolbar_mode');\n    const getToolbarGroups = option$2('toolbar_groups');\n    const getToolbarLocation = option$2('toolbar_location');\n    const fixedContainerSelector = option$2('fixed_toolbar_container');\n    const fixedToolbarContainerTarget = option$2('fixed_toolbar_container_target');\n    const isToolbarPersist = option$2('toolbar_persist');\n    const getStickyToolbarOffset = option$2('toolbar_sticky_offset');\n    const getMenubar = option$2('menubar');\n    const getToolbar = option$2('toolbar');\n    const getFilePickerCallback = option$2('file_picker_callback');\n    const getFilePickerValidatorHandler = option$2('file_picker_validator_handler');\n    const getFontSizeInputDefaultUnit = option$2('font_size_input_default_unit');\n    const getFilePickerTypes = option$2('file_picker_types');\n    const useTypeaheadUrls = option$2('typeahead_urls');\n    const getAnchorTop = option$2('anchor_top');\n    const getAnchorBottom = option$2('anchor_bottom');\n    const isDraggableModal$1 = option$2('draggable_modal');\n    const useStatusBar = option$2('statusbar');\n    const useElementPath = option$2('elementpath');\n    const useBranding = option$2('branding');\n    const getResize = option$2('resize');\n    const getPasteAsText = option$2('paste_as_text');\n    const getSidebarShow = option$2('sidebar_show');\n    const promotionEnabled = option$2('promotion');\n    const useHelpAccessibility = option$2('help_accessibility');\n    const getDefaultFontStack = option$2('default_font_stack');\n    const isSkinDisabled = editor => editor.options.get('skin') === false;\n    const isMenubarEnabled = editor => editor.options.get('menubar') !== false;\n    const getSkinUrl = editor => {\n      const skinUrl = editor.options.get('skin_url');\n      if (isSkinDisabled(editor)) {\n        return skinUrl;\n      } else {\n        if (skinUrl) {\n          return editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          const skin = editor.options.get('skin');\n          return global$6.baseURL + '/skins/ui/' + skin;\n        }\n      }\n    };\n    const getSkinUrlOption = editor => Optional.from(editor.options.get('skin_url'));\n    const getLineHeightFormats = editor => editor.options.get('line_height_formats').split(' ');\n    const isToolbarEnabled = editor => {\n      const toolbar = getToolbar(editor);\n      const isToolbarString = isString(toolbar);\n      const isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || toolbar === true);\n    };\n    const getMultipleToolbarsOption = editor => {\n      const toolbars = range$2(9, num => editor.options.get('toolbar' + (num + 1)));\n      const toolbarArray = filter$2(toolbars, isString);\n      return someIf(toolbarArray.length > 0, toolbarArray);\n    };\n    const isMultipleToolbars = editor => getMultipleToolbarsOption(editor).fold(() => {\n      const toolbar = getToolbar(editor);\n      return isArrayOf(toolbar, isString) && toolbar.length > 0;\n    }, always);\n    const isToolbarLocationBottom = editor => getToolbarLocation(editor) === ToolbarLocation$1.bottom;\n    const fixedContainerTarget = editor => {\n      var _a;\n      if (!editor.inline) {\n        return Optional.none();\n      }\n      const selector = (_a = fixedContainerSelector(editor)) !== null && _a !== void 0 ? _a : '';\n      if (selector.length > 0) {\n        return descendant(body(), selector);\n      }\n      const element = fixedToolbarContainerTarget(editor);\n      if (isNonNullable(element)) {\n        return Optional.some(SugarElement.fromDom(element));\n      }\n      return Optional.none();\n    };\n    const useFixedContainer = editor => editor.inline && fixedContainerTarget(editor).isSome();\n    const getUiContainer = editor => {\n      const fixedContainer = fixedContainerTarget(editor);\n      return fixedContainer.getOrThunk(() => getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement()))));\n    };\n    const isDistractionFree = editor => editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    const isStickyToolbar = editor => {\n      const isStickyToolbar = editor.options.get('toolbar_sticky');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    const isSplitUiMode = editor => !useFixedContainer(editor) && editor.options.get('ui_mode') === 'split';\n    const getMenus = editor => {\n      const menu = editor.options.get('menu');\n      return map$1(menu, menu => ({\n        ...menu,\n        items: menu.items\n      }));\n    };\n\n    var Options = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        get ToolbarMode () { return ToolbarMode$1; },\n        get ToolbarLocation () { return ToolbarLocation$1; },\n        register: register$e,\n        getSkinUrl: getSkinUrl,\n        getSkinUrlOption: getSkinUrlOption,\n        isReadOnly: isReadOnly,\n        isSkinDisabled: isSkinDisabled,\n        getHeightOption: getHeightOption,\n        getWidthOption: getWidthOption,\n        getMinWidthOption: getMinWidthOption,\n        getMinHeightOption: getMinHeightOption,\n        getMaxWidthOption: getMaxWidthOption,\n        getMaxHeightOption: getMaxHeightOption,\n        getUserStyleFormats: getUserStyleFormats,\n        shouldMergeStyleFormats: shouldMergeStyleFormats,\n        shouldAutoHideStyleFormats: shouldAutoHideStyleFormats,\n        getLineHeightFormats: getLineHeightFormats,\n        getContentLanguages: getContentLanguages,\n        getRemovedMenuItems: getRemovedMenuItems,\n        isMenubarEnabled: isMenubarEnabled,\n        isMultipleToolbars: isMultipleToolbars,\n        isToolbarEnabled: isToolbarEnabled,\n        isToolbarPersist: isToolbarPersist,\n        getMultipleToolbarsOption: getMultipleToolbarsOption,\n        getUiContainer: getUiContainer,\n        useFixedContainer: useFixedContainer,\n        isSplitUiMode: isSplitUiMode,\n        getToolbarMode: getToolbarMode,\n        isDraggableModal: isDraggableModal$1,\n        isDistractionFree: isDistractionFree,\n        isStickyToolbar: isStickyToolbar,\n        getStickyToolbarOffset: getStickyToolbarOffset,\n        getToolbarLocation: getToolbarLocation,\n        isToolbarLocationBottom: isToolbarLocationBottom,\n        getToolbarGroups: getToolbarGroups,\n        getMenus: getMenus,\n        getMenubar: getMenubar,\n        getToolbar: getToolbar,\n        getFilePickerCallback: getFilePickerCallback,\n        getFilePickerTypes: getFilePickerTypes,\n        useTypeaheadUrls: useTypeaheadUrls,\n        getAnchorTop: getAnchorTop,\n        getAnchorBottom: getAnchorBottom,\n        getFilePickerValidatorHandler: getFilePickerValidatorHandler,\n        getFontSizeInputDefaultUnit: getFontSizeInputDefaultUnit,\n        useStatusBar: useStatusBar,\n        useElementPath: useElementPath,\n        promotionEnabled: promotionEnabled,\n        useBranding: useBranding,\n        getResize: getResize,\n        getPasteAsText: getPasteAsText,\n        getSidebarShow: getSidebarShow,\n        useHelpAccessibility: useHelpAccessibility,\n        getDefaultFontStack: getDefaultFontStack\n    });\n\n    const autocompleteSelector = '[data-mce-autocompleter]';\n    const detect$1 = elm => closest$1(elm, autocompleteSelector);\n    const findIn = elm => descendant(elm, autocompleteSelector);\n\n    const setup$e = (api, editor) => {\n      const redirectKeyToItem = (item, e) => {\n        emitWith(item, keydown(), { raw: e });\n      };\n      const getItem = () => api.getMenu().bind(Highlighting.getHighlighted);\n      editor.on('keydown', e => {\n        const keyCode = e.which;\n        if (!api.isActive()) {\n          return;\n        }\n        if (api.isMenuOpen()) {\n          if (keyCode === 13) {\n            getItem().each(emitExecute);\n            e.preventDefault();\n          } else if (keyCode === 40) {\n            getItem().fold(() => {\n              api.getMenu().each(Highlighting.highlightFirst);\n            }, item => {\n              redirectKeyToItem(item, e);\n            });\n            e.preventDefault();\n            e.stopImmediatePropagation();\n          } else if (keyCode === 37 || keyCode === 38 || keyCode === 39) {\n            getItem().each(item => {\n              redirectKeyToItem(item, e);\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            });\n          }\n        } else {\n          if (keyCode === 13 || keyCode === 38 || keyCode === 40) {\n            api.cancelIfNecessary();\n          }\n        }\n      });\n      editor.on('NodeChange', e => {\n        if (api.isActive() && !api.isProcessingAction() && detect$1(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    const AutocompleterEditorEvents = { setup: setup$e };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    const navClass = 'tox-menu-nav__js';\n    const selectableClass = 'tox-collection__item';\n    const colorClass = 'tox-swatch';\n    const presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    const tickedClass = 'tox-collection__item--enabled';\n    const groupHeadingClass = 'tox-collection__group-heading';\n    const iconClass = 'tox-collection__item-icon';\n    const textClass = 'tox-collection__item-label';\n    const accessoryClass = 'tox-collection__item-accessory';\n    const caretClass = 'tox-collection__item-caret';\n    const checkmarkClass = 'tox-collection__item-checkmark';\n    const activeClass = 'tox-collection__item--active';\n    const containerClass = 'tox-collection__item-container';\n    const containerColumnClass = 'tox-collection__item-container--column';\n    const containerRowClass = 'tox-collection__item-container--row';\n    const containerAlignRightClass = 'tox-collection__item-container--align-right';\n    const containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    const containerValignTopClass = 'tox-collection__item-container--valign-top';\n    const containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    const containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    const classForPreset = presets => get$g(presetClasses, presets).getOr(navClass);\n\n    const forMenu = presets => {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    const classes = presets => ({\n      backgroundMenu: 'tox-background-menu',\n      selectedMenu: 'tox-selected-menu',\n      selectedItem: 'tox-collection__item--active',\n      hasIcons: 'tox-menu--has-icons',\n      menu: forMenu(presets),\n      tieredMenu: 'tox-tiered-menu'\n    });\n\n    const markers = presets => {\n      const menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    const dom$1 = (hasIcons, columns, presets) => {\n      const menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            `tox-menu-${ columns }-column`\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    const components = [Menu.parts.items({})];\n    const part = (hasIcons, columns, presets) => {\n      const menuClasses = classes(presets);\n      const d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers(presets)\n      };\n    };\n\n    const schema$l = constant$1([\n      option$3('data'),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('tag', 'input'),\n      defaulted('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted('styles', {}),\n      defaulted('eventOrder', {}),\n      field('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted('selectOnFocus', true)\n    ]);\n    const focusBehaviours = detail => derive$1([Focusing.config({\n        onFocus: !detail.selectOnFocus ? noop : component => {\n          const input = component.element;\n          const value = get$6(input);\n          input.dom.setSelectionRange(0, value.length);\n        }\n      })]);\n    const behaviours = detail => ({\n      ...focusBehaviours(detail),\n      ...augment(detail.inputBehaviours, [Representing.config({\n          store: {\n            mode: 'manual',\n            ...detail.data.map(data => ({ initialValue: data })).getOr({}),\n            getValue: input => {\n              return get$6(input.element);\n            },\n            setValue: (input, data) => {\n              const current = get$6(input.element);\n              if (current !== data) {\n                set$5(input.element, data);\n              }\n            }\n          },\n          onSetValue: detail.onSetValue\n        })])\n    });\n    const dom = detail => ({\n      tag: detail.tag,\n      attributes: {\n        type: 'text',\n        ...detail.inputAttributes\n      },\n      styles: detail.inputStyles,\n      classes: detail.inputClasses\n    });\n\n    const factory$l = (detail, _spec) => ({\n      uid: detail.uid,\n      dom: dom(detail),\n      components: [],\n      behaviours: behaviours(detail),\n      eventOrder: detail.eventOrder\n    });\n    const Input = single({\n      name: 'Input',\n      configFields: schema$l(),\n      factory: factory$l\n    });\n\n    const refetchTriggerEvent = generate$6('refetch-trigger-event');\n    const redirectMenuItemInteractionEvent = generate$6('redirect-menu-item-interaction');\n\n    const menuSearcherClass = 'tox-menu__searcher';\n    const findWithinSandbox = sandboxComp => {\n      return descendant(sandboxComp.element, `.${ menuSearcherClass }`).bind(inputElem => sandboxComp.getSystem().getByDom(inputElem).toOptional());\n    };\n    const findWithinMenu = findWithinSandbox;\n    const restoreState = (inputComp, searcherState) => {\n      Representing.setValue(inputComp, searcherState.fetchPattern);\n      inputComp.element.dom.selectionStart = searcherState.selectionStart;\n      inputComp.element.dom.selectionEnd = searcherState.selectionEnd;\n    };\n    const saveState = inputComp => {\n      const fetchPattern = Representing.getValue(inputComp);\n      const selectionStart = inputComp.element.dom.selectionStart;\n      const selectionEnd = inputComp.element.dom.selectionEnd;\n      return {\n        fetchPattern,\n        selectionStart,\n        selectionEnd\n      };\n    };\n    const setActiveDescendant = (inputComp, active) => {\n      getOpt(active.element, 'id').each(id => set$9(inputComp.element, 'aria-activedescendant', id));\n    };\n    const renderMenuSearcher = spec => {\n      const handleByBrowser = (comp, se) => {\n        se.cut();\n        return Optional.none();\n      };\n      const handleByHighlightedItem = (comp, se) => {\n        const eventData = {\n          interactionEvent: se.event,\n          eventType: se.event.raw.type\n        };\n        emitWith(comp, redirectMenuItemInteractionEvent, eventData);\n        return Optional.some(true);\n      };\n      const customSearcherEventsName = 'searcher-events';\n      return {\n        dom: {\n          tag: 'div',\n          classes: [selectableClass]\n        },\n        components: [Input.sketch({\n            inputClasses: [\n              menuSearcherClass,\n              'tox-textfield'\n            ],\n            inputAttributes: {\n              ...spec.placeholder.map(placeholder => ({ placeholder: spec.i18n(placeholder) })).getOr({}),\n              'type': 'search',\n              'aria-autocomplete': 'list'\n            },\n            inputBehaviours: derive$1([\n              config(customSearcherEventsName, [\n                run$1(input(), inputComp => {\n                  emit(inputComp, refetchTriggerEvent);\n                }),\n                run$1(keydown(), (inputComp, se) => {\n                  if (se.event.raw.key === 'Escape') {\n                    se.stop();\n                  }\n                })\n              ]),\n              Keying.config({\n                mode: 'special',\n                onLeft: handleByBrowser,\n                onRight: handleByBrowser,\n                onSpace: handleByBrowser,\n                onEnter: handleByHighlightedItem,\n                onEscape: handleByHighlightedItem,\n                onUp: handleByHighlightedItem,\n                onDown: handleByHighlightedItem\n              })\n            ]),\n            eventOrder: {\n              keydown: [\n                customSearcherEventsName,\n                Keying.name()\n              ]\n            }\n          })]\n      };\n    };\n\n    const searchResultsClass = 'tox-collection--results__js';\n    const augmentWithAria = item => {\n      var _a;\n      if (item.dom) {\n        return {\n          ...item,\n          dom: {\n            ...item.dom,\n            attributes: {\n              ...(_a = item.dom.attributes) !== null && _a !== void 0 ? _a : {},\n              'id': generate$6('aria-item-search-result-id'),\n              'aria-selected': 'false'\n            }\n          }\n        };\n      } else {\n        return item;\n      }\n    };\n\n    const chunk = (rowDom, numColumns) => items => {\n      const chunks = chunk$1(items, numColumns);\n      return map$2(chunks, c => ({\n        dom: rowDom,\n        components: c\n      }));\n    };\n    const forSwatch = columns => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-menu',\n          'tox-swatches-menu'\n        ]\n      },\n      components: [{\n          dom: {\n            tag: 'div',\n            classes: ['tox-swatches']\n          },\n          components: [Menu.parts.items({\n              preprocess: columns !== 'auto' ? chunk({\n                tag: 'div',\n                classes: ['tox-swatches__row']\n              }, columns) : identity\n            })]\n        }]\n    });\n    const forToolbar = columns => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-menu',\n          'tox-collection',\n          'tox-collection--toolbar',\n          'tox-collection--toolbar-lg'\n        ]\n      },\n      components: [Menu.parts.items({\n          preprocess: chunk({\n            tag: 'div',\n            classes: ['tox-collection__group']\n          }, columns)\n        })]\n    });\n    const preprocessCollection = (items, isSeparator) => {\n      const allSplits = [];\n      let currentSplit = [];\n      each$1(items, (item, i) => {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has$2(item.dom, 'innerHtml') || item.components && item.components.length > 0) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map$2(allSplits, s => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection__group']\n        },\n        components: s\n      }));\n    };\n    const insertItemsPlaceholder = (columns, initItems, onItem) => {\n      return Menu.parts.items({\n        preprocess: rawItems => {\n          const enrichedItems = map$2(rawItems, onItem);\n          if (columns !== 'auto' && columns > 1) {\n            return chunk({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)(enrichedItems);\n          } else {\n            return preprocessCollection(enrichedItems, (_item, i) => initItems[i].type === 'separator');\n          }\n        }\n      });\n    };\n    const forCollection = (columns, initItems, _hasIcons = true) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-menu',\n          'tox-collection'\n        ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n      },\n      components: [insertItemsPlaceholder(columns, initItems, identity)]\n    });\n    const forCollectionWithSearchResults = (columns, initItems, _hasIcons = true) => {\n      const ariaControlsSearchResults = generate$6('aria-controls-search-results');\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            searchResultsClass\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid']),\n          attributes: { id: ariaControlsSearchResults }\n        },\n        components: [insertItemsPlaceholder(columns, initItems, augmentWithAria)]\n      };\n    };\n    const forCollectionWithSearchField = (columns, initItems, searchField) => {\n      const ariaControlsSearchResults = generate$6('aria-controls-search-results');\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [\n          renderMenuSearcher({\n            i18n: global$8.translate,\n            placeholder: searchField.placeholder\n          }),\n          {\n            dom: {\n              tag: 'div',\n              classes: [\n                ...columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'],\n                searchResultsClass\n              ],\n              attributes: { id: ariaControlsSearchResults }\n            },\n            components: [insertItemsPlaceholder(columns, initItems, augmentWithAria)]\n          }\n        ]\n      };\n    };\n    const forHorizontalCollection = (initItems, _hasIcons = true) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-collection',\n          'tox-collection--horizontal'\n        ]\n      },\n      components: [Menu.parts.items({ preprocess: items => preprocessCollection(items, (_item, i) => initItems[i].type === 'separator') })]\n    });\n\n    const menuHasIcons = xs => exists(xs, item => 'icon' in item && item.icon !== undefined);\n    const handleError = error => {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    const createHorizontalPartialMenuWithAlloyItems = (value, _hasIcons, items, _columns, _menuLayout) => {\n      const structure = forHorizontalCollection(items);\n      return {\n        value,\n        dom: structure.dom,\n        components: structure.components,\n        items\n      };\n    };\n    const createPartialMenuWithAlloyItems = (value, hasIcons, items, columns, menuLayout) => {\n      const getNormalStructure = () => {\n        if (menuLayout.menuType !== 'searchable') {\n          return forCollection(columns, items);\n        } else {\n          return menuLayout.searchMode.searchMode === 'search-with-field' ? forCollectionWithSearchField(columns, items, menuLayout.searchMode) : forCollectionWithSearchResults(columns, items);\n        }\n      };\n      if (menuLayout.menuType === 'color') {\n        const structure = forSwatch(columns);\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else if (menuLayout.menuType === 'normal' && columns === 'auto') {\n        const structure = forCollection(columns, items);\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else if (menuLayout.menuType === 'normal' || menuLayout.menuType === 'searchable') {\n        const structure = getNormalStructure();\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else if (menuLayout.menuType === 'listpreview' && columns !== 'auto') {\n        const structure = forToolbar(columns);\n        return {\n          value,\n          dom: structure.dom,\n          components: structure.components,\n          items\n        };\n      } else {\n        return {\n          value,\n          dom: dom$1(hasIcons, columns, menuLayout.menuType),\n          components: components,\n          items\n        };\n      }\n    };\n\n    const type = requiredString('type');\n    const name$1 = requiredString('name');\n    const label = requiredString('label');\n    const text = requiredString('text');\n    const title = requiredString('title');\n    const icon = requiredString('icon');\n    const value$1 = requiredString('value');\n    const fetch$1 = requiredFunction('fetch');\n    const getSubmenuItems = requiredFunction('getSubmenuItems');\n    const onAction = requiredFunction('onAction');\n    const onItemAction = requiredFunction('onItemAction');\n    const onSetup = defaultedFunction('onSetup', () => noop);\n    const optionalName = optionString('name');\n    const optionalText = optionString('text');\n    const optionalIcon = optionString('icon');\n    const optionalTooltip = optionString('tooltip');\n    const optionalLabel = optionString('label');\n    const optionalShortcut = optionString('shortcut');\n    const optionalSelect = optionFunction('select');\n    const active = defaultedBoolean('active', false);\n    const borderless = defaultedBoolean('borderless', false);\n    const enabled = defaultedBoolean('enabled', true);\n    const primary = defaultedBoolean('primary', false);\n    const defaultedColumns = num => defaulted('columns', num);\n    const defaultedMeta = defaulted('meta', {});\n    const defaultedOnAction = defaultedFunction('onAction', noop);\n    const defaultedType = type => defaultedString('type', type);\n    const generatedName = namePrefix => field$1('name', 'name', defaultedThunk(() => generate$6(`${ namePrefix }-name`)), string);\n    const generatedValue = valuePrefix => field$1('value', 'value', defaultedThunk(() => generate$6(`${ valuePrefix }-value`)), anyValue());\n\n    const separatorMenuItemSchema = objOf([\n      type,\n      optionalText\n    ]);\n    const createSeparatorMenuItem = spec => asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n\n    const autocompleterItemSchema = objOf([\n      defaultedType('autocompleteitem'),\n      active,\n      enabled,\n      defaultedMeta,\n      value$1,\n      optionalText,\n      optionalIcon\n    ]);\n    const createSeparatorItem = spec => asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    const createAutocompleterItem = spec => asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n\n    const baseToolbarButtonFields = [\n      enabled,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      onSetup\n    ];\n    const toolbarButtonSchema = objOf([\n      type,\n      onAction\n    ].concat(baseToolbarButtonFields));\n    const createToolbarButton = spec => asRaw('toolbarbutton', toolbarButtonSchema, spec);\n\n    const baseToolbarToggleButtonFields = [active].concat(baseToolbarButtonFields);\n    const toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      type,\n      onAction\n    ]));\n    const createToggleButton = spec => asRaw('ToggleButton', toggleButtonSchema, spec);\n\n    const contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    const contextButtonFields = baseToolbarButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const launchButtonFields = baseToolbarButtonFields.concat([defaultedType('contextformbutton')]);\n    const launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaultedType('contextformtogglebutton')]);\n    const toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    const contextFormSchema = objOf([\n      defaultedType('contextform'),\n      defaultedFunction('initValue', constant$1('')),\n      optionalLabel,\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    const createContextForm = spec => asRaw('ContextForm', contextFormSchema, spec);\n\n    const contextToolbarSchema = objOf([\n      defaultedType('contexttoolbar'),\n      requiredString('items')\n    ].concat(contextBarFields));\n    const createContextToolbar = spec => asRaw('ContextToolbar', contextToolbarSchema, spec);\n\n    const cardImageFields = [\n      type,\n      requiredString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    const cardImageSchema = objOf(cardImageFields);\n\n    const cardTextFields = [\n      type,\n      text,\n      optionalName,\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    const cardTextSchema = objOf(cardTextFields);\n\n    const itemSchema$1 = valueThunk(() => choose$2('type', {\n      cardimage: cardImageSchema,\n      cardtext: cardTextSchema,\n      cardcontainer: cardContainerSchema\n    }));\n    const cardContainerSchema = objOf([\n      type,\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      requiredArrayOf('items', itemSchema$1)\n    ]);\n\n    const commonMenuItemFields = [\n      enabled,\n      optionalText,\n      optionalShortcut,\n      generatedValue('menuitem'),\n      defaultedMeta\n    ];\n\n    const cardMenuItemSchema = objOf([\n      type,\n      optionalLabel,\n      requiredArrayOf('items', itemSchema$1),\n      onSetup,\n      defaultedOnAction\n    ].concat(commonMenuItemFields));\n    const createCardMenuItem = spec => asRaw('cardmenuitem', cardMenuItemSchema, spec);\n\n    const choiceMenuItemSchema = objOf([\n      type,\n      active,\n      optionalIcon\n    ].concat(commonMenuItemFields));\n    const createChoiceMenuItem = spec => asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n\n    const baseFields = [\n      type,\n      requiredString('fancytype'),\n      defaultedOnAction\n    ];\n    const insertTableFields = [defaulted('initData', {})].concat(baseFields);\n    const colorSwatchFields = [\n      optionFunction('select'),\n      defaultedObjOf('initData', {}, [\n        defaultedBoolean('allowCustomColors', true),\n        defaultedString('storageKey', 'default'),\n        optionArrayOf('colors', anyValue())\n      ])\n    ].concat(baseFields);\n    const fancyMenuItemSchema = choose$1('fancytype', {\n      inserttable: insertTableFields,\n      colorswatch: colorSwatchFields\n    });\n    const createFancyMenuItem = spec => asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n\n    const menuItemSchema = objOf([\n      type,\n      onSetup,\n      defaultedOnAction,\n      optionalIcon\n    ].concat(commonMenuItemFields));\n    const createMenuItem = spec => asRaw('menuitem', menuItemSchema, spec);\n\n    const nestedMenuItemSchema = objOf([\n      type,\n      getSubmenuItems,\n      onSetup,\n      optionalIcon\n    ].concat(commonMenuItemFields));\n    const createNestedMenuItem = spec => asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n\n    const toggleMenuItemSchema = objOf([\n      type,\n      optionalIcon,\n      active,\n      onSetup,\n      onAction\n    ].concat(commonMenuItemFields));\n    const createToggleMenuItem = spec => asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n\n    const detectSize = (comp, margin, selectorClass) => {\n      const descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        const columnLength = findIndex$1(descendants$1, c => {\n          const thisTop = c.dom.getBoundingClientRect().top;\n          const cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    const namedEvents = (name, handlers) => derive$1([config(name, handlers)]);\n    const unnamedEvents = handlers => namedEvents(generate$6('unnamed-events'), handlers);\n    const SimpleBehaviours = {\n      namedEvents,\n      unnamedEvents\n    };\n\n    const ExclusivityChannel = generate$6('tooltip.exclusive');\n    const ShowTooltipEvent = generate$6('tooltip.show');\n    const HideTooltipEvent = generate$6('tooltip.hide');\n\n    const hideAllExclusive = (component, _tConfig, _tState) => {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    const setComponents = (component, tConfig, tState, specs) => {\n      tState.getTooltip().each(tooltip => {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    const events$9 = (tooltipConfig, state) => {\n      const hide = comp => {\n        state.getTooltip().each(p => {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      const show = comp => {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          const sink = tooltipConfig.lazySink(comp).getOrDie();\n          const popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive$2(tooltipConfig.mode === 'normal' ? [\n              run$1(mouseover(), _ => {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run$1(mouseout(), _ => {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, popup, { anchor: tooltipConfig.anchor(comp) });\n        }\n      };\n      return derive$2(flatten([\n        [\n          run$1(ShowTooltipEvent, comp => {\n            state.resetTimer(() => {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(HideTooltipEvent, comp => {\n            state.resetTimer(() => {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run$1(receive(), (comp, message) => {\n            const receivingData = message;\n            if (!receivingData.universal) {\n              if (contains$2(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(comp => {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run$1(focusin(), comp => {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(postBlur(), comp => {\n            emit(comp, HideTooltipEvent);\n          }),\n          run$1(mouseover(), comp => {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(mouseout(), comp => {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run$1(highlight$1(), (comp, _se) => {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run$1(dehighlight$1(), comp => {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$9\n    });\n\n    var TooltippingSchema = [\n      required$1('lazySink'),\n      required$1('tooltipDom'),\n      defaulted('exclusive', true),\n      defaulted('tooltipComponents', []),\n      defaulted('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted('anchor', comp => ({\n        type: 'hotspot',\n        hotspot: comp,\n        layouts: {\n          onLtr: constant$1([\n            south$2,\n            north$2,\n            southeast$2,\n            northeast$2,\n            southwest$2,\n            northwest$2\n          ]),\n          onRtl: constant$1([\n            south$2,\n            north$2,\n            southeast$2,\n            northeast$2,\n            southwest$2,\n            northwest$2\n          ])\n        }\n      })),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    const init$b = () => {\n      const timer = value$2();\n      const popup = value$2();\n      const clearTimer = () => {\n        timer.on(clearTimeout);\n      };\n      const resetTimer = (f, delay) => {\n        clearTimer();\n        timer.set(setTimeout(f, delay));\n      };\n      const readState = constant$1('not-implemented');\n      return nu$8({\n        getTooltip: popup.get,\n        isShowing: popup.isSet,\n        setTooltip: popup.set,\n        clearTooltip: popup.clear,\n        clearTimer,\n        resetTimer,\n        readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    const Tooltipping = create$4({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    const escape = text => text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n    const ReadOnlyChannel = 'silver.readonly';\n    const ReadOnlyDataSchema = objOf([requiredBoolean('readonly')]);\n    const broadcastReadonly = (uiRefs, readonly) => {\n      const outerContainer = uiRefs.mainUi.outerContainer;\n      const target = outerContainer.element;\n      const motherships = [\n        uiRefs.mainUi.mothership,\n        ...uiRefs.uiMotherships\n      ];\n      if (readonly) {\n        each$1(motherships, m => {\n          m.broadcastOn([dismissPopups()], { target });\n        });\n      }\n      each$1(motherships, m => {\n        m.broadcastOn([ReadOnlyChannel], { readonly });\n      });\n    };\n    const setupReadonlyModeSwitch = (editor, uiRefs) => {\n      editor.on('init', () => {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiRefs, true);\n        }\n      });\n      editor.on('SwitchMode', () => broadcastReadonly(uiRefs, editor.mode.isReadOnly()));\n      if (isReadOnly(editor)) {\n        editor.mode.set('readonly');\n      }\n    };\n    const receivingConfig = () => Receiving.config({\n      channels: {\n        [ReadOnlyChannel]: {\n          schema: ReadOnlyDataSchema,\n          onReceive: (comp, data) => {\n            Disabling.set(comp, data.readonly);\n          }\n        }\n      }\n    });\n\n    const item = disabled => Disabling.config({\n      disabled,\n      disableClass: 'tox-collection__item--state-disabled'\n    });\n    const button = disabled => Disabling.config({ disabled });\n    const splitButton = disabled => Disabling.config({\n      disabled,\n      disableClass: 'tox-tbtn--disabled'\n    });\n    const toolbarButton = disabled => Disabling.config({\n      disabled,\n      disableClass: 'tox-tbtn--disabled',\n      useNative: false\n    });\n    const DisablingConfigs = {\n      item,\n      button,\n      splitButton,\n      toolbarButton\n    };\n\n    const runWithApi = (info, comp) => {\n      const api = info.getApi(comp);\n      return f => {\n        f(api);\n      };\n    };\n    const onControlAttached = (info, editorOffCell) => runOnAttached(comp => {\n      const run = runWithApi(info, comp);\n      run(api => {\n        const onDestroy = info.onSetup(api);\n        if (isFunction(onDestroy)) {\n          editorOffCell.set(onDestroy);\n        }\n      });\n    });\n    const onControlDetached = (getApi, editorOffCell) => runOnDetached(comp => runWithApi(getApi, comp)(editorOffCell.get()));\n\n    const onMenuItemExecute = (info, itemResponse) => runOnExecute$1((comp, simulatedEvent) => {\n      runWithApi(info, comp)(info.onAction);\n      if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n        if (comp.getSystem().isConnected()) {\n          emit(comp, sandboxClose());\n        }\n        simulatedEvent.stop();\n      }\n    });\n    const menuItemEventOrder = {\n      [execute$5()]: [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'item-events'\n      ]\n    };\n\n    const componentRenderPipeline = cat;\n    const renderCommonItem = (spec, structure, itemResponse, providersBackstage) => {\n      const editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(() => !spec.enabled || providersBackstage.isDisabled()),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    const buildData = source => ({\n      value: source.value,\n      meta: {\n        text: source.text.getOr(''),\n        ...source.meta\n      }\n    });\n\n    const convertText = source => {\n      const isMac = global$5.os.isMacOS() || global$5.os.isiOS();\n      const mac = {\n        alt: '\\u2325',\n        ctrl: '\\u2303',\n        shift: '\\u21E7',\n        meta: '\\u2318',\n        access: '\\u2303\\u2325'\n      };\n      const other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      const replace = isMac ? mac : other;\n      const shortcut = source.split('+');\n      const updated = map$2(shortcut, segment => {\n        const search = segment.toLowerCase().trim();\n        return has$2(replace, search) ? replace[search] : segment;\n      });\n      return isMac ? updated.join('') : updated.join('+');\n    };\n\n    const renderIcon$2 = (name, icons, classes = [iconClass]) => render$3(name, {\n      tag: 'div',\n      classes\n    }, icons);\n    const renderText = text => ({\n      dom: {\n        tag: 'div',\n        classes: [textClass]\n      },\n      components: [text$2(global$8.translate(text))]\n    });\n    const renderHtml = (html, classes) => ({\n      dom: {\n        tag: 'div',\n        classes,\n        innerHtml: html\n      }\n    });\n    const renderStyledText = (style, text) => ({\n      dom: {\n        tag: 'div',\n        classes: [textClass]\n      },\n      components: [{\n          dom: {\n            tag: style.tag,\n            styles: style.styles\n          },\n          components: [text$2(global$8.translate(text))]\n        }]\n    });\n    const renderShortcut = shortcut => ({\n      dom: {\n        tag: 'div',\n        classes: [accessoryClass]\n      },\n      components: [text$2(convertText(shortcut))]\n    });\n    const renderCheckmark = icons => renderIcon$2('checkmark', icons, [checkmarkClass]);\n    const renderSubmenuCaret = icons => renderIcon$2('chevron-right', icons, [caretClass]);\n    const renderDownwardsCaret = icons => renderIcon$2('chevron-down', icons, [caretClass]);\n    const renderContainer = (container, components) => {\n      const directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      const alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      const getValignClass = () => {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components\n      };\n    };\n    const renderImage = (src, classes, alt) => ({\n      dom: {\n        tag: 'img',\n        classes,\n        attributes: {\n          src,\n          alt: alt.getOr('')\n        }\n      }\n    });\n\n    const renderColorStructure = (item, providerBackstage, fallbackIcon) => {\n      const colorPickerCommand = 'custom';\n      const removeColorCommand = 'remove';\n      const itemText = item.ariaLabel;\n      const itemValue = item.value;\n      const iconSvg = item.iconContent.map(name => getOr(name, providerBackstage.icons, fallbackIcon));\n      const getDom = () => {\n        const common = colorClass;\n        const icon = iconSvg.getOr('');\n        const attributes = itemText.map(text => ({ title: providerBackstage.translate(text) })).getOr({});\n        const baseDom = {\n          tag: 'div',\n          attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return {\n            ...baseDom,\n            tag: 'button',\n            classes: [\n              ...baseDom.classes,\n              'tox-swatches__picker-btn'\n            ],\n            innerHtml: icon\n          };\n        } else if (itemValue === removeColorCommand) {\n          return {\n            ...baseDom,\n            classes: [\n              ...baseDom.classes,\n              'tox-swatch--remove'\n            ],\n            innerHtml: icon\n          };\n        } else if (isNonNullable(itemValue)) {\n          return {\n            ...baseDom,\n            attributes: {\n              ...baseDom.attributes,\n              'data-mce-color': itemValue\n            },\n            styles: { 'background-color': itemValue },\n            innerHtml: icon\n          };\n        } else {\n          return baseDom;\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    const renderItemDomStructure = ariaLabel => {\n      const domTitle = ariaLabel.map(label => ({\n        attributes: {\n          title: global$8.translate(label),\n          id: generate$6('menu-item')\n        }\n      })).getOr({});\n      return {\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ],\n        ...domTitle\n      };\n    };\n    const renderNormalItemStructure = (info, providersBackstage, renderIcons, fallbackIcon) => {\n      const iconSpec = {\n        tag: 'div',\n        classes: [iconClass]\n      };\n      const renderIcon = iconName => render$3(iconName, iconSpec, providersBackstage.icons, fallbackIcon);\n      const renderEmptyIcon = () => Optional.some({ dom: iconSpec });\n      const leftIcon = renderIcons ? info.iconContent.map(renderIcon).orThunk(renderEmptyIcon) : Optional.none();\n      const checkmark = info.checkMark;\n      const textRender = Optional.from(info.meta).fold(() => renderText, meta => has$2(meta, 'style') ? curry(renderStyledText, meta.style) : renderText);\n      const content = info.htmlContent.fold(() => info.textContent.map(textRender), html => Optional.some(renderHtml(html, [textClass])));\n      const menuItem = {\n        dom: renderItemDomStructure(info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    const renderItemStructure = (info, providersBackstage, renderIcons, fallbackIcon = Optional.none()) => {\n      if (info.presets === 'color') {\n        return renderColorStructure(info, providersBackstage, fallbackIcon);\n      } else {\n        return renderNormalItemStructure(info, providersBackstage, renderIcons, fallbackIcon);\n      }\n    };\n\n    const tooltipBehaviour = (meta, sharedBackstage) => get$g(meta, 'tooltipWorker').map(tooltipWorker => [Tooltipping.config({\n        lazySink: sharedBackstage.getSink,\n        tooltipDom: {\n          tag: 'div',\n          classes: ['tox-tooltip-worker-container']\n        },\n        tooltipComponents: [],\n        anchor: comp => ({\n          type: 'submenu',\n          item: comp,\n          overrides: { maxHeightFunction: expandable$1 }\n        }),\n        mode: 'follow-highlight',\n        onShow: (component, _tooltip) => {\n          tooltipWorker(elm => {\n            Tooltipping.setComponents(component, [external$1({ element: SugarElement.fromDom(elm) })]);\n          });\n        }\n      })]).getOr([]);\n    const encodeText = text => global$7.DOM.encode(text);\n    const replaceText = (text, matchText) => {\n      const translated = global$8.translate(text);\n      const encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        const escapedMatchRegex = new RegExp(escape(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, match => `<span class=\"tox-autocompleter-highlight\">${ match }</span>`);\n      } else {\n        return encoded;\n      }\n    };\n    const renderAutocompleteItem = (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons = true) => {\n      const structure = renderItemStructure({\n        presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(text => replaceText(text, matchText)) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        enabled: spec.enabled,\n        getApi: constant$1({}),\n        onAction: _api => onItemValueHandler(spec.value, spec.meta),\n        onSetup: constant$1(noop),\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    const render$2 = (items, extras) => map$2(items, item => {\n      switch (item.type) {\n      case 'cardcontainer':\n        return renderContainer(item, render$2(item.items, extras));\n      case 'cardimage':\n        return renderImage(item.src, item.classes, item.alt);\n      case 'cardtext':\n        const shouldHighlight = item.name.exists(name => contains$2(extras.cardText.highlightOn, name));\n        const matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n        return renderHtml(replaceText(item.text, matchText), item.classes);\n      }\n    });\n    const renderCardMenuItem = (spec, itemResponse, sharedBackstage, extras) => {\n      const getApi = component => ({\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => {\n          Disabling.set(component, !state);\n          each$1(descendants(component.element, '*'), elm => {\n            component.getSystem().getByDom(elm).each(comp => {\n              if (comp.hasConfigured(Disabling)) {\n                Disabling.set(comp, !state);\n              }\n            });\n          });\n        }\n      });\n      const structure = {\n        dom: renderItemDomStructure(spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render$2(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData({\n          text: Optional.none(),\n          ...spec\n        }),\n        enabled: spec.enabled,\n        getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    const renderChoiceItem = (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons = true) => {\n      const getApi = component => ({\n        setActive: state => {\n          Toggling.set(component, state);\n        },\n        isActive: () => Toggling.isOn(component),\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state)\n      });\n      const structure = renderItemStructure({\n        presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        enabled: spec.enabled,\n        getApi,\n        onAction: _api => onItemValueHandler(spec.value),\n        onSetup: api => {\n          api.setActive(isSelected);\n          return noop;\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active,\n          exclusive: true\n        }\n      });\n    };\n\n    const parts$f = generate$3(owner$2(), parts$h());\n\n    const hexColour = value => ({ value: normalizeHex(value) });\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    const longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    const isHexString = hex => shorthandRegex.test(hex) || longformRegex.test(hex);\n    const normalizeHex = hex => removeLeading(hex, '#').toUpperCase();\n    const fromString$1 = hex => isHexString(hex) ? Optional.some({ value: normalizeHex(hex) }) : Optional.none();\n    const getLongForm = hex => {\n      const hexString = hex.value.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\n      return { value: hexString };\n    };\n    const extractValues = hex => {\n      const longForm = getLongForm(hex);\n      const splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    const toHex = component => {\n      const hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    const fromRgba = rgbaColour => {\n      const value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    const min = Math.min;\n    const max = Math.max;\n    const round$1 = Math.round;\n    const rgbRegex = /^\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i;\n    const rgbaRegex = /^\\s*rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?(?:\\.\\d+)?)\\s*\\)\\s*$/i;\n    const rgbaColour = (red, green, blue, alpha) => ({\n      red,\n      green,\n      blue,\n      alpha\n    });\n    const isRgbaComponent = value => {\n      const num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    const fromHsv = hsv => {\n      let r;\n      let g;\n      let b;\n      const hue = (hsv.hue || 0) % 360;\n      let saturation = hsv.saturation / 100;\n      let brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round$1(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      const side = hue / 60;\n      const chroma = brightness * saturation;\n      const x = chroma * (1 - Math.abs(side % 2 - 1));\n      const match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round$1(255 * (r + match));\n      g = round$1(255 * (g + match));\n      b = round$1(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    const fromHex = hexColour => {\n      const result = extractValues(hexColour);\n      const red = parseInt(result[1], 16);\n      const green = parseInt(result[2], 16);\n      const blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    const fromStringValues = (red, green, blue, alpha) => {\n      const r = parseInt(red, 10);\n      const g = parseInt(green, 10);\n      const b = parseInt(blue, 10);\n      const a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    const fromString = rgbaString => {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      const rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      const rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    const toString = rgba => `rgba(${ rgba.red },${ rgba.green },${ rgba.blue },${ rgba.alpha })`;\n    const red = rgbaColour(255, 0, 0, 1);\n\n    const fireSkinLoaded$1 = editor => {\n      editor.dispatch('SkinLoaded');\n    };\n    const fireSkinLoadError$1 = (editor, error) => {\n      editor.dispatch('SkinLoadError', error);\n    };\n    const fireResizeEditor = editor => {\n      editor.dispatch('ResizeEditor');\n    };\n    const fireResizeContent = (editor, e) => {\n      editor.dispatch('ResizeContent', e);\n    };\n    const fireScrollContent = (editor, e) => {\n      editor.dispatch('ScrollContent', e);\n    };\n    const fireTextColorChange = (editor, data) => {\n      editor.dispatch('TextColorChange', data);\n    };\n    const fireAfterProgressState = (editor, state) => {\n      editor.dispatch('AfterProgressState', { state });\n    };\n    const fireResolveName = (editor, node) => editor.dispatch('ResolveName', {\n      name: node.nodeName.toLowerCase(),\n      target: node\n    });\n    const fireToggleToolbarDrawer = (editor, state) => {\n      editor.dispatch('ToggleToolbarDrawer', { state });\n    };\n    const fireStylesTextUpdate = (editor, data) => {\n      editor.dispatch('StylesTextUpdate', data);\n    };\n    const fireAlignTextUpdate = (editor, data) => {\n      editor.dispatch('AlignTextUpdate', data);\n    };\n    const fireFontSizeTextUpdate = (editor, data) => {\n      editor.dispatch('FontSizeTextUpdate', data);\n    };\n    const fireFontSizeInputTextUpdate = (editor, data) => {\n      editor.dispatch('FontSizeInputTextUpdate', data);\n    };\n    const fireBlocksTextUpdate = (editor, data) => {\n      editor.dispatch('BlocksTextUpdate', data);\n    };\n    const fireFontFamilyTextUpdate = (editor, data) => {\n      editor.dispatch('FontFamilyTextUpdate', data);\n    };\n\n    const composeUnbinders = (f, g) => () => {\n      f();\n      g();\n    };\n    const onSetupEditableToggle = editor => onSetupEvent(editor, 'NodeChange', api => {\n      api.setEnabled(editor.selection.isEditable());\n    });\n    const onSetupFormatToggle = (editor, name) => api => {\n      const boundFormatChangeCallback = unbindable();\n      const init = () => {\n        api.setActive(editor.formatter.match(name));\n        const binding = editor.formatter.formatChanged(name, api.setActive);\n        boundFormatChangeCallback.set(binding);\n      };\n      editor.initialized ? init() : editor.once('init', init);\n      return () => {\n        editor.off('init', init);\n        boundFormatChangeCallback.clear();\n      };\n    };\n    const onSetupStateToggle = (editor, name) => api => {\n      const unbindEditableToogle = onSetupEditableToggle(editor)(api);\n      const unbindFormatToggle = onSetupFormatToggle(editor, name)(api);\n      return () => {\n        unbindEditableToogle();\n        unbindFormatToggle();\n      };\n    };\n    const onSetupEvent = (editor, event, f) => api => {\n      const handleEvent = () => f(api);\n      const init = () => {\n        f(api);\n        editor.on(event, handleEvent);\n      };\n      editor.initialized ? init() : editor.once('init', init);\n      return () => {\n        editor.off('init', init);\n        editor.off(event, handleEvent);\n      };\n    };\n    const onActionToggleFormat$1 = editor => rawItem => () => {\n      editor.undoManager.transact(() => {\n        editor.focus();\n        editor.execCommand('mceToggleFormat', false, rawItem.format);\n      });\n    };\n    const onActionExecCommand = (editor, command) => () => editor.execCommand(command);\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    const cacheStorage = {};\n    const ColorCache = (storageId, max = 10) => {\n      const storageString = global$4.getItem(storageId);\n      const localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      const prune = list => {\n        const diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      const cache = prune(localstorage);\n      const add = key => {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$4.setItem(storageId, JSON.stringify(cache));\n      };\n      const remove = idx => {\n        cache.splice(idx, 1);\n      };\n      const state = () => cache.slice(0);\n      return {\n        add,\n        state\n      };\n    };\n    const getCacheForId = id => get$g(cacheStorage, id).getOrThunk(() => {\n      const storageId = `tinymce-custom-colors-${ id }`;\n      const currentData = global$4.getItem(storageId);\n      if (isNullable(currentData)) {\n        const legacyDefault = global$4.getItem('tinymce-custom-colors');\n        global$4.setItem(storageId, isNonNullable(legacyDefault) ? legacyDefault : '[]');\n      }\n      const storage = ColorCache(storageId, 10);\n      cacheStorage[id] = storage;\n      return storage;\n    });\n    const getCurrentColors = id => map$2(getCacheForId(id).state(), color => ({\n      type: 'choiceitem',\n      text: color,\n      icon: 'checkmark',\n      value: color\n    }));\n    const addColor = (id, color) => {\n      getCacheForId(id).add(color);\n    };\n\n    const hsvColour = (hue, saturation, value) => ({\n      hue,\n      saturation,\n      value\n    });\n    const fromRgb = rgbaColour => {\n      let h = 0;\n      let s = 0;\n      let v = 0;\n      const r = rgbaColour.red / 255;\n      const g = rgbaColour.green / 255;\n      const b = rgbaColour.blue / 255;\n      const minRGB = Math.min(r, Math.min(g, b));\n      const maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      const d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    const hexToHsv = hex => fromRgb(fromHex(hex));\n    const hsvToHex = hsv => fromRgba(fromHsv(hsv));\n    const anyToHex = color => fromString$1(color).orThunk(() => fromString(color).map(fromRgba)).getOrThunk(() => {\n      const canvas = document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      const canvasContext = canvas.getContext('2d');\n      canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n      canvasContext.fillStyle = '#FFFFFF';\n      canvasContext.fillStyle = color;\n      canvasContext.fillRect(0, 0, 1, 1);\n      const rgba = canvasContext.getImageData(0, 0, 1, 1).data;\n      const r = rgba[0];\n      const g = rgba[1];\n      const b = rgba[2];\n      const a = rgba[3];\n      return fromRgba(rgbaColour(r, g, b, a));\n    });\n\n    const foregroundId = 'forecolor';\n    const backgroundId = 'hilitecolor';\n    const fallbackCols = 5;\n    const mapColors = colorMap => {\n      const colors = [];\n      for (let i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: '#' + anyToHex(colorMap[i]).value,\n          icon: 'checkmark',\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    const option$1 = name => editor => editor.options.get(name);\n    const fallbackColor = '#000000';\n    const register$d = editor => {\n      const registerOption = editor.options.register;\n      const colorProcessor = value => {\n        if (isArrayOf(value, isString)) {\n          return {\n            value: mapColors(value),\n            valid: true\n          };\n        } else {\n          return {\n            valid: false,\n            message: 'Must be an array of strings.'\n          };\n        }\n      };\n      const colorColsProcessor = value => {\n        if (isNumber(value) && value > 0) {\n          return {\n            value,\n            valid: true\n          };\n        } else {\n          return {\n            valid: false,\n            message: 'Must be a positive number.'\n          };\n        }\n      };\n      registerOption('color_map', {\n        processor: colorProcessor,\n        default: [\n          '#BFEDD2',\n          'Light Green',\n          '#FBEEB8',\n          'Light Yellow',\n          '#F8CAC6',\n          'Light Red',\n          '#ECCAFA',\n          'Light Purple',\n          '#C2E0F4',\n          'Light Blue',\n          '#2DC26B',\n          'Green',\n          '#F1C40F',\n          'Yellow',\n          '#E03E2D',\n          'Red',\n          '#B96AD9',\n          'Purple',\n          '#3598DB',\n          'Blue',\n          '#169179',\n          'Dark Turquoise',\n          '#E67E23',\n          'Orange',\n          '#BA372A',\n          'Dark Red',\n          '#843FA1',\n          'Dark Purple',\n          '#236FA1',\n          'Dark Blue',\n          '#ECF0F1',\n          'Light Gray',\n          '#CED4D9',\n          'Medium Gray',\n          '#95A5A6',\n          'Gray',\n          '#7E8C8D',\n          'Dark Gray',\n          '#34495E',\n          'Navy Blue',\n          '#000000',\n          'Black',\n          '#ffffff',\n          'White'\n        ]\n      });\n      registerOption('color_map_background', { processor: colorProcessor });\n      registerOption('color_map_foreground', { processor: colorProcessor });\n      registerOption('color_cols', {\n        processor: colorColsProcessor,\n        default: calcCols(editor)\n      });\n      registerOption('color_cols_foreground', {\n        processor: colorColsProcessor,\n        default: defaultCols(editor, foregroundId)\n      });\n      registerOption('color_cols_background', {\n        processor: colorColsProcessor,\n        default: defaultCols(editor, backgroundId)\n      });\n      registerOption('custom_colors', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('color_default_foreground', {\n        processor: 'string',\n        default: fallbackColor\n      });\n      registerOption('color_default_background', {\n        processor: 'string',\n        default: fallbackColor\n      });\n    };\n    const getColors$2 = (editor, id) => {\n      if (id === foregroundId && editor.options.isSet('color_map_foreground')) {\n        return option$1('color_map_foreground')(editor);\n      } else if (id === backgroundId && editor.options.isSet('color_map_background')) {\n        return option$1('color_map_background')(editor);\n      } else {\n        return option$1('color_map')(editor);\n      }\n    };\n    const calcCols = (editor, id = 'default') => Math.max(fallbackCols, Math.ceil(Math.sqrt(getColors$2(editor, id).length)));\n    const defaultCols = (editor, id) => {\n      const defaultCols = option$1('color_cols')(editor);\n      const calculatedCols = calcCols(editor, id);\n      if (defaultCols === calcCols(editor)) {\n        return calculatedCols;\n      } else {\n        return defaultCols;\n      }\n    };\n    const getColorCols$1 = (editor, id = 'default') => {\n      const getCols = () => {\n        if (id === foregroundId) {\n          return option$1('color_cols_foreground')(editor);\n        } else if (id === backgroundId) {\n          return option$1('color_cols_background')(editor);\n        } else {\n          return option$1('color_cols')(editor);\n        }\n      };\n      return Math.round(getCols());\n    };\n    const hasCustomColors$1 = option$1('custom_colors');\n    const getDefaultForegroundColor = option$1('color_default_foreground');\n    const getDefaultBackgroundColor = option$1('color_default_background');\n\n    const defaultBackgroundColor = 'rgba(0, 0, 0, 0)';\n    const isValidBackgroundColor = value => fromString(value).exists(c => c.alpha !== 0);\n    const getClosestCssBackgroundColorValue = scope => {\n      return closest$4(scope, node => {\n        if (isElement$1(node)) {\n          const color = get$e(node, 'background-color');\n          return someIf(isValidBackgroundColor(color), color);\n        } else {\n          return Optional.none();\n        }\n      }).getOr(defaultBackgroundColor);\n    };\n    const getCurrentColor = (editor, format) => {\n      const node = SugarElement.fromDom(editor.selection.getStart());\n      const cssRgbValue = format === 'hilitecolor' ? getClosestCssBackgroundColorValue(node) : get$e(node, 'color');\n      return fromString(cssRgbValue).map(rgba => '#' + fromRgba(rgba).value);\n    };\n    const applyFormat = (editor, format, value) => {\n      editor.undoManager.transact(() => {\n        editor.focus();\n        editor.formatter.apply(format, { value });\n        editor.nodeChanged();\n      });\n    };\n    const removeFormat = (editor, format) => {\n      editor.undoManager.transact(() => {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, undefined, true);\n        editor.nodeChanged();\n      });\n    };\n    const registerCommands = editor => {\n      editor.addCommand('mceApplyTextcolor', (format, value) => {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', format => {\n        removeFormat(editor, format);\n      });\n    };\n    const getAdditionalColors = hasCustom => {\n      const type = 'choiceitem';\n      const remove = {\n        type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      const custom = {\n        type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    const applyColor = (editor, format, value, onChoice) => {\n      if (value === 'custom') {\n        const dialog = colorPickerDialog(editor);\n        dialog(colorOpt => {\n          colorOpt.each(color => {\n            addColor(format, color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, getCurrentColor(editor, format).getOr(fallbackColor));\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    const getColors$1 = (colors, id, hasCustom) => colors.concat(getCurrentColors(id).concat(getAdditionalColors(hasCustom)));\n    const getFetch$1 = (colors, id, hasCustom) => callback => {\n      callback(getColors$1(colors, id, hasCustom));\n    };\n    const setIconColor = (splitButtonApi, name, newColor) => {\n      const id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      splitButtonApi.setIconFill(id, newColor);\n    };\n    const setTooltip = (buttonApi, tooltip) => {\n      buttonApi.setTooltip(tooltip);\n    };\n    const select$1 = (editor, format) => value => {\n      const optCurrentHex = getCurrentColor(editor, format);\n      return is$1(optCurrentHex, value.toUpperCase());\n    };\n    const getToolTipText = (editor, format, lastColor) => {\n      if (isEmpty(lastColor)) {\n        return format === 'forecolor' ? 'Text color' : 'Background color';\n      }\n      const tooltipPrefix = format === 'forecolor' ? 'Text color {0}' : 'Background color {0}';\n      const colors = getColors$1(getColors$2(editor, format), format, false);\n      const colorText = find$5(colors, c => c.value === lastColor).getOr({ text: '' }).text;\n      return editor.translate([\n        tooltipPrefix,\n        editor.translate(colorText)\n      ]);\n    };\n    const registerTextColorButton = (editor, name, format, lastColor) => {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: getToolTipText(editor, format, lastColor.get()),\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: select$1(editor, format),\n        columns: getColorCols$1(editor, format),\n        fetch: getFetch$1(getColors$2(editor, format), format, hasCustomColors$1(editor)),\n        onAction: _splitButtonApi => {\n          applyColor(editor, format, lastColor.get(), noop);\n        },\n        onItemAction: (_splitButtonApi, value) => {\n          applyColor(editor, format, value, newColor => {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: splitButtonApi => {\n          setIconColor(splitButtonApi, name, lastColor.get());\n          const handler = e => {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n              setTooltip(splitButtonApi, getToolTipText(editor, format, e.color));\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return composeUnbinders(onSetupEditableToggle(editor)(splitButtonApi), () => {\n            editor.off('TextColorChange', handler);\n          });\n        }\n      });\n    };\n    const registerTextColorMenuItem = (editor, name, format, text, lastColor) => {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        onSetup: api => {\n          setTooltip(api, getToolTipText(editor, format, lastColor.get()));\n          setIconColor(api, name, lastColor.get());\n          return onSetupEditableToggle(editor)(api);\n        },\n        getSubmenuItems: () => [{\n            type: 'fancymenuitem',\n            fancytype: 'colorswatch',\n            select: select$1(editor, format),\n            initData: { storageKey: format },\n            onAction: data => {\n              applyColor(editor, format, data.value, newColor => {\n                lastColor.set(newColor);\n                fireTextColorChange(editor, {\n                  name,\n                  color: newColor\n                });\n              });\n            }\n          }]\n      });\n    };\n    const colorPickerDialog = editor => (callback, value) => {\n      let isValid = false;\n      const onSubmit = api => {\n        const data = api.getData();\n        const hex = data.colorpicker;\n        if (isValid) {\n          callback(Optional.from(hex));\n          api.close();\n        } else {\n          editor.windowManager.alert(editor.translate([\n            'Invalid hex color code: {0}',\n            hex\n          ]));\n        }\n      };\n      const onAction = (_api, details) => {\n        if (details.name === 'hex-valid') {\n          isValid = details.value;\n        }\n      };\n      const initialData = { colorpicker: value };\n      editor.windowManager.open({\n        title: 'Color Picker',\n        size: 'normal',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'colorpicker',\n              name: 'colorpicker',\n              label: 'Color'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData,\n        onAction,\n        onSubmit,\n        onClose: noop,\n        onCancel: () => {\n          callback(Optional.none());\n        }\n      });\n    };\n    const register$c = editor => {\n      registerCommands(editor);\n      const fallbackColorForeground = getDefaultForegroundColor(editor);\n      const fallbackColorBackground = getDefaultBackgroundColor(editor);\n      const lastForeColor = Cell(fallbackColorForeground);\n      const lastBackColor = Cell(fallbackColorBackground);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n    };\n\n    const createPartialChoiceMenu = (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) => {\n      const hasIcons = menuHasIcons(items);\n      const presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      const alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      const menuLayout = { menuType: presets };\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, menuLayout);\n    };\n    const createChoiceItems = (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) => cat(map$2(items, item => {\n      if (item.type === 'choiceitem') {\n        return createChoiceMenuItem(item).fold(handleError, d => Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(d.value), itemResponse, providersBackstage, menuHasIcons(items))));\n      } else {\n        return Optional.none();\n      }\n    }));\n\n    const deriveMenuMovement = (columns, presets) => {\n      const menuMarkers = markers(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        const rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass,\n          previousSelector: menu => {\n            return presets === 'color' ? descendant(menu.element, '[aria-checked=true]') : Optional.none();\n          }\n        };\n      }\n    };\n    const deriveCollectionMovement = (columns, presets) => {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? `.${ colorClass }` : `.${ selectableClass }`\n          }\n        };\n      }\n    };\n\n    const renderColorSwatchItem = (spec, backstage) => {\n      const items = getColorItems(spec, backstage);\n      const columns = backstage.colorinput.getColorCols(spec.initData.storageKey);\n      const presets = 'color';\n      const menuSpec = createPartialChoiceMenu(generate$6('menu-value'), items, value => {\n        spec.onAction({ value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), backstage.shared.providers);\n      const widgetSpec = {\n        ...menuSpec,\n        markers: markers(presets),\n        movement: deriveMenuMovement(columns, presets)\n      };\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget(Menu.sketch(widgetSpec))]\n      };\n    };\n    const getColorItems = (spec, backstage) => {\n      const useCustomColors = spec.initData.allowCustomColors && backstage.colorinput.hasCustomColors();\n      return spec.initData.colors.fold(() => getColors$1(backstage.colorinput.getColors(spec.initData.storageKey), spec.initData.storageKey, useCustomColors), colors => colors.concat(getAdditionalColors(useCustomColors)));\n    };\n\n    const cellOverEvent = generate$6('cell-over');\n    const cellExecuteEvent = generate$6('cell-execute');\n    const makeAnnouncementText = backstage => (row, col) => backstage.shared.providers.translate([\n      '{0} columns, {1} rows',\n      col,\n      row\n    ]);\n    const makeCell = (row, col, label) => {\n      const emitCellOver = c => emitWith(c, cellOverEvent, {\n        row,\n        col\n      });\n      const emitExecute = c => emitWith(c, cellExecuteEvent, {\n        row,\n        col\n      });\n      const onClick = (c, se) => {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: {\n            role: 'button',\n            ['aria-label']: label\n          }\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run$1(mouseover(), Focusing.focus),\n            run$1(execute$5(), emitExecute),\n            run$1(click(), onClick),\n            run$1(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    const makeCells = (getCellLabel, numRows, numCols) => {\n      const cells = [];\n      for (let i = 0; i < numRows; i++) {\n        const row = [];\n        for (let j = 0; j < numCols; j++) {\n          const label = getCellLabel(i + 1, j + 1);\n          row.push(makeCell(i, j, label));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    const selectCells = (cells, selectedRow, selectedColumn, numRows, numColumns) => {\n      for (let i = 0; i < numRows; i++) {\n        for (let j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    const makeComponents = cells => bind$3(cells, cellRow => map$2(cellRow, premade));\n    const makeLabelText = (row, col) => text$2(`${ col }x${ row }`);\n    const renderInsertTableMenuItem = (spec, backstage) => {\n      const numRows = 10;\n      const numColumns = 10;\n      const getCellLabel = makeAnnouncementText(backstage);\n      const cells = makeCells(getCellLabel, numRows, numColumns);\n      const emptyLabelText = makeLabelText(0, 0);\n      const memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label']\n        },\n        components: [emptyLabelText],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$6('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$f.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runOnAttached(c => {\n                  Replacing.set(memLabel.get(c), [emptyLabelText]);\n                }),\n                runWithTarget(cellOverEvent, (c, t, e) => {\n                  const {row, col} = e.event;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row + 1, col + 1)]);\n                }),\n                runWithTarget(cellExecuteEvent, (c, _, e) => {\n                  const {row, col} = e.event;\n                  spec.onAction({\n                    numRows: row + 1,\n                    numColumns: col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows,\n                  numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    const fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    const renderFancyMenuItem = (spec, backstage) => get$g(fancyMenuItems, spec.fancytype).map(render => render(spec, backstage));\n\n    const renderNestedItem = (spec, itemResponse, providersBackstage, renderIcons = true, downwardsCaret = false) => {\n      const caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      const getApi = component => ({\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state),\n        setIconFill: (id, value) => {\n          descendant(component.element, `svg path[class=\"${ id }\"], rect[class=\"${ id }\"]`).each(underlinePath => {\n            set$9(underlinePath, 'fill', value);\n          });\n        },\n        setTooltip: tooltip => {\n          const translatedTooltip = providersBackstage.translate(tooltip);\n          setAll$1(component.element, {\n            'aria-label': translatedTooltip,\n            'title': translatedTooltip\n          });\n        }\n      });\n      const structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi,\n        enabled: spec.enabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    const renderNormalItem = (spec, itemResponse, providersBackstage, renderIcons = true) => {\n      const getApi = component => ({\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state)\n      });\n      const structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi,\n        enabled: spec.enabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    const renderSeparatorItem = spec => ({\n      type: 'separator',\n      dom: {\n        tag: 'div',\n        classes: [\n          selectableClass,\n          groupHeadingClass\n        ]\n      },\n      components: spec.text.map(text$2).toArray()\n    });\n\n    const renderToggleMenuItem = (spec, itemResponse, providersBackstage, renderIcons = true) => {\n      const getApi = component => ({\n        setActive: state => {\n          Toggling.set(component, state);\n        },\n        isActive: () => Toggling.isOn(component),\n        isEnabled: () => !Disabling.isDisabled(component),\n        setEnabled: state => Disabling.set(component, !state)\n      });\n      const structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        enabled: spec.enabled,\n        getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    const autocomplete = renderAutocompleteItem;\n    const separator$3 = renderSeparatorItem;\n    const normal = renderNormalItem;\n    const nested = renderNestedItem;\n    const toggle$1 = renderToggleMenuItem;\n    const fancy = renderFancyMenuItem;\n    const card = renderCardMenuItem;\n\n    const getCoupled = (component, coupleConfig, coupleState, name) => coupleState.getOrCreate(component, coupleConfig, name);\n    const getExistingCoupled = (component, coupleConfig, coupleState, name) => coupleState.getExisting(component, coupleConfig, name);\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled,\n        getExistingCoupled: getExistingCoupled\n    });\n\n    var CouplingSchema = [requiredOf('others', setOf(Result.value, anyValue()))];\n\n    const init$a = () => {\n      const coupled = {};\n      const lookupCoupled = (coupleConfig, coupledName) => {\n        const available = keys(coupleConfig.others);\n        if (available.length === 0) {\n          throw new Error('Cannot find any known coupled components');\n        } else {\n          return get$g(coupled, coupledName);\n        }\n      };\n      const getOrCreate = (component, coupleConfig, name) => {\n        return lookupCoupled(coupleConfig, name).getOrThunk(() => {\n          const builder = get$g(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n          const spec = builder(component);\n          const built = component.getSystem().build(spec);\n          coupled[name] = built;\n          return built;\n        });\n      };\n      const getExisting = (component, coupleConfig, name) => {\n        return lookupCoupled(coupleConfig, name).orThunk(() => {\n          get$g(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n          return Optional.none();\n        });\n      };\n      const readState = constant$1({});\n      return nu$8({\n        readState,\n        getExisting,\n        getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    const Coupling = create$4({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    const nu$3 = baseFn => {\n      let data = Optional.none();\n      let callbacks = [];\n      const map = f => nu$3(nCallback => {\n        get(data => {\n          nCallback(f(data));\n        });\n      });\n      const get = nCallback => {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      const set = x => {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      const isReady = () => data.isSome();\n      const run = cbs => {\n        each$1(cbs, call);\n      };\n      const call = cb => {\n        data.each(x => {\n          setTimeout(() => {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get,\n        map,\n        isReady\n      };\n    };\n    const pure$1 = a => nu$3(callback => {\n      callback(a);\n    });\n    const LazyValue = {\n      nu: nu$3,\n      pure: pure$1\n    };\n\n    const errorReporter = err => {\n      setTimeout(() => {\n        throw err;\n      }, 0);\n    };\n    const make$5 = run => {\n      const get = callback => {\n        run().then(callback, errorReporter);\n      };\n      const map = fab => {\n        return make$5(() => run().then(fab));\n      };\n      const bind = aFutureB => {\n        return make$5(() => run().then(v => aFutureB(v).toPromise()));\n      };\n      const anonBind = futureB => {\n        return make$5(() => run().then(() => futureB.toPromise()));\n      };\n      const toLazy = () => {\n        return LazyValue.nu(get);\n      };\n      const toCached = () => {\n        let cache = null;\n        return make$5(() => {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      const toPromise = run;\n      return {\n        map,\n        bind,\n        anonBind,\n        toLazy,\n        toCached,\n        toPromise,\n        get\n      };\n    };\n    const nu$2 = baseFn => {\n      return make$5(() => new Promise(baseFn));\n    };\n    const pure = a => {\n      return make$5(() => Promise.resolve(a));\n    };\n    const Future = {\n      nu: nu$2,\n      pure\n    };\n\n    const suffix = constant$1('sink');\n    const partType$1 = constant$1(optional({\n      name: suffix(),\n      overrides: constant$1({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive$2([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    const getAnchor = (detail, component) => {\n      const hotspot = detail.getHotspot(component).getOr(component);\n      const type = 'hotspot';\n      const overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(() => ({\n        type,\n        hotspot,\n        overrides\n      }), layouts => ({\n        type,\n        hotspot,\n        overrides,\n        layouts\n      }));\n    };\n    const fetch = (detail, mapFetch, component) => {\n      const fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    const openF = (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) => {\n      const futureData = fetch(detail, mapFetch, component);\n      const getLazySink = getSink(component, detail);\n      return futureData.map(tdata => tdata.bind(data => Optional.from(tieredMenu.sketch({\n        ...externals.menu(),\n        uid: generate$5(''),\n        data,\n        highlightOnOpen,\n        onOpenMenu: (tmenu, menu) => {\n          const sink = getLazySink().getOrDie();\n          Positioning.position(sink, menu, { anchor });\n          Sandboxing.decloak(sandbox);\n        },\n        onOpenSubmenu: (tmenu, item, submenu) => {\n          const sink = getLazySink().getOrDie();\n          Positioning.position(sink, submenu, {\n            anchor: {\n              type: 'submenu',\n              item\n            }\n          });\n          Sandboxing.decloak(sandbox);\n        },\n        onRepositionMenu: (tmenu, primaryMenu, submenuTriggers) => {\n          const sink = getLazySink().getOrDie();\n          Positioning.position(sink, primaryMenu, { anchor });\n          each$1(submenuTriggers, st => {\n            Positioning.position(sink, st.triggeredMenu, {\n              anchor: {\n                type: 'submenu',\n                item: st.triggeringItem\n              }\n            });\n          });\n        },\n        onEscape: () => {\n          Focusing.focus(component);\n          Sandboxing.close(sandbox);\n          return Optional.some(true);\n        }\n      }))));\n    };\n    const open = (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) => {\n      const anchor = getAnchor(detail, hotspot);\n      const processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(tdata => {\n        tdata.fold(() => {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, data => {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    const close = (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) => {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    const togglePopup = (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) => {\n      const sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      const showing = Sandboxing.isOpen(sandbox);\n      const action = showing ? close : open;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    const matchWidth = (hotspot, container, useMinWidth) => {\n      const menu = Composing.getCurrent(container).getOr(container);\n      const buttonWidth = get$c(hotspot.element);\n      if (useMinWidth) {\n        set$8(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$7(menu.element, buttonWidth);\n      }\n    };\n    const getSink = (anyInSystem, sinkDetail) => anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(internalSink => () => Result.value(internalSink)).getOrThunk(() => sinkDetail.lazySink.fold(() => () => Result.error(new Error('No internal sink is specified, nor could an external sink be found')), lazySinkFn => () => lazySinkFn(anyInSystem)));\n    const doRepositionMenus = sandbox => {\n      Sandboxing.getState(sandbox).each(tmenu => {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    const makeSandbox$1 = (detail, hotspot, extras) => {\n      const ariaControls = manager();\n      const onOpen = (component, menu) => {\n        const anchor = getAnchor(detail, hotspot);\n        ariaControls.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      const onClose = (component, menu) => {\n        ariaControls.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      const lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaControls.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen,\n            onClose,\n            isPartOf: (container, data, queryElem) => {\n              return isPartOf$1(data, queryElem) || isPartOf$1(hotspot, queryElem);\n            },\n            getAttachPoint: () => {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: sandbox => {\n              return Sandboxing.getState(sandbox).bind(menu => Composing.getCurrent(menu));\n            }\n          }),\n          Receiving.config({\n            channels: {\n              ...receivingChannel$1({ isExtraPart: never }),\n              ...receivingChannel({ doReposition: doRepositionMenus })\n            }\n          })\n        ])\n      };\n    };\n    const repositionMenus = comp => {\n      const sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    const sandboxFields = () => [\n      defaulted('sandboxClasses', []),\n      SketchBehaviours.field('sandboxBehaviours', [\n        Composing,\n        Receiving,\n        Sandboxing,\n        Representing\n      ])\n    ];\n\n    const schema$k = constant$1([\n      required$1('dom'),\n      required$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      field('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      required$1('toggleClass'),\n      defaulted('eventOrder', {}),\n      option$3('lazySink'),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      option$3('role')\n    ].concat(sandboxFields()));\n    const parts$e = constant$1([\n      external({\n        schema: [\n          tieredMenuMarkers(),\n          defaulted('fakeFocus', false)\n        ],\n        name: 'menu',\n        defaults: detail => {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType$1()\n    ]);\n\n    const factory$k = (detail, components, _spec, externals) => {\n      const lookupAttr = attr => get$g(detail.dom, 'attributes').bind(attrs => get$g(attrs, attr));\n      const switchToMenu = sandbox => {\n        Sandboxing.getState(sandbox).each(tmenu => {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      const togglePopup$1 = (dropdownComp, onOpenSync, highlightOnOpen) => {\n        return togglePopup(detail, identity, dropdownComp, externals, onOpenSync, highlightOnOpen);\n      };\n      const action = component => {\n        const onOpenSync = switchToMenu;\n        togglePopup$1(component, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n      };\n      const apis = {\n        expand: comp => {\n          if (!Toggling.isOn(comp)) {\n            togglePopup$1(comp, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: comp => {\n          if (!Toggling.isOn(comp)) {\n            togglePopup$1(comp, noop, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n          }\n        },\n        refetch: comp => {\n          const optSandbox = Coupling.getExistingCoupled(comp, 'sandbox');\n          return optSandbox.fold(() => {\n            return togglePopup$1(comp, noop, HighlightOnOpen.HighlightMenuAndItem).map(noop);\n          }, sandboxComp => {\n            return open(detail, identity, comp, sandboxComp, externals, noop, HighlightOnOpen.HighlightMenuAndItem).map(noop);\n          });\n        },\n        isOpen: Toggling.isOn,\n        close: comp => {\n          if (Toggling.isOn(comp)) {\n            togglePopup$1(comp, noop, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n          }\n        },\n        repositionMenus: comp => {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      const triggerExecute = (comp, _se) => {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: hotspot => {\n                return makeSandbox$1(detail, hotspot, {\n                  onOpen: () => Toggling.on(hotspot),\n                  onClose: () => Toggling.off(hotspot)\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: (comp, _se) => {\n              if (Dropdown.isOpen(comp)) {\n                const sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: (comp, _se) => {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$a(Optional.some(action)),\n        eventOrder: {\n          ...detail.eventOrder,\n          [execute$5()]: [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        },\n        apis,\n        domModification: {\n          attributes: {\n            'aria-haspopup': 'true',\n            ...detail.role.fold(() => ({}), role => ({ role })),\n            ...detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {}\n          }\n        }\n      };\n    };\n    const Dropdown = composite({\n      name: 'Dropdown',\n      configFields: schema$k(),\n      partFields: parts$e(),\n      factory: factory$k,\n      apis: {\n        open: (apis, comp) => apis.open(comp),\n        refetch: (apis, comp) => apis.refetch(comp),\n        expand: (apis, comp) => apis.expand(comp),\n        close: (apis, comp) => apis.close(comp),\n        isOpen: (apis, comp) => apis.isOpen(comp),\n        repositionMenus: (apis, comp) => apis.repositionMenus(comp)\n      }\n    });\n\n    const identifyMenuLayout = searchMode => {\n      switch (searchMode.searchMode) {\n      case 'no-search': {\n          return { menuType: 'normal' };\n        }\n      default: {\n          return {\n            menuType: 'searchable',\n            searchMode\n          };\n        }\n      }\n    };\n    const handleRefetchTrigger = originalSandboxComp => {\n      const dropdown = Representing.getValue(originalSandboxComp);\n      const optSearcherState = findWithinSandbox(originalSandboxComp).map(saveState);\n      Dropdown.refetch(dropdown).get(() => {\n        const newSandboxComp = Coupling.getCoupled(dropdown, 'sandbox');\n        optSearcherState.each(searcherState => findWithinSandbox(newSandboxComp).each(inputComp => restoreState(inputComp, searcherState)));\n      });\n    };\n    const handleRedirectToMenuItem = (sandboxComp, se) => {\n      getActiveMenuItemFrom(sandboxComp).each(activeItem => {\n        retargetAndDispatchWith(sandboxComp, activeItem.element, se.event.eventType, se.event.interactionEvent);\n      });\n    };\n    const getActiveMenuItemFrom = sandboxComp => {\n      return Sandboxing.getState(sandboxComp).bind(Highlighting.getHighlighted).bind(Highlighting.getHighlighted);\n    };\n    const getSearchResults = activeMenuComp => {\n      return has(activeMenuComp.element, searchResultsClass) ? Optional.some(activeMenuComp.element) : descendant(activeMenuComp.element, '.' + searchResultsClass);\n    };\n    const updateAriaOnHighlight = (tmenuComp, menuComp, itemComp) => {\n      findWithinMenu(tmenuComp).each(inputComp => {\n        setActiveDescendant(inputComp, itemComp);\n        const optActiveResults = getSearchResults(menuComp);\n        optActiveResults.each(resultsElem => {\n          getOpt(resultsElem, 'id').each(controlledId => set$9(inputComp.element, 'aria-controls', controlledId));\n        });\n      });\n      set$9(itemComp.element, 'aria-selected', 'true');\n    };\n    const updateAriaOnDehighlight = (tmenuComp, menuComp, itemComp) => {\n      set$9(itemComp.element, 'aria-selected', 'false');\n    };\n    const focusSearchField = tmenuComp => {\n      findWithinMenu(tmenuComp).each(searcherComp => Focusing.focus(searcherComp));\n    };\n    const getSearchPattern = dropdownComp => {\n      const optSandboxComp = Coupling.getExistingCoupled(dropdownComp, 'sandbox');\n      return optSandboxComp.bind(findWithinSandbox).map(saveState).map(state => state.fetchPattern).getOr('');\n    };\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    const createMenuItemFromBridge = (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) => {\n      const providersBackstage = backstage.shared.providers;\n      const parseForHorizontalMenu = menuitem => !isHorizontalMenu ? menuitem : {\n        ...menuitem,\n        shortcut: Optional.none(),\n        icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, d => Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons)));\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, d => Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu)));\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, d => Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons)));\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, d => Optional.some(separator$3(d)));\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, d => fancy(d, backstage));\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    const createAutocompleteItems = (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) => {\n      const renderText = columns === 1;\n      const renderIcons = !renderText || menuHasIcons(items);\n      return cat(map$2(items, item => {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, d => Optional.some(separator$3(d)));\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, d => Optional.some(card({\n            ...d,\n            onAction: api => {\n              d.onAction(api);\n              onItemValueHandler(d.value, d.meta);\n            }\n          }, itemResponse, sharedBackstage, {\n            itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n            cardText: {\n              matchText,\n              highlightOn\n            }\n          })));\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, d => Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons)));\n        }\n      }));\n    };\n    const createPartialMenu = (value, items, itemResponse, backstage, isHorizontalMenu, searchMode) => {\n      const hasIcons = menuHasIcons(items);\n      const alloyItems = cat(map$2(items, item => {\n        const itemHasIcon = i => isHorizontalMenu ? !has$2(i, 'text') : hasIcons;\n        const createItem = i => createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem({\n            ...item,\n            enabled: false\n          });\n        } else {\n          return createItem(item);\n        }\n      }));\n      const menuLayout = identifyMenuLayout(searchMode);\n      const createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, menuLayout);\n    };\n    const createTieredDataFrom = partialMenu => tieredMenu.singleData(partialMenu.value, partialMenu);\n    const createInlineMenuFrom = (partialMenu, columns, focusMode, presets) => {\n      const movement = deriveMenuMovement(columns, presets);\n      const menuMarkers = markers(presets);\n      return {\n        data: createTieredDataFrom({\n          ...partialMenu,\n          movement,\n          menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached((comp, _se) => {\n              detectSize(comp, 4, menuMarkers.item).each(({numColumns, numRows}) => {\n                Keying.setGridSize(comp, numRows, numColumns);\n              });\n            })])\n        }),\n        menu: {\n          markers: markers(presets),\n          fakeFocus: focusMode === FocusMode.ContentFocus\n        }\n      };\n    };\n\n    const getAutocompleterRange = (dom, initRange) => {\n      return detect$1(SugarElement.fromDom(initRange.startContainer)).map(elm => {\n        const range = dom.createRng();\n        range.selectNode(elm.dom);\n        return range;\n      });\n    };\n    const register$b = (editor, sharedBackstage) => {\n      const autocompleterId = generate$6('autocompleter');\n      const processingAction = Cell(false);\n      const activeState = Cell(false);\n      const autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter'],\n          attributes: { id: autocompleterId }\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [\n            run$1(dismissRequested(), () => cancelIfNecessary()),\n            run$1(highlight$1(), (_, se) => {\n              getOpt(se.event.target, 'id').each(id => set$9(SugarElement.fromDom(editor.getBody()), 'aria-activedescendant', id));\n            })\n          ])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      const isMenuOpen = () => InlineView.isOpen(autocompleter);\n      const isActive = activeState.get;\n      const hideIfNecessary = () => {\n        if (isMenuOpen()) {\n          InlineView.hide(autocompleter);\n          editor.dom.remove(autocompleterId, false);\n          const editorBody = SugarElement.fromDom(editor.getBody());\n          getOpt(editorBody, 'aria-owns').filter(ariaOwnsAttr => ariaOwnsAttr === autocompleterId).each(() => {\n            remove$7(editorBody, 'aria-owns');\n            remove$7(editorBody, 'aria-activedescendant');\n          });\n        }\n      };\n      const getMenu = () => InlineView.getContent(autocompleter).bind(tmenu => {\n        return get$h(tmenu.components(), 0);\n      });\n      const cancelIfNecessary = () => editor.execCommand('mceAutocompleterClose');\n      const getCombinedItems = matches => {\n        const columns = findMap(matches, m => Optional.from(m.columns)).getOr(1);\n        return bind$3(matches, match => {\n          const choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, (itemValue, itemMeta) => {\n            const nr = editor.selection.getRng();\n            getAutocompleterRange(editor.dom, nr).each(range => {\n              const autocompleterApi = {\n                hide: () => cancelIfNecessary(),\n                reload: fetchOptions => {\n                  hideIfNecessary();\n                  editor.execCommand('mceAutocompleterReload', false, { fetchOptions });\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      const display = (lookupData, items) => {\n        findIn(SugarElement.fromDom(editor.getBody())).each(element => {\n          const columns = findMap(lookupData, ld => Optional.from(ld.columns)).getOr(1);\n          InlineView.showMenuAt(autocompleter, {\n            anchor: {\n              type: 'node',\n              root: SugarElement.fromDom(editor.getBody()),\n              node: Optional.from(element)\n            }\n          }, createInlineMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, { menuType: 'normal' }), columns, FocusMode.ContentFocus, 'normal'));\n        });\n        getMenu().each(Highlighting.highlightFirst);\n      };\n      const updateDisplay = lookupData => {\n        const combinedItems = getCombinedItems(lookupData);\n        if (combinedItems.length > 0) {\n          display(lookupData, combinedItems);\n          set$9(SugarElement.fromDom(editor.getBody()), 'aria-owns', autocompleterId);\n          if (!editor.inline) {\n            cloneAutocompleterToEditorDoc();\n          }\n        } else {\n          hideIfNecessary();\n        }\n      };\n      const cloneAutocompleterToEditorDoc = () => {\n        if (editor.dom.get(autocompleterId)) {\n          editor.dom.remove(autocompleterId, false);\n        }\n        const docElm = editor.getDoc().documentElement;\n        const selection = editor.selection.getNode();\n        const newElm = deep(autocompleter.element);\n        setAll(newElm, {\n          border: '0',\n          clip: 'rect(0 0 0 0)',\n          height: '1px',\n          margin: '-1px',\n          overflow: 'hidden',\n          padding: '0',\n          position: 'absolute',\n          width: '1px',\n          top: `${ selection.offsetTop }px`,\n          left: `${ selection.offsetLeft }px`\n        });\n        editor.dom.add(docElm, newElm.dom);\n        descendant(newElm, '[role=\"menu\"]').each(child => {\n          remove$6(child, 'position');\n          remove$6(child, 'max-height');\n        });\n      };\n      editor.on('AutocompleterStart', ({lookupData}) => {\n        activeState.set(true);\n        processingAction.set(false);\n        updateDisplay(lookupData);\n      });\n      editor.on('AutocompleterUpdate', ({lookupData}) => updateDisplay(lookupData));\n      editor.on('AutocompleterEnd', () => {\n        hideIfNecessary();\n        activeState.set(false);\n        processingAction.set(false);\n      });\n      const autocompleterUiApi = {\n        cancelIfNecessary,\n        isMenuOpen,\n        isActive,\n        isProcessingAction: processingAction.get,\n        getMenu\n      };\n      AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n    };\n    const Autocompleter = { register: register$b };\n\n    const nonScrollingOverflows = [\n      'visible',\n      'hidden',\n      'clip'\n    ];\n    const isScrollingOverflowValue = value => trim$1(value).length > 0 && !contains$2(nonScrollingOverflows, value);\n    const isScroller = elem => {\n      if (isHTMLElement(elem)) {\n        const overflowX = get$e(elem, 'overflow-x');\n        const overflowY = get$e(elem, 'overflow-y');\n        return isScrollingOverflowValue(overflowX) || isScrollingOverflowValue(overflowY);\n      } else {\n        return false;\n      }\n    };\n    const detect = popupSinkElem => {\n      const ancestorsScrollers = ancestors(popupSinkElem, isScroller);\n      const scrollers = ancestorsScrollers.length === 0 ? getShadowRoot(popupSinkElem).map(getShadowHost).map(x => ancestors(x, isScroller)).getOr([]) : ancestorsScrollers;\n      return head(scrollers).map(element => ({\n        element,\n        others: scrollers.slice(1)\n      }));\n    };\n    const detectWhenSplitUiMode = (editor, popupSinkElem) => isSplitUiMode(editor) ? detect(popupSinkElem) : Optional.none();\n    const getBoundsFrom = sc => {\n      const scrollableBoxes = [\n        ...map$2(sc.others, box$1),\n        win()\n      ];\n      return constrainByMany(box$1(sc.element), scrollableBoxes);\n    };\n\n    const closest = (scope, selector, isRoot) => closest$1(scope, selector, isRoot).isSome();\n\n    const DelayedFunction = (fun, delay) => {\n      let ref = null;\n      const schedule = (...args) => {\n        ref = setTimeout(() => {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      const cancel = () => {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel,\n        schedule\n      };\n    };\n\n    const SIGNIFICANT_MOVE = 5;\n    const LONGPRESS_DELAY = 400;\n    const getTouch = event => {\n      const raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    const isFarEnough = (touch, data) => {\n      const distX = Math.abs(touch.clientX - data.x);\n      const distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    const monitor = settings => {\n      const startData = value$2();\n      const longpressFired = Cell(false);\n      const longpress$1 = DelayedFunction(event => {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      const handleTouchstart = event => {\n        getTouch(event).each(touch => {\n          longpress$1.cancel();\n          const data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n        return Optional.none();\n      };\n      const handleTouchmove = event => {\n        longpress$1.cancel();\n        getTouch(event).each(touch => {\n          startData.on(data => {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n            }\n          });\n        });\n        return Optional.none();\n      };\n      const handleTouchend = event => {\n        longpress$1.cancel();\n        const isSame = data => eq(data.target, event.target);\n        return startData.get().filter(isSame).map(_data => {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      const handlers = wrapAll([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      const fireIfReady = (event, type) => get$g(handlers, type).bind(handler => handler(event));\n      return { fireIfReady };\n    };\n\n    const isDangerous = event => {\n      const keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains$2([\n        'input',\n        'textarea'\n      ], name$3(event.target)) && !closest(event.target, '[contenteditable=\"true\"]');\n    };\n    const setup$d = (container, rawSettings) => {\n      const settings = {\n        stopBackspace: true,\n        ...rawSettings\n      };\n      const pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      const tapEvent = monitor(settings);\n      const simpleEvents = map$2(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'transitioncancel',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), type => bind(container, type, event => {\n        tapEvent.fireIfReady(event, type).each(tapStopped => {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        const stopped = settings.triggerEvent(type, event);\n        if (stopped) {\n          event.kill();\n        }\n      }));\n      const pasteTimeout = value$2();\n      const onPaste = bind(container, 'paste', event => {\n        tapEvent.fireIfReady(event, 'paste').each(tapStopped => {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        const stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(setTimeout(() => {\n          settings.triggerEvent(postPaste(), event);\n        }, 0));\n      });\n      const onKeydown = bind(container, 'keydown', event => {\n        const stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      const onFocusIn = bind(container, 'focusin', event => {\n        const stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      const focusoutTimeout = value$2();\n      const onFocusOut = bind(container, 'focusout', event => {\n        const stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(setTimeout(() => {\n          settings.triggerEvent(postBlur(), event);\n        }, 0));\n      });\n      const unbind = () => {\n        each$1(simpleEvents, e => {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.on(clearTimeout);\n        focusoutTimeout.on(clearTimeout);\n      };\n      return { unbind };\n    };\n\n    const derive = (rawEvent, rawTarget) => {\n      const source = get$g(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    const fromSource = (event, source) => {\n      const stopper = Cell(false);\n      const cutter = Cell(false);\n      const stop = () => {\n        stopper.set(true);\n      };\n      const cut = () => {\n        cutter.set(true);\n      };\n      return {\n        stop,\n        cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    const fromExternal = event => {\n      const stopper = Cell(false);\n      const stop = () => {\n        stopper.set(true);\n      };\n      return {\n        stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    const adt$1 = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    const doTriggerHandler = (lookup, eventType, rawEvent, target, source, logger) => {\n      const handler = lookup(eventType, target);\n      const simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(() => {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$1.complete();\n      }, handlerInfo => {\n        const descHandler = handlerInfo.descHandler;\n        const eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$1.complete();\n        } else {\n          return parent(handlerInfo.element).fold(() => {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.complete();\n          }, parent => {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$1.resume(parent);\n          });\n        }\n      });\n    };\n    const doTriggerOnUntilStopped = (lookup, eventType, rawEvent, rawTarget, source, logger) => doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(always, parent => doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger), never);\n    const triggerHandler = (lookup, eventType, rawEvent, target, logger) => {\n      const source = derive(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    const broadcast = (listeners, rawEvent, _logger) => {\n      const simulatedEvent = fromExternal(rawEvent);\n      each$1(listeners, listener => {\n        const descHandler = listener.descHandler;\n        const handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    const triggerUntilStopped = (lookup, eventType, rawEvent, logger) => triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    const triggerOnUntilStopped = (lookup, eventType, rawEvent, rawTarget, logger) => {\n      const source = derive(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    const eventHandler = (element, descHandler) => ({\n      element,\n      descHandler\n    });\n    const broadcastHandler = (id, handler) => ({\n      id,\n      descHandler: handler\n    });\n    const EventRegistry = () => {\n      const registry = {};\n      const registerId = (extraArgs, id, events) => {\n        each(events, (v, k) => {\n          const handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      const findHandler = (handlers, elem) => read$1(elem).bind(id => get$g(handlers, id)).map(descHandler => eventHandler(elem, descHandler));\n      const filterByType = type => get$g(registry, type).map(handlers => mapToArray(handlers, (f, id) => broadcastHandler(id, f))).getOr([]);\n      const find = (isAboveRoot, type, target) => get$g(registry, type).bind(handlers => closest$4(target, elem => findHandler(handlers, elem), isAboveRoot));\n      const unregisterId = id => {\n        each(registry, (handlersById, _eventName) => {\n          if (has$2(handlersById, id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId,\n        unregisterId,\n        filterByType,\n        find\n      };\n    };\n\n    const Registry = () => {\n      const events = EventRegistry();\n      const components = {};\n      const readOrTag = component => {\n        const elem = component.element;\n        return read$1(elem).getOrThunk(() => write('uid-', component.element));\n      };\n      const failOnDuplicate = (component, tagId) => {\n        const conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      const register = component => {\n        const tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        const extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      const unregister = component => {\n        read$1(component.element).each(tagId => {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      const filter = type => events.filterByType(type);\n      const find = (isAboveRoot, type, target) => events.find(isAboveRoot, type, target);\n      const getById = id => get$g(components, id);\n      return {\n        find,\n        filter,\n        register,\n        unregister,\n        getById\n      };\n    };\n\n    const factory$j = detail => {\n      const {attributes, ...domWithoutAttributes} = detail.dom;\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: {\n            role: 'presentation',\n            ...attributes\n          },\n          ...domWithoutAttributes\n        },\n        components: detail.components,\n        behaviours: get$3(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    const Container = single({\n      name: 'Container',\n      factory: factory$j,\n      configFields: [\n        defaulted('components', []),\n        field('containerBehaviours', []),\n        defaulted('events', {}),\n        defaulted('domModification', {}),\n        defaulted('eventOrder', {})\n      ]\n    });\n\n    const takeover = root => {\n      const isAboveRoot = el => parent(root.element).fold(always, parent => eq(el, parent));\n      const registry = Registry();\n      const lookup = (eventName, target) => registry.find(isAboveRoot, eventName, target);\n      const domEvents = setup$d(root.element, {\n        triggerEvent: (eventName, event) => {\n          return monitorEvent(eventName, event.target, logger => triggerUntilStopped(lookup, eventName, event, logger));\n        }\n      });\n      const systemApi = {\n        debugInfo: constant$1('real'),\n        triggerEvent: (eventName, target, data) => {\n          monitorEvent(eventName, target, logger => triggerOnUntilStopped(lookup, eventName, data, target, logger));\n        },\n        triggerFocus: (target, originator) => {\n          read$1(target).fold(() => {\n            focus$3(target);\n          }, _alloyId => {\n            monitorEvent(focus$4(), target, logger => {\n              triggerHandler(lookup, focus$4(), {\n                originator,\n                kill: noop,\n                prevent: noop,\n                target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: (comp, simulatedEvent) => {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: uid => {\n          return getByUid(uid);\n        },\n        getByDom: elem => {\n          return getByDom(elem);\n        },\n        build: build$1,\n        buildOrPatch: buildOrPatch,\n        addToGui: c => {\n          add(c);\n        },\n        removeFromGui: c => {\n          remove(c);\n        },\n        addToWorld: c => {\n          addToWorld(c);\n        },\n        removeFromWorld: c => {\n          removeFromWorld(c);\n        },\n        broadcast: message => {\n          broadcast$1(message);\n        },\n        broadcastOn: (channels, message) => {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: (eventName, event) => {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      const addToWorld = component => {\n        component.connect(systemApi);\n        if (!isText(component.element)) {\n          registry.register(component);\n          each$1(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      const removeFromWorld = component => {\n        if (!isText(component.element)) {\n          each$1(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      const add = component => {\n        attach(root, component);\n      };\n      const remove = component => {\n        detach(component);\n      };\n      const destroy = () => {\n        domEvents.unbind();\n        remove$5(root.element);\n      };\n      const broadcastData = data => {\n        const receivers = registry.filter(receive());\n        each$1(receivers, receiver => {\n          const descHandler = receiver.descHandler;\n          const handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      const broadcast$1 = message => {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      const broadcastOn = (channels, message) => {\n        broadcastData({\n          universal: false,\n          channels,\n          data: message\n        });\n      };\n      const broadcastEvent = (eventName, event) => {\n        const listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      const getByUid = uid => registry.getById(uid).fold(() => Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.')), Result.value);\n      const getByDom = elem => {\n        const uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root,\n        element: root.element,\n        destroy,\n        add,\n        remove,\n        getByUid,\n        getByDom,\n        addToWorld,\n        removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn,\n        broadcastEvent\n      };\n    };\n\n    const renderBar = (spec, backstage) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-bar',\n          'tox-form__controls-h-stack'\n        ]\n      },\n      components: map$2(spec.items, backstage.interpreter)\n    });\n\n    const schema$j = constant$1([\n      defaulted('prefix', 'form-field'),\n      field('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    const parts$d = constant$1([\n      optional({\n        schema: [required$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: spec => {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: spec => {\n            const excludeFactory = exclude(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [required$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    const factory$i = (detail, components, _spec, _externals) => {\n      const behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: container => {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: field => {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: (field, value) => {\n              Composing.getCurrent(field).each(current => {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      const events = derive$2([runOnAttached((component, _simulatedEvent) => {\n          const ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(field => {\n            const id = generate$6(detail.prefix);\n            ps.label().each(label => {\n              set$9(label.element, 'for', id);\n              set$9(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(descriptor => {\n              const descriptorId = generate$6(detail.prefix);\n              set$9(descriptor.element, 'id', descriptorId);\n              set$9(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      const apis = {\n        getField: container => getPart(container, detail, 'field'),\n        getLabel: container => getPart(container, detail, 'label')\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours,\n        events,\n        apis\n      };\n    };\n    const FormField = composite({\n      name: 'FormField',\n      configFields: schema$j(),\n      partFields: parts$d(),\n      factory: factory$i,\n      apis: {\n        getField: (apis, comp) => apis.getField(comp),\n        getLabel: (apis, comp) => apis.getLabel(comp)\n      }\n    });\n\n    const exhibit$2 = (base, tabConfig) => nu$7({\n      attributes: wrapAll([{\n          key: tabConfig.tabAttr,\n          value: 'true'\n        }])\n    });\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2\n    });\n\n    var TabstopSchema = [defaulted('tabAttr', 'data-alloy-tabstop')];\n\n    const Tabstopping = create$4({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    const renderFormFieldWith = (pLabel, pField, extraClasses, extraBehaviours) => {\n      const spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    const renderFormField = (pLabel, pField) => renderFormFieldWith(pLabel, pField, [], []);\n    const renderFormFieldSpecWith = (pLabel, pField, extraClasses, extraBehaviours) => ({\n      dom: renderFormFieldDomWith(extraClasses),\n      components: pLabel.toArray().concat([pField]),\n      fieldBehaviours: derive$1(extraBehaviours)\n    });\n    const renderFormFieldDom = () => renderFormFieldDomWith([]);\n    const renderFormFieldDomWith = extraClasses => ({\n      tag: 'div',\n      classes: ['tox-form__group'].concat(extraClasses)\n    });\n    const renderLabel$3 = (label, providersBackstage) => FormField.parts.label({\n      dom: {\n        tag: 'label',\n        classes: ['tox-label']\n      },\n      components: [text$2(providersBackstage.translate(label))]\n    });\n\n    const formChangeEvent = generate$6('form-component-change');\n    const formCloseEvent = generate$6('form-close');\n    const formCancelEvent = generate$6('form-cancel');\n    const formActionEvent = generate$6('form-action');\n    const formSubmitEvent = generate$6('form-submit');\n    const formBlockEvent = generate$6('form-block');\n    const formUnblockEvent = generate$6('form-unblock');\n    const formTabChangeEvent = generate$6('form-tabchange');\n    const formResizeEvent = generate$6('form-resize');\n\n    const renderCollection = (spec, providersBackstage, initialData) => {\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const icons = providersBackstage.icons();\n      const getIcon = icon => {\n        var _a;\n        return (_a = icons[icon]) !== null && _a !== void 0 ? _a : icon;\n      };\n      const runOnItem = f => (comp, se) => {\n        closest$1(se.event.target, '[data-collection-item-value]').each(target => {\n          f(comp, se, target, get$f(target, 'data-collection-item-value'));\n        });\n      };\n      const setContents = (comp, items) => {\n        const htmlLines = map$2(items, item => {\n          const itemText = global$8.translate(item.text);\n          const textContent = spec.columns === 1 ? `<div class=\"tox-collection__item-label\">${ itemText }</div>` : '';\n          const iconContent = `<div class=\"tox-collection__item-icon\">${ getIcon(item.icon) }</div>`;\n          const mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          const ariaLabel = itemText.replace(/\\_| \\- |\\-/g, match => mapItemName[match]);\n          const disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return `<div class=\"tox-collection__item${ disabledClass }\" tabindex=\"-1\" data-collection-item-value=\"${ global$3.encodeAllRaw(item.value) }\" title=\"${ ariaLabel }\" aria-label=\"${ ariaLabel }\">${ iconContent }${ textContent }</div>`;\n        });\n        const chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk$1(htmlLines, spec.columns) : [htmlLines];\n        const html = map$2(chunks, ch => `<div class=\"tox-collection__group\">${ ch.join('') }</div>`);\n        set$6(comp.element, html.join(''));\n      };\n      const onClick = runOnItem((comp, se, tgt, itemValue) => {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      const collectionEvents = [\n        run$1(mouseover(), runOnItem((comp, se, tgt) => {\n          focus$3(tgt);\n        })),\n        run$1(click(), onClick),\n        run$1(tap(), onClick),\n        run$1(focusin(), runOnItem((comp, se, tgt) => {\n          descendant(comp.element, '.' + activeClass).each(currentActive => {\n            remove$2(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run$1(focusout(), runOnItem(comp => {\n          descendant(comp.element, '.' + activeClass).each(currentActive => {\n            remove$2(currentActive, activeClass);\n          });\n        })),\n        runOnExecute$1(runOnItem((comp, se, tgt, itemValue) => {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      const iterCollectionItems = (comp, applyAttributes) => map$2(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      const pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: comp => {\n              iterCollectionItems(comp, childElm => {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$9(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: comp => {\n              iterCollectionItems(comp, childElm => {\n                remove$2(childElm, 'tox-collection__item--state-disabled');\n                remove$7(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: initialData.getOr([])\n            },\n            onSetValue: (comp, items) => {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(({numRows, numColumns}) => {\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: {\n          [execute$5()]: [\n            'disabling',\n            'alloy.base.behaviour',\n            'collection-events'\n          ]\n        }\n      });\n      const extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    const ariaElements = [\n      'input',\n      'textarea'\n    ];\n    const isAriaElement = elem => {\n      const name = name$3(elem);\n      return contains$2(ariaElements, name);\n    };\n    const markValid = (component, invalidConfig) => {\n      const elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(notifyInfo => {\n        if (isAriaElement(component.element)) {\n          set$9(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(container => {\n          set$6(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    const markInvalid = (component, invalidConfig, invalidState, text) => {\n      const elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(notifyInfo => {\n        if (isAriaElement(component.element)) {\n          set$9(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(container => {\n          set$6(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    const query = (component, invalidConfig, _invalidState) => invalidConfig.validator.fold(() => Future.pure(Result.value(true)), validatorInfo => validatorInfo.validate(component));\n    const run = (component, invalidConfig, invalidState) => {\n      invalidConfig.notify.each(notifyInfo => {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(valid => {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(err => {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, v => {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    const isInvalid = (component, invalidConfig) => {\n      const elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run,\n        isInvalid: isInvalid\n    });\n\n    const events$8 = (invalidConfig, invalidState) => invalidConfig.validator.map(validatorInfo => derive$2([run$1(validatorInfo.onEvent, component => {\n        run(component, invalidConfig, invalidState).get(identity);\n      })].concat(validatorInfo.validateOnLoad ? [runOnAttached(component => {\n        run(component, invalidConfig, invalidState).get(noop);\n      })] : []))).getOr({});\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var InvalidateSchema = [\n      required$1('invalidClass'),\n      defaulted('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted('aria', 'alert'),\n        defaulted('getContainer', Optional.none),\n        defaulted('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        required$1('validate'),\n        defaulted('onEvent', 'input'),\n        defaulted('validateOnLoad', true)\n      ])\n    ];\n\n    const Invalidating = create$4({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: validator => {\n          return component => {\n            const v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    const exhibit$1 = () => nu$7({\n      styles: {\n        '-webkit-user-select': 'none',\n        'user-select': 'none',\n        '-ms-user-select': 'none',\n        '-moz-user-select': '-moz-none'\n      },\n      attributes: { unselectable: 'on' }\n    });\n    const events$7 = () => derive$2([abort(selectstart(), always)]);\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$7,\n        exhibit: exhibit$1\n    });\n\n    const Unselecting = create$4({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    const renderPanelButton = (spec, sharedBackstage) => Dropdown.sketch({\n      dom: spec.dom,\n      components: spec.components,\n      toggleClass: 'mce-active',\n      dropdownBehaviours: derive$1([\n        DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n        receivingConfig(),\n        Unselecting.config({}),\n        Tabstopping.config({})\n      ]),\n      layouts: spec.layouts,\n      sandboxClasses: ['tox-dialog__popups'],\n      lazySink: sharedBackstage.getSink,\n      fetch: comp => Future.nu(callback => spec.fetch(callback)).map(items => Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, value => {\n        spec.onItemAction(comp, value);\n      }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, never, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })))),\n      parts: { menu: part(false, 1, spec.presets) }\n    });\n\n    const colorInputChangeEvent = generate$6('color-input-change');\n    const colorSwatchChangeEvent = generate$6('color-swatch-change');\n    const colorPickerCancelEvent = generate$6('color-picker-cancel');\n    const renderColorInput = (spec, sharedBackstage, colorInputBackstage, initialData) => {\n      const pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        data: initialData,\n        onSetValue: c => Invalidating.run(c).get(noop),\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: comp => parentElement(comp.element),\n            notify: {\n              onValid: comp => {\n                const val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: input => {\n                const inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  const span = SugarElement.fromTag('span');\n                  set$8(span, 'background-color', inputValue);\n                  const res = getRaw(span, 'background-color').fold(() => Result.error('blah'), _ => Result.value(inputValue));\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      const pLabel = spec.label.map(label => renderLabel$3(label, sharedBackstage.providers));\n      const emitSwatchChange = (colorBit, value) => {\n        emitWith(colorBit, colorSwatchChangeEvent, { value });\n      };\n      const onItemAction = (comp, value) => {\n        memColorButton.getOpt(comp).each(colorBit => {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(valueOpt => {\n              valueOpt.fold(() => emit(colorBit, colorPickerCancelEvent), value => {\n                emitSwatchChange(colorBit, value);\n                addColor(spec.storageKey, value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      const memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: () => [\n            southwest$2,\n            southeast$2,\n            south$2\n          ],\n          onLtr: () => [\n            southeast$2,\n            southwest$2,\n            south$2\n          ]\n        },\n        components: [],\n        fetch: getFetch$1(colorInputBackstage.getColors(spec.storageKey), spec.storageKey, colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(spec.storageKey),\n        presets: 'color',\n        onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run$1(colorInputChangeEvent, (comp, se) => {\n              memColorButton.getOpt(comp).each(colorButton => {\n                set$8(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run$1(colorSwatchChangeEvent, (comp, se) => {\n              FormField.getField(comp).each(field => {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run$1(colorPickerCancelEvent, (comp, _se) => {\n              FormField.getField(comp).each(_field => {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    const labelPart = optional({\n      schema: [required$1('dom')],\n      name: 'label'\n    });\n    const edgePart = name => optional({\n      name: '' + name + '-edge',\n      overrides: detail => {\n        const action = detail.model.manager.edgeActions[name];\n        return action.fold(() => ({}), a => ({\n          events: derive$2([\n            runActionExtra(touchstart(), (comp, se, d) => a(comp, d), [detail]),\n            runActionExtra(mousedown(), (comp, se, d) => a(comp, d), [detail]),\n            runActionExtra(mousemove(), (comp, se, det) => {\n              if (det.mouseIsDown.get()) {\n                a(comp, det);\n              }\n            }, [detail])\n          ])\n        }));\n      }\n    });\n    const tlEdgePart = edgePart('top-left');\n    const tedgePart = edgePart('top');\n    const trEdgePart = edgePart('top-right');\n    const redgePart = edgePart('right');\n    const brEdgePart = edgePart('bottom-right');\n    const bedgePart = edgePart('bottom');\n    const blEdgePart = edgePart('bottom-left');\n    const ledgePart = edgePart('left');\n    const thumbPart = required({\n      name: 'thumb',\n      defaults: constant$1({ dom: { styles: { position: 'absolute' } } }),\n      overrides: detail => {\n        return {\n          events: derive$2([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    const isShift = event => isShift$1(event.event);\n    const spectrumPart = required({\n      schema: [customField('mouseIsDown', () => Cell(false))],\n      name: 'spectrum',\n      overrides: detail => {\n        const modelDetail = detail.model;\n        const model = modelDetail.manager;\n        const setValueFrom = (component, simulatedEvent) => model.getValueFromEvent(simulatedEvent).map(value => model.setValueFrom(component, detail, value));\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: (spectrum, event) => model.onLeft(spectrum, detail, isShift(event)),\n              onRight: (spectrum, event) => model.onRight(spectrum, detail, isShift(event)),\n              onUp: (spectrum, event) => model.onUp(spectrum, detail, isShift(event)),\n              onDown: (spectrum, event) => model.onDown(spectrum, detail, isShift(event))\n            }),\n            Tabstopping.config({}),\n            Focusing.config({})\n          ]),\n          events: derive$2([\n            run$1(touchstart(), setValueFrom),\n            run$1(touchmove(), setValueFrom),\n            run$1(mousedown(), setValueFrom),\n            run$1(mousemove(), (spectrum, se) => {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    const _sliderChangeEvent = 'slider.change.value';\n    const sliderChangeEvent = constant$1(_sliderChangeEvent);\n    const isTouchEvent$2 = evt => evt.type.indexOf('touch') !== -1;\n    const getEventSource = simulatedEvent => {\n      const evt = simulatedEvent.event.raw;\n      if (isTouchEvent$2(evt)) {\n        const touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(t => SugarPosition(t.clientX, t.clientY)) : Optional.none();\n      } else {\n        const mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(me => SugarPosition(me.clientX, me.clientY)) : Optional.none();\n      }\n    };\n\n    const t = 'top', r = 'right', b = 'bottom', l = 'left';\n    const minX = detail => detail.model.minX;\n    const minY = detail => detail.model.minY;\n    const min1X = detail => detail.model.minX - 1;\n    const min1Y = detail => detail.model.minY - 1;\n    const maxX = detail => detail.model.maxX;\n    const maxY = detail => detail.model.maxY;\n    const max1X = detail => detail.model.maxX + 1;\n    const max1Y = detail => detail.model.maxY + 1;\n    const range = (detail, max, min) => max(detail) - min(detail);\n    const xRange = detail => range(detail, maxX, minX);\n    const yRange = detail => range(detail, maxY, minY);\n    const halfX = detail => xRange(detail) / 2;\n    const halfY = detail => yRange(detail) / 2;\n    const step = (detail, useMultiplier) => useMultiplier ? detail.stepSize * detail.speedMultiplier : detail.stepSize;\n    const snap = detail => detail.snapToGrid;\n    const snapStart = detail => detail.snapStart;\n    const rounded = detail => detail.rounded;\n    const hasEdge = (detail, edgeName) => detail[edgeName + '-edge'] !== undefined;\n    const hasLEdge = detail => hasEdge(detail, l);\n    const hasREdge = detail => hasEdge(detail, r);\n    const hasTEdge = detail => hasEdge(detail, t);\n    const hasBEdge = detail => hasEdge(detail, b);\n    const currentValue = detail => detail.model.value.get();\n\n    const xyValue = (x, y) => ({\n      x,\n      y\n    });\n    const fireSliderChange$3 = (component, value) => {\n      emitWith(component, sliderChangeEvent(), { value });\n    };\n    const setToTLEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    const setToTEdge = (edge, detail) => {\n      fireSliderChange$3(edge, min1Y(detail));\n    };\n    const setToTEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    const setToTREdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    const setToREdge = (edge, detail) => {\n      fireSliderChange$3(edge, max1X(detail));\n    };\n    const setToREdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    const setToBREdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    const setToBEdge = (edge, detail) => {\n      fireSliderChange$3(edge, max1Y(detail));\n    };\n    const setToBEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    const setToBLEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    const setToLEdge = (edge, detail) => {\n      fireSliderChange$3(edge, min1X(detail));\n    };\n    const setToLEdgeXY = (edge, detail) => {\n      fireSliderChange$3(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    const reduceBy = (value, min, max, step) => {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    const increaseBy = (value, min, max, step) => {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    const capValue = (value, min, max) => Math.max(min, Math.min(max, value));\n    const snapValueOf = (value, min, max, step, snapStart) => snapStart.fold(() => {\n      const initValue = value - min;\n      const extraValue = Math.round(initValue / step) * step;\n      return capValue(min + extraValue, min - 1, max + 1);\n    }, start => {\n      const remainder = (value - start) % step;\n      const adjustment = Math.round(remainder / step);\n      const rawSteps = Math.floor((value - start) / step);\n      const maxSteps = Math.floor((max - start) / step);\n      const numSteps = Math.min(maxSteps, rawSteps + adjustment);\n      const r = start + numSteps * step;\n      return Math.max(start, r);\n    });\n    const findOffsetOf = (value, min, max) => Math.min(max, Math.max(value, min)) - min;\n    const findValueOf = args => {\n      const {min, max, range, value, step, snap, snapStart, rounded, hasMinEdge, hasMaxEdge, minBound, maxBound, screenRange} = args;\n      const capMin = hasMinEdge ? min - 1 : min;\n      const capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        const offset = findOffsetOf(value, minBound, maxBound);\n        const newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    const findOffsetOfValue$2 = args => {\n      const {min, max, range, value, hasMinEdge, hasMaxEdge, maxBound, maxOffset, centerMinEdge, centerMaxEdge} = args;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    const top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    const getBounds = component => component.element.dom.getBoundingClientRect();\n    const getBoundsProperty = (bounds, property) => bounds[property];\n    const getMinXBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, left);\n    };\n    const getMaxXBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, right);\n    };\n    const getMinYBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, top);\n    };\n    const getMaxYBounds = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    const getXScreenRange = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, width);\n    };\n    const getYScreenRange = component => {\n      const bounds = getBounds(component);\n      return getBoundsProperty(bounds, height);\n    };\n    const getCenterOffsetOf = (componentMinEdge, componentMaxEdge, spectrumMinEdge) => (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    const getXCenterOffSetOf = (component, spectrum) => {\n      const componentBounds = getBounds(component);\n      const spectrumBounds = getBounds(spectrum);\n      const componentMinEdge = getBoundsProperty(componentBounds, left);\n      const componentMaxEdge = getBoundsProperty(componentBounds, right);\n      const spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    const getYCenterOffSetOf = (component, spectrum) => {\n      const componentBounds = getBounds(component);\n      const spectrumBounds = getBounds(spectrum);\n      const componentMinEdge = getBoundsProperty(componentBounds, top);\n      const componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      const spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    const fireSliderChange$2 = (spectrum, value) => {\n      emitWith(spectrum, sliderChangeEvent(), { value });\n    };\n    const findValueOfOffset$1 = (spectrum, detail, left) => {\n      const args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    const setValueFrom$2 = (spectrum, detail, value) => {\n      const xValue = findValueOfOffset$1(spectrum, detail, value);\n      const sliderVal = xValue;\n      fireSliderChange$2(spectrum, sliderVal);\n      return xValue;\n    };\n    const setToMin$2 = (spectrum, detail) => {\n      const min = minX(detail);\n      fireSliderChange$2(spectrum, min);\n    };\n    const setToMax$2 = (spectrum, detail) => {\n      const max = maxX(detail);\n      fireSliderChange$2(spectrum, max);\n    };\n    const moveBy$2 = (direction, spectrum, detail, useMultiplier) => {\n      const f = direction > 0 ? increaseBy : reduceBy;\n      const xValue = f(currentValue(detail), minX(detail), maxX(detail), step(detail, useMultiplier));\n      fireSliderChange$2(spectrum, xValue);\n      return Optional.some(xValue);\n    };\n    const handleMovement$2 = direction => (spectrum, detail, useMultiplier) => moveBy$2(direction, spectrum, detail, useMultiplier).map(always);\n    const getValueFromEvent$2 = simulatedEvent => {\n      const pos = getEventSource(simulatedEvent);\n      return pos.map(p => p.left);\n    };\n    const findOffsetOfValue$1 = (spectrum, detail, value, minEdge, maxEdge) => {\n      const minOffset = 0;\n      const maxOffset = getXScreenRange(spectrum);\n      const centerMinEdge = minEdge.bind(edge => Optional.some(getXCenterOffSetOf(edge, spectrum))).getOr(minOffset);\n      const centerMaxEdge = maxEdge.bind(edge => Optional.some(getXCenterOffSetOf(edge, spectrum))).getOr(maxOffset);\n      const args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset,\n        centerMinEdge,\n        centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    const findPositionOfValue$1 = (slider, spectrum, value, minEdge, maxEdge, detail) => {\n      const offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    const setPositionFromValue$2 = (slider, thumb, detail, edges) => {\n      const value = currentValue(detail);\n      const pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      const thumbRadius = get$c(thumb.element) / 2;\n      set$8(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    const onLeft$2 = handleMovement$2(-1);\n    const onRight$2 = handleMovement$2(1);\n    const onUp$2 = Optional.none;\n    const onDown$2 = Optional.none;\n    const edgeActions$2 = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$2,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    const fireSliderChange$1 = (spectrum, value) => {\n      emitWith(spectrum, sliderChangeEvent(), { value });\n    };\n    const findValueOfOffset = (spectrum, detail, top) => {\n      const args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    const setValueFrom$1 = (spectrum, detail, value) => {\n      const yValue = findValueOfOffset(spectrum, detail, value);\n      const sliderVal = yValue;\n      fireSliderChange$1(spectrum, sliderVal);\n      return yValue;\n    };\n    const setToMin$1 = (spectrum, detail) => {\n      const min = minY(detail);\n      fireSliderChange$1(spectrum, min);\n    };\n    const setToMax$1 = (spectrum, detail) => {\n      const max = maxY(detail);\n      fireSliderChange$1(spectrum, max);\n    };\n    const moveBy$1 = (direction, spectrum, detail, useMultiplier) => {\n      const f = direction > 0 ? increaseBy : reduceBy;\n      const yValue = f(currentValue(detail), minY(detail), maxY(detail), step(detail, useMultiplier));\n      fireSliderChange$1(spectrum, yValue);\n      return Optional.some(yValue);\n    };\n    const handleMovement$1 = direction => (spectrum, detail, useMultiplier) => moveBy$1(direction, spectrum, detail, useMultiplier).map(always);\n    const getValueFromEvent$1 = simulatedEvent => {\n      const pos = getEventSource(simulatedEvent);\n      return pos.map(p => {\n        return p.top;\n      });\n    };\n    const findOffsetOfValue = (spectrum, detail, value, minEdge, maxEdge) => {\n      const minOffset = 0;\n      const maxOffset = getYScreenRange(spectrum);\n      const centerMinEdge = minEdge.bind(edge => Optional.some(getYCenterOffSetOf(edge, spectrum))).getOr(minOffset);\n      const centerMaxEdge = maxEdge.bind(edge => Optional.some(getYCenterOffSetOf(edge, spectrum))).getOr(maxOffset);\n      const args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset,\n        centerMinEdge,\n        centerMaxEdge\n      };\n      return findOffsetOfValue$2(args);\n    };\n    const findPositionOfValue = (slider, spectrum, value, minEdge, maxEdge, detail) => {\n      const offset = findOffsetOfValue(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    const setPositionFromValue$1 = (slider, thumb, detail, edges) => {\n      const value = currentValue(detail);\n      const pos = findPositionOfValue(slider, edges.getSpectrum(slider), value, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      const thumbRadius = get$d(thumb.element) / 2;\n      set$8(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    const onLeft$1 = Optional.none;\n    const onRight$1 = Optional.none;\n    const onUp$1 = handleMovement$1(-1);\n    const onDown$1 = handleMovement$1(1);\n    const edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    const fireSliderChange = (spectrum, value) => {\n      emitWith(spectrum, sliderChangeEvent(), { value });\n    };\n    const sliderValue = (x, y) => ({\n      x,\n      y\n    });\n    const setValueFrom = (spectrum, detail, value) => {\n      const xValue = findValueOfOffset$1(spectrum, detail, value.left);\n      const yValue = findValueOfOffset(spectrum, detail, value.top);\n      const val = sliderValue(xValue, yValue);\n      fireSliderChange(spectrum, val);\n      return val;\n    };\n    const moveBy = (direction, isVerticalMovement, spectrum, detail, useMultiplier) => {\n      const f = direction > 0 ? increaseBy : reduceBy;\n      const xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail, useMultiplier));\n      const yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail, useMultiplier));\n      fireSliderChange(spectrum, sliderValue(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    const handleMovement = (direction, isVerticalMovement) => (spectrum, detail, useMultiplier) => moveBy(direction, isVerticalMovement, spectrum, detail, useMultiplier).map(always);\n    const setToMin = (spectrum, detail) => {\n      const mX = minX(detail);\n      const mY = minY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    const setToMax = (spectrum, detail) => {\n      const mX = maxX(detail);\n      const mY = maxY(detail);\n      fireSliderChange(spectrum, sliderValue(mX, mY));\n    };\n    const getValueFromEvent = simulatedEvent => getEventSource(simulatedEvent);\n    const setPositionFromValue = (slider, thumb, detail, edges) => {\n      const value = currentValue(detail);\n      const xPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      const yPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      const thumbXRadius = get$c(thumb.element) / 2;\n      const thumbYRadius = get$d(thumb.element) / 2;\n      set$8(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$8(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    const onLeft = handleMovement(-1, false);\n    const onRight = handleMovement(1, false);\n    const onUp = handleMovement(-1, true);\n    const onDown = handleMovement(1, true);\n    const edgeActions = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        getValueFromEvent: getValueFromEvent,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    const SliderSchema = [\n      defaulted('stepSize', 1),\n      defaulted('speedMultiplier', 10),\n      defaulted('onChange', noop),\n      defaulted('onChoose', noop),\n      defaulted('onInit', noop),\n      defaulted('onDragStart', noop),\n      defaulted('onDragEnd', noop),\n      defaulted('snapToGrid', false),\n      defaulted('rounded', true),\n      option$3('snapStart'),\n      requiredOf('model', choose$1('mode', {\n        x: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          customField('value', spec => Cell(spec.mode.minX)),\n          required$1('getInitialValue'),\n          output$1('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', spec => Cell(spec.mode.minY)),\n          required$1('getInitialValue'),\n          output$1('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted('minX', 0),\n          defaulted('maxX', 100),\n          defaulted('minY', 0),\n          defaulted('maxY', 100),\n          customField('value', spec => Cell({\n            x: spec.mode.minX,\n            y: spec.mode.minY\n          })),\n          required$1('getInitialValue'),\n          output$1('manager', TwoDModel)\n        ]\n      })),\n      field('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      customField('mouseIsDown', () => Cell(false))\n    ];\n\n    const sketch$2 = (detail, components, _spec, _externals) => {\n      const getThumb = component => getPartOrDie(component, detail, 'thumb');\n      const getSpectrum = component => getPartOrDie(component, detail, 'spectrum');\n      const getLeftEdge = component => getPart(component, detail, 'left-edge');\n      const getRightEdge = component => getPart(component, detail, 'right-edge');\n      const getTopEdge = component => getPart(component, detail, 'top-edge');\n      const getBottomEdge = component => getPart(component, detail, 'bottom-edge');\n      const modelDetail = detail.model;\n      const model = modelDetail.manager;\n      const refresh = (slider, thumb) => {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge,\n          getRightEdge,\n          getTopEdge,\n          getBottomEdge,\n          getSpectrum\n        });\n      };\n      const setValue = (slider, newValue) => {\n        modelDetail.value.set(newValue);\n        const thumb = getThumb(slider);\n        refresh(slider, thumb);\n      };\n      const changeValue = (slider, newValue) => {\n        setValue(slider, newValue);\n        const thumb = getThumb(slider);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      const resetToMin = slider => {\n        model.setToMin(slider, detail);\n      };\n      const resetToMax = slider => {\n        model.setToMax(slider, detail);\n      };\n      const choose = slider => {\n        const fireOnChoose = () => {\n          getPart(slider, detail, 'thumb').each(thumb => {\n            const value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        const wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      const onDragStart = (slider, simulatedEvent) => {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      const onDragEnd = (slider, simulatedEvent) => {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      const focusWidget = component => {\n        getPart(component, detail, 'spectrum').map(Keying.focusIn);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: focusWidget\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: _ => {\n                return modelDetail.value.get();\n              },\n              setValue\n            }\n          }),\n          Receiving.config({ channels: { [mouseReleased()]: { onReceive: choose } } })\n        ]),\n        events: derive$2([\n          run$1(sliderChangeEvent(), (slider, simulatedEvent) => {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached((slider, _simulatedEvent) => {\n            const getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            const thumb = getThumb(slider);\n            refresh(slider, thumb);\n            const spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run$1(touchstart(), onDragStart),\n          run$1(touchend(), onDragEnd),\n          run$1(mousedown(), (component, event) => {\n            focusWidget(component);\n            onDragStart(component, event);\n          }),\n          run$1(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin,\n          resetToMax,\n          setValue,\n          refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    const Slider = composite({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch$2,\n      apis: {\n        setValue: (apis, slider, value) => {\n          apis.setValue(slider, value);\n        },\n        resetToMin: (apis, slider) => {\n          apis.resetToMin(slider);\n        },\n        resetToMax: (apis, slider) => {\n          apis.resetToMax(slider);\n        },\n        refresh: (apis, slider) => {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    const fieldsUpdate = generate$6('rgb-hex-update');\n    const sliderUpdate = generate$6('slider-update');\n    const paletteUpdate = generate$6('palette-update');\n\n    const sliderFactory = (translate, getClass) => {\n      const spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      const thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: {\n            'role': 'slider',\n            'aria-valuemin': 0,\n            'aria-valuemax': 360,\n            'aria-valuenow': 120\n          }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant$1(0)\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: (slider, _thumb, value) => {\n          set$9(slider.element, 'aria-valuenow', Math.floor(360 - value * 3.6));\n          emitWith(slider, sliderUpdate, { value });\n        }\n      });\n    };\n\n    const owner$1 = 'form';\n    const schema$i = [field('formBehaviours', [Representing])];\n    const getPartName$1 = name => '<alloy.field.' + name + '>';\n    const sketch$1 = fSpec => {\n      const parts = (() => {\n        const record = [];\n        const field = (name, config) => {\n          record.push(name);\n          return generateOne$1(owner$1, getPartName$1(name), config);\n        };\n        return {\n          field,\n          record: constant$1(record)\n        };\n      })();\n      const spec = fSpec(parts);\n      const partNames = parts.record();\n      const fieldParts = map$2(partNames, n => required({\n        name: n,\n        pname: getPartName$1(n)\n      }));\n      return composite$1(owner$1, schema$i, fieldParts, make$4, spec);\n    };\n    const toResult = (o, e) => o.fold(() => Result.error(e), Result.value);\n    const make$4 = (detail, components) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components,\n      behaviours: augment(detail.formBehaviours, [Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: form => {\n              const resPs = getAllParts(form, detail);\n              return map$1(resPs, (resPThunk, pName) => resPThunk().bind(v => {\n                const opt = Composing.getCurrent(v);\n                return toResult(opt, new Error(`Cannot find a current component to extract the value from for form part '${ pName }': ` + element(v.element)));\n              }).map(Representing.getValue));\n            },\n            setValue: (form, values) => {\n              each(values, (newValue, key) => {\n                getPart(form, detail, key).each(wrapper => {\n                  Composing.getCurrent(wrapper).each(field => {\n                    Representing.setValue(field, newValue);\n                  });\n                });\n              });\n            }\n          }\n        })]),\n      apis: {\n        getField: (form, key) => {\n          return getPart(form, detail, key).bind(Composing.getCurrent);\n        }\n      }\n    });\n    const Form = {\n      getField: makeApi((apis, component, key) => apis.getField(component, key)),\n      sketch: sketch$1\n    };\n\n    const validInput = generate$6('valid-input');\n    const invalidInput = generate$6('invalid-input');\n    const validatingInput = generate$6('validating-input');\n    const translatePrefix = 'colorcustom.rgb.';\n    const rgbFormFactory = (translate, getClass, onValidHexx, onInvalidHexx) => {\n      const invalidation = (label, isValid) => Invalidating.config({\n        invalidClass: getClass('invalid'),\n        notify: {\n          onValidate: comp => {\n            emitWith(comp, validatingInput, { type: label });\n          },\n          onValid: comp => {\n            emitWith(comp, validInput, {\n              type: label,\n              value: Representing.getValue(comp)\n            });\n          },\n          onInvalid: comp => {\n            emitWith(comp, invalidInput, {\n              type: label,\n              value: Representing.getValue(comp)\n            });\n          }\n        },\n        validator: {\n          validate: comp => {\n            const value = Representing.getValue(comp);\n            const res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n            return Future.pure(res);\n          },\n          validateOnLoad: false\n        }\n      });\n      const renderTextField = (isValid, name, label, description, data) => {\n        const helptext = translate(translatePrefix + 'range');\n        const pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            attributes: { 'aria-label': description }\n          },\n          components: [text$2(label)]\n        });\n        const pField = FormField.parts.field({\n          data,\n          factory: Input,\n          inputAttributes: {\n            type: 'text',\n            ...name === 'hex' ? { 'aria-live': 'polite' } : {}\n          },\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: input => {\n            if (Invalidating.isInvalid(input)) {\n              const run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        const comps = [\n          pLabel,\n          pField\n        ];\n        const concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        const components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components\n        };\n      };\n      const copyRgbToHex = (form, rgba) => {\n        const hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(hexField => {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      const copyRgbToForm = (form, rgb) => {\n        const red = rgb.red;\n        const green = rgb.green;\n        const blue = rgb.blue;\n        Representing.setValue(form, {\n          red,\n          green,\n          blue\n        });\n      };\n      const memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      const updatePreview = (anyInSystem, hex) => {\n        memPreview.getOpt(anyInSystem).each(preview => {\n          set$8(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      const factory = () => {\n        const state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        const copyHexToRgb = (form, hex) => {\n          const rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        const get = prop => state[prop].get();\n        const set = (prop, value) => {\n          state[prop].set(value);\n        };\n        const getValueRgb = () => get('red').bind(red => get('green').bind(green => get('blue').map(blue => rgbaColour(red, green, blue, 1))));\n        const setValueRgb = rgb => {\n          const red = rgb.red;\n          const green = rgb.green;\n          const blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        const onInvalidInput = (form, simulatedEvent) => {\n          const data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        const onValidHex = (form, value) => {\n          onValidHexx(form);\n          const hex = hexColour(value);\n          set('hex', Optional.some(hex.value));\n          const rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex });\n          updatePreview(form, hex);\n        };\n        const onValidRgb = (form, prop, value) => {\n          const val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(rgb => {\n            const hex = copyRgbToHex(form, rgb);\n            emitWith(form, fieldsUpdate, { hex });\n            updatePreview(form, hex);\n          });\n        };\n        const isHexInputEvent = data => data.type === 'hex';\n        const onValidInput = (form, simulatedEvent) => {\n          const data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        const formPartStrings = key => ({\n          label: translate(translatePrefix + key + '.label'),\n          description: translate(translatePrefix + key + '.description')\n        });\n        const redStrings = formPartStrings('red');\n        const greenStrings = formPartStrings('green');\n        const blueStrings = formPartStrings('blue');\n        const hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(parts => ({\n          dom: {\n            tag: 'form',\n            classes: [getClass('rgb-form')],\n            attributes: { 'aria-label': translate('aria.color.picker') }\n          },\n          components: [\n            parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n            parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n            parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n            parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n            memPreview.asSpec()\n          ],\n          formBehaviours: derive$1([\n            Invalidating.config({ invalidClass: getClass('form-invalid') }),\n            config('rgb-form-events', [\n              run$1(validInput, onValidInput),\n              run$1(invalidInput, onInvalidInput),\n              run$1(validatingInput, onInvalidInput)\n            ])\n          ])\n        })), {\n          apis: {\n            updateHex: (form, hex) => {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      const rgbFormSketcher = single({\n        factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: (apis, form, hex) => {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    const paletteFactory = (translate, getClass) => {\n      const spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      const thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: `<div class=${ getClass('sv-palette-inner-thumb') } role=\"presentation\"></div>`\n        }\n      });\n      const setColour = (canvas, rgba) => {\n        const {width, height} = canvas;\n        const ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        const grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        const grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      const setPaletteHue = (slider, hue) => {\n        const canvas = slider.components()[0].element.dom;\n        const hsv = hsvColour(hue, 100, 100);\n        const rgba = fromHsv(hsv);\n        setColour(canvas, toString(rgba));\n      };\n      const setPaletteThumb = (slider, hex) => {\n        const hsv = fromRgb(fromHex(hex));\n        Slider.setValue(slider, {\n          x: hsv.saturation,\n          y: 100 - hsv.value\n        });\n        set$9(slider.element, 'aria-valuetext', translate([\n          'Saturation {0}%, Brightness {1}%',\n          hsv.saturation,\n          hsv.value\n        ]));\n      };\n      const factory = _detail => {\n        const getInitialValue = constant$1({\n          x: 0,\n          y: 0\n        });\n        const onChange = (slider, _thumb, value) => {\n          if (!isNumber(value)) {\n            set$9(slider.element, 'aria-valuetext', translate([\n              'Saturation {0}%, Brightness {1}%',\n              Math.floor(value.x),\n              Math.floor(100 - value.y)\n            ]));\n          }\n          emitWith(slider, paletteUpdate, { value });\n        };\n        const onInit = (_slider, _thumb, spectrum, _value) => {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        const sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: {\n              'role': 'slider',\n              'aria-valuetext': translate([\n                'Saturation {0}%, Brightness {1}%',\n                0,\n                0\n              ])\n            },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange,\n          onInit,\n          sliderBehaviours\n        });\n      };\n      const saturationBrightnessPaletteSketcher = single({\n        factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setHue: (_apis, slider, hue) => {\n            setPaletteHue(slider, hue);\n          },\n          setThumb: (_apis, slider, hex) => {\n            setPaletteThumb(slider, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    const makeFactory = (translate, getClass) => {\n      const factory = detail => {\n        const rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        const sbPalette = paletteFactory(translate, getClass);\n        const hueSliderToDegrees = hue => (100 - hue) / 100 * 360;\n        const hueDegreesToSlider = hue => 100 - hue / 360 * 100;\n        const state = {\n          paletteRgba: Cell(red),\n          paletteHue: Cell(0)\n        };\n        const memSlider = record(sliderFactory(translate, getClass));\n        const memPalette = record(sbPalette.sketch({}));\n        const memRgb = record(rgbForm.sketch({}));\n        const updatePalette = (anyInSystem, _hex, hue) => {\n          memPalette.getOpt(anyInSystem).each(palette => {\n            sbPalette.setHue(palette, hue);\n          });\n        };\n        const updateFields = (anyInSystem, hex) => {\n          memRgb.getOpt(anyInSystem).each(form => {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        const updateSlider = (anyInSystem, _hex, hue) => {\n          memSlider.getOpt(anyInSystem).each(slider => {\n            Slider.setValue(slider, hueDegreesToSlider(hue));\n          });\n        };\n        const updatePaletteThumb = (anyInSystem, hex) => {\n          memPalette.getOpt(anyInSystem).each(palette => {\n            sbPalette.setThumb(palette, hex);\n          });\n        };\n        const updateState = (hex, hue) => {\n          const rgba = fromHex(hex);\n          state.paletteRgba.set(rgba);\n          state.paletteHue.set(hue);\n        };\n        const runUpdates = (anyInSystem, hex, hue, updates) => {\n          updateState(hex, hue);\n          each$1(updates, update => {\n            update(anyInSystem, hex, hue);\n          });\n        };\n        const onPaletteUpdate = () => {\n          const updates = [updateFields];\n          return (form, simulatedEvent) => {\n            const value = simulatedEvent.event.value;\n            const oldHue = state.paletteHue.get();\n            const newHsv = hsvColour(oldHue, value.x, 100 - value.y);\n            const newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, oldHue, updates);\n          };\n        };\n        const onSliderUpdate = () => {\n          const updates = [\n            updatePalette,\n            updateFields\n          ];\n          return (form, simulatedEvent) => {\n            const hue = hueSliderToDegrees(simulatedEvent.event.value);\n            const oldRgb = state.paletteRgba.get();\n            const oldHsv = fromRgb(oldRgb);\n            const newHsv = hsvColour(hue, oldHsv.saturation, oldHsv.value);\n            const newHex = hsvToHex(newHsv);\n            runUpdates(form, newHex, hue, updates);\n          };\n        };\n        const onFieldsUpdate = () => {\n          const updates = [\n            updatePalette,\n            updateSlider,\n            updatePaletteThumb\n          ];\n          return (form, simulatedEvent) => {\n            const hex = simulatedEvent.event.hex;\n            const hsv = hexToHsv(hex);\n            runUpdates(form, hex, hsv.hue, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            memSlider.asSpec(),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run$1(fieldsUpdate, onFieldsUpdate()),\n              run$1(paletteUpdate, onPaletteUpdate()),\n              run$1(sliderUpdate, onSliderUpdate())\n            ]),\n            Composing.config({ find: comp => memRgb.getOpt(comp) }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      const colourPickerSketcher = single({\n        name: 'ColourPicker',\n        configFields: [\n          required$1('dom'),\n          defaulted('onValidHex', noop),\n          defaulted('onInvalidHex', noop)\n        ],\n        factory\n      });\n      return colourPickerSketcher;\n    };\n\n    const self = () => Composing.config({ find: Optional.some });\n    const memento$1 = mem => Composing.config({ find: mem.getOpt });\n    const childAt = index => Composing.config({ find: comp => child$2(comp.element, index).bind(element => comp.getSystem().getByDom(element).toOptional()) });\n    const ComposingConfigs = {\n      self,\n      memento: memento$1,\n      childAt\n    };\n\n    const processors = objOf([\n      defaulted('preprocess', identity),\n      defaulted('postprocess', identity)\n    ]);\n    const memento = (mem, rawProcessors) => {\n      const ps = asRawOrDie$1('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: comp => {\n            const other = mem.get(comp);\n            const rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: (comp, rawValue) => {\n            const newValue = ps.preprocess(rawValue);\n            const other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    const withComp = (optInitialValue, getter, setter) => Representing.config({\n      store: {\n        mode: 'manual',\n        ...optInitialValue.map(initialValue => ({ initialValue })).getOr({}),\n        getValue: getter,\n        setValue: setter\n      }\n    });\n    const withElement = (initialValue, getter, setter) => withComp(initialValue, c => getter(c.element), (c, v) => setter(c.element, v));\n    const domHtml = optInitialValue => withElement(optInitialValue, get$9, set$6);\n    const memory = initialValue => Representing.config({\n      store: {\n        mode: 'memory',\n        initialValue\n      }\n    });\n\n    const english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    const translate$1 = providerBackstage => key => {\n      if (isString(key)) {\n        return providerBackstage.translate(english[key]);\n      } else {\n        return providerBackstage.translate(key);\n      }\n    };\n    const renderColorPicker = (_spec, providerBackstage, initialData) => {\n      const getClass = key => 'tox-' + key;\n      const colourPickerFactory = makeFactory(translate$1(providerBackstage), getClass);\n      const onValidHex = form => {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      const onInvalidHex = form => {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      const memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex,\n        onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          withComp(initialData, comp => {\n            const picker = memPicker.get(comp);\n            const optRgbForm = Composing.getCurrent(picker);\n            const optHex = optRgbForm.bind(rgbForm => {\n              const formValues = Representing.getValue(rgbForm);\n              return formValues.hex;\n            });\n            return optHex.map(hex => '#' + removeLeading(hex, '#')).getOr('');\n          }, (comp, newValue) => {\n            const pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n            const valOpt = Optional.from(pattern.exec(newValue)).bind(matches => get$h(matches, 1));\n            const picker = memPicker.get(comp);\n            const optRgbForm = Composing.getCurrent(picker);\n            optRgbForm.fold(() => {\n              console.log('Can not find form');\n            }, rgbForm => {\n              Representing.setValue(rgbForm, { hex: valOpt.getOr('') });\n              Form.getField(rgbForm, 'hex').each(hexField => {\n                emit(hexField, input());\n              });\n            });\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    const isOldCustomEditor = spec => has$2(spec, 'init');\n    const renderCustomEditor = spec => {\n      const editorApi = value$2();\n      const memReplaced = record({ dom: { tag: spec.tag } });\n      const initialValue = value$2();\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(component => {\n              memReplaced.getOpt(component).each(ta => {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$2.load(spec.scriptId, spec.scriptUrl).then(init => init(ta.element.dom, spec.settings))).then(ea => {\n                  initialValue.on(cvalue => {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.clear();\n                  editorApi.set(ea);\n                });\n              });\n            })]),\n          withComp(Optional.none(), () => editorApi.get().fold(() => initialValue.get().getOr(''), ed => ed.getValue()), (component, value) => {\n            editorApi.get().fold(() => initialValue.set(value), ed => ed.setValue(value));\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    const filterByExtension = (files, providersBackstage) => {\n      const allowedImageFileTypes = global$1.explode(providersBackstage.getOption('images_file_types'));\n      const isFileInAllowedTypes = file => exists(allowedImageFileTypes, type => endsWith(file.name.toLowerCase(), `.${ type.toLowerCase() }`));\n      return filter$2(from(files), isFileInAllowedTypes);\n    };\n    const renderDropZone = (spec, providersBackstage, initialData) => {\n      const stopper = (_, se) => {\n        se.stop();\n      };\n      const sequence = actions => (comp, se) => {\n        each$1(actions, a => {\n          a(comp, se);\n        });\n      };\n      const onDrop = (comp, se) => {\n        var _a;\n        if (!Disabling.isDisabled(comp)) {\n          const transferEvent = se.event.raw;\n          handleFiles(comp, (_a = transferEvent.dataTransfer) === null || _a === void 0 ? void 0 : _a.files);\n        }\n      };\n      const onSelect = (component, simulatedEvent) => {\n        const input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      const handleFiles = (component, files) => {\n        if (files) {\n          Representing.setValue(component, filterByExtension(files, providersBackstage));\n          emitWith(component, formChangeEvent, { name: spec.name });\n        }\n      };\n      const memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      const renderField = s => ({\n        uid: s.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-dropzone-container']\n        },\n        behaviours: derive$1([\n          memory(initialData.getOr([])),\n          ComposingConfigs.self(),\n          Disabling.config({}),\n          Toggling.config({\n            toggleClass: 'dragenter',\n            toggleOnExecute: false\n          }),\n          config('dropzone-events', [\n            run$1('dragenter', sequence([\n              stopper,\n              Toggling.toggle\n            ])),\n            run$1('dragleave', sequence([\n              stopper,\n              Toggling.toggle\n            ])),\n            run$1('dragover', stopper),\n            run$1('drop', sequence([\n              stopper,\n              onDrop\n            ])),\n            run$1(change(), onSelect)\n          ])\n        ]),\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dropzone'],\n              styles: {}\n            },\n            components: [\n              {\n                dom: { tag: 'p' },\n                components: [text$2(providersBackstage.translate('Drop an image here'))]\n              },\n              Button.sketch({\n                dom: {\n                  tag: 'button',\n                  styles: { position: 'relative' },\n                  classes: [\n                    'tox-button',\n                    'tox-button--secondary'\n                  ]\n                },\n                components: [\n                  text$2(providersBackstage.translate('Browse for an image')),\n                  memInput.asSpec()\n                ],\n                action: comp => {\n                  const inputComp = memInput.get(comp);\n                  inputComp.element.dom.click();\n                },\n                buttonBehaviours: derive$1([\n                  Tabstopping.config({}),\n                  DisablingConfigs.button(providersBackstage.isDisabled),\n                  receivingConfig()\n                ])\n              })\n            ]\n          }]\n      });\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    const renderGrid = (spec, backstage) => ({\n      dom: {\n        tag: 'div',\n        classes: [\n          'tox-form__grid',\n          `tox-form__grid--${ spec.columns }col`\n        ]\n      },\n      components: map$2(spec.items, backstage.interpreter)\n    });\n\n    const adaptable = (fn, rate) => {\n      let timer = null;\n      let args = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n          args = null;\n        }\n      };\n      const throttle = (...newArgs) => {\n        args = newArgs;\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            const tempArgs = args;\n            timer = null;\n            args = null;\n            fn.apply(null, tempArgs);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const first = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const last = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        cancel();\n        timer = setTimeout(() => {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n\n    const beforeObject = generate$6('alloy-fake-before-tabstop');\n    const afterObject = generate$6('alloy-fake-after-tabstop');\n    const craftWithClasses = classes => {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    const craft = (containerClasses, spec) => {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-navobj',\n            ...containerClasses.getOr([])\n          ]\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    const triggerTab = (placeholder, shiftKey) => {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey\n        }\n      });\n    };\n    const onFocus = (container, targetComp) => {\n      const target = targetComp.element;\n      if (has(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    const isPseudoStop = element => {\n      return closest(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    const dialogChannel = generate$6('update-dialog');\n    const titleChannel = generate$6('update-title');\n    const bodyChannel = generate$6('update-body');\n    const footerChannel = generate$6('update-footer');\n    const bodySendMessageChannel = generate$6('body-send-message');\n    const dialogFocusShiftedChannel = generate$6('dialog-focus-shifted');\n\n    const browser = detect$2().browser;\n    const isSafari = browser.isSafari();\n    const isFirefox = browser.isFirefox();\n    const isSafariOrFirefox = isSafari || isFirefox;\n    const isChromium = browser.isChromium();\n    const isElementScrollAtBottom = ({scrollTop, scrollHeight, clientHeight}) => Math.ceil(scrollTop) + clientHeight >= scrollHeight;\n    const scrollToY = (win, y) => win.scrollTo(0, y === 'bottom' ? 99999999 : y);\n    const getScrollingElement = (doc, html) => {\n      const body = doc.body;\n      return Optional.from(!/^<!DOCTYPE (html|HTML)/.test(html) && (!isChromium && !isSafari || isNonNullable(body) && (body.scrollTop !== 0 || Math.abs(body.scrollHeight - body.clientHeight) > 1)) ? body : doc.documentElement);\n    };\n    const writeValue = (iframeElement, html, fallbackFn) => {\n      const iframe = iframeElement.dom;\n      Optional.from(iframe.contentDocument).fold(fallbackFn, doc => {\n        let lastScrollTop = 0;\n        const isScrollAtBottom = getScrollingElement(doc, html).map(el => {\n          lastScrollTop = el.scrollTop;\n          return el;\n        }).forall(isElementScrollAtBottom);\n        const scrollAfterWrite = () => {\n          const win = iframe.contentWindow;\n          if (isNonNullable(win)) {\n            if (isScrollAtBottom) {\n              scrollToY(win, 'bottom');\n            } else if (!isScrollAtBottom && isSafariOrFirefox && lastScrollTop !== 0) {\n              scrollToY(win, lastScrollTop);\n            }\n          }\n        };\n        if (isSafari) {\n          iframe.addEventListener('load', scrollAfterWrite, { once: true });\n        }\n        doc.open();\n        doc.write(html);\n        doc.close();\n        if (!isSafari) {\n          scrollAfterWrite();\n        }\n      });\n    };\n    const throttleInterval = someIf(isSafariOrFirefox, isSafari ? 500 : 200);\n    const writeValueThrottler = throttleInterval.map(interval => adaptable(writeValue, interval));\n    const getDynamicSource = (initialData, stream) => {\n      const cachedValue = Cell(initialData.getOr(''));\n      return {\n        getValue: _frameComponent => cachedValue.get(),\n        setValue: (frameComponent, html) => {\n          if (cachedValue.get() !== html) {\n            const iframeElement = frameComponent.element;\n            const setSrcdocValue = () => set$9(iframeElement, 'srcdoc', html);\n            if (stream) {\n              writeValueThrottler.fold(constant$1(writeValue), throttler => throttler.throttle)(iframeElement, html, setSrcdocValue);\n            } else {\n              setSrcdocValue();\n            }\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    const renderIFrame = (spec, providersBackstage, initialData) => {\n      const baseClass = 'tox-dialog__iframe';\n      const opaqueClass = spec.transparent ? [] : [`${ baseClass }--opaque`];\n      const containerBorderedClass = spec.border ? [`tox-navobj-bordered`] : [];\n      const attributes = {\n        ...spec.label.map(title => ({ title })).getOr({}),\n        ...initialData.map(html => ({ srcdoc: html })).getOr({}),\n        ...spec.sandboxed ? { sandbox: 'allow-scripts allow-same-origin' } : {}\n      };\n      const sourcing = getDynamicSource(initialData, spec.streamContent);\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const factory = newSpec => craft(Optional.from(containerBorderedClass), {\n        uid: newSpec.uid,\n        dom: {\n          tag: 'iframe',\n          attributes,\n          classes: [\n            baseClass,\n            ...opaqueClass\n          ]\n        },\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({}),\n          withComp(initialData, sourcing.getValue, sourcing.setValue),\n          Receiving.config({\n            channels: {\n              [dialogFocusShiftedChannel]: {\n                onReceive: (comp, message) => {\n                  message.newFocus.each(newFocus => {\n                    parentElement(comp.element).each(parent => {\n                      const f = eq(comp.element, newFocus) ? add$2 : remove$2;\n                      f(parent, 'tox-navobj-bordered-focus');\n                    });\n                  });\n                }\n              }\n            }\n          })\n        ])\n      });\n      const pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    const image = image => new Promise((resolve, reject) => {\n      const loaded = () => {\n        destroy();\n        resolve(image);\n      };\n      const listeners = [\n        bind(image, 'load', loaded),\n        bind(image, 'error', () => {\n          destroy();\n          reject('Unable to load data from image: ' + image.dom.src);\n        })\n      ];\n      const destroy = () => each$1(listeners, l => l.unbind());\n      if (image.dom.complete) {\n        loaded();\n      }\n    });\n\n    const calculateImagePosition = (panelWidth, panelHeight, imageWidth, imageHeight, zoom) => {\n      const width = imageWidth * zoom;\n      const height = imageHeight * zoom;\n      const left = Math.max(0, panelWidth / 2 - width / 2);\n      const top = Math.max(0, panelHeight / 2 - height / 2);\n      return {\n        left: left.toString() + 'px',\n        top: top.toString() + 'px',\n        width: width.toString() + 'px',\n        height: height.toString() + 'px'\n      };\n    };\n    const zoomToFit = (panel, width, height) => {\n      const panelW = get$c(panel);\n      const panelH = get$d(panel);\n      return Math.min(panelW / width, panelH / height, 1);\n    };\n    const renderImagePreview = (spec, initialData) => {\n      const cachedData = Cell(initialData.getOr({ url: '' }));\n      const memImage = record({\n        dom: {\n          tag: 'img',\n          classes: ['tox-imagepreview__image'],\n          attributes: initialData.map(data => ({ src: data.url })).getOr({})\n        }\n      });\n      const memContainer = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-imagepreview__container'],\n          attributes: { role: 'presentation' }\n        },\n        components: [memImage.asSpec()]\n      });\n      const setValue = (frameComponent, data) => {\n        const translatedData = { url: data.url };\n        data.zoom.each(z => translatedData.zoom = z);\n        data.cachedWidth.each(z => translatedData.cachedWidth = z);\n        data.cachedHeight.each(z => translatedData.cachedHeight = z);\n        cachedData.set(translatedData);\n        const applyFramePositioning = () => {\n          const {cachedWidth, cachedHeight, zoom} = translatedData;\n          if (!isUndefined(cachedWidth) && !isUndefined(cachedHeight)) {\n            if (isUndefined(zoom)) {\n              const z = zoomToFit(frameComponent.element, cachedWidth, cachedHeight);\n              translatedData.zoom = z;\n            }\n            const position = calculateImagePosition(get$c(frameComponent.element), get$d(frameComponent.element), cachedWidth, cachedHeight, translatedData.zoom);\n            memContainer.getOpt(frameComponent).each(container => {\n              setAll(container.element, position);\n            });\n          }\n        };\n        memImage.getOpt(frameComponent).each(imageComponent => {\n          const img = imageComponent.element;\n          if (data.url !== get$f(img, 'src')) {\n            set$9(img, 'src', data.url);\n            remove$2(frameComponent.element, 'tox-imagepreview__loaded');\n          }\n          applyFramePositioning();\n          image(img).then(img => {\n            if (frameComponent.getSystem().isConnected()) {\n              add$2(frameComponent.element, 'tox-imagepreview__loaded');\n              translatedData.cachedWidth = img.dom.naturalWidth;\n              translatedData.cachedHeight = img.dom.naturalHeight;\n              applyFramePositioning();\n            }\n          });\n        });\n      };\n      const styles = {};\n      spec.height.each(h => styles.height = h);\n      const fakeValidatedData = initialData.map(d => ({\n        url: d.url,\n        zoom: Optional.from(d.zoom),\n        cachedWidth: Optional.from(d.cachedWidth),\n        cachedHeight: Optional.from(d.cachedHeight)\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-imagepreview'],\n          styles,\n          attributes: { role: 'presentation' }\n        },\n        components: [memContainer.asSpec()],\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          withComp(fakeValidatedData, () => cachedData.get(), setValue)\n        ])\n      };\n    };\n\n    const renderLabel$2 = (spec, backstageShared) => {\n      const baseClass = 'tox-label';\n      const centerClass = spec.align === 'center' ? [`${ baseClass }--center`] : [];\n      const endClass = spec.align === 'end' ? [`${ baseClass }--end`] : [];\n      const label = {\n        dom: {\n          tag: 'label',\n          classes: [\n            baseClass,\n            ...centerClass,\n            ...endClass\n          ]\n        },\n        components: [text$2(backstageShared.providers.translate(spec.label))]\n      };\n      const comps = map$2(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [\n          label,\n          ...comps\n        ],\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    const internalToolbarButtonExecute = generate$6('toolbar.button.execute');\n    const onToolbarButtonExecute = info => runOnExecute$1((comp, _simulatedEvent) => {\n      runWithApi(info, comp)(itemApi => {\n        emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n        info.onAction(itemApi);\n      });\n    });\n    const commonButtonDisplayEvent = generate$6('common-button-display-events');\n    const toolbarButtonEventOrder = {\n      [execute$5()]: [\n        'disabling',\n        'alloy.base.behaviour',\n        'toggling',\n        'toolbar-button-events'\n      ],\n      [attachedToDom()]: [\n        'toolbar-button-events',\n        commonButtonDisplayEvent\n      ],\n      [mousedown()]: [\n        'focusing',\n        'alloy.base.behaviour',\n        commonButtonDisplayEvent\n      ]\n    };\n\n    const forceInitialSize = comp => set$8(comp.element, 'width', get$e(comp.element, 'width'));\n\n    const renderIcon$1 = (iconName, iconsProvider, behaviours) => render$3(iconName, {\n      tag: 'span',\n      classes: [\n        'tox-icon',\n        'tox-tbtn__icon-wrap'\n      ],\n      behaviours\n    }, iconsProvider);\n    const renderIconFromPack$1 = (iconName, iconsProvider) => renderIcon$1(iconName, iconsProvider, []);\n    const renderReplaceableIconFromPack = (iconName, iconsProvider) => renderIcon$1(iconName, iconsProvider, [Replacing.config({})]);\n    const renderLabel$1 = (text, prefix, providersBackstage) => ({\n      dom: {\n        tag: 'span',\n        classes: [`${ prefix }__select-label`]\n      },\n      components: [text$2(providersBackstage.translate(text))],\n      behaviours: derive$1([Replacing.config({})])\n    });\n\n    const updateMenuText = generate$6('update-menu-text');\n    const updateMenuIcon = generate$6('update-menu-icon');\n    const renderCommonDropdown = (spec, prefix, sharedBackstage) => {\n      const editorOffCell = Cell(noop);\n      const optMemDisplayText = spec.text.map(text => record(renderLabel$1(text, prefix, sharedBackstage.providers)));\n      const optMemDisplayIcon = spec.icon.map(iconName => record(renderReplaceableIconFromPack(iconName, sharedBackstage.providers.icons)));\n      const onLeftOrRightInMenu = (comp, se) => {\n        const dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      const role = spec.role.fold(() => ({}), role => ({ role }));\n      const tooltipAttributes = spec.tooltip.fold(() => ({}), tooltip => {\n        const translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      const iconSpec = render$3('chevron-down', {\n        tag: 'div',\n        classes: [`${ prefix }__select-chevron`]\n      }, sharedBackstage.providers.icons);\n      const fixWidthBehaviourName = generate$6('common-button-display-events');\n      const memDropdown = record(Dropdown.sketch({\n        ...spec.uid ? { uid: spec.uid } : {},\n        ...role,\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            `${ prefix }--select`\n          ].concat(map$2(spec.classes, c => `${ prefix }--${ c }`)),\n          attributes: { ...tooltipAttributes }\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(mem => mem.asSpec()),\n          optMemDisplayText.map(mem => mem.asSpec()),\n          Optional.some(iconSpec)\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        onOpen: (anchor, dropdownComp, tmenuComp) => {\n          if (spec.searchable) {\n            focusSearchField(tmenuComp);\n          }\n        },\n        dropdownBehaviours: derive$1([\n          ...spec.dropdownBehaviours,\n          DisablingConfigs.button(() => spec.disabled || sharedBackstage.providers.isDisabled()),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config(fixWidthBehaviourName, [runOnAttached((comp, _se) => forceInitialSize(comp))]),\n          config('menubutton-update-display-text', [\n            run$1(updateMenuText, (comp, se) => {\n              optMemDisplayText.bind(mem => mem.getOpt(comp)).each(displayText => {\n                Replacing.set(displayText, [text$2(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, (comp, se) => {\n              optMemDisplayIcon.bind(mem => mem.getOpt(comp)).each(displayIcon => {\n                Replacing.set(displayIcon, [renderReplaceableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ]),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ],\n          [attachedToDom()]: [\n            'toolbar-button-events',\n            'dropdown-events',\n            fixWidthBehaviourName\n          ]\n        }),\n        sandboxBehaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          }),\n          config('dropdown-sandbox-events', [\n            run$1(refetchTriggerEvent, (originalSandboxComp, se) => {\n              handleRefetchTrigger(originalSandboxComp);\n              se.stop();\n            }),\n            run$1(redirectMenuItemInteractionEvent, (sandboxComp, se) => {\n              handleRedirectToMenuItem(sandboxComp, se);\n              se.stop();\n            })\n          ])\n        ]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: `${ prefix }--active`,\n        parts: {\n          menu: {\n            ...part(false, spec.columns, spec.presets),\n            fakeFocus: spec.searchable,\n            onHighlightItem: updateAriaOnHighlight,\n            onCollapseMenu: (tmenuComp, itemCompCausingCollapse, nowActiveMenuComp) => {\n              Highlighting.getHighlighted(nowActiveMenuComp).each(itemComp => {\n                updateAriaOnHighlight(tmenuComp, nowActiveMenuComp, itemComp);\n              });\n            },\n            onDehighlightItem: updateAriaOnDehighlight\n          }\n        },\n        getAnchorOverrides: () => {\n          return {\n            maxHeightFunction: (element, available) => {\n              anchored()(element, available - 10);\n            }\n          };\n        },\n        fetch: comp => Future.nu(curry(spec.fetch, comp))\n      }));\n      return memDropdown.asSpec();\n    };\n\n    const isMenuItemReference = item => isString(item);\n    const isSeparator$2 = item => item.type === 'separator';\n    const isExpandingMenuItem = item => has$2(item, 'getSubmenuItems');\n    const separator$2 = { type: 'separator' };\n    const unwrapReferences = (items, menuItems) => {\n      const realItems = foldl(items, (acc, item) => {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator$2(acc[acc.length - 1]) ? acc.concat([separator$2]) : acc;\n          } else if (has$2(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator$2(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    const getFromExpandingItem = (item, menuItems) => {\n      const submenuItems = item.getSubmenuItems();\n      const rest = expand(submenuItems, menuItems);\n      const newMenus = deepMerge(rest.menus, { [item.value]: rest.items });\n      const newExpansions = deepMerge(rest.expansions, { [item.value]: item.value });\n      return {\n        item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    const generateValueIfRequired = item => {\n      const itemValue = get$g(item, 'value').getOrThunk(() => generate$6('generated-menu-item'));\n      return deepMerge({ value: itemValue }, item);\n    };\n    const expand = (items, menuItems) => {\n      const realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, (acc, item) => {\n        if (isExpandingMenuItem(item)) {\n          const itemWithValue = generateValueIfRequired(item);\n          const newData = getFromExpandingItem(itemWithValue, menuItems);\n          return {\n            menus: deepMerge(acc.menus, newData.menus),\n            items: [\n              newData.item,\n              ...acc.items\n            ],\n            expansions: deepMerge(acc.expansions, newData.expansions)\n          };\n        } else {\n          return {\n            ...acc,\n            items: [\n              item,\n              ...acc.items\n            ]\n          };\n        }\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    const getSearchModeForField = settings => {\n      return settings.search.fold(() => ({ searchMode: 'no-search' }), searchSettings => ({\n        searchMode: 'search-with-field',\n        placeholder: searchSettings.placeholder\n      }));\n    };\n    const getSearchModeForResults = settings => {\n      return settings.search.fold(() => ({ searchMode: 'no-search' }), _ => ({ searchMode: 'search-with-results' }));\n    };\n    const build = (items, itemResponse, backstage, settings) => {\n      const primary = generate$6('primary-menu');\n      const data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      const mainMenuSearchMode = getSearchModeForField(settings);\n      const mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, settings.isHorizontalMenu, mainMenuSearchMode);\n      const submenuSearchMode = getSearchModeForResults(settings);\n      const submenus = map$1(data.menus, (menuItems, menuName) => createPartialMenu(menuName, menuItems, itemResponse, backstage, false, submenuSearchMode));\n      const menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    const isSingleListItem = item => !has$2(item, 'items');\n    const dataAttribute = 'data-value';\n    const fetchItems = (dropdownComp, name, items, selectedValue) => map$2(items, item => {\n      if (!isSingleListItem(item)) {\n        return {\n          type: 'nestedmenuitem',\n          text: item.text,\n          getSubmenuItems: () => fetchItems(dropdownComp, name, item.items, selectedValue)\n        };\n      } else {\n        return {\n          type: 'togglemenuitem',\n          text: item.text,\n          value: item.value,\n          active: item.value === selectedValue,\n          onAction: () => {\n            Representing.setValue(dropdownComp, item.value);\n            emitWith(dropdownComp, formChangeEvent, { name });\n            Focusing.focus(dropdownComp);\n          }\n        };\n      }\n    });\n    const findItemByValue = (items, value) => findMap(items, item => {\n      if (!isSingleListItem(item)) {\n        return findItemByValue(item.items, value);\n      } else {\n        return someIf(item.value === value, item);\n      }\n    });\n    const renderListBox = (spec, backstage, initialData) => {\n      const providersBackstage = backstage.shared.providers;\n      const initialItem = initialData.bind(value => findItemByValue(spec.items, value)).orThunk(() => head(spec.items).filter(isSingleListItem));\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: sketchSpec => renderCommonDropdown({\n            uid: sketchSpec.uid,\n            text: initialItem.map(item => item.text),\n            icon: Optional.none(),\n            tooltip: spec.label,\n            role: Optional.none(),\n            fetch: (comp, callback) => {\n              const items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n              callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n                isHorizontalMenu: false,\n                search: Optional.none()\n              }));\n            },\n            onSetup: constant$1(noop),\n            getApi: constant$1({}),\n            columns: 1,\n            presets: 'normal',\n            classes: [],\n            dropdownBehaviours: [\n              Tabstopping.config({}),\n              withComp(initialItem.map(item => item.value), comp => get$f(comp.element, dataAttribute), (comp, data) => {\n                findItemByValue(spec.items, data).each(item => {\n                  set$9(comp.element, dataAttribute, item.value);\n                  emitWith(comp, updateMenuText, { text: item.text });\n                });\n              })\n            ]\n          }, 'tox-listbox', backstage.shared)\n        }\n      });\n      const listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant$1(!spec.enabled),\n            onDisabled: comp => {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    const renderPanel = (spec, backstage) => ({\n      dom: {\n        tag: 'div',\n        classes: spec.classes\n      },\n      components: map$2(spec.items, backstage.shared.interpreter)\n    });\n\n    const factory$h = (detail, _spec) => {\n      const options = map$2(detail.options, option => ({\n        dom: {\n          tag: 'option',\n          value: option.value,\n          innerHtml: option.text\n        }\n      }));\n      const initialValues = detail.data.map(v => wrap$1('initialValue', v)).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: select => {\n                return get$6(select.element);\n              },\n              setValue: (select, newValue) => {\n                const firstOption = head(detail.options);\n                const found = find$5(detail.options, opt => opt.value === newValue);\n                if (found.isSome()) {\n                  set$5(select.element, newValue);\n                } else if (select.element.dom.selectedIndex === -1 && newValue === '') {\n                  firstOption.each(value => set$5(select.element, value.value));\n                }\n              },\n              ...initialValues\n            }\n          })\n        ])\n      };\n    };\n    const HtmlSelect = single({\n      name: 'HtmlSelect',\n      configFields: [\n        required$1('options'),\n        field('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted('selectClasses', []),\n        defaulted('selectAttributes', {}),\n        option$3('data')\n      ],\n      factory: factory$h\n    });\n\n    const renderSelectBox = (spec, providersBackstage, initialData) => {\n      const translatedOptions = map$2(spec.items, item => ({\n        text: providersBackstage.translate(item.text),\n        value: item.value\n      }));\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const pField = FormField.parts.field({\n        dom: {},\n        ...initialData.map(data => ({ data })).getOr({}),\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run$1(change(), (component, _) => {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      const chevron = spec.size > 1 ? Optional.none() : Optional.some(render$3('chevron-down', {\n        tag: 'div',\n        classes: ['tox-selectfield__icon-js']\n      }, providersBackstage.icons));\n      const selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: () => !spec.enabled || providersBackstage.isDisabled(),\n            onDisabled: comp => {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    const schema$h = constant$1([\n      defaulted('field1Name', 'field1'),\n      defaulted('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers$1(['lockClass']),\n      defaulted('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    const getField = (comp, detail, partName) => getPart(comp, detail, partName).bind(Composing.getCurrent);\n    const coupledPart = (selfName, otherName) => required({\n      factory: FormField,\n      name: selfName,\n      overrides: detail => {\n        return {\n          fieldBehaviours: derive$1([config('coupled-input-behaviour', [run$1(input(), me => {\n                getField(me, detail, otherName).each(other => {\n                  getPart(me, detail, 'lock').each(lock => {\n                    if (Toggling.isOn(lock)) {\n                      detail.onLockedChange(me, other, lock);\n                    }\n                  });\n                });\n              })])])\n        };\n      }\n    });\n    const parts$c = constant$1([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [required$1('dom')],\n        name: 'lock',\n        overrides: detail => {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    const factory$g = (detail, components, _spec, _externals) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components,\n      behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n        Composing.config({ find: Optional.some }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: comp => {\n              const parts = getPartsOrDie(comp, detail, [\n                'field1',\n                'field2'\n              ]);\n              return {\n                [detail.field1Name]: Representing.getValue(parts.field1()),\n                [detail.field2Name]: Representing.getValue(parts.field2())\n              };\n            },\n            setValue: (comp, value) => {\n              const parts = getPartsOrDie(comp, detail, [\n                'field1',\n                'field2'\n              ]);\n              if (hasNonNullableKey(value, detail.field1Name)) {\n                Representing.setValue(parts.field1(), value[detail.field1Name]);\n              }\n              if (hasNonNullableKey(value, detail.field2Name)) {\n                Representing.setValue(parts.field2(), value[detail.field2Name]);\n              }\n            }\n          }\n        })\n      ]),\n      apis: {\n        getField1: component => getPart(component, detail, 'field1'),\n        getField2: component => getPart(component, detail, 'field2'),\n        getLock: component => getPart(component, detail, 'lock')\n      }\n    });\n    const FormCoupledInputs = composite({\n      name: 'FormCoupledInputs',\n      configFields: schema$h(),\n      partFields: parts$c(),\n      factory: factory$g,\n      apis: {\n        getField1: (apis, component) => apis.getField1(component),\n        getField2: (apis, component) => apis.getField2(component),\n        getLock: (apis, component) => apis.getLock(component)\n      }\n    });\n\n    const formatSize = size => {\n      const unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      const maxDecimal = unit => unit in unitDec ? unitDec[unit] : 1;\n      let numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    const parseSize = sizeText => {\n      const numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      const match = numPattern.exec(sizeText);\n      if (match !== null) {\n        const value = parseFloat(match[1]);\n        const unit = match[2];\n        return Result.value({\n          value,\n          unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    const convertUnit = (size, unit) => {\n      const inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      const supported = u => has$2(inInch, u);\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    const noSizeConversion = _input => Optional.none();\n    const ratioSizeConversion = (scale, unit) => size => convertUnit(size, unit).map(value => ({\n      value: value * scale,\n      unit\n    }));\n    const makeRatioConverter = (currentFieldText, otherFieldText) => {\n      const cValue = parseSize(currentFieldText).toOptional();\n      const oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, (cSize, oSize) => convertUnit(cSize, oSize.unit).map(val => oSize.value / val).map(r => ratioSizeConversion(r, oSize.unit)).getOr(noSizeConversion)).getOr(noSizeConversion);\n    };\n\n    const renderSizeInput = (spec, providersBackstage) => {\n      let converter = noSizeConversion;\n      const ratioEvent = generate$6('ratio-event');\n      const makeIcon = iconName => render$3(iconName, {\n        tag: 'span',\n        classes: [\n          'tox-icon',\n          'tox-lock-icon__' + iconName\n        ]\n      }, providersBackstage.icons);\n      const pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          makeIcon('lock'),\n          makeIcon('unlock')\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      const formGroup = components => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components\n      });\n      const getFieldPart = isField1 => FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('size-input-events', [\n            run$1(focusin(), (component, _simulatedEvent) => {\n              emitWith(component, ratioEvent, { isField1 });\n            }),\n            run$1(change(), (component, _simulatedEvent) => {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })\n          ])\n        ]),\n        selectOnFocus: false\n      });\n      const getLabel = label => ({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label']\n        },\n        components: [text$2(providersBackstage.translate(label))]\n      });\n      const widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      const heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel(nbsp),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: (current, other, _lock) => {\n          parseSize(Representing.getValue(current)).each(size => {\n            converter(size).each(newSize => {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: () => !spec.enabled || providersBackstage.isDisabled(),\n            onDisabled: comp => {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run$1(ratioEvent, (component, simulatedEvent) => {\n              const isField1 = simulatedEvent.event.isField1;\n              const optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              const optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              const value1 = optCurrent.map(Representing.getValue).getOr('');\n              const value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    const renderSlider = (spec, providerBackstage, initialData) => {\n      const labelPart = Slider.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label']\n        },\n        components: [text$2(providerBackstage.translate(spec.label))]\n      });\n      const spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: ['tox-slider__rail'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      const thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: ['tox-slider__handle'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-slider'],\n          attributes: { role: 'presentation' }\n        },\n        model: {\n          mode: 'x',\n          minX: spec.min,\n          maxX: spec.max,\n          getInitialValue: constant$1(initialData.getOrThunk(() => (Math.abs(spec.max) - Math.abs(spec.min)) / 2))\n        },\n        components: [\n          labelPart,\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([\n          ComposingConfigs.self(),\n          Focusing.config({})\n        ]),\n        onChoose: (component, thumb, value) => {\n          emitWith(component, formChangeEvent, {\n            name: spec.name,\n            value\n          });\n        }\n      });\n    };\n\n    const renderTable = (spec, providersBackstage) => {\n      const renderTh = text => ({\n        dom: {\n          tag: 'th',\n          innerHtml: providersBackstage.translate(text)\n        }\n      });\n      const renderHeader = header => ({\n        dom: { tag: 'thead' },\n        components: [{\n            dom: { tag: 'tr' },\n            components: map$2(header, renderTh)\n          }]\n      });\n      const renderTd = text => ({\n        dom: {\n          tag: 'td',\n          innerHtml: providersBackstage.translate(text)\n        }\n      });\n      const renderTr = row => ({\n        dom: { tag: 'tr' },\n        components: map$2(row, renderTd)\n      });\n      const renderRows = rows => ({\n        dom: { tag: 'tbody' },\n        components: map$2(rows, renderTr)\n      });\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    const renderTextField = (spec, providersBackstage) => {\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const baseInputBehaviours = [\n        Disabling.config({ disabled: () => spec.disabled || providersBackstage.isDisabled() }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: comp => {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run$1(input(), (component, _) => {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run$1(postPaste(), (component, _) => {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      const validatingBehaviours = spec.validation.map(vl => Invalidating.config({\n        getRoot: input => {\n          return parentElement(input.element);\n        },\n        invalidClass: 'tox-invalid',\n        validator: {\n          validate: input => {\n            const v = Representing.getValue(input);\n            const result = vl.validator(v);\n            return Future.pure(result === true ? Result.value(v) : Result.error(result));\n          },\n          validateOnLoad: vl.validateOnLoad\n        }\n      })).toArray();\n      const placeholder = spec.placeholder.fold(constant$1({}), p => ({ placeholder: providersBackstage.translate(p) }));\n      const inputMode = spec.inputMode.fold(constant$1({}), mode => ({ inputmode: mode }));\n      const inputAttributes = {\n        ...placeholder,\n        ...inputMode\n      };\n      const pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        ...spec.data.map(data => ({ data })).getOr({}),\n        inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      const pTextField = spec.multiline ? {\n        dom: {\n          tag: 'div',\n          classes: ['tox-textarea-wrap']\n        },\n        components: [pField]\n      } : pField;\n      const extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      const extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      const extraBehaviours = [\n        Disabling.config({\n          disabled: () => spec.disabled || providersBackstage.isDisabled(),\n          onDisabled: comp => {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: comp => {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pTextField, extraClasses2, extraBehaviours);\n    };\n    const renderInput = (spec, providersBackstage, initialData) => renderTextField({\n      name: spec.name,\n      multiline: false,\n      label: spec.label,\n      inputMode: spec.inputMode,\n      placeholder: spec.placeholder,\n      flex: false,\n      disabled: !spec.enabled,\n      classname: 'tox-textfield',\n      validation: Optional.none(),\n      maximized: spec.maximized,\n      data: initialData\n    }, providersBackstage);\n    const renderTextarea = (spec, providersBackstage, initialData) => renderTextField({\n      name: spec.name,\n      multiline: true,\n      label: spec.label,\n      inputMode: Optional.none(),\n      placeholder: spec.placeholder,\n      flex: true,\n      disabled: !spec.enabled,\n      classname: 'tox-textarea',\n      validation: Optional.none(),\n      maximized: spec.maximized,\n      data: initialData\n    }, providersBackstage);\n\n    const getAnimationRoot = (component, slideConfig) => slideConfig.getAnimationRoot.fold(() => component.element, get => get(component));\n\n    const getDimensionProperty = slideConfig => slideConfig.dimension.property;\n    const getDimension = (slideConfig, elem) => slideConfig.dimension.getDimension(elem);\n    const disableTransitions = (component, slideConfig) => {\n      const root = getAnimationRoot(component, slideConfig);\n      remove$1(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    const setShrunk = (component, slideConfig) => {\n      remove$2(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$8(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    const setGrown = (component, slideConfig) => {\n      remove$2(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    const doImmediateShrink = (component, slideConfig, slideState, _calculatedSize) => {\n      slideState.setCollapsed();\n      set$8(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    const doStartShrink = (component, slideConfig, slideState, calculatedSize) => {\n      const size = calculatedSize.getOrThunk(() => getDimension(slideConfig, component.element));\n      slideState.setCollapsed();\n      set$8(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      const root = getAnimationRoot(component, slideConfig);\n      remove$2(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    const doStartSmartShrink = (component, slideConfig, slideState) => {\n      const size = getDimension(slideConfig, component.element);\n      const shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    const doStartGrow = (component, slideConfig, slideState) => {\n      const root = getAnimationRoot(component, slideConfig);\n      const wasShrinking = has(root, slideConfig.shrinkingClass);\n      const beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      const fullSize = getDimension(slideConfig, component.element);\n      const startPartialGrow = () => {\n        set$8(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      const startCompleteGrow = () => {\n        setShrunk(component, slideConfig);\n      };\n      const setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$2(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$8(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    const refresh$4 = (component, slideConfig, slideState) => {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        const fullSize = getDimension(slideConfig, component.element);\n        set$8(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    const grow = (component, slideConfig, slideState) => {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    const shrink = (component, slideConfig, slideState) => {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    const immediateShrink = (component, slideConfig, slideState) => {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState);\n      }\n    };\n    const hasGrown = (component, slideConfig, slideState) => slideState.isExpanded();\n    const hasShrunk = (component, slideConfig, slideState) => slideState.isCollapsed();\n    const isGrowing = (component, slideConfig, _slideState) => {\n      const root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.growingClass) === true;\n    };\n    const isShrinking = (component, slideConfig, _slideState) => {\n      const root = getAnimationRoot(component, slideConfig);\n      return has(root, slideConfig.shrinkingClass) === true;\n    };\n    const isTransitioning = (component, slideConfig, slideState) => isGrowing(component, slideConfig) || isShrinking(component, slideConfig);\n    const toggleGrow = (component, slideConfig, slideState) => {\n      const f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n    const immediateGrow = (component, slideConfig, slideState) => {\n      if (!slideState.isExpanded()) {\n        setGrown(component, slideConfig);\n        set$8(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n        disableTransitions(component, slideConfig);\n        slideState.setExpanded();\n        slideConfig.onStartGrow(component);\n        slideConfig.onGrown(component);\n      }\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions,\n        immediateGrow: immediateGrow\n    });\n\n    const exhibit = (base, slideConfig, _slideState) => {\n      const expanded = slideConfig.expanded;\n      return expanded ? nu$7({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$7({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    const events$6 = (slideConfig, slideState) => derive$2([runOnSource(transitionend(), (component, simulatedEvent) => {\n        const raw = simulatedEvent.event.raw;\n        if (raw.propertyName === slideConfig.dimension.property) {\n          disableTransitions(component, slideConfig);\n          if (slideState.isExpanded()) {\n            remove$6(component.element, slideConfig.dimension.property);\n          }\n          const notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n          notify(component);\n        }\n      })]);\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit,\n        events: events$6\n    });\n\n    var SlidingSchema = [\n      required$1('closedClass'),\n      required$1('openClass'),\n      required$1('shrinkingClass'),\n      required$1('growingClass'),\n      option$3('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted('expanded', false),\n      requiredOf('dimension', choose$1('property', {\n        width: [\n          output$1('property', 'width'),\n          output$1('getDimension', elem => get$c(elem) + 'px')\n        ],\n        height: [\n          output$1('property', 'height'),\n          output$1('getDimension', elem => get$d(elem) + 'px')\n        ]\n      }))\n    ];\n\n    const init$9 = spec => {\n      const state = Cell(spec.expanded);\n      const readState = () => 'expanded: ' + state.get();\n      return nu$8({\n        isExpanded: () => state.get() === true,\n        isCollapsed: () => state.get() === false,\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    const Sliding = create$4({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    const getMenuButtonApi = component => ({\n      isEnabled: () => !Disabling.isDisabled(component),\n      setEnabled: state => Disabling.set(component, !state),\n      setActive: state => {\n        const elm = component.element;\n        if (state) {\n          add$2(elm, 'tox-tbtn--enabled');\n          set$9(elm, 'aria-pressed', true);\n        } else {\n          remove$2(elm, 'tox-tbtn--enabled');\n          remove$7(elm, 'aria-pressed');\n        }\n      },\n      isActive: () => has(component.element, 'tox-tbtn--enabled'),\n      setText: text => {\n        emitWith(component, updateMenuText, { text });\n      },\n      setIcon: icon => emitWith(component, updateMenuIcon, { icon })\n    });\n    const renderMenuButton = (spec, prefix, backstage, role, tabstopping = true) => {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        searchable: spec.search.isSome(),\n        role,\n        fetch: (dropdownComp, callback) => {\n          const fetchContext = { pattern: spec.search.isSome() ? getSearchPattern(dropdownComp) : '' };\n          spec.fetch(items => {\n            callback(build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n              isHorizontalMenu: false,\n              search: spec.search\n            }));\n          }, fetchContext, getMenuButtonApi(dropdownComp));\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [...tabstopping ? [Tabstopping.config({})] : []]\n      }, prefix, backstage.shared);\n    };\n    const getFetch = (items, getButton, backstage) => {\n      const getMenuItemAction = item => api => {\n        const newValue = !api.isActive();\n        api.setActive(newValue);\n        item.storage.set(newValue);\n        backstage.shared.getSink().each(sink => {\n          getButton().getOpt(sink).each(orig => {\n            focus$3(orig.element);\n            emitWith(orig, formActionEvent, {\n              name: item.name,\n              value: item.storage.get()\n            });\n          });\n        });\n      };\n      const getMenuItemSetup = item => api => {\n        api.setActive(item.storage.get());\n      };\n      return success => {\n        success(map$2(items, item => {\n          const text = item.text.fold(() => ({}), text => ({ text }));\n          return {\n            type: item.type,\n            active: false,\n            ...text,\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          };\n        }));\n      };\n    };\n\n    const renderLabel = text => ({\n      dom: {\n        tag: 'span',\n        classes: ['tox-tree__label'],\n        attributes: {\n          'title': text,\n          'aria-label': text\n        }\n      },\n      components: [text$2(text)]\n    });\n    const leafLabelEventsId = generate$6('leaf-label-event-id');\n    const renderLeafLabel = ({leaf, onLeafAction, visible, treeId, selectedId, backstage}) => {\n      const internalMenuButton = leaf.menu.map(btn => renderMenuButton(btn, 'tox-mbtn', backstage, Optional.none(), visible));\n      const components = [renderLabel(leaf.title)];\n      internalMenuButton.each(btn => components.push(btn));\n      return Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-tree--leaf__label',\n            'tox-trbtn'\n          ].concat(visible ? ['tox-tree--leaf__label--visible'] : [])\n        },\n        components,\n        role: 'treeitem',\n        action: button => {\n          onLeafAction(leaf.id);\n          button.getSystem().broadcastOn([`update-active-item-${ treeId }`], { value: leaf.id });\n        },\n        eventOrder: {\n          [keydown()]: [\n            leafLabelEventsId,\n            'keying'\n          ]\n        },\n        buttonBehaviours: derive$1([\n          ...visible ? [Tabstopping.config({})] : [],\n          Toggling.config({\n            toggleClass: 'tox-trbtn--enabled',\n            toggleOnExecute: false,\n            aria: { mode: 'selected' }\n          }),\n          Receiving.config({\n            channels: {\n              [`update-active-item-${ treeId }`]: {\n                onReceive: (comp, message) => {\n                  (message.value === leaf.id ? Toggling.on : Toggling.off)(comp);\n                }\n              }\n            }\n          }),\n          config(leafLabelEventsId, [\n            runOnAttached((comp, _se) => {\n              selectedId.each(id => {\n                const toggle = id === leaf.id ? Toggling.on : Toggling.off;\n                toggle(comp);\n              });\n            }),\n            run$1(keydown(), (comp, se) => {\n              const isLeftArrowKey = se.event.raw.code === 'ArrowLeft';\n              const isRightArrowKey = se.event.raw.code === 'ArrowRight';\n              if (isLeftArrowKey) {\n                ancestor(comp.element, '.tox-tree--directory').each(dirElement => {\n                  comp.getSystem().getByDom(dirElement).each(dirComp => {\n                    child(dirElement, '.tox-tree--directory__label').each(dirLabelElement => {\n                      dirComp.getSystem().getByDom(dirLabelElement).each(Focusing.focus);\n                    });\n                  });\n                });\n                se.stop();\n              } else if (isRightArrowKey) {\n                se.stop();\n              }\n            })\n          ])\n        ])\n      });\n    };\n    const renderIcon = (iconName, iconsProvider, behaviours) => render$3(iconName, {\n      tag: 'span',\n      classes: [\n        'tox-tree__icon-wrap',\n        'tox-icon'\n      ],\n      behaviours\n    }, iconsProvider);\n    const renderIconFromPack = (iconName, iconsProvider) => renderIcon(iconName, iconsProvider, []);\n    const directoryLabelEventsId = generate$6('directory-label-event-id');\n    const renderDirectoryLabel = ({directory, visible, noChildren, backstage}) => {\n      const internalMenuButton = directory.menu.map(btn => renderMenuButton(btn, 'tox-mbtn', backstage, Optional.none()));\n      const components = [\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-chevron']\n          },\n          components: [renderIconFromPack('chevron-right', backstage.shared.providers.icons)]\n        },\n        renderLabel(directory.title)\n      ];\n      internalMenuButton.each(btn => {\n        components.push(btn);\n      });\n      const toggleExpandChildren = button => {\n        ancestor(button.element, '.tox-tree--directory').each(directoryEle => {\n          button.getSystem().getByDom(directoryEle).each(directoryComp => {\n            const willExpand = !Toggling.isOn(directoryComp);\n            Toggling.toggle(directoryComp);\n            emitWith(button, 'expand-tree-node', {\n              expanded: willExpand,\n              node: directory.id\n            });\n          });\n        });\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-tree--directory__label',\n            'tox-trbtn'\n          ].concat(visible ? ['tox-tree--directory__label--visible'] : [])\n        },\n        components,\n        action: toggleExpandChildren,\n        eventOrder: {\n          [keydown()]: [\n            directoryLabelEventsId,\n            'keying'\n          ]\n        },\n        buttonBehaviours: derive$1([\n          ...visible ? [Tabstopping.config({})] : [],\n          config(directoryLabelEventsId, [run$1(keydown(), (comp, se) => {\n              const isRightArrowKey = se.event.raw.code === 'ArrowRight';\n              const isLeftArrowKey = se.event.raw.code === 'ArrowLeft';\n              if (isRightArrowKey && noChildren) {\n                se.stop();\n              }\n              if (isRightArrowKey || isLeftArrowKey) {\n                ancestor(comp.element, '.tox-tree--directory').each(directoryEle => {\n                  comp.getSystem().getByDom(directoryEle).each(directoryComp => {\n                    if (!Toggling.isOn(directoryComp) && isRightArrowKey || Toggling.isOn(directoryComp) && isLeftArrowKey) {\n                      toggleExpandChildren(comp);\n                      se.stop();\n                    } else if (isLeftArrowKey && !Toggling.isOn(directoryComp)) {\n                      ancestor(directoryComp.element, '.tox-tree--directory').each(parentDirElement => {\n                        child(parentDirElement, '.tox-tree--directory__label').each(parentDirLabelElement => {\n                          directoryComp.getSystem().getByDom(parentDirLabelElement).each(Focusing.focus);\n                        });\n                      });\n                      se.stop();\n                    }\n                  });\n                });\n              }\n            })])\n        ])\n      });\n    };\n    const renderDirectoryChildren = ({children, onLeafAction, visible, treeId, expandedIds, selectedId, backstage}) => {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-tree--directory__children']\n        },\n        components: children.map(item => {\n          return item.type === 'leaf' ? renderLeafLabel({\n            leaf: item,\n            selectedId,\n            onLeafAction,\n            visible,\n            treeId,\n            backstage\n          }) : renderDirectory({\n            directory: item,\n            expandedIds,\n            selectedId,\n            onLeafAction,\n            labelTabstopping: visible,\n            treeId,\n            backstage\n          });\n        }),\n        behaviours: derive$1([\n          Sliding.config({\n            dimension: { property: 'height' },\n            closedClass: 'tox-tree--directory__children--closed',\n            openClass: 'tox-tree--directory__children--open',\n            growingClass: 'tox-tree--directory__children--growing',\n            shrinkingClass: 'tox-tree--directory__children--shrinking',\n            expanded: visible\n          }),\n          Replacing.config({})\n        ])\n      };\n    };\n    const directoryEventsId = generate$6('directory-event-id');\n    const renderDirectory = ({directory, onLeafAction, labelTabstopping, treeId, backstage, expandedIds, selectedId}) => {\n      const {children} = directory;\n      const expandedIdsCell = Cell(expandedIds);\n      const computedChildrenComponents = visible => children.map(item => {\n        return item.type === 'leaf' ? renderLeafLabel({\n          leaf: item,\n          selectedId,\n          onLeafAction,\n          visible,\n          treeId,\n          backstage\n        }) : renderDirectory({\n          directory: item,\n          expandedIds: expandedIdsCell.get(),\n          selectedId,\n          onLeafAction,\n          labelTabstopping: visible,\n          treeId,\n          backstage\n        });\n      });\n      const childrenVisible = expandedIds.includes(directory.id);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-tree--directory'],\n          attributes: { role: 'treeitem' }\n        },\n        components: [\n          renderDirectoryLabel({\n            directory,\n            visible: labelTabstopping,\n            noChildren: directory.children.length === 0,\n            backstage\n          }),\n          renderDirectoryChildren({\n            children,\n            expandedIds,\n            selectedId,\n            onLeafAction,\n            visible: childrenVisible,\n            treeId,\n            backstage\n          })\n        ],\n        behaviours: derive$1([\n          config(directoryEventsId, [\n            runOnAttached((comp, _se) => {\n              Toggling.set(comp, childrenVisible);\n            }),\n            run$1('expand-tree-node', (_cmp, se) => {\n              const {expanded, node} = se.event;\n              expandedIdsCell.set(expanded ? [\n                ...expandedIdsCell.get(),\n                node\n              ] : expandedIdsCell.get().filter(id => id !== node));\n            })\n          ]),\n          Toggling.config({\n            ...directory.children.length > 0 ? { aria: { mode: 'expanded' } } : {},\n            toggleClass: 'tox-tree--directory--expanded',\n            onToggled: (comp, childrenVisible) => {\n              const childrenComp = comp.components()[1];\n              const newChildren = computedChildrenComponents(childrenVisible);\n              if (childrenVisible) {\n                Sliding.grow(childrenComp);\n              } else {\n                Sliding.shrink(childrenComp);\n              }\n              Replacing.set(childrenComp, newChildren);\n            }\n          })\n        ])\n      };\n    };\n    const treeEventsId = generate$6('tree-event-id');\n    const renderTree = (spec, backstage) => {\n      const onLeafAction = spec.onLeafAction.getOr(noop);\n      const onToggleExpand = spec.onToggleExpand.getOr(noop);\n      const defaultExpandedIds = spec.defaultExpandedIds;\n      const expandedIds = Cell(defaultExpandedIds);\n      const selectedIdCell = Cell(spec.defaultSelectedId);\n      const treeId = generate$6('tree-id');\n      const children = (selectedId, expandedIds) => spec.items.map(item => {\n        return item.type === 'leaf' ? renderLeafLabel({\n          leaf: item,\n          selectedId,\n          onLeafAction,\n          visible: true,\n          treeId,\n          backstage\n        }) : renderDirectory({\n          directory: item,\n          selectedId,\n          onLeafAction,\n          expandedIds,\n          labelTabstopping: true,\n          treeId,\n          backstage\n        });\n      });\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-tree'],\n          attributes: { role: 'tree' }\n        },\n        components: children(selectedIdCell.get(), expandedIds.get()),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: '.tox-tree--leaf__label--visible, .tox-tree--directory__label--visible',\n            cycles: false\n          }),\n          config(treeEventsId, [run$1('expand-tree-node', (_cmp, se) => {\n              const {expanded, node} = se.event;\n              expandedIds.set(expanded ? [\n                ...expandedIds.get(),\n                node\n              ] : expandedIds.get().filter(id => id !== node));\n              onToggleExpand(expandedIds.get(), {\n                expanded,\n                node\n              });\n            })]),\n          Receiving.config({\n            channels: {\n              [`update-active-item-${ treeId }`]: {\n                onReceive: (comp, message) => {\n                  selectedIdCell.set(Optional.some(message.value));\n                  Replacing.set(comp, children(Optional.some(message.value), expandedIds.get()));\n                }\n              }\n            }\n          }),\n          Replacing.config({})\n        ])\n      };\n    };\n\n    const events$5 = (streamConfig, streamState) => {\n      const streams = streamConfig.stream.streams;\n      const processor = streams.setup(streamConfig, streamState);\n      return derive$2([\n        run$1(streamConfig.event, processor),\n        runOnDetached(() => streamState.cancel())\n      ].concat(streamConfig.cancelEvent.map(e => [run$1(e, () => streamState.cancel())]).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$5\n    });\n\n    const throttle = _config => {\n      const state = Cell(null);\n      const readState = () => ({ timer: state.get() !== null ? 'set' : 'unset' });\n      const setTimer = t => {\n        state.set(t);\n      };\n      const cancel = () => {\n        const t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$8({\n        readState,\n        setTimer,\n        cancel\n      });\n    };\n    const init$8 = spec => spec.stream.streams.state(spec);\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$8\n    });\n\n    const setup$c = (streamInfo, streamState) => {\n      const sInfo = streamInfo.stream;\n      const throttler = last(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return (component, simulatedEvent) => {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      requiredOf('stream', choose$1('mode', {\n        throttle: [\n          required$1('delay'),\n          defaulted('stopEvent', true),\n          output$1('streams', {\n            setup: setup$c,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted('event', 'input'),\n      option$3('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    const Streaming = create$4({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    const setValueFromItem = (model, input, item) => {\n      const itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    const setSelectionOn = (input, f) => {\n      const el = input.element;\n      const value = get$6(el);\n      const node = el.dom;\n      if (get$f(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    const setCursorAtEnd = input => {\n      setSelectionOn(input, (node, value) => node.setSelectionRange(value.length, value.length));\n    };\n    const setSelectionToEnd = (input, startOffset) => {\n      setSelectionOn(input, (node, value) => node.setSelectionRange(startOffset, value.length));\n    };\n    const attemptSelectOver = (model, input, item) => {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        const currentValue = Representing.getValue(input);\n        const inputDisplay = model.getDisplayText(currentValue);\n        const itemValue = Representing.getValue(item);\n        const itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay) === 0 ? Optional.some(() => {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay.length);\n        }) : Optional.none();\n      }\n    };\n\n    const itemExecute = constant$1('alloy.typeahead.itemexecute');\n\n    const make$3 = (detail, components, spec, externals) => {\n      const navigateList = (comp, simulatedEvent, highlighter) => {\n        detail.previewing.set(false);\n        const sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(menu => {\n            Highlighting.getHighlighted(menu).fold(() => {\n              highlighter(menu);\n            }, () => {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          const onOpenSync = sandbox => {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n        }\n      };\n      const focusBehaviours$1 = focusBehaviours(detail);\n      const mapFetch = comp => tdata => tdata.map(data => {\n        const menus = values(data.menus);\n        const items = bind$3(menus, menu => filter$2(menu.items, item => item.type === 'item'));\n        const repState = Representing.getState(comp);\n        repState.update(map$2(items, item => item.data));\n        return data;\n      });\n      const getActiveMenu = sandboxComp => Composing.getCurrent(sandboxComp);\n      const typeaheadCustomEvents = 'typeaheadevents';\n      const behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: {\n            mode: 'dataset',\n            getDataKey: comp => get$6(comp.element),\n            getFallbackEntry: itemString => ({\n              value: itemString,\n              meta: {}\n            }),\n            setValue: (comp, data) => {\n              set$5(comp.element, detail.model.getDisplayText(data));\n            },\n            ...detail.initialData.map(d => wrap$1('initialValue', d)).getOr({})\n          }\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: (component, _simulatedEvent) => {\n            const sandbox = Coupling.getCoupled(component, 'sandbox');\n            const focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$6(component.element).length >= detail.minChars) {\n                const previousValue = getActiveMenu(sandbox).bind(activeMenu => Highlighting.getHighlighted(activeMenu).map(Representing.getValue));\n                detail.previewing.set(true);\n                const onOpenSync = _sandbox => {\n                  getActiveMenu(sandbox).each(activeMenu => {\n                    previousValue.fold(() => {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(activeMenu);\n                      }\n                    }, pv => {\n                      Highlighting.highlightBy(activeMenu, item => {\n                        const itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(activeMenu).orThunk(() => {\n                        Highlighting.highlightFirst(activeMenu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightJustMenu).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: (comp, simulatedEvent) => {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: comp => {\n            const sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: (comp, simulatedEvent) => {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: comp => {\n            const sandbox = Coupling.getCoupled(comp, 'sandbox');\n            const sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return getActiveMenu(sandbox).bind(activeMenu => Highlighting.getHighlighted(activeMenu)).map(item => {\n                emitWith(comp, itemExecute(), { item });\n                return true;\n              });\n            } else {\n              const currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: hotspot => {\n              return makeSandbox$1(detail, hotspot, {\n                onOpen: () => Toggling.on(hotspot),\n                onClose: () => {\n                  detail.lazyTypeaheadComp.get().each(input => remove$7(input.element, 'aria-activedescendant'));\n                  Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config(typeaheadCustomEvents, [\n          runOnAttached(typeaheadComp => {\n            detail.lazyTypeaheadComp.set(Optional.some(typeaheadComp));\n          }),\n          runOnDetached(_typeaheadComp => {\n            detail.lazyTypeaheadComp.set(Optional.none());\n          }),\n          runOnExecute$1(comp => {\n            const onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n          }),\n          run$1(itemExecute(), (comp, se) => {\n            const sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run$1(postBlur(), typeahead => {\n            const sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      const eventOrder = {\n        [detachedFromDom()]: [\n          Representing.name(),\n          Streaming.name(),\n          typeaheadCustomEvents\n        ],\n        ...detail.eventOrder\n      };\n      return {\n        uid: detail.uid,\n        dom: dom(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: {\n          ...focusBehaviours$1,\n          ...augment(detail.typeaheadBehaviours, behaviours)\n        },\n        eventOrder\n      };\n    };\n\n    const schema$g = constant$1([\n      option$3('lazySink'),\n      required$1('fetch'),\n      defaulted('minChars', 5),\n      defaulted('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      defaulted('layouts', Optional.none()),\n      defaulted('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted('getDisplayText', itemData => itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value),\n        defaulted('selectsOver', true),\n        defaulted('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted('inputClasses', []),\n      defaulted('inputAttributes', {}),\n      defaulted('inputStyles', {}),\n      defaulted('matchWidth', true),\n      defaulted('useMinWidth', false),\n      defaulted('dismissOnBlur', true),\n      markers$1(['openClass']),\n      option$3('initialData'),\n      field('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      customField('lazyTypeaheadComp', () => Cell(Optional.none)),\n      customField('previewing', () => Cell(true))\n    ].concat(schema$l()).concat(sandboxFields()));\n    const parts$b = constant$1([external({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: detail => {\n          return {\n            fakeFocus: true,\n            onHighlightItem: (_tmenu, menu, item) => {\n              if (!detail.previewing.get()) {\n                detail.lazyTypeaheadComp.get().each(input => {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                  getOpt(item.element, 'id').each(id => set$9(input.element, 'aria-activedescendant', id));\n                });\n              } else {\n                detail.lazyTypeaheadComp.get().each(input => {\n                  attemptSelectOver(detail.model, input, item).fold(() => {\n                    if (detail.model.selectsOver) {\n                      Highlighting.dehighlight(menu, item);\n                      detail.previewing.set(true);\n                    } else {\n                      detail.previewing.set(false);\n                    }\n                  }, selectOverTextInInput => {\n                    selectOverTextInInput();\n                    detail.previewing.set(false);\n                  });\n                });\n              }\n            },\n            onExecute: (_menu, item) => {\n              return detail.lazyTypeaheadComp.get().map(typeahead => {\n                emitWith(typeahead, itemExecute(), { item });\n                return true;\n              });\n            },\n            onHover: (menu, item) => {\n              detail.previewing.set(false);\n              detail.lazyTypeaheadComp.get().each(input => {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    const Typeahead = composite({\n      name: 'Typeahead',\n      configFields: schema$g(),\n      partFields: parts$b(),\n      factory: make$3\n    });\n\n    const wrap = delegate => {\n      const toCached = () => {\n        return wrap(delegate.toCached());\n      };\n      const bindFuture = f => {\n        return wrap(delegate.bind(resA => resA.fold(err => Future.pure(Result.error(err)), a => f(a))));\n      };\n      const bindResult = f => {\n        return wrap(delegate.map(resA => resA.bind(f)));\n      };\n      const mapResult = f => {\n        return wrap(delegate.map(resA => resA.map(f)));\n      };\n      const mapError = f => {\n        return wrap(delegate.map(resA => resA.mapError(f)));\n      };\n      const foldResult = (whenError, whenValue) => {\n        return delegate.map(res => res.fold(whenError, whenValue));\n      };\n      const withTimeout = (timeout, errorThunk) => {\n        return wrap(Future.nu(callback => {\n          let timedOut = false;\n          const timer = setTimeout(() => {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(result => {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return {\n        ...delegate,\n        toCached,\n        bindFuture,\n        bindResult,\n        mapResult,\n        mapError,\n        foldResult,\n        withTimeout\n      };\n    };\n    const nu$1 = worker => {\n      return wrap(Future.nu(worker));\n    };\n    const value = value => {\n      return wrap(Future.pure(Result.value(value)));\n    };\n    const error = error => {\n      return wrap(Future.pure(Result.error(error)));\n    };\n    const fromResult = result => {\n      return wrap(Future.pure(result));\n    };\n    const fromFuture = future => {\n      return wrap(future.map(Result.value));\n    };\n    const fromPromise = promise => {\n      return nu$1(completer => {\n        promise.then(value => {\n          completer(Result.value(value));\n        }, error => {\n          completer(Result.error(error));\n        });\n      });\n    };\n    const FutureResult = {\n      nu: nu$1,\n      wrap,\n      pure: value,\n      value,\n      error,\n      fromResult,\n      fromFuture,\n      fromPromise\n    };\n\n    const renderCommonSpec = (spec, actionOpt, extraBehaviours = [], dom, components, providersBackstage) => {\n      const action = actionOpt.fold(() => ({}), action => ({ action }));\n      const common = {\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(() => !spec.enabled || providersBackstage.isDisabled()),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        },\n        ...action\n      };\n      const domFinal = deepMerge(common, { dom });\n      return deepMerge(domFinal, { components });\n    };\n    const renderIconButtonSpec = (spec, action, providersBackstage, extraBehaviours = []) => {\n      const tooltipAttributes = spec.tooltip.map(tooltip => ({\n        'aria-label': providersBackstage.translate(tooltip),\n        'title': providersBackstage.translate(tooltip)\n      })).getOr({});\n      const dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      const icon = spec.icon.map(iconName => renderIconFromPack$1(iconName, providersBackstage.icons));\n      const components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    const calculateClassesFromButtonType = buttonType => {\n      switch (buttonType) {\n      case 'primary':\n        return ['tox-button'];\n      case 'toolbar':\n        return ['tox-tbtn'];\n      case 'secondary':\n      default:\n        return [\n          'tox-button',\n          'tox-button--secondary'\n        ];\n      }\n    };\n    const renderButtonSpec = (spec, action, providersBackstage, extraBehaviours = [], extraClasses = []) => {\n      const translatedText = providersBackstage.translate(spec.text);\n      const icon = spec.icon.map(iconName => renderIconFromPack$1(iconName, providersBackstage.icons));\n      const components = [icon.getOrThunk(() => text$2(translatedText))];\n      const buttonType = spec.buttonType.getOr(!spec.primary && !spec.borderless ? 'secondary' : 'primary');\n      const baseClasses = calculateClassesFromButtonType(buttonType);\n      const classes = [\n        ...baseClasses,\n        ...icon.isSome() ? ['tox-button--icon'] : [],\n        ...spec.borderless ? ['tox-button--naked'] : [],\n        ...extraClasses\n      ];\n      const dom = {\n        tag: 'button',\n        classes,\n        attributes: { title: translatedText }\n      };\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    const renderButton$1 = (spec, action, providersBackstage, extraBehaviours = [], extraClasses = []) => {\n      const buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    const getAction = (name, buttonType) => comp => {\n      if (buttonType === 'custom') {\n        emitWith(comp, formActionEvent, {\n          name,\n          value: {}\n        });\n      } else if (buttonType === 'submit') {\n        emit(comp, formSubmitEvent);\n      } else if (buttonType === 'cancel') {\n        emit(comp, formCancelEvent);\n      } else {\n        console.error('Unknown button type: ', buttonType);\n      }\n    };\n    const isMenuFooterButtonSpec = (spec, buttonType) => buttonType === 'menu';\n    const isNormalFooterButtonSpec = (spec, buttonType) => buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    const isToggleButtonSpec = (spec, buttonType) => buttonType === 'togglebutton';\n    const renderToggleButton = (spec, providers) => {\n      var _a, _b;\n      const optMemIcon = spec.icon.map(memIcon => renderReplaceableIconFromPack(memIcon, providers.icons)).map(record);\n      const action = comp => {\n        emitWith(comp, formActionEvent, {\n          name: spec.name,\n          value: {\n            setIcon: newIcon => {\n              optMemIcon.map(memIcon => memIcon.getOpt(comp).each(displayIcon => {\n                Replacing.set(displayIcon, [renderReplaceableIconFromPack(newIcon, providers.icons)]);\n              }));\n            }\n          }\n        });\n      };\n      const buttonType = spec.buttonType.getOr(!spec.primary ? 'secondary' : 'primary');\n      const buttonSpec = {\n        ...spec,\n        name: (_a = spec.name) !== null && _a !== void 0 ? _a : '',\n        primary: buttonType === 'primary',\n        tooltip: Optional.from(spec.tooltip),\n        enabled: (_b = spec.enabled) !== null && _b !== void 0 ? _b : false,\n        borderless: false\n      };\n      const tooltipAttributes = buttonSpec.tooltip.map(tooltip => ({\n        'aria-label': providers.translate(tooltip),\n        'title': providers.translate(tooltip)\n      })).getOr({});\n      const buttonTypeClasses = calculateClassesFromButtonType(buttonType !== null && buttonType !== void 0 ? buttonType : 'secondary');\n      const showIconAndText = spec.icon.isSome() && spec.text.isSome();\n      const dom = {\n        tag: 'button',\n        classes: [\n          ...buttonTypeClasses.concat(spec.icon.isSome() ? ['tox-button--icon'] : []),\n          ...spec.active ? ['tox-button--enabled'] : [],\n          ...showIconAndText ? ['tox-button--icon-and-text'] : []\n        ],\n        attributes: tooltipAttributes\n      };\n      const extraBehaviours = [];\n      const translatedText = providers.translate(spec.text.getOr(''));\n      const translatedTextComponed = text$2(translatedText);\n      const iconComp = componentRenderPipeline([optMemIcon.map(memIcon => memIcon.asSpec())]);\n      const components = [\n        ...iconComp,\n        ...spec.text.isSome() ? [translatedTextComponed] : []\n      ];\n      const iconButtonSpec = renderCommonSpec(buttonSpec, Optional.some(action), extraBehaviours, dom, components, providers);\n      return Button.sketch(iconButtonSpec);\n    };\n    const renderFooterButton = (spec, buttonType, backstage) => {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        const getButton = () => memButton;\n        const menuButtonSpec = spec;\n        const fixedSpec = {\n          ...spec,\n          type: 'menubutton',\n          search: Optional.none(),\n          onSetup: api => {\n            api.setEnabled(spec.enabled);\n            return noop;\n          },\n          fetch: getFetch(menuButtonSpec.items, getButton, backstage)\n        };\n        const memButton = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        const action = getAction(spec.name, buttonType);\n        const buttonSpec = {\n          ...spec,\n          borderless: false\n        };\n        return renderButton$1(buttonSpec, action, backstage.shared.providers, []);\n      } else if (isToggleButtonSpec(spec, buttonType)) {\n        return renderToggleButton(spec, backstage.shared.providers);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n        throw new Error('Unknown footer button type');\n      }\n    };\n    const renderDialogButton = (spec, providersBackstage) => {\n      const action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field({\n        factory: Button,\n        ...renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n          memory(''),\n          ComposingConfigs.self()\n        ])\n      }));\n    };\n\n    const separator$1 = { type: 'separator' };\n    const toMenuItem = target => ({\n      type: 'menuitem',\n      value: target.url,\n      text: target.title,\n      meta: { attach: target.attach },\n      onAction: noop\n    });\n    const staticMenuItem = (title, url) => ({\n      type: 'menuitem',\n      value: url,\n      text: title,\n      meta: { attach: undefined },\n      onAction: noop\n    });\n    const toMenuItems = targets => map$2(targets, toMenuItem);\n    const filterLinkTargets = (type, targets) => filter$2(targets, target => target.type === type);\n    const filteredTargets = (type, targets) => toMenuItems(filterLinkTargets(type, targets));\n    const headerTargets = linkInfo => filteredTargets('header', linkInfo.targets);\n    const anchorTargets = linkInfo => filteredTargets('anchor', linkInfo.targets);\n    const anchorTargetTop = linkInfo => Optional.from(linkInfo.anchorTop).map(url => staticMenuItem('<top>', url)).toArray();\n    const anchorTargetBottom = linkInfo => Optional.from(linkInfo.anchorBottom).map(url => staticMenuItem('<bottom>', url)).toArray();\n    const historyTargets = history => map$2(history, url => staticMenuItem(url, url));\n    const joinMenuLists = items => {\n      return foldl(items, (a, b) => {\n        const bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$1, b);\n      }, []);\n    };\n    const filterByQuery = (term, menuItems) => {\n      const lowerCaseTerm = term.toLowerCase();\n      return filter$2(menuItems, item => {\n        var _a;\n        const text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        const value = (_a = item.value) !== null && _a !== void 0 ? _a : '';\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    const getItems = (fileType, input, urlBackstage) => {\n      var _a, _b;\n      const urlInputValue = Representing.getValue(input);\n      const term = (_b = (_a = urlInputValue === null || urlInputValue === void 0 ? void 0 : urlInputValue.meta) === null || _a === void 0 ? void 0 : _a.text) !== null && _b !== void 0 ? _b : urlInputValue.value;\n      const info = urlBackstage.getLinkInformation();\n      return info.fold(() => [], linkInfo => {\n        const history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    const errorId = generate$6('aria-invalid');\n    const renderUrlInput = (spec, backstage, urlBackstage, initialData) => {\n      const providersBackstage = backstage.shared.providers;\n      const updateHistory = component => {\n        const urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      const typeaheadSpec = {\n        ...initialData.map(initialData => ({ initialData })).getOr({}),\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: input => {\n          const items = getItems(spec.filetype, input, urlBackstage);\n          const tdata = build(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, {\n            isHorizontalMenu: false,\n            search: Optional.none()\n          });\n          return Future.pure(tdata);\n        },\n        getHotspot: comp => memUrlBox.getOpt(comp),\n        onSetValue: (comp, _newValue) => {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1([\n          ...urlBackstage.getValidationHandler().map(handler => Invalidating.config({\n            getRoot: comp => parentElement(comp.element),\n            invalidClass: 'tox-control-wrap--status-invalid',\n            notify: {\n              onInvalid: (comp, err) => {\n                memInvalidIcon.getOpt(comp).each(invalidComp => {\n                  set$9(invalidComp.element, 'title', providersBackstage.translate(err));\n                });\n              }\n            },\n            validator: {\n              validate: input => {\n                const urlEntry = Representing.getValue(input);\n                return FutureResult.nu(completer => {\n                  handler({\n                    type: spec.filetype,\n                    url: urlEntry.value\n                  }, validation => {\n                    if (validation.status === 'invalid') {\n                      const err = Result.error(validation.message);\n                      completer(err);\n                    } else {\n                      const val = Result.value(validation.message);\n                      completer(val);\n                    }\n                  });\n                });\n              },\n              validateOnLoad: false\n            }\n          })).toArray(),\n          Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() }),\n          Tabstopping.config({}),\n          config('urlinput-events', [\n            run$1(input(), comp => {\n              const currentValue = get$6(comp.element);\n              const trimmedValue = currentValue.trim();\n              if (trimmedValue !== currentValue) {\n                set$5(comp.element, trimmedValue);\n              }\n              if (spec.filetype === 'file') {\n                emitWith(comp, formChangeEvent, { name: spec.name });\n              }\n            }),\n            run$1(change(), comp => {\n              emitWith(comp, formChangeEvent, { name: spec.name });\n              updateHistory(comp);\n            }),\n            run$1(postPaste(), comp => {\n              emitWith(comp, formChangeEvent, { name: spec.name });\n              updateHistory(comp);\n            })\n          ])\n        ]),\n        eventOrder: {\n          [input()]: [\n            'streaming',\n            'urlinput-events',\n            'invalidating'\n          ]\n        },\n        model: {\n          getDisplayText: itemData => itemData.value,\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: (_menu, component, _entry) => {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: (typeahead, _sandbox, _item, _value) => {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      };\n      const pField = FormField.parts.field({\n        ...typeaheadSpec,\n        factory: Typeahead\n      });\n      const pLabel = spec.label.map(label => renderLabel$3(label, providersBackstage));\n      const makeIcon = (name, errId, icon = name, label = name) => render$3(icon, {\n        tag: 'div',\n        classes: [\n          'tox-icon',\n          'tox-control-wrap__status-icon-' + name\n        ],\n        attributes: {\n          'title': providersBackstage.translate(label),\n          'aria-live': 'polite',\n          ...errId.fold(() => ({}), id => ({ id }))\n        }\n      }, providersBackstage.icons);\n      const memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      const memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      const optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      const browseUrlEvent = generate$6('browser.url.event');\n      const memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({ disabled: () => !spec.enabled || providersBackstage.isDisabled() })])\n      });\n      const memUrlPickerButton = record(renderButton$1({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.picker_text.or(spec.label).getOr(''),\n        enabled: spec.enabled,\n        primary: false,\n        buttonType: Optional.none(),\n        borderless: true\n      }, component => emit(component, browseUrlEvent), providersBackstage, [], ['tox-browse-url']));\n      const controlHWrapper = () => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__controls-h-stack']\n        },\n        components: flatten([\n          [memUrlBox.asSpec()],\n          optUrlPicker.map(() => memUrlPickerButton.asSpec()).toArray()\n        ])\n      });\n      const openUrlPicker = comp => {\n        Composing.getCurrent(comp).each(field => {\n          const componentData = Representing.getValue(field);\n          const urlData = {\n            fieldname: spec.name,\n            ...componentData\n          };\n          optUrlPicker.each(picker => {\n            picker(urlData).get(chosenData => {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: () => !spec.enabled || providersBackstage.isDisabled(),\n            onDisabled: comp => {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: comp => {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run$1(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    const renderAlertBanner = (spec, providersBackstage) => {\n      const icon = get$2(spec.icon, providersBackstage.icons);\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            `tox-notification--${ spec.level }`\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon'],\n              innerHtml: !spec.url ? icon : undefined\n            },\n            components: spec.url ? [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: icon,\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: comp => emitWith(comp, formActionEvent, {\n                  name: 'alert-banner',\n                  value: spec.url\n                }),\n                buttonBehaviours: derive$1([addFocusableBehaviour()])\n              })] : undefined\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    const set$1 = (element, status) => {\n      element.dom.checked = status;\n    };\n    const get$1 = element => element.dom.checked;\n\n    const renderCheckbox = (spec, providerBackstage, initialData) => {\n      const toggleCheckboxHandler = comp => {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      const pField = FormField.parts.field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: () => !spec.enabled || providerBackstage.isDisabled(),\n            onDisabled: component => {\n              parentElement(component.element).each(element => add$2(element, 'tox-checkbox--disabled'));\n            },\n            onEnabled: component => {\n              parentElement(component.element).each(element => remove$2(element, 'tox-checkbox--disabled'));\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          withElement(initialData, get$1, set$1),\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run$1(change(), (component, _) => {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      const pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label']\n        },\n        components: [text$2(providerBackstage.translate(spec.label))],\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      const makeIcon = className => {\n        const iconName = className === 'checked' ? 'selected' : 'unselected';\n        return render$3(iconName, {\n          tag: 'span',\n          classes: [\n            'tox-icon',\n            'tox-checkbox-icon__' + className\n          ]\n        }, providerBackstage.icons);\n      };\n      const memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({ disabled: () => !spec.enabled || providerBackstage.isDisabled() }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    const renderHtmlPanel = spec => {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    const make$2 = render => {\n      return (parts, spec, dialogData, backstage) => get$g(spec, 'name').fold(() => render(spec, backstage, Optional.none()), fieldName => parts.field(fieldName, render(spec, backstage, get$g(dialogData, fieldName))));\n    };\n    const makeIframe = render => (parts, spec, dialogData, backstage) => {\n      const iframeSpec = deepMerge(spec, { source: 'dynamic' });\n      return make$2(render)(parts, iframeSpec, dialogData, backstage);\n    };\n    const factories = {\n      bar: make$2((spec, backstage) => renderBar(spec, backstage.shared)),\n      collection: make$2((spec, backstage, data) => renderCollection(spec, backstage.shared.providers, data)),\n      alertbanner: make$2((spec, backstage) => renderAlertBanner(spec, backstage.shared.providers)),\n      input: make$2((spec, backstage, data) => renderInput(spec, backstage.shared.providers, data)),\n      textarea: make$2((spec, backstage, data) => renderTextarea(spec, backstage.shared.providers, data)),\n      label: make$2((spec, backstage) => renderLabel$2(spec, backstage.shared)),\n      iframe: makeIframe((spec, backstage, data) => renderIFrame(spec, backstage.shared.providers, data)),\n      button: make$2((spec, backstage) => renderDialogButton(spec, backstage.shared.providers)),\n      checkbox: make$2((spec, backstage, data) => renderCheckbox(spec, backstage.shared.providers, data)),\n      colorinput: make$2((spec, backstage, data) => renderColorInput(spec, backstage.shared, backstage.colorinput, data)),\n      colorpicker: make$2((spec, backstage, data) => renderColorPicker(spec, backstage.shared.providers, data)),\n      dropzone: make$2((spec, backstage, data) => renderDropZone(spec, backstage.shared.providers, data)),\n      grid: make$2((spec, backstage) => renderGrid(spec, backstage.shared)),\n      listbox: make$2((spec, backstage, data) => renderListBox(spec, backstage, data)),\n      selectbox: make$2((spec, backstage, data) => renderSelectBox(spec, backstage.shared.providers, data)),\n      sizeinput: make$2((spec, backstage) => renderSizeInput(spec, backstage.shared.providers)),\n      slider: make$2((spec, backstage, data) => renderSlider(spec, backstage.shared.providers, data)),\n      urlinput: make$2((spec, backstage, data) => renderUrlInput(spec, backstage, backstage.urlinput, data)),\n      customeditor: make$2(renderCustomEditor),\n      htmlpanel: make$2(renderHtmlPanel),\n      imagepreview: make$2((spec, _, data) => renderImagePreview(spec, data)),\n      table: make$2((spec, backstage) => renderTable(spec, backstage.shared.providers)),\n      tree: make$2((spec, backstage) => renderTree(spec, backstage)),\n      panel: make$2((spec, backstage) => renderPanel(spec, backstage))\n    };\n    const noFormParts = {\n      field: (_name, spec) => spec,\n      record: constant$1([])\n    };\n    const interpretInForm = (parts, spec, dialogData, oldBackstage) => {\n      const newBackstage = deepMerge(oldBackstage, { shared: { interpreter: childSpec => interpretParts(parts, childSpec, dialogData, newBackstage) } });\n      return interpretParts(parts, spec, dialogData, newBackstage);\n    };\n    const interpretParts = (parts, spec, dialogData, backstage) => get$g(factories, spec.type).fold(() => {\n      console.error(`Unknown factory type \"${ spec.type }\", defaulting to container: `, spec);\n      return spec;\n    }, factory => factory(parts, spec, dialogData, backstage));\n    const interpretWithoutForm = (spec, dialogData, backstage) => interpretParts(noFormParts, spec, dialogData, backstage);\n\n    const labelPrefix = 'layout-inset';\n    const westEdgeX = anchor => anchor.x;\n    const middleX = (anchor, element) => anchor.x + anchor.width / 2 - element.width / 2;\n    const eastEdgeX = (anchor, element) => anchor.x + anchor.width - element.width;\n    const northY = anchor => anchor.y;\n    const southY = (anchor, element) => anchor.y + anchor.height - element.height;\n    const centreY = (anchor, element) => anchor.y + anchor.height / 2 - element.height / 2;\n    const southwest = (anchor, element, bubbles) => nu$6(eastEdgeX(anchor, element), southY(anchor, element), bubbles.insetSouthwest(), northwest$3(), 'southwest', boundsRestriction(anchor, {\n      right: 0,\n      bottom: 3\n    }), labelPrefix);\n    const southeast = (anchor, element, bubbles) => nu$6(westEdgeX(anchor), southY(anchor, element), bubbles.insetSoutheast(), northeast$3(), 'southeast', boundsRestriction(anchor, {\n      left: 1,\n      bottom: 3\n    }), labelPrefix);\n    const northwest = (anchor, element, bubbles) => nu$6(eastEdgeX(anchor, element), northY(anchor), bubbles.insetNorthwest(), southwest$3(), 'northwest', boundsRestriction(anchor, {\n      right: 0,\n      top: 2\n    }), labelPrefix);\n    const northeast = (anchor, element, bubbles) => nu$6(westEdgeX(anchor), northY(anchor), bubbles.insetNortheast(), southeast$3(), 'northeast', boundsRestriction(anchor, {\n      left: 1,\n      top: 2\n    }), labelPrefix);\n    const north = (anchor, element, bubbles) => nu$6(middleX(anchor, element), northY(anchor), bubbles.insetNorth(), south$3(), 'north', boundsRestriction(anchor, { top: 2 }), labelPrefix);\n    const south = (anchor, element, bubbles) => nu$6(middleX(anchor, element), southY(anchor, element), bubbles.insetSouth(), north$3(), 'south', boundsRestriction(anchor, { bottom: 3 }), labelPrefix);\n    const east = (anchor, element, bubbles) => nu$6(eastEdgeX(anchor, element), centreY(anchor, element), bubbles.insetEast(), west$3(), 'east', boundsRestriction(anchor, { right: 0 }), labelPrefix);\n    const west = (anchor, element, bubbles) => nu$6(westEdgeX(anchor), centreY(anchor, element), bubbles.insetWest(), east$3(), 'west', boundsRestriction(anchor, { left: 1 }), labelPrefix);\n    const lookupPreserveLayout = lastPlacement => {\n      switch (lastPlacement) {\n      case 'north':\n        return north;\n      case 'northeast':\n        return northeast;\n      case 'northwest':\n        return northwest;\n      case 'south':\n        return south;\n      case 'southeast':\n        return southeast;\n      case 'southwest':\n        return southwest;\n      case 'east':\n        return east;\n      case 'west':\n        return west;\n      }\n    };\n    const preserve = (anchor, element, bubbles, placee, bounds) => {\n      const layout = getPlacement(placee).map(lookupPreserveLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n    const lookupFlippedLayout = lastPlacement => {\n      switch (lastPlacement) {\n      case 'north':\n        return south;\n      case 'northeast':\n        return southeast;\n      case 'northwest':\n        return southwest;\n      case 'south':\n        return north;\n      case 'southeast':\n        return northeast;\n      case 'southwest':\n        return northwest;\n      case 'east':\n        return west;\n      case 'west':\n        return east;\n      }\n    };\n    const flip = (anchor, element, bubbles, placee, bounds) => {\n      const layout = getPlacement(placee).map(lookupFlippedLayout).getOr(north);\n      return layout(anchor, element, bubbles, placee, bounds);\n    };\n\n    const bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    const getInlineDialogAnchor = (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) => {\n      const bubbleSize = 12;\n      const overrides = { maxHeightFunction: expandable$1() };\n      const editableAreaAnchor = () => ({\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [northeast],\n          onLtr: () => [northwest]\n        },\n        overrides\n      });\n      const standardAnchor = () => ({\n        type: 'hotspot',\n        hotspot: lazyAnchorbar(),\n        bubble: nu$5(-bubbleSize, bubbleSize, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [\n            southeast$2,\n            southwest$2,\n            south$2\n          ],\n          onLtr: () => [\n            southwest$2,\n            southeast$2,\n            south$2\n          ]\n        },\n        overrides\n      });\n      return () => lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n    };\n    const getInlineBottomDialogAnchor = (inline, contentAreaElement, lazyBottomAnchorBar, lazyUseEditableAreaAnchor) => {\n      const bubbleSize = 12;\n      const overrides = { maxHeightFunction: expandable$1() };\n      const editableAreaAnchor = () => ({\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        bubble: nu$5(bubbleSize, bubbleSize, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [north],\n          onLtr: () => [north]\n        },\n        overrides\n      });\n      const standardAnchor = () => inline ? {\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        bubble: nu$5(0, -getOuter$2(contentAreaElement()), bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [north$2],\n          onLtr: () => [north$2]\n        },\n        overrides\n      } : {\n        type: 'hotspot',\n        hotspot: lazyBottomAnchorBar(),\n        bubble: nu$5(0, 0, bubbleAlignments$2),\n        layouts: {\n          onRtl: () => [north$2],\n          onLtr: () => [north$2]\n        },\n        overrides\n      };\n      return () => lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n    };\n    const getBannerAnchor = (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) => {\n      const editableAreaAnchor = () => ({\n        type: 'node',\n        root: getContentContainer(getRootNode(contentAreaElement())),\n        node: Optional.from(contentAreaElement()),\n        layouts: {\n          onRtl: () => [north],\n          onLtr: () => [north]\n        }\n      });\n      const standardAnchor = () => ({\n        type: 'hotspot',\n        hotspot: lazyAnchorbar(),\n        layouts: {\n          onRtl: () => [south$2],\n          onLtr: () => [south$2]\n        }\n      });\n      return () => lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n    };\n    const getCursorAnchor = (editor, bodyElement) => () => ({\n      type: 'selection',\n      root: bodyElement(),\n      getSelection: () => {\n        const rng = editor.selection.getRng();\n        const selectedCells = editor.model.table.getSelectedCells();\n        if (selectedCells.length > 1) {\n          const firstCell = selectedCells[0];\n          const lastCell = selectedCells[selectedCells.length - 1];\n          const selectionTableCellRange = {\n            firstCell: SugarElement.fromDom(firstCell),\n            lastCell: SugarElement.fromDom(lastCell)\n          };\n          return Optional.some(selectionTableCellRange);\n        }\n        return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n      }\n    });\n    const getNodeAnchor$1 = bodyElement => element => ({\n      type: 'node',\n      root: bodyElement(),\n      node: element\n    });\n    const getAnchors = (editor, lazyAnchorbar, lazyBottomAnchorBar, isToolbarTop) => {\n      const useFixedToolbarContainer = useFixedContainer(editor);\n      const bodyElement = () => SugarElement.fromDom(editor.getBody());\n      const contentAreaElement = () => SugarElement.fromDom(editor.getContentAreaContainer());\n      const lazyUseEditableAreaAnchor = () => useFixedToolbarContainer || !isToolbarTop();\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        inlineBottomDialog: getInlineBottomDialogAnchor(editor.inline, contentAreaElement, lazyBottomAnchorBar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor$1(bodyElement)\n      };\n    };\n\n    const colorPicker = editor => (callback, value) => {\n      const dialog = colorPickerDialog(editor);\n      dialog(callback, value);\n    };\n    const hasCustomColors = editor => () => hasCustomColors$1(editor);\n    const getColors = editor => id => getColors$2(editor, id);\n    const getColorCols = editor => id => getColorCols$1(editor, id);\n    const ColorInputBackstage = editor => ({\n      colorPicker: colorPicker(editor),\n      hasCustomColors: hasCustomColors(editor),\n      getColors: getColors(editor),\n      getColorCols: getColorCols(editor)\n    });\n\n    const isDraggableModal = editor => () => isDraggableModal$1(editor);\n    const DialogBackstage = editor => ({ isDraggableModal: isDraggableModal(editor) });\n\n    const HeaderBackstage = editor => {\n      const mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: () => mode.get() === 'top',\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    const isNestedFormat = format => hasNonNullableKey(format, 'items');\n    const isFormatReference = format => hasNonNullableKey(format, 'format');\n    const defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    const isNestedFormats = format => has$2(format, 'items');\n    const isBlockFormat = format => has$2(format, 'block');\n    const isInlineFormat = format => has$2(format, 'inline');\n    const isSelectorFormat = format => has$2(format, 'selector');\n    const mapFormats = userFormats => foldl(userFormats, (acc, fmt) => {\n      if (isNestedFormats(fmt)) {\n        const result = mapFormats(fmt.items);\n        return {\n          customFormats: acc.customFormats.concat(result.customFormats),\n          formats: acc.formats.concat([{\n              title: fmt.title,\n              items: result.formats\n            }])\n        };\n      } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n        const formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n        const formatNameWithPrefix = `custom-${ formatName }`;\n        return {\n          customFormats: acc.customFormats.concat([{\n              name: formatNameWithPrefix,\n              format: fmt\n            }]),\n          formats: acc.formats.concat([{\n              title: fmt.title,\n              format: formatNameWithPrefix,\n              icon: fmt.icon\n            }])\n        };\n      } else {\n        return {\n          ...acc,\n          formats: acc.formats.concat(fmt)\n        };\n      }\n    }, {\n      customFormats: [],\n      formats: []\n    });\n    const registerCustomFormats = (editor, userFormats) => {\n      const result = mapFormats(userFormats);\n      const registerFormats = customFormats => {\n        each$1(customFormats, fmt => {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', () => {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    const getStyleFormats = editor => getUserStyleFormats(editor).map(userFormats => {\n      const registeredUserFormats = registerCustomFormats(editor, userFormats);\n      return shouldMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n    }).getOr(defaultStyleFormats);\n\n    const isSeparator$1 = format => {\n      const keys$1 = keys(format);\n      return keys$1.length === 1 && contains$2(keys$1, 'title');\n    };\n    const processBasic = (item, isSelectedFor, getPreviewFor) => ({\n      ...item,\n      type: 'formatter',\n      isSelected: isSelectedFor(item.format),\n      getStylePreview: getPreviewFor(item.format)\n    });\n    const register$a = (editor, formats, isSelectedFor, getPreviewFor) => {\n      const enrichSupported = item => processBasic(item, isSelectedFor, getPreviewFor);\n      const enrichMenu = item => {\n        const newItems = doEnrich(item.items);\n        return {\n          ...item,\n          type: 'submenu',\n          getStyleItems: constant$1(newItems)\n        };\n      };\n      const enrichCustom = item => {\n        const formatName = isString(item.name) ? item.name : generate$6(item.title);\n        const formatNameWithPrefix = `custom-${ formatName }`;\n        const newItem = {\n          ...item,\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      const doEnrich = items => map$2(items, item => {\n        if (isNestedFormat(item)) {\n          return enrichMenu(item);\n        } else if (isFormatReference(item)) {\n          return enrichSupported(item);\n        } else if (isSeparator$1(item)) {\n          return {\n            ...item,\n            type: 'separator'\n          };\n        } else {\n          return enrichCustom(item);\n        }\n      });\n      return doEnrich(formats);\n    };\n\n    const init$7 = editor => {\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = format => () => {\n        const fmt = editor.formatter.get(format);\n        return fmt !== undefined ? Optional.some({\n          tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n          styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n        }) : Optional.none();\n      };\n      const settingsFormats = Cell([]);\n      const eventsFormats = Cell([]);\n      const replaceSettings = Cell(false);\n      editor.on('PreInit', _e => {\n        const formats = getStyleFormats(editor);\n        const enriched = register$a(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n      });\n      editor.on('addStyleModifications', e => {\n        const modifications = register$a(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n      });\n      const getData = () => {\n        const fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        const fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return { getData };\n    };\n\n    const isElement = node => isNonNullable(node) && node.nodeType === 1;\n    const trim = global$1.trim;\n    const hasContentEditableState = value => {\n      return node => {\n        if (isElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const isContentEditableTrue = hasContentEditableState('true');\n    const isContentEditableFalse = hasContentEditableState('false');\n    const create = (type, title, url, level, attach) => ({\n      type,\n      title,\n      url,\n      level,\n      attach\n    });\n    const isChildOfContentEditableTrue = node => {\n      let tempNode = node;\n      while (tempNode = tempNode.parentNode) {\n        const value = tempNode.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(tempNode);\n        }\n      }\n      return false;\n    };\n    const select = (selector, root) => {\n      return map$2(descendants(SugarElement.fromDom(root), selector), element => {\n        return element.dom;\n      });\n    };\n    const getElementText = elm => {\n      return elm.innerText || elm.textContent;\n    };\n    const getOrGenerateId = elm => {\n      return elm.id ? elm.id : generate$6('h');\n    };\n    const isAnchor = elm => {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    const isValidAnchor = elm => {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    const isHeader = elm => {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    const isEditable = elm => {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    const isValidHeader = elm => {\n      return isHeader(elm) && isEditable(elm);\n    };\n    const getLevel = elm => {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    const headerTarget = elm => {\n      var _a;\n      const headerId = getOrGenerateId(elm);\n      const attach = () => {\n        elm.id = headerId;\n      };\n      return create('header', (_a = getElementText(elm)) !== null && _a !== void 0 ? _a : '', '#' + headerId, getLevel(elm), attach);\n    };\n    const anchorTarget = elm => {\n      const anchorId = elm.id || elm.name;\n      const anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    const getHeaderTargets = elms => {\n      return map$2(filter$2(elms, isValidHeader), headerTarget);\n    };\n    const getAnchorTargets = elms => {\n      return map$2(filter$2(elms, isValidAnchor), anchorTarget);\n    };\n    const getTargetElements = elm => {\n      const elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    const hasTitle = target => {\n      return trim(target.title).length > 0;\n    };\n    const find = elm => {\n      const elms = getTargetElements(elm);\n      return filter$2(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    const LinkTargets = { find };\n\n    const STORAGE_KEY = 'tinymce-url-history';\n    const HISTORY_LENGTH = 5;\n    const isHttpUrl = url => isString(url) && /^https?/.test(url);\n    const isArrayOfUrl = a => isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    const isRecordOfUrlArray = r => isObject(r) && find$4(r, value => !isArrayOfUrl(value)).isNone();\n    const getAllHistory = () => {\n      const unparsedHistory = global$4.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      let history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    const setAllHistory = history => {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$4.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    const getHistory = fileType => {\n      const history = getAllHistory();\n      return get$g(history, fileType).getOr([]);\n    };\n    const addToHistory = (url, fileType) => {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      const history = getAllHistory();\n      const items = get$g(history, fileType).getOr([]);\n      const itemsWithoutUrl = filter$2(items, item => item !== url);\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    const isTruthy = value => !!value;\n    const makeMap = value => map$1(global$1.makeMap(value, /[, ]/), isTruthy);\n    const getPicker = editor => Optional.from(getFilePickerCallback(editor));\n    const getPickerTypes = editor => {\n      const optFileTypes = Optional.from(getFilePickerTypes(editor)).filter(isTruthy).map(makeMap);\n      return getPicker(editor).fold(never, _picker => optFileTypes.fold(always, types => keys(types).length > 0 ? types : false));\n    };\n    const getPickerSetting = (editor, filetype) => {\n      const pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    const getUrlPicker = (editor, filetype) => getPickerSetting(editor, filetype).map(picker => entry => Future.nu(completer => {\n      const handler = (value, meta) => {\n        if (!isString(value)) {\n          throw new Error('Expected value to be string');\n        }\n        if (meta !== undefined && !isObject(meta)) {\n          throw new Error('Expected meta to be a object');\n        }\n        const r = {\n          value,\n          meta\n        };\n        completer(r);\n      };\n      const meta = {\n        filetype,\n        fieldname: entry.fieldname,\n        ...Optional.from(entry.meta).getOr({})\n      };\n      picker.call(editor, handler, entry.value, meta);\n    }));\n    const getTextSetting = value => Optional.from(value).filter(isString).getOrUndefined();\n    const getLinkInformation = editor => {\n      if (!useTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    const getValidationHandler = editor => Optional.from(getFilePickerValidatorHandler(editor));\n    const UrlInputBackstage = editor => ({\n      getHistory,\n      addToHistory,\n      getLinkInformation: () => getLinkInformation(editor),\n      getValidationHandler: () => getValidationHandler(editor),\n      getUrlPicker: filetype => getUrlPicker(editor, filetype)\n    });\n\n    const init$6 = (lazySinks, editor, lazyAnchorbar, lazyBottomAnchorBar) => {\n      const contextMenuState = Cell(false);\n      const toolbar = HeaderBackstage(editor);\n      const providers = {\n        icons: () => editor.ui.registry.getAll().icons,\n        menuItems: () => editor.ui.registry.getAll().menuItems,\n        translate: global$8.translate,\n        isDisabled: () => editor.mode.isReadOnly() || !editor.ui.isEnabled(),\n        getOption: editor.options.get\n      };\n      const urlinput = UrlInputBackstage(editor);\n      const styles = init$7(editor);\n      const colorinput = ColorInputBackstage(editor);\n      const dialogSettings = DialogBackstage(editor);\n      const isContextMenuOpen = () => contextMenuState.get();\n      const setContextMenuState = state => contextMenuState.set(state);\n      const commonBackstage = {\n        shared: {\n          providers,\n          anchors: getAnchors(editor, lazyAnchorbar, lazyBottomAnchorBar, toolbar.isPositionedAtTop),\n          header: toolbar\n        },\n        urlinput,\n        styles,\n        colorinput,\n        dialog: dialogSettings,\n        isContextMenuOpen,\n        setContextMenuState\n      };\n      const popupBackstage = {\n        ...commonBackstage,\n        shared: {\n          ...commonBackstage.shared,\n          interpreter: s => interpretWithoutForm(s, {}, popupBackstage),\n          getSink: lazySinks.popup\n        }\n      };\n      const dialogBackstage = {\n        ...commonBackstage,\n        shared: {\n          ...commonBackstage.shared,\n          interpreter: s => interpretWithoutForm(s, {}, dialogBackstage),\n          getSink: lazySinks.dialog\n        }\n      };\n      return {\n        popup: popupBackstage,\n        dialog: dialogBackstage\n      };\n    };\n\n    const setup$b = (editor, mothership, uiMotherships) => {\n      const broadcastEvent = (name, evt) => {\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], m => {\n          m.broadcastEvent(name, evt);\n        });\n      };\n      const broadcastOn = (channel, message) => {\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], m => {\n          m.broadcastOn([channel], message);\n        });\n      };\n      const fireDismissPopups = evt => broadcastOn(dismissPopups(), { target: evt.target });\n      const doc = getDocument();\n      const onTouchstart = bind(doc, 'touchstart', fireDismissPopups);\n      const onTouchmove = bind(doc, 'touchmove', evt => broadcastEvent(documentTouchmove(), evt));\n      const onTouchend = bind(doc, 'touchend', evt => broadcastEvent(documentTouchend(), evt));\n      const onMousedown = bind(doc, 'mousedown', fireDismissPopups);\n      const onMouseup = bind(doc, 'mouseup', evt => {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      const onContentClick = raw => broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      const onContentMouseup = raw => {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      const onContentMousedown = () => {\n        each$1(editor.editorManager.get(), loopEditor => {\n          if (editor !== loopEditor) {\n            loopEditor.dispatch('DismissPopups', { relatedTarget: editor });\n          }\n        });\n      };\n      const onWindowScroll = evt => broadcastEvent(windowScroll(), fromRawEvent(evt));\n      const onWindowResize = evt => {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent(evt));\n      };\n      const dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      const onElementScroll = capture(dos, 'scroll', evt => {\n        requestAnimationFrame(() => {\n          const c = editor.getContainer();\n          if (c !== undefined && c !== null) {\n            const optScrollingContext = detectWhenSplitUiMode(editor, mothership.element);\n            const scrollers = optScrollingContext.map(sc => [\n              sc.element,\n              ...sc.others\n            ]).getOr([]);\n            if (exists(scrollers, s => eq(s, evt.target))) {\n              editor.dispatch('ElementScroll', { target: evt.target.dom });\n              broadcastEvent(externalElementScroll(), evt);\n            }\n          }\n        });\n      });\n      const onEditorResize = () => broadcastOn(repositionPopups(), {});\n      const onEditorProgress = evt => {\n        if (evt.state) {\n          broadcastOn(dismissPopups(), { target: SugarElement.fromDom(editor.getContainer()) });\n        }\n      };\n      const onDismissPopups = event => {\n        broadcastOn(dismissPopups(), { target: SugarElement.fromDom(event.relatedTarget.getContainer()) });\n      };\n      editor.on('PostRender', () => {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('mousedown', onContentMousedown);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n        editor.on('AfterProgressState', onEditorProgress);\n        editor.on('DismissPopups', onDismissPopups);\n      });\n      editor.on('remove', () => {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('mousedown', onContentMousedown);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        editor.off('AfterProgressState', onEditorProgress);\n        editor.off('DismissPopups', onDismissPopups);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n        onElementScroll.unbind();\n      });\n      editor.on('detach', () => {\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], detachSystem);\n        each$1([\n          mothership,\n          ...uiMotherships\n        ], m => m.destroy());\n      });\n    };\n\n    const parts$a = AlloyParts;\n    const partType = PartType;\n\n    const schema$f = constant$1([\n      defaulted('shell', false),\n      required$1('makeItem'),\n      defaulted('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    const customListDetail = () => ({ behaviours: derive$1([Replacing.config({})]) });\n    const itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    const parts$9 = constant$1([itemsPart]);\n    const name = constant$1('CustomList');\n\n    const factory$f = (detail, components, _spec, _external) => {\n      const setItems = (list, items) => {\n        getListContainer(list).fold(() => {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, container => {\n          const itemComps = Replacing.contents(container);\n          const numListsRequired = items.length;\n          const numListsToAdd = numListsRequired - itemComps.length;\n          const itemsToAdd = numListsToAdd > 0 ? range$2(numListsToAdd, () => detail.makeItem()) : [];\n          const itemsToRemove = itemComps.slice(numListsRequired);\n          each$1(itemsToRemove, item => Replacing.remove(container, item));\n          each$1(itemsToAdd, item => Replacing.append(container, item));\n          const builtLists = Replacing.contents(container);\n          each$1(builtLists, (item, i) => {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      const extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components\n      };\n      const getListContainer = component => detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems }\n      };\n    };\n    const CustomList = composite({\n      name: name(),\n      configFields: schema$f(),\n      partFields: parts$9(),\n      factory: factory$f,\n      apis: {\n        setItems: (apis, list, items) => {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    const schema$e = constant$1([\n      required$1('dom'),\n      defaulted('shell', true),\n      field('toolbarBehaviours', [Replacing])\n    ]);\n    const enhanceGroups = () => ({ behaviours: derive$1([Replacing.config({})]) });\n    const parts$8 = constant$1([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    const factory$e = (detail, components, _spec, _externals) => {\n      const setGroups = (toolbar, groups) => {\n        getGroupContainer(toolbar).fold(() => {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, container => {\n          Replacing.set(container, groups);\n        });\n      };\n      const getGroupContainer = component => detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      const extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: {\n          setGroups,\n          refresh: noop\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    const Toolbar = composite({\n      name: 'Toolbar',\n      configFields: schema$e(),\n      partFields: parts$8(),\n      factory: factory$e,\n      apis: {\n        setGroups: (apis, toolbar, groups) => {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    const setup$a = noop;\n    const isDocked$2 = never;\n    const getBehaviours$1 = constant$1([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$a,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$1\n    });\n\n    const getOffsetParent = element => {\n      const isFixed = is$1(getRaw(element, 'position'), 'fixed');\n      const offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(() => {\n        const marker = SugarElement.fromTag('span');\n        return parent(element).bind(parent => {\n          append$2(parent, marker);\n          const offsetParent$1 = offsetParent(marker);\n          remove$5(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    const getOrigin = element => getOffsetParent(element).map(absolute$3).getOrThunk(() => SugarPosition(0, 0));\n\n    const appear = (component, contextualInfo) => {\n      const elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    const disappear = (component, contextualInfo) => {\n      const elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$2(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    const isPartiallyVisible = (box, bounds) => box.y < bounds.bottom && box.bottom > bounds.y;\n    const isTopCompletelyVisible = (box, bounds) => box.y >= bounds.y;\n    const isBottomCompletelyVisible = (box, bounds) => box.bottom <= bounds.bottom;\n    const forceTopPosition = (winBox, leftX, viewport) => ({\n      location: 'top',\n      leftX,\n      topY: viewport.bounds.y - winBox.y\n    });\n    const forceBottomPosition = (winBox, leftX, viewport) => ({\n      location: 'bottom',\n      leftX,\n      bottomY: winBox.bottom - viewport.bounds.bottom\n    });\n    const getDockedLeftPosition = bounds => {\n      return bounds.box.x - bounds.win.x;\n    };\n    const tryDockingPosition = (modes, bounds, viewport) => {\n      const winBox = bounds.win;\n      const box = bounds.box;\n      const leftX = getDockedLeftPosition(bounds);\n      return findMap(modes, mode => {\n        switch (mode) {\n        case 'bottom':\n          return !isBottomCompletelyVisible(box, viewport.bounds) ? Optional.some(forceBottomPosition(winBox, leftX, viewport)) : Optional.none();\n        case 'top':\n          return !isTopCompletelyVisible(box, viewport.bounds) ? Optional.some(forceTopPosition(winBox, leftX, viewport)) : Optional.none();\n        default:\n          return Optional.none();\n        }\n      }).getOr({ location: 'no-dock' });\n    };\n    const isVisibleForModes = (modes, box, viewport) => forall(modes, mode => {\n      switch (mode) {\n      case 'bottom':\n        return isBottomCompletelyVisible(box, viewport.bounds);\n      case 'top':\n        return isTopCompletelyVisible(box, viewport.bounds);\n      }\n    });\n    const getXYForRestoring = (pos, viewport) => {\n      const priorY = viewport.optScrollEnv.fold(constant$1(pos.bounds.y), scrollEnv => scrollEnv.scrollElmTop + (pos.bounds.y - scrollEnv.currentScrollTop));\n      return SugarPosition(pos.bounds.x, priorY);\n    };\n    const getXYForSaving = (box, viewport) => {\n      const priorY = viewport.optScrollEnv.fold(constant$1(box.y), scrollEnv => box.y + scrollEnv.currentScrollTop - scrollEnv.scrollElmTop);\n      return SugarPosition(box.x, priorY);\n    };\n    const getPrior = (elem, viewport, state) => state.getInitialPos().map(pos => {\n      const xy = getXYForRestoring(pos, viewport);\n      return {\n        box: bounds(xy.left, xy.top, get$c(elem), get$d(elem)),\n        location: pos.location\n      };\n    });\n    const storePrior = (elem, box, viewport, state, decision) => {\n      const xy = getXYForSaving(box, viewport);\n      const bounds$1 = bounds(xy.left, xy.top, box.width, box.height);\n      state.setInitialPos({\n        style: getAllRaw(elem),\n        position: get$e(elem, 'position') || 'static',\n        bounds: bounds$1,\n        location: decision.location\n      });\n    };\n    const storePriorIfNone = (elem, box, viewport, state, decision) => {\n      state.getInitialPos().fold(() => storePrior(elem, box, viewport, state, decision), () => noop);\n    };\n    const revertToOriginal = (elem, box, state) => state.getInitialPos().bind(position => {\n      var _a;\n      state.clearInitialPos();\n      switch (position.position) {\n      case 'static':\n        return Optional.some({ morph: 'static' });\n      case 'absolute':\n        const offsetParent = getOffsetParent(elem).getOr(body());\n        const offsetBox = box$1(offsetParent);\n        const scrollDelta = (_a = offsetParent.dom.scrollTop) !== null && _a !== void 0 ? _a : 0;\n        return Optional.some({\n          morph: 'absolute',\n          positionCss: NuPositionCss('absolute', get$g(position.style, 'left').map(_left => box.x - offsetBox.x), get$g(position.style, 'top').map(_top => box.y - offsetBox.y + scrollDelta), get$g(position.style, 'right').map(_right => offsetBox.right - box.right), get$g(position.style, 'bottom').map(_bottom => offsetBox.bottom - box.bottom))\n        });\n      default:\n        return Optional.none();\n      }\n    });\n    const tryMorphToOriginal = (elem, viewport, state) => getPrior(elem, viewport, state).filter(({box}) => isVisibleForModes(state.getModes(), box, viewport)).bind(({box}) => revertToOriginal(elem, box, state));\n    const tryDecisionToFixedMorph = decision => {\n      switch (decision.location) {\n      case 'top': {\n          return Optional.some({\n            morph: 'fixed',\n            positionCss: NuPositionCss('fixed', Optional.some(decision.leftX), Optional.some(decision.topY), Optional.none(), Optional.none())\n          });\n        }\n      case 'bottom': {\n          return Optional.some({\n            morph: 'fixed',\n            positionCss: NuPositionCss('fixed', Optional.some(decision.leftX), Optional.none(), Optional.none(), Optional.some(decision.bottomY))\n          });\n        }\n      default:\n        return Optional.none();\n      }\n    };\n    const tryMorphToFixed = (elem, viewport, state) => {\n      const box = box$1(elem);\n      const winBox = win();\n      const decision = tryDockingPosition(state.getModes(), {\n        win: winBox,\n        box\n      }, viewport);\n      if (decision.location === 'top' || decision.location === 'bottom') {\n        storePrior(elem, box, viewport, state, decision);\n        return tryDecisionToFixedMorph(decision);\n      } else {\n        return Optional.none();\n      }\n    };\n    const tryMorphToOriginalOrUpdateFixed = (elem, viewport, state) => {\n      return tryMorphToOriginal(elem, viewport, state).orThunk(() => {\n        return viewport.optScrollEnv.bind(_ => getPrior(elem, viewport, state)).bind(({box, location}) => {\n          const winBox = win();\n          const leftX = getDockedLeftPosition({\n            win: winBox,\n            box\n          });\n          const decision = location === 'top' ? forceTopPosition(winBox, leftX, viewport) : forceBottomPosition(winBox, leftX, viewport);\n          return tryDecisionToFixedMorph(decision);\n        });\n      });\n    };\n    const tryMorph = (component, viewport, state) => {\n      const elem = component.element;\n      const isDocked = is$1(getRaw(elem, 'position'), 'fixed');\n      return isDocked ? tryMorphToOriginalOrUpdateFixed(elem, viewport, state) : tryMorphToFixed(elem, viewport, state);\n    };\n    const calculateMorphToOriginal = (component, viewport, state) => {\n      const elem = component.element;\n      return getPrior(elem, viewport, state).bind(({box}) => revertToOriginal(elem, box, state));\n    };\n    const forceDockWith = (elem, viewport, state, getDecision) => {\n      const box = box$1(elem);\n      const winBox = win();\n      const leftX = getDockedLeftPosition({\n        win: winBox,\n        box\n      });\n      const decision = getDecision(winBox, leftX, viewport);\n      if (decision.location === 'bottom' || decision.location === 'top') {\n        storePriorIfNone(elem, box, viewport, state, decision);\n        return tryDecisionToFixedMorph(decision);\n      } else {\n        return Optional.none();\n      }\n    };\n\n    const morphToStatic = (component, config, state) => {\n      state.setDocked(false);\n      each$1([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], prop => remove$6(component.element, prop));\n      config.onUndocked(component);\n    };\n    const morphToCoord = (component, config, state, position) => {\n      const isDocked = position.position === 'fixed';\n      state.setDocked(isDocked);\n      applyPositionCss(component.element, position);\n      const method = isDocked ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    const updateVisibility = (component, config, state, viewport, morphToDocked = false) => {\n      config.contextual.each(contextInfo => {\n        contextInfo.lazyContext(component).each(box => {\n          const isVisible = isPartiallyVisible(box, viewport.bounds);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$1(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              const method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    const applyFixedMorph = (component, config, state, viewport, morph) => {\n      updateVisibility(component, config, state, viewport, true);\n      morphToCoord(component, config, state, morph.positionCss);\n    };\n    const applyMorph = (component, config, state, viewport, morph) => {\n      switch (morph.morph) {\n      case 'static': {\n          return morphToStatic(component, config, state);\n        }\n      case 'absolute': {\n          return morphToCoord(component, config, state, morph.positionCss);\n        }\n      case 'fixed': {\n          return applyFixedMorph(component, config, state, viewport, morph);\n        }\n      }\n    };\n    const refreshInternal = (component, config, state) => {\n      const viewport = config.lazyViewport(component);\n      updateVisibility(component, config, state, viewport);\n      tryMorph(component, viewport, state).each(morph => {\n        applyMorph(component, config, state, viewport, morph);\n      });\n    };\n    const resetInternal = (component, config, state) => {\n      const elem = component.element;\n      state.setDocked(false);\n      const viewport = config.lazyViewport(component);\n      calculateMorphToOriginal(component, viewport, state).each(staticOrAbsoluteMorph => {\n        switch (staticOrAbsoluteMorph.morph) {\n        case 'static': {\n            morphToStatic(component, config, state);\n            break;\n          }\n        case 'absolute': {\n            morphToCoord(component, config, state, staticOrAbsoluteMorph.positionCss);\n            break;\n          }\n        }\n      });\n      state.setVisible(true);\n      config.contextual.each(contextInfo => {\n        remove$1(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$3(component, config, state);\n    };\n    const refresh$3 = (component, config, state) => {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    const reset = (component, config, state) => {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    const forceDockWithDecision = getDecision => (component, config, state) => {\n      const viewport = config.lazyViewport(component);\n      const optMorph = forceDockWith(component.element, viewport, state, getDecision);\n      optMorph.each(morph => {\n        applyFixedMorph(component, config, state, viewport, morph);\n      });\n    };\n    const forceDockToTop = forceDockWithDecision(forceTopPosition);\n    const forceDockToBottom = forceDockWithDecision(forceBottomPosition);\n    const isDocked$1 = (component, config, state) => state.isDocked();\n    const setModes = (component, config, state, modes) => state.setModes(modes);\n    const getModes = (component, config, state) => state.getModes();\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$3,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes,\n        forceDockToTop: forceDockToTop,\n        forceDockToBottom: forceDockToBottom\n    });\n\n    const events$4 = (dockInfo, dockState) => derive$2([\n      runOnSource(transitionend(), (component, simulatedEvent) => {\n        dockInfo.contextual.each(contextInfo => {\n          if (has(component.element, contextInfo.transitionClass)) {\n            remove$1(component.element, [\n              contextInfo.transitionClass,\n              contextInfo.fadeInClass\n            ]);\n            const notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n            notify(component);\n          }\n          simulatedEvent.stop();\n        });\n      }),\n      run$1(windowScroll(), (component, _) => {\n        refresh$3(component, dockInfo, dockState);\n      }),\n      run$1(externalElementScroll(), (component, _) => {\n        refresh$3(component, dockInfo, dockState);\n      }),\n      run$1(windowResize(), (component, _) => {\n        reset(component, dockInfo, dockState);\n      })\n    ]);\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$4\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        requiredString('fadeInClass'),\n        requiredString('fadeOutClass'),\n        requiredString('transitionClass'),\n        requiredFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', () => ({\n        bounds: win(),\n        optScrollEnv: Optional.none()\n      })),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    const init$5 = spec => {\n      const docked = Cell(false);\n      const visible = Cell(true);\n      const initialBounds = value$2();\n      const modes = Cell(spec.modes);\n      const readState = () => `docked:  ${ docked.get() }, visible: ${ visible.get() }, modes: ${ modes.get().join(',') }`;\n      return nu$8({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPos: initialBounds.get,\n        setInitialPos: initialBounds.set,\n        clearInitialPos: initialBounds.clear,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    const Docking = create$4({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    const toolbarHeightChange = constant$1(generate$6('toolbar-height-change'));\n\n    const visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    const editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    const editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    const scrollFromBehindHeader = (e, containerHeader) => {\n      const doc = owner$4(containerHeader);\n      const win = defaultView(containerHeader);\n      const viewHeight = win.dom.innerHeight;\n      const scrollPos = get$b(doc);\n      const markerElement = SugarElement.fromDom(e.elm);\n      const markerPos = absolute$2(markerElement);\n      const markerHeight = get$d(markerElement);\n      const markerTop = markerPos.y;\n      const markerBottom = markerTop + markerHeight;\n      const editorHeaderPos = absolute$3(containerHeader);\n      const editorHeaderHeight = get$d(containerHeader);\n      const editorHeaderTop = editorHeaderPos.top;\n      const editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      const editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      const editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        const y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    const isDockedMode = (header, mode) => contains$2(Docking.getModes(header), mode);\n    const updateIframeContentFlow = header => {\n      const getOccupiedHeight = elm => getOuter$2(elm) + (parseInt(get$e(elm, 'margin-top'), 10) || 0) + (parseInt(get$e(elm, 'margin-bottom'), 10) || 0);\n      const elm = header.element;\n      parentElement(elm).each(parentElem => {\n        const padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          const parentWidth = get$c(parentElem);\n          set$8(elm, 'width', parentWidth + 'px');\n          set$8(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    const updateSinkVisibility = (sinkElem, visible) => {\n      if (visible) {\n        remove$2(sinkElem, visibility.fadeOutClass);\n        add$1(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$2(sinkElem, visibility.fadeInClass);\n        add$1(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    const updateEditorClasses = (editor, docked) => {\n      const editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$2(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$2(editorContainer, editorStickyOnClass);\n      }\n    };\n    const restoreFocus = (headerElem, focusedElem) => {\n      const ownerDoc = owner$4(focusedElem);\n      active$1(ownerDoc).filter(activeElm => !eq(focusedElem, activeElm)).filter(activeElm => eq(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains(headerElem, activeElm)).each(() => focus$3(focusedElem));\n    };\n    const findFocusedElem = (rootElm, lazySink) => search(rootElm).orThunk(() => lazySink().toOptional().bind(sink => search(sink.element)));\n    const setup$9 = (editor, sharedBackstage, lazyHeader) => {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', () => {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', () => {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', () => {\n          lazyHeader().each(comp => {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', () => {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', e => {\n        lazyHeader().each(header => {\n          Docking.refresh(header);\n          const headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', () => {\n        updateEditorClasses(editor, false);\n      });\n    };\n    const isDocked = lazyHeader => lazyHeader().map(Docking.isDocked).getOr(false);\n    const getIframeBehaviours = () => [Receiving.config({ channels: { [toolbarHeightChange()]: { onReceive: updateIframeContentFlow } } })];\n    const getBehaviours = (editor, sharedBackstage) => {\n      const focusedElm = value$2();\n      const lazySink = sharedBackstage.getSink;\n      const runOnSinkElement = f => {\n        lazySink().each(sink => f(sink.element));\n      };\n      const onDockingSwitch = comp => {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(sink => sink.getSystem().broadcastOn([repositionPopups()], {}));\n      };\n      const additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return [\n        Focusing.config({}),\n        Docking.config({\n          contextual: {\n            lazyContext: comp => {\n              const headerHeight = getOuter$2(comp.element);\n              const container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              return Optional.from(container).map(c => {\n                const box = box$1(SugarElement.fromDom(c));\n                const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n                return optScrollingContext.fold(() => {\n                  const boxHeight = box.height - headerHeight;\n                  const topBound = box.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n                  return bounds(box.x, topBound, box.width, boxHeight);\n                }, scrollEnv => {\n                  const constrainedBounds = constrain(box, getBoundsFrom(scrollEnv));\n                  const constrainedBoundsY = isDockedMode(comp, 'top') ? constrainedBounds.y : constrainedBounds.y + headerHeight;\n                  return bounds(constrainedBounds.x, constrainedBoundsY, constrainedBounds.width, constrainedBounds.height - headerHeight);\n                });\n              });\n            },\n            onShow: () => {\n              runOnSinkElement(elem => updateSinkVisibility(elem, true));\n            },\n            onShown: comp => {\n              runOnSinkElement(elem => remove$1(elem, [\n                visibility.transitionClass,\n                visibility.fadeInClass\n              ]));\n              focusedElm.get().each(elem => {\n                restoreFocus(comp.element, elem);\n                focusedElm.clear();\n              });\n            },\n            onHide: comp => {\n              findFocusedElem(comp.element, lazySink).fold(focusedElm.clear, focusedElm.set);\n              runOnSinkElement(elem => updateSinkVisibility(elem, false));\n            },\n            onHidden: () => {\n              runOnSinkElement(elem => remove$1(elem, [visibility.transitionClass]));\n            },\n            ...visibility\n          },\n          lazyViewport: comp => {\n            const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n            return optScrollingContext.fold(() => {\n              const boundsWithoutOffset = win();\n              const offset = getStickyToolbarOffset(editor);\n              const top = boundsWithoutOffset.y + (isDockedMode(comp, 'top') ? offset : 0);\n              const height = boundsWithoutOffset.height - (isDockedMode(comp, 'bottom') ? offset : 0);\n              return {\n                bounds: bounds(boundsWithoutOffset.x, top, boundsWithoutOffset.width, height),\n                optScrollEnv: Optional.none()\n              };\n            }, sc => {\n              const combinedBounds = getBoundsFrom(sc);\n              return {\n                bounds: combinedBounds,\n                optScrollEnv: Optional.some({\n                  currentScrollTop: sc.element.dom.scrollTop,\n                  scrollElmTop: absolute$3(sc.element).top\n                })\n              };\n            });\n          },\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        }),\n        ...additionalBehaviours\n      ];\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$9,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours\n    });\n\n    const renderHeader = spec => {\n      const editor = spec.editor;\n      const getBehaviours$2 = spec.sticky ? getBehaviours : getBehaviours$1;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours$2(editor, spec.sharedBackstage))\n      };\n    };\n\n    const groupToolbarButtonSchema = objOf([\n      type,\n      requiredOf('items', oneOf([\n        arrOfObj([\n          name$1,\n          requiredArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    const createGroupToolbarButton = spec => asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n\n    const baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      defaultedOf('search', false, oneOf([\n        boolean,\n        objOf([optionString('placeholder')])\n      ], x => {\n        if (isBoolean(x)) {\n          return x ? Optional.some({ placeholder: Optional.none() }) : Optional.none();\n        } else {\n          return Optional.some(x);\n        }\n      })),\n      requiredFunction('fetch'),\n      defaultedFunction('onSetup', () => noop)\n    ];\n\n    const MenuButtonSchema = objOf([\n      type,\n      ...baseMenuButtonFields\n    ]);\n    const createMenuButton = spec => asRaw('menubutton', MenuButtonSchema, spec);\n\n    const splitButtonSchema = objOf([\n      type,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      optionalSelect,\n      fetch$1,\n      onSetup,\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaultedColumns(1),\n      onAction,\n      onItemAction\n    ]);\n    const createSplitButton = spec => asRaw('SplitButton', splitButtonSchema, spec);\n\n    const factory$d = (detail, spec) => {\n      const setMenus = (comp, menus) => {\n        const newMenus = map$2(menus, m => {\n          const buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: callback => {\n              callback(m.getItems());\n            }\n          };\n          const internal = createMenuButton(buttonSpec).mapError(errInfo => formatError(errInfo)).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      const apis = {\n        focus: Keying.focusIn,\n        setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(component => {\n              detail.onSetup(component);\n            }),\n            run$1(mouseover(), (comp, se) => {\n              descendant(comp.element, '.' + 'tox-mbtn--active').each(activeButton => {\n                closest$1(se.event.target, '.' + 'tox-mbtn').each(hoveredButton => {\n                  if (!eq(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(activeComp => {\n                      comp.getSystem().getByDom(hoveredButton).each(hoveredComp => {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run$1(focusShifted(), (comp, se) => {\n              se.event.prevFocus.bind(prev => comp.getSystem().getByDom(prev).toOptional()).each(prev => {\n                se.event.newFocus.bind(nu => comp.getSystem().getByDom(nu).toOptional()).each(nu => {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: comp => {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single({\n      factory: factory$d,\n      name: 'silver.Menubar',\n      configFields: [\n        required$1('dom'),\n        required$1('uid'),\n        required$1('onEscape'),\n        required$1('backstage'),\n        defaulted('onSetup', noop)\n      ],\n      apis: {\n        focus: (apis, comp) => {\n          apis.focus(comp);\n        },\n        setMenus: (apis, comp, menus) => {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    const promotionMessage = '\\u26A1\\ufe0fUpgrade';\n    const promotionLink = 'https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral';\n    const renderPromotion = spec => {\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: [{\n            dom: {\n              tag: 'a',\n              attributes: {\n                'href': promotionLink,\n                'rel': 'noopener',\n                'target': '_blank',\n                'aria-hidden': 'true'\n              },\n              classes: ['tox-promotion-link'],\n              innerHtml: promotionMessage\n            }\n          }]\n      };\n    };\n\n    const owner = 'container';\n    const schema$d = [field('slotBehaviours', [])];\n    const getPartName = name => '<alloy.field.' + name + '>';\n    const sketch = sSpec => {\n      const parts = (() => {\n        const record = [];\n        const slot = (name, config) => {\n          record.push(name);\n          return generateOne$1(owner, getPartName(name), config);\n        };\n        return {\n          slot,\n          record: constant$1(record)\n        };\n      })();\n      const spec = sSpec(parts);\n      const partNames = parts.record();\n      const fieldParts = map$2(partNames, n => required({\n        name: n,\n        pname: getPartName(n)\n      }));\n      return composite$1(owner, schema$d, fieldParts, make$1, spec);\n    };\n    const make$1 = (detail, components) => {\n      const getSlotNames = _ => getAllPartNames(detail);\n      const getSlot = (container, key) => getPart(container, detail, key);\n      const onSlot = (f, def) => (container, key) => getPart(container, detail, key).map(slot => f(slot, key)).getOr(def);\n      const onSlots = f => (container, keys) => {\n        each$1(keys, key => f(container, key));\n      };\n      const doShowing = (comp, _key) => get$f(comp.element, 'aria-hidden') !== 'true';\n      const doShow = (comp, key) => {\n        if (!doShowing(comp)) {\n          const element = comp.element;\n          remove$6(element, 'display');\n          remove$7(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      const doHide = (comp, key) => {\n        if (doShowing(comp)) {\n          const element = comp.element;\n          set$8(element, 'display', 'none');\n          set$9(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      const isShowing = onSlot(doShowing, false);\n      const hideSlot = onSlot(doHide);\n      const hideSlots = onSlots(hideSlot);\n      const hideAllSlots = container => hideSlots(container, getSlotNames());\n      const showSlot = onSlot(doShow);\n      const apis = {\n        getSlotNames,\n        getSlot,\n        isShowing,\n        hideSlot,\n        hideAllSlots,\n        showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: get$3(detail.slotBehaviours),\n        apis\n      };\n    };\n    const slotApis = map$1({\n      getSlotNames: (apis, c) => apis.getSlotNames(c),\n      getSlot: (apis, c, key) => apis.getSlot(c, key),\n      isShowing: (apis, c, key) => apis.isShowing(c, key),\n      hideSlot: (apis, c, key) => apis.hideSlot(c, key),\n      hideAllSlots: (apis, c) => apis.hideAllSlots(c),\n      showSlot: (apis, c, key) => apis.showSlot(c, key)\n    }, value => makeApi(value));\n    const SlotContainer = {\n      ...slotApis,\n      ...{ sketch }\n    };\n\n    const sidebarSchema = objOf([\n      optionalIcon,\n      optionalTooltip,\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      onSetup\n    ]);\n    const createSidebar = spec => asRaw('sidebar', sidebarSchema, spec);\n\n    const setup$8 = editor => {\n      const {sidebars} = editor.ui.registry.getAll();\n      each$1(keys(sidebars), name => {\n        const spec = sidebars[name];\n        const isActive = () => is$1(Optional.from(editor.queryCommandValue('ToggleSidebar')), name);\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: buttonApi => {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: buttonApi => {\n            buttonApi.setActive(isActive());\n            const handleToggle = () => buttonApi.setActive(isActive());\n            editor.on('ToggleSidebar', handleToggle);\n            return () => {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    const getApi = comp => ({ element: () => comp.element.dom });\n    const makePanels = (parts, panelConfigs) => {\n      const specs = map$2(keys(panelConfigs), name => {\n        const spec = panelConfigs[name];\n        const bridged = getOrDie(createSidebar(spec));\n        return {\n          name,\n          getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map$2(specs, spec => {\n        const editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run$1(slotVisibility(), (sidepanel, se) => {\n              const data = se.event;\n              const optSidePanelSpec = find$5(specs, config => config.name === data.name);\n              optSidePanelSpec.each(sidePanelSpec => {\n                const handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    const makeSidebar = panelConfigs => SlotContainer.sketch(parts => ({\n      dom: {\n        tag: 'div',\n        classes: ['tox-sidebar__pane-container']\n      },\n      components: makePanels(parts, panelConfigs),\n      slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(slotContainer => SlotContainer.hideAllSlots(slotContainer))])\n    }));\n    const setSidebar = (sidebar, panelConfigs, showSidebar) => {\n      const optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(slider => {\n        Replacing.set(slider, [makeSidebar(panelConfigs)]);\n        const configKey = showSidebar === null || showSidebar === void 0 ? void 0 : showSidebar.toLowerCase();\n        if (isString(configKey) && has$2(panelConfigs, configKey)) {\n          Composing.getCurrent(slider).each(slotContainer => {\n            SlotContainer.showSlot(slotContainer, configKey);\n            Sliding.immediateGrow(slider);\n            remove$6(slider.element, 'width');\n            updateSidebarRoleOnToggle(sidebar.element, 'region');\n          });\n        }\n      });\n    };\n    const updateSidebarRoleOnToggle = (sidebar, sidebarState) => {\n      set$9(sidebar, 'role', sidebarState);\n    };\n    const toggleSidebar = (sidebar, name) => {\n      const optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(slider => {\n        const optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(slotContainer => {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n              updateSidebarRoleOnToggle(sidebar.element, 'presentation');\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n              updateSidebarRoleOnToggle(sidebar.element, 'region');\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n            updateSidebarRoleOnToggle(sidebar.element, 'region');\n          }\n        });\n      });\n    };\n    const whichSidebar = sidebar => {\n      const optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(slider => {\n        const sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          const optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(slotContainer => find$5(SlotContainer.getSlotNames(slotContainer), name => SlotContainer.isShowing(slotContainer, name)));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const fixSize = generate$6('FixSizeEvent');\n    const autoSize = generate$6('AutoSizeEvent');\n    const renderSidebar = spec => ({\n      uid: spec.uid,\n      dom: {\n        tag: 'div',\n        classes: ['tox-sidebar'],\n        attributes: { role: 'presentation' }\n      },\n      components: [{\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__slider']\n          },\n          components: [],\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            Sliding.config({\n              dimension: { property: 'width' },\n              closedClass: 'tox-sidebar--sliding-closed',\n              openClass: 'tox-sidebar--sliding-open',\n              shrinkingClass: 'tox-sidebar--sliding-shrinking',\n              growingClass: 'tox-sidebar--sliding-growing',\n              onShrunk: slider => {\n                const optSlotContainer = Composing.getCurrent(slider);\n                optSlotContainer.each(SlotContainer.hideAllSlots);\n                emit(slider, autoSize);\n              },\n              onGrown: slider => {\n                emit(slider, autoSize);\n              },\n              onStartGrow: slider => {\n                emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n              },\n              onStartShrink: slider => {\n                emitWith(slider, fixSize, { width: get$c(slider.element) + 'px' });\n              }\n            }),\n            Replacing.config({}),\n            Composing.config({\n              find: comp => {\n                const children = Replacing.contents(comp);\n                return head(children);\n              }\n            })\n          ])\n        }],\n      behaviours: derive$1([\n        ComposingConfigs.childAt(0),\n        config('sidebar-sliding-events', [\n          run$1(fixSize, (comp, se) => {\n            set$8(comp.element, 'width', se.event.width);\n          }),\n          run$1(autoSize, (comp, _se) => {\n            remove$6(comp.element, 'width');\n          })\n        ])\n      ])\n    });\n\n    const block = (component, config, state, getBusySpec) => {\n      set$9(component.element, 'aria-busy', true);\n      const root = config.getRoot(component).getOr(component);\n      const blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: () => Optional.some(true),\n          onShiftTab: () => Optional.some(true)\n        }),\n        Focusing.config({})\n      ]);\n      const blockSpec = getBusySpec(root, blockerBehaviours);\n      const blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade(blocker));\n      if (blocker.hasConfigured(Keying) && config.focus) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(() => Replacing.remove(root, blocker));\n    };\n    const unblock = (component, config, state) => {\n      remove$7(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n    const isBlocked = (component, blockingConfig, blockingState) => blockingState.isBlocked();\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock,\n        isBlocked: isBlocked\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      defaultedBoolean('focus', true),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    const init$4 = () => {\n      const blocker = destroyable();\n      const blockWith = destroy => {\n        blocker.set({ destroy });\n      };\n      return nu$8({\n        readState: blocker.isSet,\n        blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    const Blocking = create$4({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    const getBusySpec$1 = providerBackstage => (_root, _behaviours) => ({\n      dom: {\n        tag: 'div',\n        attributes: {\n          'aria-label': providerBackstage.translate('Loading...'),\n          'tabindex': '0'\n        },\n        classes: ['tox-throbber__busy-spinner']\n      },\n      components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n    });\n    const focusBusyComponent = throbber => Composing.getCurrent(throbber).each(comp => focus$3(comp.element, true));\n    const toggleEditorTabIndex = (editor, state) => {\n      const tabIndexAttr = 'tabindex';\n      const dataTabIndexAttr = `data-mce-${ tabIndexAttr }`;\n      Optional.from(editor.iframeElement).map(SugarElement.fromDom).each(iframe => {\n        if (state) {\n          getOpt(iframe, tabIndexAttr).each(tabIndex => set$9(iframe, dataTabIndexAttr, tabIndex));\n          set$9(iframe, tabIndexAttr, -1);\n        } else {\n          remove$7(iframe, tabIndexAttr);\n          getOpt(iframe, dataTabIndexAttr).each(tabIndex => {\n            set$9(iframe, tabIndexAttr, tabIndex);\n            remove$7(iframe, dataTabIndexAttr);\n          });\n        }\n      });\n    };\n    const toggleThrobber = (editor, comp, state, providerBackstage) => {\n      const element = comp.element;\n      toggleEditorTabIndex(editor, state);\n      if (state) {\n        Blocking.block(comp, getBusySpec$1(providerBackstage));\n        remove$6(element, 'display');\n        remove$7(element, 'aria-hidden');\n        if (editor.hasFocus()) {\n          focusBusyComponent(comp);\n        }\n      } else {\n        const throbberFocus = Composing.getCurrent(comp).exists(busyComp => hasFocus(busyComp.element));\n        Blocking.unblock(comp);\n        set$8(element, 'display', 'none');\n        set$9(element, 'aria-hidden', 'true');\n        if (throbberFocus) {\n          editor.focus();\n        }\n      }\n    };\n    const renderThrobber = spec => ({\n      uid: spec.uid,\n      dom: {\n        tag: 'div',\n        attributes: { 'aria-hidden': 'true' },\n        classes: ['tox-throbber'],\n        styles: { display: 'none' }\n      },\n      behaviours: derive$1([\n        Replacing.config({}),\n        Blocking.config({ focus: false }),\n        Composing.config({ find: comp => head(comp.components()) })\n      ]),\n      components: []\n    });\n    const isFocusEvent = event => event.type === 'focusin';\n    const isPasteBinTarget = event => {\n      if (isFocusEvent(event)) {\n        const node = event.composed ? head(event.composedPath()) : Optional.from(event.target);\n        return node.map(SugarElement.fromDom).filter(isElement$1).exists(targetElm => has(targetElm, 'mce-pastebin'));\n      } else {\n        return false;\n      }\n    };\n    const setup$7 = (editor, lazyThrobber, sharedBackstage) => {\n      const throbberState = Cell(false);\n      const timer = value$2();\n      const stealFocus = e => {\n        if (throbberState.get() && !isPasteBinTarget(e)) {\n          e.preventDefault();\n          focusBusyComponent(lazyThrobber());\n          editor.editorManager.setActive(editor);\n        }\n      };\n      if (!editor.inline) {\n        editor.on('PreInit', () => {\n          editor.dom.bind(editor.getWin(), 'focusin', stealFocus);\n          editor.on('BeforeExecCommand', e => {\n            if (e.command.toLowerCase() === 'mcefocus' && e.value !== true) {\n              stealFocus(e);\n            }\n          });\n        });\n      }\n      const toggle = state => {\n        if (state !== throbberState.get()) {\n          throbberState.set(state);\n          toggleThrobber(editor, lazyThrobber(), state, sharedBackstage.providers);\n          fireAfterProgressState(editor, state);\n        }\n      };\n      editor.on('ProgressState', e => {\n        timer.on(clearTimeout);\n        if (isNumber(e.time)) {\n          const timerId = global$9.setEditorTimeout(editor, () => toggle(e.state), e.time);\n          timer.set(timerId);\n        } else {\n          toggle(e.state);\n          timer.clear();\n        }\n      });\n    };\n\n    const generate$1 = (xs, f) => {\n      const init = {\n        len: 0,\n        list: []\n      };\n      const r = foldl(xs, (b, a) => {\n        const value = f(a, b.len);\n        return value.fold(constant$1(b), v => ({\n          len: v.finish,\n          list: b.list.concat([v])\n        }));\n      }, init);\n      return r.list;\n    };\n\n    const output = (within, extra, withinWidth) => ({\n      within,\n      extra,\n      withinWidth\n    });\n    const apportion = (units, total, len) => {\n      const parray = generate$1(units, (unit, current) => {\n        const width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width\n        });\n      });\n      const within = filter$2(parray, unit => unit.finish <= total);\n      const withinWidth = foldr(within, (acc, el) => acc + el.width, 0);\n      const extra = parray.slice(within.length);\n      return {\n        within,\n        extra,\n        withinWidth\n      };\n    };\n    const toUnit = parray => map$2(parray, unit => unit.element);\n    const fitLast = (within, extra, withinWidth) => {\n      const fits = toUnit(within.concat(extra));\n      return output(fits, [], withinWidth);\n    };\n    const overflow = (within, extra, overflower, withinWidth) => {\n      const fits = toUnit(within).concat([overflower]);\n      return output(fits, toUnit(extra), withinWidth);\n    };\n    const fitAll = (within, extra, withinWidth) => output(toUnit(within), [], withinWidth);\n    const tryFit = (total, units, len) => {\n      const divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    const partition = (total, units, len, overflower) => {\n      const divide = tryFit(total, units, len).getOrThunk(() => apportion(units, total - len(overflower), len));\n      const within = divide.within;\n      const extra = divide.extra;\n      const withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    const setGroups$1 = (toolbar, storedGroups) => {\n      const bGroups = map$2(storedGroups, g => premade(g));\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    const findFocusedComp = comps => findMap(comps, comp => search(comp.element).bind(focusedElm => comp.getSystem().getByDom(focusedElm).toOptional()));\n    const refresh$2 = (toolbar, detail, setOverflow) => {\n      const builtGroups = detail.builtGroups.get();\n      if (builtGroups.length === 0) {\n        return;\n      }\n      const primary = getPartOrDie(toolbar, detail, 'primary');\n      const overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$8(primary.element, 'visibility', 'hidden');\n      const groups = builtGroups.concat([overflowGroup]);\n      const focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups$1(primary, groups);\n      const availableWidth = get$c(primary.element);\n      const overflows = partition(availableWidth, detail.builtGroups.get(), comp => get$c(comp.element), overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups$1(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    const schema$c = constant$1([\n      field('splitToolbarBehaviours', [Coupling]),\n      customField('builtGroups', () => Cell([]))\n    ]);\n\n    const schema$b = constant$1([\n      markers$1(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      required$1('lazySink'),\n      customField('overflowGroups', () => Cell([])),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    const parts$7 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      external({\n        schema: schema$e(),\n        name: 'overflow'\n      }),\n      external({ name: 'overflow-button' }),\n      external({ name: 'overflow-group' })\n    ]);\n\n    const expandable = constant$1((element, available) => {\n      setMax(element, Math.floor(available));\n    });\n\n    const schema$a = constant$1([\n      markers$1(['toggledClass']),\n      required$1('lazySink'),\n      requiredFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted('event', dismissRequested())]),\n      schema$y(),\n      onHandler('onToggled')\n    ]);\n    const parts$6 = constant$1([\n      external({\n        name: 'button',\n        overrides: detail => ({\n          dom: { attributes: { 'aria-haspopup': 'true' } },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleClass: detail.markers.toggledClass,\n              aria: { mode: 'expanded' },\n              toggleOnExecute: false,\n              onToggled: detail.onToggled\n            })])\n        })\n      }),\n      external({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'toolbar',\n        overrides: detail => {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: comp => {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    const shouldSkipFocus = value$2();\n    const toggleWithoutFocusing = (button, externals) => {\n      shouldSkipFocus.set(true);\n      toggle(button, externals);\n      shouldSkipFocus.clear();\n    };\n    const toggle = (button, externals) => {\n      const toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    const position = (button, toolbar, detail, layouts) => {\n      const bounds = detail.getBounds.map(bounder => bounder());\n      const sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, toolbar, {\n        anchor: {\n          type: 'hotspot',\n          hotspot: button,\n          layouts,\n          overrides: { maxWidthFunction: expandable() }\n        }\n      }, bounds);\n    };\n    const setGroups = (button, toolbar, detail, layouts, groups) => {\n      Toolbar.setGroups(toolbar, groups);\n      position(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    const makeSandbox = (button, spec, detail) => {\n      const ariaControls = manager();\n      const onOpen = (sandbox, toolbar) => {\n        const skipFocus = shouldSkipFocus.get().getOr(false);\n        detail.fetch().get(groups => {\n          setGroups(button, toolbar, detail, spec.layouts, groups);\n          ariaControls.link(button.element);\n          if (!skipFocus) {\n            Keying.focusIn(toolbar);\n          }\n        });\n      };\n      const onClose = () => {\n        Toggling.off(button);\n        if (!shouldSkipFocus.get().getOr(false)) {\n          Focusing.focus(button);\n        }\n        ariaControls.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaControls.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: comp => {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen,\n            onClose,\n            isPartOf: (container, data, queryElem) => {\n              return isPartOf$1(data, queryElem) || isPartOf$1(button, queryElem);\n            },\n            getAttachPoint: () => {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: {\n              ...receivingChannel$1({\n                isExtraPart: never,\n                ...detail.fireDismissalEventInstead.map(fe => ({ fireEventInstead: { event: fe.event } })).getOr({})\n              }),\n              ...receivingChannel({\n                doReposition: () => {\n                  Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(toolbar => {\n                    position(button, toolbar, detail, spec.layouts);\n                  });\n                }\n              })\n            }\n          })\n        ])\n      };\n    };\n    const factory$c = (detail, components, spec, externals) => ({\n      ...Button.sketch({\n        ...externals.button(),\n        action: button => {\n          toggle(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: button => {\n                return makeSandbox(button, spec, detail);\n              }\n            }\n          })])\n      }),\n      apis: {\n        setGroups: (button, groups) => {\n          Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(toolbar => {\n            setGroups(button, toolbar, detail, spec.layouts, groups);\n          });\n        },\n        reposition: button => {\n          Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(toolbar => {\n            position(button, toolbar, detail, spec.layouts);\n          });\n        },\n        toggle: button => {\n          toggle(button, externals);\n        },\n        toggleWithoutFocusing: button => {\n          toggleWithoutFocusing(button, externals);\n        },\n        getToolbar: button => {\n          return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n        },\n        isOpen: button => {\n          return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n        }\n      }\n    });\n    const FloatingToolbarButton = composite({\n      name: 'FloatingToolbarButton',\n      factory: factory$c,\n      configFields: schema$a(),\n      partFields: parts$6(),\n      apis: {\n        setGroups: (apis, button, groups) => {\n          apis.setGroups(button, groups);\n        },\n        reposition: (apis, button) => {\n          apis.reposition(button);\n        },\n        toggle: (apis, button) => {\n          apis.toggle(button);\n        },\n        toggleWithoutFocusing: (apis, button) => {\n          apis.toggleWithoutFocusing(button);\n        },\n        getToolbar: (apis, button) => apis.getToolbar(button),\n        isOpen: (apis, button) => apis.isOpen(button)\n      }\n    });\n\n    const schema$9 = constant$1([\n      required$1('items'),\n      markers$1(['itemSelector']),\n      field('tgroupBehaviours', [Keying])\n    ]);\n    const parts$5 = constant$1([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    const factory$b = (detail, components, _spec, _externals) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components,\n      behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n          mode: 'flow',\n          selector: detail.markers.itemSelector\n        })]),\n      domModification: { attributes: { role: 'toolbar' } }\n    });\n    const ToolbarGroup = composite({\n      name: 'ToolbarGroup',\n      configFields: schema$9(),\n      partFields: parts$5(),\n      factory: factory$b\n    });\n\n    const buildGroups = comps => map$2(comps, g => premade(g));\n    const refresh$1 = (toolbar, memFloatingToolbarButton, detail) => {\n      refresh$2(toolbar, detail, overflowGroups => {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(floatingToolbarButton => {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    const factory$a = (detail, components, spec, externals) => {\n      const memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: () => Future.nu(resolve => {\n          resolve(buildGroups(detail.overflowGroups.get()));\n        }),\n        layouts: {\n          onLtr: () => [\n            southwest$2,\n            southeast$2\n          ],\n          onRtl: () => [\n            southeast$2,\n            southwest$2\n          ],\n          onBottomLtr: () => [\n            northwest$2,\n            northeast$2\n          ],\n          onBottomRtl: () => [\n            northeast$2,\n            northwest$2\n          ]\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        },\n        onToggled: (comp, state) => detail[state ? 'onOpened' : 'onClosed'](comp)\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: () => {\n                return ToolbarGroup.sketch({\n                  ...externals['overflow-group'](),\n                  items: [memFloatingToolbarButton.asSpec()]\n                });\n              }\n            }\n          })]),\n        apis: {\n          setGroups: (toolbar, groups) => {\n            detail.builtGroups.set(map$2(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: toolbar => refresh$1(toolbar, memFloatingToolbarButton, detail),\n          toggle: toolbar => {\n            memFloatingToolbarButton.getOpt(toolbar).each(floatingToolbarButton => {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          toggleWithoutFocusing: toolbar => {\n            memFloatingToolbarButton.getOpt(toolbar).each(FloatingToolbarButton.toggleWithoutFocusing);\n          },\n          isOpen: toolbar => memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false),\n          reposition: toolbar => {\n            memFloatingToolbarButton.getOpt(toolbar).each(floatingToolbarButton => {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: toolbar => memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar)\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    const SplitFloatingToolbar = composite({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$b(),\n      partFields: parts$7(),\n      factory: factory$a,\n      apis: {\n        setGroups: (apis, toolbar, groups) => {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: (apis, toolbar) => {\n          apis.refresh(toolbar);\n        },\n        reposition: (apis, toolbar) => {\n          apis.reposition(toolbar);\n        },\n        toggle: (apis, toolbar) => {\n          apis.toggle(toolbar);\n        },\n        toggleWithoutFocusing: (apis, toolbar) => {\n          apis.toggle(toolbar);\n        },\n        isOpen: (apis, toolbar) => apis.isOpen(toolbar),\n        getOverflow: (apis, toolbar) => apis.getOverflow(toolbar)\n      }\n    });\n\n    const schema$8 = constant$1([\n      markers$1([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$c()));\n    const parts$4 = constant$1([\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$e(),\n        name: 'overflow',\n        overrides: detail => {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: comp => {\n                  getPart(comp, detail, 'overflow-button').each(button => {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: comp => {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: comp => {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: comp => {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external({\n        name: 'overflow-button',\n        overrides: detail => ({\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleClass: detail.markers.overflowToggledClass,\n              aria: { mode: 'pressed' },\n              toggleOnExecute: false\n            })])\n        })\n      }),\n      external({ name: 'overflow-group' })\n    ]);\n\n    const isOpen = (toolbar, detail) => getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    const toggleToolbar = (toolbar, detail) => {\n      getPart(toolbar, detail, 'overflow-button').bind(() => getPart(toolbar, detail, 'overflow')).each(overf => {\n        refresh(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    const refresh = (toolbar, detail) => {\n      getPart(toolbar, detail, 'overflow').each(overflow => {\n        refresh$2(toolbar, detail, groups => {\n          const builtGroups = map$2(groups, g => premade(g));\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(button => {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    const factory$9 = (detail, components, spec, externals) => {\n      const toolbarToggleEvent = 'alloy.toolbar.toggle';\n      const doSetGroups = (toolbar, groups) => {\n        const built = map$2(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: toolbar => {\n                return ToolbarGroup.sketch({\n                  ...externals['overflow-group'](),\n                  items: [Button.sketch({\n                      ...externals['overflow-button'](),\n                      action: _button => {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    })]\n                });\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run$1(toolbarToggleEvent, toolbar => {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: (toolbar, groups) => {\n            doSetGroups(toolbar, groups);\n            refresh(toolbar, detail);\n          },\n          refresh: toolbar => refresh(toolbar, detail),\n          toggle: toolbar => toggleToolbar(toolbar, detail),\n          isOpen: toolbar => isOpen(toolbar, detail)\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    const SplitSlidingToolbar = composite({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$8(),\n      partFields: parts$4(),\n      factory: factory$9,\n      apis: {\n        setGroups: (apis, toolbar, groups) => {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: (apis, toolbar) => {\n          apis.refresh(toolbar);\n        },\n        toggle: (apis, toolbar) => {\n          apis.toggle(toolbar);\n        },\n        isOpen: (apis, toolbar) => apis.isOpen(toolbar)\n      }\n    });\n\n    const renderToolbarGroupCommon = toolbarGroup => {\n      const attributes = toolbarGroup.title.fold(() => ({}), title => ({ attributes: { title } }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__group'],\n          ...attributes\n        },\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled]), ' + '.tox-number-input:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    const renderToolbarGroup = toolbarGroup => ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    const getToolbarBehaviours = (toolbarSpec, modeName) => {\n      const onAttached = runOnAttached(component => {\n        const groups = map$2(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    const renderMoreToolbarCommon = toolbarSpec => {\n      const modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            enabled: true,\n            tooltip: Optional.some('Reveal or hide additional toolbar items'),\n            primary: false,\n            buttonType: Optional.none(),\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarBehaviours(toolbarSpec, modeName)\n      };\n    };\n    const renderFloatingMoreToolbar = toolbarSpec => {\n      const baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      const overflowXOffset = 4;\n      const primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch({\n        ...baseSpec,\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: () => {\n          const headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          const headerBounds = absolute$2(headerElem);\n          const docElem = documentElement(headerElem);\n          const docBounds = absolute$2(docElem);\n          const height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: {\n          ...baseSpec.parts,\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        },\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' },\n        onOpened: comp => toolbarSpec.onToggled(comp, true),\n        onClosed: comp => toolbarSpec.onToggled(comp, false)\n      });\n    };\n    const renderSlidingMoreToolbar = toolbarSpec => {\n      const primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      const overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      const baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch({\n        ...baseSpec,\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: comp => {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n          toolbarSpec.onToggled(comp, true);\n        },\n        onClosed: comp => {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n          toolbarSpec.onToggled(comp, false);\n        }\n      });\n    };\n    const renderToolbar = toolbarSpec => {\n      const modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode$1.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarBehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    const baseButtonFields = [\n      optionalText,\n      optionalIcon,\n      optionString('tooltip'),\n      defaultedStringEnum('buttonType', 'secondary', [\n        'primary',\n        'secondary'\n      ]),\n      defaultedBoolean('borderless', false),\n      requiredFunction('onAction')\n    ];\n    const normalButtonFields = [\n      ...baseButtonFields,\n      text,\n      requiredStringEnum('type', ['button'])\n    ];\n    const toggleButtonFields = [\n      ...baseButtonFields,\n      defaultedBoolean('active', false),\n      requiredStringEnum('type', ['togglebutton'])\n    ];\n    const schemaWithoutGroupButton = {\n      button: normalButtonFields,\n      togglebutton: toggleButtonFields\n    };\n    const groupFields = [\n      requiredStringEnum('type', ['group']),\n      defaultedArrayOf('buttons', [], choose$1('type', schemaWithoutGroupButton))\n    ];\n    const viewButtonSchema = choose$1('type', {\n      ...schemaWithoutGroupButton,\n      group: groupFields\n    });\n\n    const viewSchema = objOf([\n      defaultedArrayOf('buttons', [], viewButtonSchema),\n      requiredFunction('onShow'),\n      requiredFunction('onHide')\n    ]);\n    const createView = spec => asRaw('view', viewSchema, spec);\n\n    const renderButton = (spec, providers) => {\n      var _a, _b;\n      const isToggleButton = spec.type === 'togglebutton';\n      const optMemIcon = spec.icon.map(memIcon => renderReplaceableIconFromPack(memIcon, providers.icons)).map(record);\n      const getAction = () => comp => {\n        const setIcon = newIcon => {\n          optMemIcon.map(memIcon => memIcon.getOpt(comp).each(displayIcon => {\n            Replacing.set(displayIcon, [renderReplaceableIconFromPack(newIcon, providers.icons)]);\n          }));\n        };\n        const setActive = state => {\n          const elm = comp.element;\n          if (state) {\n            add$2(elm, 'tox-button--enabled');\n            set$9(elm, 'aria-pressed', true);\n          } else {\n            remove$2(elm, 'tox-button--enabled');\n            remove$7(elm, 'aria-pressed');\n          }\n        };\n        const isActive = () => has(comp.element, 'tox-button--enabled');\n        if (isToggleButton) {\n          return spec.onAction({\n            setIcon,\n            setActive,\n            isActive\n          });\n        }\n        if (spec.type === 'button') {\n          return spec.onAction({ setIcon });\n        }\n      };\n      const action = getAction();\n      const buttonSpec = {\n        ...spec,\n        name: isToggleButton ? spec.text.getOr(spec.icon.getOr('')) : (_a = spec.text) !== null && _a !== void 0 ? _a : spec.icon.getOr(''),\n        primary: spec.buttonType === 'primary',\n        buttonType: Optional.from(spec.buttonType),\n        tooltip: spec.tooltip,\n        icon: spec.icon,\n        enabled: true,\n        borderless: spec.borderless\n      };\n      const buttonTypeClasses = calculateClassesFromButtonType((_b = spec.buttonType) !== null && _b !== void 0 ? _b : 'secondary');\n      const optTranslatedText = isToggleButton ? spec.text.map(providers.translate) : Optional.some(providers.translate(spec.text));\n      const optTranslatedTextComponed = optTranslatedText.map(text$2);\n      const tooltipAttributes = buttonSpec.tooltip.or(optTranslatedText).map(tooltip => ({\n        'aria-label': providers.translate(tooltip),\n        'title': providers.translate(tooltip)\n      })).getOr({});\n      const optIconSpec = optMemIcon.map(memIcon => memIcon.asSpec());\n      const components = componentRenderPipeline([\n        optIconSpec,\n        optTranslatedTextComponed\n      ]);\n      const hasIconAndText = spec.icon.isSome() && optTranslatedTextComponed.isSome();\n      const dom = {\n        tag: 'button',\n        classes: buttonTypeClasses.concat(...spec.icon.isSome() && !hasIconAndText ? ['tox-button--icon'] : []).concat(...hasIconAndText ? ['tox-button--icon-and-text'] : []).concat(...spec.borderless ? ['tox-button--naked'] : []).concat(...spec.type === 'togglebutton' && spec.active ? ['tox-button--enabled'] : []),\n        attributes: tooltipAttributes\n      };\n      const extraBehaviours = [];\n      const iconButtonSpec = renderCommonSpec(buttonSpec, Optional.some(action), extraBehaviours, dom, components, providers);\n      return Button.sketch(iconButtonSpec);\n    };\n\n    const renderViewButton = (spec, providers) => renderButton(spec, providers);\n    const renderButtonsGroup = (spec, providers) => {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-view__toolbar__group']\n        },\n        components: map$2(spec.buttons, button => renderViewButton(button, providers))\n      };\n    };\n    const deviceDetection = detect$2().deviceType;\n    const isPhone = deviceDetection.isPhone();\n    const isTablet = deviceDetection.isTablet();\n    const renderViewHeader = spec => {\n      let hasGroups = false;\n      const endButtons = map$2(spec.buttons, btnspec => {\n        if (btnspec.type === 'group') {\n          hasGroups = true;\n          return renderButtonsGroup(btnspec, spec.providers);\n        } else {\n          return renderViewButton(btnspec, spec.providers);\n        }\n      });\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: [\n            !hasGroups ? 'tox-view__header' : 'tox-view__toolbar',\n            ...isPhone || isTablet ? [\n              'tox-view--mobile',\n              'tox-view--scrolling'\n            ] : []\n          ]\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          Keying.config({\n            mode: 'flow',\n            selector: 'button, .tox-button',\n            focusInside: FocusInsideModes.OnEnterOrSpaceMode\n          })\n        ]),\n        components: hasGroups ? endButtons : [\n          Container.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-view__header-start']\n            },\n            components: []\n          }),\n          Container.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-view__header-end']\n            },\n            components: endButtons\n          })\n        ]\n      };\n    };\n    const renderViewPane = spec => {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-view__pane']\n        }\n      };\n    };\n    const factory$8 = (detail, components, _spec, _externals) => {\n      const apis = {\n        getPane: comp => parts$a.getPart(comp, detail, 'pane'),\n        getOnShow: _comp => detail.viewConfig.onShow,\n        getOnHide: _comp => detail.viewConfig.onHide\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis\n      };\n    };\n    var View = composite({\n      name: 'silver.View',\n      configFields: [required$1('viewConfig')],\n      partFields: [\n        optional({\n          factory: { sketch: renderViewHeader },\n          schema: [\n            required$1('buttons'),\n            required$1('providers')\n          ],\n          name: 'header'\n        }),\n        optional({\n          factory: { sketch: renderViewPane },\n          schema: [],\n          name: 'pane'\n        })\n      ],\n      factory: factory$8,\n      apis: {\n        getPane: (apis, comp) => apis.getPane(comp),\n        getOnShow: (apis, comp) => apis.getOnShow(comp),\n        getOnHide: (apis, comp) => apis.getOnHide(comp)\n      }\n    });\n\n    const makeViews = (parts, viewConfigs, providers) => {\n      return mapToArray(viewConfigs, (config, name) => {\n        const internalViewConfig = getOrDie(createView(config));\n        return parts.slot(name, View.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-view']\n          },\n          viewConfig: internalViewConfig,\n          components: [\n            ...internalViewConfig.buttons.length > 0 ? [View.parts.header({\n                buttons: internalViewConfig.buttons,\n                providers\n              })] : [],\n            View.parts.pane({})\n          ]\n        }));\n      });\n    };\n    const makeSlotContainer = (viewConfigs, providers) => SlotContainer.sketch(parts => ({\n      dom: {\n        tag: 'div',\n        classes: ['tox-view-wrap__slot-container']\n      },\n      components: makeViews(parts, viewConfigs, providers),\n      slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(slotContainer => SlotContainer.hideAllSlots(slotContainer))])\n    }));\n    const getCurrentName = slotContainer => {\n      return find$5(SlotContainer.getSlotNames(slotContainer), name => SlotContainer.isShowing(slotContainer, name));\n    };\n    const hideContainer = comp => {\n      const element = comp.element;\n      set$8(element, 'display', 'none');\n      set$9(element, 'aria-hidden', 'true');\n    };\n    const showContainer = comp => {\n      const element = comp.element;\n      remove$6(element, 'display');\n      remove$7(element, 'aria-hidden');\n    };\n    const makeViewInstanceApi = slot => ({ getContainer: constant$1(slot) });\n    const runOnPaneWithInstanceApi = (slotContainer, name, get) => {\n      SlotContainer.getSlot(slotContainer, name).each(view => {\n        View.getPane(view).each(pane => {\n          const onCallback = get(view);\n          onCallback(makeViewInstanceApi(pane.element.dom));\n        });\n      });\n    };\n    const runOnShow = (slotContainer, name) => runOnPaneWithInstanceApi(slotContainer, name, View.getOnShow);\n    const runOnHide = (slotContainer, name) => runOnPaneWithInstanceApi(slotContainer, name, View.getOnHide);\n    const factory$7 = (detail, spec) => {\n      const setViews = (comp, viewConfigs) => {\n        Replacing.set(comp, [makeSlotContainer(viewConfigs, spec.backstage.shared.providers)]);\n      };\n      const whichView = comp => {\n        return Composing.getCurrent(comp).bind(getCurrentName);\n      };\n      const toggleView = (comp, showMainView, hideMainView, name) => {\n        return Composing.getCurrent(comp).exists(slotContainer => {\n          const optCurrentSlotName = getCurrentName(slotContainer);\n          const isTogglingCurrentView = optCurrentSlotName.exists(current => name === current);\n          const exists = SlotContainer.getSlot(slotContainer, name).isSome();\n          if (exists) {\n            SlotContainer.hideAllSlots(slotContainer);\n            if (!isTogglingCurrentView) {\n              hideMainView();\n              showContainer(comp);\n              SlotContainer.showSlot(slotContainer, name);\n              runOnShow(slotContainer, name);\n            } else {\n              hideContainer(comp);\n              showMainView();\n            }\n            optCurrentSlotName.each(prevName => runOnHide(slotContainer, prevName));\n          }\n          return exists;\n        });\n      };\n      const apis = {\n        setViews,\n        whichView,\n        toggleView\n      };\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-view-wrap'],\n          attributes: { 'aria-hidden': 'true' },\n          styles: { display: 'none' }\n        },\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          Composing.config({\n            find: comp => {\n              const children = Replacing.contents(comp);\n              return head(children);\n            }\n          })\n        ]),\n        apis\n      };\n    };\n    var ViewWrapper = single({\n      factory: factory$7,\n      name: 'silver.ViewWrapper',\n      configFields: [required$1('backstage')],\n      apis: {\n        setViews: (apis, comp, views) => apis.setViews(comp, views),\n        toggleView: (apis, comp, outerContainer, editorCont, name) => apis.toggleView(comp, outerContainer, editorCont, name),\n        whichView: (apis, comp) => apis.whichView(comp)\n      }\n    });\n\n    const factory$6 = (detail, components, _spec) => {\n      let toolbarDrawerOpenState = false;\n      const apis = {\n        getSocket: comp => {\n          return parts$a.getPart(comp, detail, 'socket');\n        },\n        setSidebar: (comp, panelConfigs, showSidebar) => {\n          parts$a.getPart(comp, detail, 'sidebar').each(sidebar => setSidebar(sidebar, panelConfigs, showSidebar));\n        },\n        toggleSidebar: (comp, name) => {\n          parts$a.getPart(comp, detail, 'sidebar').each(sidebar => toggleSidebar(sidebar, name));\n        },\n        whichSidebar: comp => {\n          return parts$a.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: comp => {\n          return parts$a.getPart(comp, detail, 'header');\n        },\n        getToolbar: comp => {\n          return parts$a.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: (comp, groups) => {\n          parts$a.getPart(comp, detail, 'toolbar').each(toolbar => {\n            const renderedGroups = map$2(groups, renderToolbarGroup);\n            toolbar.getApis().setGroups(toolbar, renderedGroups);\n          });\n        },\n        setToolbars: (comp, toolbars) => {\n          parts$a.getPart(comp, detail, 'multiple-toolbar').each(mToolbar => {\n            const renderedToolbars = map$2(toolbars, g => map$2(g, renderToolbarGroup));\n            CustomList.setItems(mToolbar, renderedToolbars);\n          });\n        },\n        refreshToolbar: comp => {\n          const toolbar = parts$a.getPart(comp, detail, 'toolbar');\n          toolbar.each(toolbar => toolbar.getApis().refresh(toolbar));\n        },\n        toggleToolbarDrawer: comp => {\n          parts$a.getPart(comp, detail, 'toolbar').each(toolbar => {\n            mapFrom(toolbar.getApis().toggle, toggle => toggle(toolbar));\n          });\n        },\n        toggleToolbarDrawerWithoutFocusing: comp => {\n          parts$a.getPart(comp, detail, 'toolbar').each(toolbar => {\n            mapFrom(toolbar.getApis().toggleWithoutFocusing, toggleWithoutFocusing => toggleWithoutFocusing(toolbar));\n          });\n        },\n        isToolbarDrawerToggled: comp => {\n          return parts$a.getPart(comp, detail, 'toolbar').bind(toolbar => Optional.from(toolbar.getApis().isOpen).map(isOpen => isOpen(toolbar))).getOr(false);\n        },\n        getThrobber: comp => {\n          return parts$a.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: comp => {\n          const optToolbar = parts$a.getPart(comp, detail, 'toolbar').orThunk(() => parts$a.getPart(comp, detail, 'multiple-toolbar'));\n          optToolbar.each(toolbar => {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: (comp, menus) => {\n          parts$a.getPart(comp, detail, 'menubar').each(menubar => {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: comp => {\n          parts$a.getPart(comp, detail, 'menubar').each(menubar => {\n            SilverMenubar.focus(menubar);\n          });\n        },\n        setViews: (comp, viewConfigs) => {\n          parts$a.getPart(comp, detail, 'viewWrapper').each(wrapper => {\n            ViewWrapper.setViews(wrapper, viewConfigs);\n          });\n        },\n        toggleView: (comp, name) => {\n          return parts$a.getPart(comp, detail, 'viewWrapper').exists(wrapper => ViewWrapper.toggleView(wrapper, () => apis.showMainView(comp), () => apis.hideMainView(comp), name));\n        },\n        whichView: comp => {\n          return parts$a.getPart(comp, detail, 'viewWrapper').bind(ViewWrapper.whichView).getOrNull();\n        },\n        hideMainView: comp => {\n          toolbarDrawerOpenState = apis.isToolbarDrawerToggled(comp);\n          if (toolbarDrawerOpenState) {\n            apis.toggleToolbarDrawer(comp);\n          }\n          parts$a.getPart(comp, detail, 'editorContainer').each(editorContainer => {\n            const element = editorContainer.element;\n            set$8(element, 'display', 'none');\n            set$9(element, 'aria-hidden', 'true');\n          });\n        },\n        showMainView: comp => {\n          if (toolbarDrawerOpenState) {\n            apis.toggleToolbarDrawer(comp);\n          }\n          parts$a.getPart(comp, detail, 'editorContainer').each(editorContainer => {\n            const element = editorContainer.element;\n            remove$6(element, 'display');\n            remove$7(element, 'aria-hidden');\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis,\n        behaviours: detail.behaviours\n      };\n    };\n    const partMenubar = partType.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [required$1('backstage')]\n    });\n    const toolbarFactory = spec => {\n      if (spec.type === ToolbarMode$1.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode$1.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    const partMultipleToolbar = partType.optional({\n      factory: {\n        sketch: spec => CustomList.sketch({\n          uid: spec.uid,\n          dom: spec.dom,\n          listBehaviours: derive$1([Keying.config({\n              mode: 'acyclic',\n              selector: '.tox-toolbar'\n            })]),\n          makeItem: () => renderToolbar({\n            type: spec.type,\n            uid: generate$6('multiple-toolbar-item'),\n            cyclicKeying: false,\n            initGroups: [],\n            providers: spec.providers,\n            onEscape: () => {\n              spec.onEscape();\n              return Optional.some(true);\n            }\n          }),\n          setupItem: (_mToolbar, tc, data, _index) => {\n            Toolbar.setGroups(tc, data);\n          },\n          shell: true\n        })\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape')\n      ]\n    });\n    const partToolbar = partType.optional({\n      factory: {\n        sketch: spec => {\n          const renderer = toolbarFactory(spec);\n          const toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: () => {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            onToggled: (_comp, state) => spec.onToolbarToggled(state),\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        required$1('dom'),\n        required$1('onEscape'),\n        required$1('getSink')\n      ]\n    });\n    const partHeader = partType.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [required$1('dom')]\n    });\n    const partPromotion = partType.optional({\n      factory: { sketch: renderPromotion },\n      name: 'promotion',\n      schema: [required$1('dom')]\n    });\n    const partSocket = partType.optional({\n      name: 'socket',\n      schema: [required$1('dom')]\n    });\n    const partSidebar = partType.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [required$1('dom')]\n    });\n    const partThrobber = partType.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [required$1('dom')]\n    });\n    const partViewWrapper = partType.optional({\n      factory: ViewWrapper,\n      name: 'viewWrapper',\n      schema: [required$1('backstage')]\n    });\n    const renderEditorContainer = spec => ({\n      uid: spec.uid,\n      dom: {\n        tag: 'div',\n        classes: ['tox-editor-container']\n      },\n      components: spec.components\n    });\n    const partEditorContainer = partType.optional({\n      factory: { sketch: renderEditorContainer },\n      name: 'editorContainer',\n      schema: []\n    });\n    var OuterContainer = composite({\n      name: 'OuterContainer',\n      factory: factory$6,\n      configFields: [\n        required$1('dom'),\n        required$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partPromotion,\n        partThrobber,\n        partViewWrapper,\n        partEditorContainer\n      ],\n      apis: {\n        getSocket: (apis, comp) => {\n          return apis.getSocket(comp);\n        },\n        setSidebar: (apis, comp, panelConfigs, showSidebar) => {\n          apis.setSidebar(comp, panelConfigs, showSidebar);\n        },\n        toggleSidebar: (apis, comp, name) => {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: (apis, comp) => {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: (apis, comp) => {\n          return apis.getHeader(comp);\n        },\n        getToolbar: (apis, comp) => {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: (apis, comp, groups) => {\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: (apis, comp, toolbars) => {\n          apis.setToolbars(comp, toolbars);\n        },\n        refreshToolbar: (apis, comp) => {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: (apis, comp) => {\n          apis.toggleToolbarDrawer(comp);\n        },\n        toggleToolbarDrawerWithoutFocusing: (apis, comp) => {\n          apis.toggleToolbarDrawerWithoutFocusing(comp);\n        },\n        isToolbarDrawerToggled: (apis, comp) => {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: (apis, comp) => {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: (apis, comp, menus) => {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: (apis, comp) => {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: (apis, comp) => {\n          apis.focusToolbar(comp);\n        },\n        setViews: (apis, comp, views) => {\n          apis.setViews(comp, views);\n        },\n        toggleView: (apis, comp, name) => {\n          return apis.toggleView(comp, name);\n        },\n        whichView: (apis, comp) => {\n          return apis.whichView(comp);\n        }\n      }\n    });\n\n    const defaultMenubar = 'file edit view insert format tools table help';\n    const defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    const make = (menu, registry, editor) => {\n      const removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: () => bind$3(menu.items, i => {\n          const itemName = i.toLowerCase();\n          if (itemName.trim().length === 0) {\n            return [];\n          } else if (exists(removedMenuItems, removedMenuItem => removedMenuItem === itemName)) {\n            return [];\n          } else if (itemName === 'separator' || itemName === '|') {\n            return [{ type: 'separator' }];\n          } else if (registry.menuItems[itemName]) {\n            return [registry.menuItems[itemName]];\n          } else {\n            return [];\n          }\n        })\n      };\n    };\n    const parseItemsString = items => {\n      return items.split(' ');\n    };\n    const identifyMenus = (editor, registry) => {\n      const rawMenuData = {\n        ...defaultMenus,\n        ...registry.menus\n      };\n      const userDefinedMenus = keys(registry.menus).length > 0;\n      const menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      const validMenus = filter$2(menubar, menuName => {\n        const isDefaultMenu = has$2(defaultMenus, menuName);\n        if (userDefinedMenus) {\n          return isDefaultMenu || get$g(registry.menus, menuName).exists(menu => has$2(menu, 'items'));\n        } else {\n          return isDefaultMenu;\n        }\n      });\n      const menus = map$2(validMenus, menuName => {\n        const menuData = rawMenuData[menuName];\n        return make({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter$2(menus, menu => {\n        const isNotSeparator = item => isString(item) || item.type !== 'separator';\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    const fireSkinLoaded = editor => {\n      const done = () => {\n        editor._skinLoaded = true;\n        fireSkinLoaded$1(editor);\n      };\n      return () => {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    const fireSkinLoadError = (editor, err) => () => fireSkinLoadError$1(editor, { message: err });\n\n    const loadStylesheet = (editor, stylesheetUrl, styleSheetLoader) => {\n      editor.on('remove', () => styleSheetLoader.unload(stylesheetUrl));\n      return styleSheetLoader.load(stylesheetUrl);\n    };\n    const loadRawCss = (editor, key, css, styleSheetLoader) => {\n      editor.on('remove', () => styleSheetLoader.unloadRawCss(key));\n      return styleSheetLoader.loadRawCss(key, css);\n    };\n    const loadUiSkins = async (editor, skinUrl) => {\n      const skinResourceIdentifier = getSkinUrlOption(editor).getOr('default');\n      const skinUiCss = 'ui/' + skinResourceIdentifier + '/skin.css';\n      const css = tinymce.Resource.get(skinUiCss);\n      if (isString(css)) {\n        return Promise.resolve(loadRawCss(editor, skinUiCss, css, editor.ui.styleSheetLoader));\n      } else {\n        const skinUiCss = skinUrl + '/skin.min.css';\n        return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n      }\n    };\n    const loadShadowDomUiSkins = async (editor, skinUrl) => {\n      const isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        const skinResourceIdentifier = getSkinUrlOption(editor).getOr('default');\n        const shadowDomSkinCss = 'ui/' + skinResourceIdentifier + '/skin.shadowdom.css';\n        const css = tinymce.Resource.get(shadowDomSkinCss);\n        if (isString(css)) {\n          loadRawCss(editor, shadowDomSkinCss, css, global$7.DOM.styleSheetLoader);\n          return Promise.resolve();\n        } else {\n          const shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n          return loadStylesheet(editor, shadowDomSkinCss, global$7.DOM.styleSheetLoader);\n        }\n      }\n    };\n    const loadUrlSkin = async (isInline, editor) => {\n      getSkinUrlOption(editor).fold(() => {\n        const skinResourceIdentifier = getSkinUrl(editor);\n        if (skinResourceIdentifier) {\n          editor.contentCSS.push(skinResourceIdentifier + (isInline ? '/content.inline' : '/content') + '.min.css');\n        }\n      }, skinUrl => {\n        const skinContentCss = 'ui/' + skinUrl + (isInline ? '/content.inline' : '/content') + '.css';\n        const css = tinymce.Resource.get(skinContentCss);\n        if (isString(css)) {\n          loadRawCss(editor, skinContentCss, css, editor.ui.styleSheetLoader);\n        } else {\n          const skinResourceIdentifier = getSkinUrl(editor);\n          if (skinResourceIdentifier) {\n            editor.contentCSS.push(skinResourceIdentifier + (isInline ? '/content.inline' : '/content') + '.min.css');\n          }\n        }\n      });\n      const skinUrl = getSkinUrl(editor);\n      if (!isSkinDisabled(editor) && isString(skinUrl)) {\n        return Promise.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then();\n      }\n    };\n    const loadSkin = (isInline, editor) => {\n      return loadUrlSkin(isInline, editor).then(fireSkinLoaded(editor), fireSkinLoadError(editor, 'Skin could not be loaded'));\n    };\n    const iframe = curry(loadSkin, false);\n    const inline = curry(loadSkin, true);\n\n    const makeTooltipText = (editor, labelWithPlaceholder, value) => editor.translate([\n      labelWithPlaceholder,\n      editor.translate(value)\n    ]);\n\n    const generateSelectItems = (backstage, spec) => {\n      const generateItem = (rawItem, response, invalid, value) => {\n        const translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          const items = bind$3(rawItem.getStyleItems(), si => validate(si, response, value));\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              enabled: items.length > 0,\n              getSubmenuItems: () => bind$3(rawItem.getStyleItems(), si => validate(si, response, value))\n            });\n          }\n        } else {\n          return Optional.some({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            enabled: !invalid,\n            onAction: spec.onAction(rawItem),\n            ...rawItem.getStylePreview().fold(() => ({}), preview => ({ meta: { style: preview } }))\n          });\n        }\n      };\n      const validate = (item, response, value) => {\n        const invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      const validateItems = preItems => {\n        const value = spec.getCurrentValue();\n        const response = spec.shouldHide ? 0 : 1;\n        return bind$3(preItems, item => validate(item, response, value));\n      };\n      const getFetch = (backstage, getStyleItems) => (comp, callback) => {\n        const preItems = getStyleItems();\n        const items = validateItems(preItems);\n        const menu = build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n          isHorizontalMenu: false,\n          search: Optional.none()\n        });\n        callback(menu);\n      };\n      return {\n        validateItems,\n        getFetch\n      };\n    };\n    const createMenuItems = (editor, backstage, spec) => {\n      const dataset = spec.dataset;\n      const getStyleItems = dataset.type === 'basic' ? () => map$2(dataset.data, d => processBasic(d, spec.isSelectedFor, spec.getPreviewFor)) : dataset.getData;\n      return {\n        items: generateSelectItems(backstage, spec),\n        getStyleItems\n      };\n    };\n    const createSelectButton = (editor, backstage, spec, tooltipWithPlaceholder, textUpdateEventName) => {\n      const {items, getStyleItems} = createMenuItems(editor, backstage, spec);\n      const getApi = comp => ({\n        getComponent: constant$1(comp),\n        setTooltip: tooltip => {\n          const translatedTooltip = backstage.shared.providers.translate(tooltip);\n          setAll$1(comp.element, {\n            'aria-label': translatedTooltip,\n            'title': translatedTooltip\n          });\n        }\n      });\n      const onSetup = api => {\n        const handler = e => api.setTooltip(makeTooltipText(editor, tooltipWithPlaceholder, e.value));\n        editor.on(textUpdateEventName, handler);\n        return composeUnbinders(onSetupEvent(editor, 'NodeChange', api => {\n          const comp = api.getComponent();\n          spec.updateText(comp);\n          Disabling.set(api.getComponent(), !editor.selection.isEditable());\n        })(api), () => editor.off(textUpdateEventName, handler));\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : spec.text,\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup,\n        getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    const process = rawFormats => map$2(rawFormats, item => {\n      let title = item, format = item;\n      const values = item.split('=');\n      if (values.length > 1) {\n        title = values[0];\n        format = values[1];\n      }\n      return {\n        title,\n        format\n      };\n    });\n    const buildBasicStaticDataset = data => ({\n      type: 'basic',\n      data\n    });\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    const split = (rawFormats, delimiter) => {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    const buildBasicSettingsDataset = (editor, settingName, delimiter) => {\n      const rawFormats = editor.options.get(settingName);\n      const data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data\n      };\n    };\n\n    const menuTitle$4 = 'Align';\n    const btnTooltip$4 = 'Alignment {0}';\n    const fallbackAlignment = 'left';\n    const alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    const getSpec$4 = editor => {\n      const getMatchingValue = () => find$5(alignMenuItems, item => editor.formatter.match(item.format));\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = _format => Optional.none;\n      const updateSelectMenuIcon = comp => {\n        const match = getMatchingValue();\n        const alignment = match.fold(constant$1(fallbackAlignment), item => item.title.toLowerCase());\n        emitWith(comp, updateMenuIcon, { icon: `align-${ alignment }` });\n        fireAlignTextUpdate(editor, { value: alignment });\n      };\n      const dataset = buildBasicStaticDataset(alignMenuItems);\n      const onAction = rawItem => () => find$5(alignMenuItems, item => item.format === rawItem.format).each(item => editor.execCommand(item.command));\n      return {\n        tooltip: makeTooltipText(editor, btnTooltip$4, fallbackAlignment),\n        text: Optional.none(),\n        icon: Optional.some('align-left'),\n        isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor,\n        onAction,\n        updateText: updateSelectMenuIcon,\n        dataset,\n        shouldHide: false,\n        isInvalid: item => !editor.formatter.canApply(item.format)\n      };\n    };\n    const createAlignButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$4(editor), btnTooltip$4, 'AlignTextUpdate');\n    const createAlignMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(editor, backstage, getSpec$4(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate(menuTitle$4),\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const findNearest = (editor, getStyles) => {\n      const styles = getStyles();\n      const formats = map$2(styles, style => style.format);\n      return Optional.from(editor.formatter.closest(formats)).bind(fmt => find$5(styles, data => data.format === fmt)).orThunk(() => someIf(editor.formatter.match('p'), {\n        title: 'Paragraph',\n        format: 'p'\n      }));\n    };\n\n    const menuTitle$3 = 'Blocks';\n    const btnTooltip$3 = 'Block {0}';\n    const fallbackFormat = 'Paragraph';\n    const getSpec$3 = editor => {\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = format => () => {\n        const fmt = editor.formatter.get(format);\n        if (fmt) {\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        } else {\n          return Optional.none();\n        }\n      };\n      const updateSelectMenuText = comp => {\n        const detectedFormat = findNearest(editor, () => dataset.data);\n        const text = detectedFormat.fold(constant$1(fallbackFormat), fmt => fmt.title);\n        emitWith(comp, updateMenuText, { text });\n        fireBlocksTextUpdate(editor, { value: text });\n      };\n      const dataset = buildBasicSettingsDataset(editor, 'block_formats', Delimiter.SemiColon);\n      return {\n        tooltip: makeTooltipText(editor, btnTooltip$3, fallbackFormat),\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        dataset,\n        shouldHide: false,\n        isInvalid: item => !editor.formatter.canApply(item.format)\n      };\n    };\n    const createBlocksButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$3(editor), btnTooltip$3, 'BlocksTextUpdate');\n    const createBlocksMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blocks', {\n        text: menuTitle$3,\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const menuTitle$2 = 'Fonts';\n    const btnTooltip$2 = 'Font {0}';\n    const systemFont = 'System Font';\n    const systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    const splitFonts = fontFamily => {\n      const fonts = fontFamily.split(/\\s*,\\s*/);\n      return map$2(fonts, font => font.replace(/^['\"]+|['\"]+$/g, ''));\n    };\n    const matchesStack = (fonts, stack) => stack.length > 0 && forall(stack, font => fonts.indexOf(font.toLowerCase()) > -1);\n    const isSystemFontStack = (fontFamily, userStack) => {\n      if (fontFamily.indexOf('-apple-system') === 0 || userStack.length > 0) {\n        const fonts = splitFonts(fontFamily.toLowerCase());\n        return matchesStack(fonts, systemStackFonts) || matchesStack(fonts, userStack);\n      } else {\n        return false;\n      }\n    };\n    const getSpec$2 = editor => {\n      const getMatchingValue = () => {\n        const getFirstFont = fontFamily => fontFamily ? splitFonts(fontFamily)[0] : '';\n        const fontFamily = editor.queryCommandValue('FontName');\n        const items = dataset.data;\n        const font = fontFamily ? fontFamily.toLowerCase() : '';\n        const userStack = getDefaultFontStack(editor);\n        const matchOpt = find$5(items, item => {\n          const format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(() => {\n          return someIf(isSystemFontStack(font, userStack), {\n            title: systemFont,\n            format: font\n          });\n        });\n        return {\n          matchOpt,\n          font: fontFamily\n        };\n      };\n      const isSelectedFor = item => valueOpt => valueOpt.exists(value => value.format === item);\n      const getCurrentValue = () => {\n        const {matchOpt} = getMatchingValue();\n        return matchOpt;\n      };\n      const getPreviewFor = item => () => Optional.some({\n        tag: 'div',\n        styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n      });\n      const onAction = rawItem => () => {\n        editor.undoManager.transact(() => {\n          editor.focus();\n          editor.execCommand('FontName', false, rawItem.format);\n        });\n      };\n      const updateSelectMenuText = comp => {\n        const {matchOpt, font} = getMatchingValue();\n        const text = matchOpt.fold(constant$1(font), item => item.title);\n        emitWith(comp, updateMenuText, { text });\n        fireFontFamilyTextUpdate(editor, { value: text });\n      };\n      const dataset = buildBasicSettingsDataset(editor, 'font_family_formats', Delimiter.SemiColon);\n      return {\n        tooltip: makeTooltipText(editor, btnTooltip$2, systemFont),\n        text: Optional.some(systemFont),\n        icon: Optional.none(),\n        isSelectedFor,\n        getCurrentValue,\n        getPreviewFor,\n        onAction,\n        updateText: updateSelectMenuText,\n        dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    const createFontFamilyButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$2(editor), btnTooltip$2, 'FontFamilyTextUpdate');\n    const createFontFamilyMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontfamily', {\n        text: backstage.shared.providers.translate(menuTitle$2),\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    const pattern = (() => {\n      const decimalDigits = '[0-9]+';\n      const signedInteger = '[+-]?' + decimalDigits;\n      const exponentPart = '[eE]' + signedInteger;\n      const dot = '\\\\.';\n      const opt = input => `(?:${ input })?`;\n      const unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      const float = `[+-]?(?:${ unsignedDecimalLiteral })`;\n      return new RegExp(`^(${ float })(.*)$`);\n    })();\n    const isUnit = (unit, accepted) => exists(accepted, acc => exists(units[acc], check => unit === check));\n    const parse = (input, accepted) => {\n      const match = Optional.from(pattern.exec(input));\n      return match.bind(array => {\n        const value = Number(array[1]);\n        const unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const normalise = (input, accepted) => parse(input, accepted).map(({value, unit}) => value + unit);\n\n    const Keys = {\n      tab: constant$1(9),\n      escape: constant$1(27),\n      enter: constant$1(13),\n      backspace: constant$1(8),\n      delete: constant$1(46),\n      left: constant$1(37),\n      up: constant$1(38),\n      right: constant$1(39),\n      down: constant$1(40),\n      space: constant$1(32),\n      home: constant$1(36),\n      end: constant$1(35),\n      pageUp: constant$1(33),\n      pageDown: constant$1(34)\n    };\n\n    const createBespokeNumberInput = (editor, backstage, spec) => {\n      let currentComp = Optional.none();\n      const getValueFromCurrentComp = comp => comp.map(alloyComp => Representing.getValue(alloyComp)).getOr('');\n      const onSetup = onSetupEvent(editor, 'NodeChange SwitchMode', api => {\n        const comp = api.getComponent();\n        currentComp = Optional.some(comp);\n        spec.updateInputValue(comp);\n        Disabling.set(comp, !editor.selection.isEditable());\n      });\n      const getApi = comp => ({ getComponent: constant$1(comp) });\n      const editorOffCell = Cell(noop);\n      const customEvents = generate$6('custom-number-input-events');\n      const changeValue = (f, fromInput, focusBack) => {\n        const text = getValueFromCurrentComp(currentComp);\n        const newValue = spec.getNewValue(text, f);\n        const lenghtDelta = text.length - `${ newValue }`.length;\n        const oldStart = currentComp.map(comp => comp.element.dom.selectionStart - lenghtDelta);\n        const oldEnd = currentComp.map(comp => comp.element.dom.selectionEnd - lenghtDelta);\n        spec.onAction(newValue, focusBack);\n        currentComp.each(comp => {\n          Representing.setValue(comp, newValue);\n          if (fromInput) {\n            oldStart.each(oldStart => comp.element.dom.selectionStart = oldStart);\n            oldEnd.each(oldEnd => comp.element.dom.selectionEnd = oldEnd);\n          }\n        });\n      };\n      const decrease = (fromInput, focusBack) => changeValue((n, s) => n - s, fromInput, focusBack);\n      const increase = (fromInput, focusBack) => changeValue((n, s) => n + s, fromInput, focusBack);\n      const goToParent = comp => parentElement(comp.element).fold(Optional.none, parent => {\n        focus$3(parent);\n        return Optional.some(true);\n      });\n      const focusInput = comp => {\n        if (hasFocus(comp.element)) {\n          firstChild(comp.element).each(input => focus$3(input));\n          return Optional.some(true);\n        } else {\n          return Optional.none();\n        }\n      };\n      const makeStepperButton = (action, title, tooltip, classes) => {\n        const editorOffCellStepButton = Cell(noop);\n        const translatedTooltip = backstage.shared.providers.translate(tooltip);\n        const altExecuting = generate$6('altExecuting');\n        const onSetup = onSetupEvent(editor, 'NodeChange SwitchMode', api => {\n          Disabling.set(api.getComponent(), !editor.selection.isEditable());\n        });\n        const onClick = comp => {\n          if (!Disabling.isDisabled(comp)) {\n            action(true);\n          }\n        };\n        return Button.sketch({\n          dom: {\n            tag: 'button',\n            attributes: {\n              'title': translatedTooltip,\n              'aria-label': translatedTooltip\n            },\n            classes: classes.concat(title)\n          },\n          components: [renderIconFromPack$1(title, backstage.shared.providers.icons)],\n          buttonBehaviours: derive$1([\n            Disabling.config({}),\n            config(altExecuting, [\n              onControlAttached({\n                onSetup,\n                getApi\n              }, editorOffCellStepButton),\n              onControlDetached({ getApi }, editorOffCellStepButton),\n              run$1(keydown(), (comp, se) => {\n                if (se.event.raw.keyCode === Keys.space() || se.event.raw.keyCode === Keys.enter()) {\n                  if (!Disabling.isDisabled(comp)) {\n                    action(false);\n                  }\n                }\n              }),\n              run$1(click(), onClick),\n              run$1(touchend(), onClick)\n            ])\n          ]),\n          eventOrder: {\n            [keydown()]: [\n              altExecuting,\n              'keying'\n            ],\n            [click()]: [\n              altExecuting,\n              'alloy.base.behaviour'\n            ],\n            [touchend()]: [\n              altExecuting,\n              'alloy.base.behaviour'\n            ]\n          }\n        });\n      };\n      const memMinus = record(makeStepperButton(focusBack => decrease(false, focusBack), 'minus', 'Decrease font size', []));\n      const memPlus = record(makeStepperButton(focusBack => increase(false, focusBack), 'plus', 'Increase font size', []));\n      const memInput = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-input-wrapper']\n        },\n        components: [Input.sketch({\n            inputBehaviours: derive$1([\n              Disabling.config({}),\n              config(customEvents, [\n                onControlAttached({\n                  onSetup,\n                  getApi\n                }, editorOffCell),\n                onControlDetached({ getApi }, editorOffCell)\n              ]),\n              config('input-update-display-text', [\n                run$1(updateMenuText, (comp, se) => {\n                  Representing.setValue(comp, se.event.text);\n                }),\n                run$1(focusout(), comp => {\n                  spec.onAction(Representing.getValue(comp));\n                }),\n                run$1(change(), comp => {\n                  spec.onAction(Representing.getValue(comp));\n                })\n              ]),\n              Keying.config({\n                mode: 'special',\n                onEnter: _comp => {\n                  changeValue(identity, true, true);\n                  return Optional.some(true);\n                },\n                onEscape: goToParent,\n                onUp: _comp => {\n                  increase(true, false);\n                  return Optional.some(true);\n                },\n                onDown: _comp => {\n                  decrease(true, false);\n                  return Optional.some(true);\n                },\n                onLeft: (_comp, se) => {\n                  se.cut();\n                  return Optional.none();\n                },\n                onRight: (_comp, se) => {\n                  se.cut();\n                  return Optional.none();\n                }\n              })\n            ])\n          })],\n        behaviours: derive$1([\n          Focusing.config({}),\n          Keying.config({\n            mode: 'special',\n            onEnter: focusInput,\n            onSpace: focusInput,\n            onEscape: goToParent\n          }),\n          config('input-wrapper-events', [run$1(mouseover(), comp => {\n              each$1([\n                memMinus,\n                memPlus\n              ], button => {\n                const buttonNode = SugarElement.fromDom(button.get(comp).element.dom);\n                if (hasFocus(buttonNode)) {\n                  blur$1(buttonNode);\n                }\n              });\n            })])\n        ])\n      });\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-number-input']\n        },\n        components: [\n          memMinus.asSpec(),\n          memInput.asSpec(),\n          memPlus.asSpec()\n        ],\n        behaviours: derive$1([\n          Focusing.config({}),\n          Keying.config({\n            mode: 'flow',\n            focusInside: FocusInsideModes.OnEnterOrSpaceMode,\n            cycles: false,\n            selector: 'button, .tox-input-wrapper',\n            onEscape: wrapperComp => {\n              if (hasFocus(wrapperComp.element)) {\n                return Optional.none();\n              } else {\n                focus$3(wrapperComp.element);\n                return Optional.some(true);\n              }\n            }\n          })\n        ])\n      };\n    };\n\n    const menuTitle$1 = 'Font sizes';\n    const btnTooltip$1 = 'Font size {0}';\n    const fallbackFontSize = '12pt';\n    const legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    const keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    const round = (number, precision) => {\n      const factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    const toPt = (fontSize, precision) => {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$g(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    const toLegacy = fontSize => get$g(legacyFontSizes, fontSize).getOr('');\n    const getSpec$1 = editor => {\n      const getMatchingValue = () => {\n        let matchOpt = Optional.none();\n        const items = dataset.data;\n        const fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          for (let precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            const pt = toPt(fontSize, precision);\n            const legacy = toLegacy(pt);\n            matchOpt = find$5(items, item => item.format === fontSize || item.format === pt || item.format === legacy);\n          }\n        }\n        return {\n          matchOpt,\n          size: fontSize\n        };\n      };\n      const isSelectedFor = item => valueOpt => valueOpt.exists(value => value.format === item);\n      const getCurrentValue = () => {\n        const {matchOpt} = getMatchingValue();\n        return matchOpt;\n      };\n      const getPreviewFor = constant$1(Optional.none);\n      const onAction = rawItem => () => {\n        editor.undoManager.transact(() => {\n          editor.focus();\n          editor.execCommand('FontSize', false, rawItem.format);\n        });\n      };\n      const updateSelectMenuText = comp => {\n        const {matchOpt, size} = getMatchingValue();\n        const text = matchOpt.fold(constant$1(size), match => match.title);\n        emitWith(comp, updateMenuText, { text });\n        fireFontSizeTextUpdate(editor, { value: text });\n      };\n      const dataset = buildBasicSettingsDataset(editor, 'font_size_formats', Delimiter.Space);\n      return {\n        tooltip: makeTooltipText(editor, btnTooltip$1, fallbackFontSize),\n        text: Optional.some(fallbackFontSize),\n        icon: Optional.none(),\n        isSelectedFor,\n        getPreviewFor,\n        getCurrentValue,\n        onAction,\n        updateText: updateSelectMenuText,\n        dataset,\n        shouldHide: false,\n        isInvalid: never\n      };\n    };\n    const createFontSizeButton = (editor, backstage) => createSelectButton(editor, backstage, getSpec$1(editor), btnTooltip$1, 'FontSizeTextUpdate');\n    const getConfigFromUnit = unit => {\n      var _a;\n      const baseConfig = { step: 1 };\n      const configs = {\n        em: { step: 0.1 },\n        cm: { step: 0.1 },\n        in: { step: 0.1 },\n        pc: { step: 0.1 },\n        ch: { step: 0.1 },\n        rem: { step: 0.1 }\n      };\n      return (_a = configs[unit]) !== null && _a !== void 0 ? _a : baseConfig;\n    };\n    const defaultValue = 16;\n    const isValidValue = value => value >= 0;\n    const getNumberInputSpec = editor => {\n      const getCurrentValue = () => editor.queryCommandValue('FontSize');\n      const updateInputValue = comp => emitWith(comp, updateMenuText, { text: getCurrentValue() });\n      return {\n        updateInputValue,\n        onAction: (format, focusBack) => editor.execCommand('FontSize', false, format, { skip_focus: !focusBack }),\n        getNewValue: (text, updateFunction) => {\n          parse(text, [\n            'unsupportedLength',\n            'empty'\n          ]);\n          const currentValue = getCurrentValue();\n          const parsedText = parse(text, [\n            'unsupportedLength',\n            'empty'\n          ]).or(parse(currentValue, [\n            'unsupportedLength',\n            'empty'\n          ]));\n          const value = parsedText.map(res => res.value).getOr(defaultValue);\n          const defaultUnit = getFontSizeInputDefaultUnit(editor);\n          const unit = parsedText.map(res => res.unit).filter(u => u !== '').getOr(defaultUnit);\n          const newValue = updateFunction(value, getConfigFromUnit(unit).step);\n          const res = `${ isValidValue(newValue) ? newValue : value }${ unit }`;\n          if (res !== currentValue) {\n            fireFontSizeInputTextUpdate(editor, { value: res });\n          }\n          return res;\n        }\n      };\n    };\n    const createFontSizeInputButton = (editor, backstage) => createBespokeNumberInput(editor, backstage, getNumberInputSpec(editor));\n    const createFontSizeMenu = (editor, backstage) => {\n      const menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontsize', {\n        text: menuTitle$1,\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const menuTitle = 'Formats';\n    const btnTooltip = 'Format {0}';\n    const getSpec = (editor, dataset) => {\n      const fallbackFormat = 'Paragraph';\n      const isSelectedFor = format => () => editor.formatter.match(format);\n      const getPreviewFor = format => () => {\n        const fmt = editor.formatter.get(format);\n        return fmt !== undefined ? Optional.some({\n          tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n          styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n        }) : Optional.none();\n      };\n      const updateSelectMenuText = comp => {\n        const getFormatItems = fmt => {\n          if (isNestedFormat(fmt)) {\n            return bind$3(fmt.items, getFormatItems);\n          } else if (isFormatReference(fmt)) {\n            return [{\n                title: fmt.title,\n                format: fmt.format\n              }];\n          } else {\n            return [];\n          }\n        };\n        const flattenedItems = bind$3(getStyleFormats(editor), getFormatItems);\n        const detectedFormat = findNearest(editor, constant$1(flattenedItems));\n        const text = detectedFormat.fold(constant$1(fallbackFormat), fmt => fmt.title);\n        emitWith(comp, updateMenuText, { text });\n        fireStylesTextUpdate(editor, { value: text });\n      };\n      return {\n        tooltip: makeTooltipText(editor, btnTooltip, fallbackFormat),\n        text: Optional.some(fallbackFormat),\n        icon: Optional.none(),\n        isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor,\n        onAction: onActionToggleFormat$1(editor),\n        updateText: updateSelectMenuText,\n        shouldHide: shouldAutoHideStyleFormats(editor),\n        isInvalid: item => !editor.formatter.canApply(item.format),\n        dataset\n      };\n    };\n    const createStylesButton = (editor, backstage) => {\n      const dataset = {\n        type: 'advanced',\n        ...backstage.styles\n      };\n      return createSelectButton(editor, backstage, getSpec(editor, dataset), btnTooltip, 'StylesTextUpdate');\n    };\n    const createStylesMenu = (editor, backstage) => {\n      const dataset = {\n        type: 'advanced',\n        ...backstage.styles\n      };\n      const menuItems = createMenuItems(editor, backstage, getSpec(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('styles', {\n        text: menuTitle,\n        onSetup: onSetupEditableToggle(editor),\n        getSubmenuItems: () => menuItems.items.validateItems(menuItems.getStyleItems())\n      });\n    };\n\n    const schema$7 = constant$1([\n      required$1('toggleClass'),\n      required$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted('getHotspot', Optional.some),\n      defaulted('getAnchorOverrides', constant$1({})),\n      schema$y(),\n      onStrictHandler('onItemExecute'),\n      option$3('lazySink'),\n      required$1('dom'),\n      onHandler('onOpen'),\n      field('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted('matchWidth', false),\n      defaulted('useMinWidth', false),\n      defaulted('eventOrder', {}),\n      option$3('role')\n    ].concat(sandboxFields()));\n    const arrowPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'arrow',\n      defaults: () => {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: detail => {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: arrow => {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    const buttonPart = required({\n      factory: Button,\n      schema: [required$1('dom')],\n      name: 'button',\n      defaults: () => {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: detail => {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: btn => {\n            btn.getSystem().getByUid(detail.uid).each(splitDropdown => {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    const parts$3 = constant$1([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: spec => {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [required$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: detail => {\n          return {\n            onExecute: (tmenu, item) => {\n              tmenu.getSystem().getByUid(detail.uid).each(splitDropdown => {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType$1()\n    ]);\n\n    const factory$5 = (detail, components, spec, externals) => {\n      const switchToMenu = sandbox => {\n        Composing.getCurrent(sandbox).each(current => {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      const action = component => {\n        const onOpenSync = switchToMenu;\n        togglePopup(detail, identity, component, externals, onOpenSync, HighlightOnOpen.HighlightMenuAndItem).get(noop);\n      };\n      const openMenu = comp => {\n        action(comp);\n        return Optional.some(true);\n      };\n      const executeOnButton = comp => {\n        const button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      const buttonEvents = {\n        ...derive$2([runOnAttached((component, _simulatedEvent) => {\n            const ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n            ariaDescriptor.each(descriptor => {\n              const descriptorId = generate$6('aria');\n              set$9(descriptor.element, 'id', descriptorId);\n              set$9(component.element, 'aria-describedby', descriptorId);\n            });\n          })]),\n        ...events$a(Optional.some(action))\n      };\n      const apis = {\n        repositionMenus: comp => {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis,\n        eventOrder: {\n          ...detail.eventOrder,\n          [execute$5()]: [\n            'disabling',\n            'toggling',\n            'alloy.base.behaviour'\n          ]\n        },\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: hotspot => {\n                const arrow = getPartOrDie(hotspot, detail, 'arrow');\n                const extras = {\n                  onOpen: () => {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: () => {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox$1(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    const SplitDropdown = composite({\n      name: 'SplitDropdown',\n      configFields: schema$7(),\n      partFields: parts$3(),\n      factory: factory$5,\n      apis: { repositionMenus: (apis, comp) => apis.repositionMenus(comp) }\n    });\n\n    const getButtonApi = component => ({\n      isEnabled: () => !Disabling.isDisabled(component),\n      setEnabled: state => Disabling.set(component, !state),\n      setText: text => emitWith(component, updateMenuText, { text }),\n      setIcon: icon => emitWith(component, updateMenuIcon, { icon })\n    });\n    const getToggleApi = component => ({\n      setActive: state => {\n        Toggling.set(component, state);\n      },\n      isActive: () => Toggling.isOn(component),\n      isEnabled: () => !Disabling.isDisabled(component),\n      setEnabled: state => Disabling.set(component, !state),\n      setText: text => emitWith(component, updateMenuText, { text }),\n      setIcon: icon => emitWith(component, updateMenuIcon, { icon })\n    });\n    const getTooltipAttributes = (tooltip, providersBackstage) => tooltip.map(tooltip => ({\n      'aria-label': providersBackstage.translate(tooltip),\n      'title': providersBackstage.translate(tooltip)\n    })).getOr({});\n    const focusButtonEvent = generate$6('focus-button');\n    const renderCommonStructure = (optIcon, optText, tooltip, behaviours, providersBackstage) => {\n      const optMemDisplayText = optText.map(text => record(renderLabel$1(text, 'tox-tbtn', providersBackstage)));\n      const optMemDisplayIcon = optIcon.map(icon => record(renderReplaceableIconFromPack(icon, providersBackstage.icons)));\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(optText.isSome() ? ['tox-tbtn--select'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(mem => mem.asSpec()),\n          optMemDisplayText.map(mem => mem.asSpec())\n        ]),\n        eventOrder: {\n          [mousedown()]: [\n            'focusing',\n            'alloy.base.behaviour',\n            commonButtonDisplayEvent\n          ],\n          [attachedToDom()]: [\n            commonButtonDisplayEvent,\n            'toolbar-group-button-events'\n          ]\n        },\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config(commonButtonDisplayEvent, [\n            runOnAttached((comp, _se) => forceInitialSize(comp)),\n            run$1(updateMenuText, (comp, se) => {\n              optMemDisplayText.bind(mem => mem.getOpt(comp)).each(displayText => {\n                Replacing.set(displayText, [text$2(providersBackstage.translate(se.event.text))]);\n              });\n            }),\n            run$1(updateMenuIcon, (comp, se) => {\n              optMemDisplayIcon.bind(mem => mem.getOpt(comp)).each(displayIcon => {\n                Replacing.set(displayIcon, [renderReplaceableIconFromPack(se.event.icon, providersBackstage.icons)]);\n              });\n            }),\n            run$1(mousedown(), (button, se) => {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })\n          ])\n        ].concat(behaviours.getOr([])))\n      };\n    };\n    const renderFloatingToolbarButton = (spec, backstage, identifyButtons, attributes) => {\n      const sharedBackstage = backstage.shared;\n      const editorOffCell = Cell(noop);\n      const specialisation = {\n        toolbarButtonBehaviours: [],\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      };\n      const behaviours = [config('toolbar-group-button-events', [\n          onControlAttached(specialisation, editorOffCell),\n          onControlDetached(specialisation, editorOffCell)\n        ])];\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: () => Future.nu(resolve => {\n          resolve(map$2(identifyButtons(spec.items), renderToolbarGroup));\n        }),\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.some(behaviours), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes\n            }\n          }\n        }\n      });\n    };\n    const renderCommonToolbarButton = (spec, specialisation, providersBackstage) => {\n      var _d;\n      const editorOffCell = Cell(noop);\n      const structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: {\n          ...derive$1([\n            config('toolbar-button-events', [\n              onToolbarButtonExecute({\n                onAction: spec.onAction,\n                getApi: specialisation.getApi\n              }),\n              onControlAttached(specialisation, editorOffCell),\n              onControlDetached(specialisation, editorOffCell)\n            ]),\n            DisablingConfigs.toolbarButton(() => !spec.enabled || providersBackstage.isDisabled()),\n            receivingConfig()\n          ].concat(specialisation.toolbarButtonBehaviours)),\n          [commonButtonDisplayEvent]: (_d = structure.buttonBehaviours) === null || _d === void 0 ? void 0 : _d[commonButtonDisplayEvent]\n        }\n      });\n    };\n    const renderToolbarButton = (spec, providersBackstage) => renderToolbarButtonWith(spec, providersBackstage, []);\n    const renderToolbarButtonWith = (spec, providersBackstage, bonusEvents) => renderCommonToolbarButton(spec, {\n      toolbarButtonBehaviours: bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : [],\n      getApi: getButtonApi,\n      onSetup: spec.onSetup\n    }, providersBackstage);\n    const renderToolbarToggleButton = (spec, providersBackstage) => renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    const renderToolbarToggleButtonWith = (spec, providersBackstage, bonusEvents) => renderCommonToolbarButton(spec, {\n      toolbarButtonBehaviours: [\n        Replacing.config({}),\n        Toggling.config({\n          toggleClass: 'tox-tbtn--enabled',\n          aria: { mode: 'pressed' },\n          toggleOnExecute: false\n        })\n      ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n      getApi: getToggleApi,\n      onSetup: spec.onSetup\n    }, providersBackstage);\n    const fetchChoices = (getApi, spec, providersBackstage) => comp => Future.nu(callback => spec.fetch(callback)).map(items => Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$6('menu-value'), items, value => {\n      spec.onItemAction(getApi(comp), value);\n    }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(never), providersBackstage), {\n      movement: deriveMenuMovement(spec.columns, spec.presets),\n      menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached((comp, _se) => {\n          detectSize(comp, 4, classForPreset(spec.presets)).each(({numRows, numColumns}) => {\n            Keying.setGridSize(comp, numRows, numColumns);\n          });\n        })])\n    }))));\n    const renderSplitButton = (spec, sharedBackstage) => {\n      const getApi = comp => ({\n        isEnabled: () => !Disabling.isDisabled(comp),\n        setEnabled: state => Disabling.set(comp, !state),\n        setIconFill: (id, value) => {\n          descendant(comp.element, `svg path[class=\"${ id }\"], rect[class=\"${ id }\"]`).each(underlinePath => {\n            set$9(underlinePath, 'fill', value);\n          });\n        },\n        setActive: state => {\n          set$9(comp.element, 'aria-pressed', state);\n          descendant(comp.element, 'span').each(button => {\n            comp.getSystem().getByDom(button).each(buttonComp => Toggling.set(buttonComp, state));\n          });\n        },\n        isActive: () => descendant(comp.element, 'span').exists(button => comp.getSystem().getByDom(button).exists(Toggling.isOn)),\n        setText: text => descendant(comp.element, 'span').each(button => comp.getSystem().getByDom(button).each(buttonComp => emitWith(buttonComp, updateMenuText, { text }))),\n        setIcon: icon => descendant(comp.element, 'span').each(button => comp.getSystem().getByDom(button).each(buttonComp => emitWith(buttonComp, updateMenuIcon, { icon }))),\n        setTooltip: tooltip => {\n          const translatedTooltip = sharedBackstage.providers.translate(tooltip);\n          setAll$1(comp.element, {\n            'aria-label': translatedTooltip,\n            'title': translatedTooltip\n          });\n        }\n      });\n      const editorOffCell = Cell(noop);\n      const specialisation = {\n        getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: {\n            'aria-pressed': false,\n            ...getTooltipAttributes(spec.tooltip, sharedBackstage.providers)\n          }\n        },\n        onExecute: button => {\n          const api = getApi(button);\n          if (api.isEnabled()) {\n            spec.onAction(api);\n          }\n        },\n        onItemExecute: (_a, _b, _c) => {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            runOnAttached((comp, _se) => forceInitialSize(comp)),\n            run$1(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          [attachedToDom()]: [\n            'alloy.base.behaviour',\n            'split-dropdown-events'\n          ]\n        },\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$2('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig(),\n              addFocusableBehaviour()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    const defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'ai',\n        items: [\n          'aidialog',\n          'aishortcuts'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styles']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    const renderFromBridge = (bridgeBuilder, render) => (spec, backstage, editor) => {\n      const internal = bridgeBuilder(spec).mapError(errInfo => formatError(errInfo)).getOrDie();\n      return render(internal, backstage, editor);\n    };\n    const types = {\n      button: renderFromBridge(createToolbarButton, (s, backstage) => renderToolbarButton(s, backstage.shared.providers)),\n      togglebutton: renderFromBridge(createToggleButton, (s, backstage) => renderToolbarToggleButton(s, backstage.shared.providers)),\n      menubutton: renderFromBridge(createMenuButton, (s, backstage) => renderMenuButton(s, 'tox-tbtn', backstage, Optional.none(), false)),\n      splitbutton: renderFromBridge(createSplitButton, (s, backstage) => renderSplitButton(s, backstage.shared)),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, (s, backstage, editor) => {\n        const buttons = editor.ui.registry.getAll().buttons;\n        const identify = toolbar => identifyButtons(editor, {\n          buttons,\n          toolbar,\n          allowToolbarGroups: false\n        }, backstage, Optional.none());\n        const attributes = { [Attribute]: backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop };\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode$1.floating:\n          return renderFloatingToolbarButton(s, backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      })\n    };\n    const extractFrom = (spec, backstage, editor) => get$g(types, spec.type).fold(() => {\n      console.error('skipping button defined by', spec);\n      return Optional.none();\n    }, render => Optional.some(render(spec, backstage, editor)));\n    const bespokeButtons = {\n      styles: createStylesButton,\n      fontsize: createFontSizeButton,\n      fontsizeinput: createFontSizeInputButton,\n      fontfamily: createFontFamilyButton,\n      blocks: createBlocksButton,\n      align: createAlignButton\n    };\n    const removeUnusedDefaults = buttons => {\n      const filteredItemGroups = map$2(defaultToolbar, group => {\n        const items = filter$2(group.items, subItem => has$2(buttons, subItem) || has$2(bespokeButtons, subItem));\n        return {\n          name: group.name,\n          items\n        };\n      });\n      return filter$2(filteredItemGroups, group => group.items.length > 0);\n    };\n    const convertStringToolbar = strToolbar => {\n      const groupsStrings = strToolbar.split('|');\n      return map$2(groupsStrings, g => ({ items: g.trim().split(' ') }));\n    };\n    const isToolbarGroupSettingArray = toolbar => isArrayOf(toolbar, t => has$2(t, 'name') && has$2(t, 'items'));\n    const createToolbar = toolbarConfig => {\n      const toolbar = toolbarConfig.toolbar;\n      const buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    const lookupButton = (editor, buttons, toolbarItem, allowToolbarGroups, backstage, prefixes) => get$g(buttons, toolbarItem.toLowerCase()).orThunk(() => prefixes.bind(ps => findMap(ps, prefix => get$g(buttons, prefix + toolbarItem.toLowerCase())))).fold(() => get$g(bespokeButtons, toolbarItem.toLowerCase()).map(r => r(editor, backstage)), spec => {\n      if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n        console.warn(`Ignoring the '${ toolbarItem }' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`);\n        return Optional.none();\n      } else {\n        return extractFrom(spec, backstage, editor);\n      }\n    });\n    const identifyButtons = (editor, toolbarConfig, backstage, prefixes) => {\n      const toolbarGroups = createToolbar(toolbarConfig);\n      const groups = map$2(toolbarGroups, group => {\n        const items = bind$3(group.items, toolbarItem => {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, backstage, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items\n        };\n      });\n      return filter$2(groups, group => group.items.length > 0);\n    };\n\n    const setToolbar = (editor, uiRefs, rawUiConfig, backstage) => {\n      const outerContainer = uiRefs.mainUi.outerContainer;\n      const toolbarConfig = rawUiConfig.toolbar;\n      const toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        const toolbars = toolbarConfig.map(t => {\n          const config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, backstage, Optional.none());\n        });\n        OuterContainer.setToolbars(outerContainer, toolbars);\n      } else {\n        OuterContainer.setToolbar(outerContainer, identifyButtons(editor, rawUiConfig, backstage, Optional.none()));\n      }\n    };\n\n    const detection = detect$2();\n    const isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    const setupEvents$1 = (editor, uiRefs) => {\n      const {uiMotherships} = uiRefs;\n      const dom = editor.dom;\n      let contentWindow = editor.getWin();\n      const initialDocEle = editor.getDoc().documentElement;\n      const lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      const lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      const resizeWindow = () => {\n        const outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      const resizeDocument = () => {\n        const docEle = editor.getDoc().documentElement;\n        const inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      const scroll = e => {\n        fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      const elementLoad = capture(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      editor.on('hide', () => {\n        each$1(uiMotherships, m => {\n          set$8(m.element, 'display', 'none');\n        });\n      });\n      editor.on('show', () => {\n        each$1(uiMotherships, m => {\n          remove$6(m.element, 'display');\n        });\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', () => {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    const attachUiMotherships = (editor, uiRoot, uiRefs) => {\n      if (isSplitUiMode(editor)) {\n        attachSystemAfter(uiRefs.mainUi.mothership.element, uiRefs.popupUi.mothership);\n      }\n      attachSystem(uiRoot, uiRefs.dialogUi.mothership);\n    };\n    const render$1 = (editor, uiRefs, rawUiConfig, backstage, args) => {\n      const {mainUi, uiMotherships} = uiRefs;\n      const lastToolbarWidth = Cell(0);\n      const outerContainer = mainUi.outerContainer;\n      iframe(editor);\n      const eTargetNode = SugarElement.fromDom(args.targetNode);\n      const uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, mainUi.mothership);\n      attachUiMotherships(editor, uiRoot, uiRefs);\n      editor.on('SkinLoaded', () => {\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar, getSidebarShow(editor));\n        setToolbar(editor, uiRefs, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setViews(outerContainer, rawUiConfig.views);\n        setupEvents$1(editor, uiRefs);\n      });\n      const socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        const limit = first(() => {\n          editor.dispatch('ScrollContent');\n        }, 20);\n        const unbinder = bind(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiRefs);\n      editor.addCommand('ToggleSidebar', (_ui, value) => {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.dispatch('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', () => {\n        var _a;\n        return (_a = OuterContainer.whichSidebar(outerContainer)) !== null && _a !== void 0 ? _a : '';\n      });\n      editor.addCommand('ToggleView', (_ui, value) => {\n        if (OuterContainer.toggleView(outerContainer, value)) {\n          const target = outerContainer.element;\n          mainUi.mothership.broadcastOn([dismissPopups()], { target });\n          each$1(uiMotherships, m => {\n            m.broadcastOn([dismissPopups()], { target });\n          });\n          if (isNull(OuterContainer.whichView(outerContainer))) {\n            editor.focus();\n            editor.nodeChanged();\n            OuterContainer.refreshToolbar(outerContainer);\n          }\n        }\n      });\n      editor.addQueryValueHandler('ToggleView', () => {\n        var _a;\n        return (_a = OuterContainer.whichView(outerContainer)) !== null && _a !== void 0 ? _a : '';\n      });\n      const toolbarMode = getToolbarMode(editor);\n      const refreshDrawer = () => {\n        OuterContainer.refreshToolbar(uiRefs.mainUi.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode$1.sliding || toolbarMode === ToolbarMode$1.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', () => {\n          const width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      const api = {\n        setEnabled: state => {\n          broadcastReadonly(uiRefs, !state);\n        },\n        isEnabled: () => !Disabling.isDisabled(outerContainer)\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    const parseToInt = val => {\n      const re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    const numToPx = val => isNumber(val) ? val + 'px' : val;\n    const calcCappedSize = (size, minSize, maxSize) => {\n      const minOverride = minSize.filter(min => size < min);\n      const maxOverride = maxSize.filter(max => size > max);\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    const getHeight = editor => {\n      const baseHeight = getHeightOption(editor);\n      const minHeight = getMinHeightOption(editor);\n      const maxHeight = getMaxHeightOption(editor);\n      return parseToInt(baseHeight).map(height => calcCappedSize(height, minHeight, maxHeight));\n    };\n    const getHeightWithFallback = editor => {\n      const height = getHeight(editor);\n      return height.getOr(getHeightOption(editor));\n    };\n    const getWidth = editor => {\n      const baseWidth = getWidthOption(editor);\n      const minWidth = getMinWidthOption(editor);\n      const maxWidth = getMaxWidthOption(editor);\n      return parseToInt(baseWidth).map(width => calcCappedSize(width, minWidth, maxWidth));\n    };\n    const getWidthWithFallback = editor => {\n      const width = getWidth(editor);\n      return width.getOr(getWidthOption(editor));\n    };\n\n    const {ToolbarLocation, ToolbarMode} = Options;\n    const maximumDistanceToEdge = 40;\n    const InlineHeader = (editor, targetElm, uiRefs, backstage, floatContainer) => {\n      const {mainUi, uiMotherships} = uiRefs;\n      const DOM = global$7.DOM;\n      const useFixedToolbarContainer = useFixedContainer(editor);\n      const isSticky = isStickyToolbar(editor);\n      const editorMaxWidthOpt = getMaxWidthOption(editor).or(getWidth(editor));\n      const headerBackstage = backstage.shared.header;\n      const isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      const toolbarMode = getToolbarMode(editor);\n      const isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      const visible = Cell(false);\n      const isVisible = () => visible.get() && !editor.removed;\n      const calcToolbarOffset = toolbar => isSplitToolbar ? toolbar.fold(constant$1(0), tbar => tbar.components().length > 1 ? get$d(tbar.components()[1].element) : 0) : 0;\n      const calcMode = container => {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          const toolbar = OuterContainer.getToolbar(mainUi.outerContainer);\n          const offset = calcToolbarOffset(toolbar);\n          const toolbarHeight = get$d(container.element) - offset;\n          const targetBounds = box$1(targetElm);\n          const roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            const doc = documentElement(targetElm);\n            const docHeight = Math.max(doc.dom.scrollHeight, get$d(doc));\n            const roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              const winBounds = win();\n              const isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      const setupMode = mode => {\n        floatContainer.on(container => {\n          Docking.setModes(container, [mode]);\n          headerBackstage.setDockingMode(mode);\n          const verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n          set$9(container.element, Attribute, verticalDir);\n        });\n      };\n      const updateChromeWidth = () => {\n        floatContainer.on(container => {\n          const maxWidth = editorMaxWidthOpt.getOrThunk(() => {\n            const bodyMargin = parseToInt(get$e(body(), 'margin-left')).getOr(0);\n            return get$c(body()) - absolute$3(targetElm).left + bodyMargin;\n          });\n          set$8(container.element, 'max-width', maxWidth + 'px');\n        });\n      };\n      const updateChromePosition = optToolbarWidth => {\n        floatContainer.on(container => {\n          const toolbar = OuterContainer.getToolbar(mainUi.outerContainer);\n          const offset = calcToolbarOffset(toolbar);\n          const targetBounds = box$1(targetElm);\n          const {top, left} = getOffsetParent$1(editor, mainUi.outerContainer.element).fold(() => {\n            return {\n              top: isPositionedAtTop() ? Math.max(targetBounds.y - get$d(container.element) + offset, 0) : targetBounds.bottom,\n              left: targetBounds.x\n            };\n          }, offsetParent => {\n            var _a;\n            const offsetBox = box$1(offsetParent);\n            const scrollDelta = (_a = offsetParent.dom.scrollTop) !== null && _a !== void 0 ? _a : 0;\n            const isOffsetParentBody = eq(offsetParent, body());\n            const topValue = isOffsetParentBody ? Math.max(targetBounds.y - get$d(container.element) + offset, 0) : targetBounds.y - offsetBox.y + scrollDelta - get$d(container.element) + offset;\n            return {\n              top: isPositionedAtTop() ? topValue : targetBounds.bottom,\n              left: isOffsetParentBody ? targetBounds.x : targetBounds.x - offsetBox.x\n            };\n          });\n          const baseProperties = {\n            position: 'absolute',\n            left: Math.round(left) + 'px',\n            top: Math.round(top) + 'px'\n          };\n          const widthProperties = optToolbarWidth.map(toolbarWidth => {\n            const scroll = get$b();\n            const minimumToolbarWidth = 150;\n            const availableWidth = window.innerWidth - (left - scroll.left);\n            const width = Math.max(Math.min(toolbarWidth, availableWidth), minimumToolbarWidth);\n            return { width: width + 'px' };\n          }).getOr({});\n          setAll(mainUi.outerContainer.element, {\n            ...baseProperties,\n            ...widthProperties\n          });\n        });\n      };\n      const getOffsetParent$1 = (editor, element) => isSplitUiMode(editor) ? getOffsetParent(element) : Optional.none();\n      const repositionPopups$1 = () => {\n        each$1(uiMotherships, m => {\n          m.broadcastOn([repositionPopups()], {});\n        });\n      };\n      const restoreAndGetCompleteOuterContainerWidth = () => {\n        if (!useFixedToolbarContainer) {\n          const toolbarCurrentRightsidePosition = absolute$3(mainUi.outerContainer.element).left + getOuter$1(mainUi.outerContainer.element);\n          if (toolbarCurrentRightsidePosition >= window.innerWidth - maximumDistanceToEdge || getRaw(mainUi.outerContainer.element, 'width').isSome()) {\n            set$8(mainUi.outerContainer.element, 'position', 'absolute');\n            set$8(mainUi.outerContainer.element, 'left', '0px');\n            remove$6(mainUi.outerContainer.element, 'width');\n            const w = getOuter$1(mainUi.outerContainer.element);\n            return Optional.some(w);\n          } else {\n            return Optional.none();\n          }\n        } else {\n          return Optional.none();\n        }\n      };\n      const update = stickyAction => {\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        const optToolbarWidth = useFixedToolbarContainer ? Optional.none() : restoreAndGetCompleteOuterContainerWidth();\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(mainUi.outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition(optToolbarWidth);\n        }\n        if (isSticky) {\n          floatContainer.on(stickyAction);\n        }\n        repositionPopups$1();\n      };\n      const doUpdateMode = () => {\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return false;\n        }\n        return floatContainer.get().exists(fc => {\n          const currentMode = headerBackstage.getDockingMode();\n          const newMode = calcMode(fc);\n          if (newMode !== currentMode) {\n            setupMode(newMode);\n            return true;\n          } else {\n            return false;\n          }\n        });\n      };\n      const show = () => {\n        visible.set(true);\n        set$8(mainUi.outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        each$1(uiMotherships, m => {\n          remove$6(m.element, 'display');\n        });\n        doUpdateMode();\n        if (isSplitUiMode(editor)) {\n          update(elem => Docking.isDocked(elem) ? Docking.reset(elem) : Docking.refresh(elem));\n        } else {\n          update(Docking.refresh);\n        }\n      };\n      const hide = () => {\n        visible.set(false);\n        set$8(mainUi.outerContainer.element, 'display', 'none');\n        DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        each$1(uiMotherships, m => {\n          set$8(m.element, 'display', 'none');\n        });\n      };\n      const updateMode = () => {\n        const changedMode = doUpdateMode();\n        if (changedMode) {\n          update(Docking.reset);\n        }\n      };\n      return {\n        isVisible,\n        isPositionedAtTop,\n        show,\n        hide,\n        update,\n        updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    const getTargetPosAndBounds = (targetElm, isToolbarTop) => {\n      const bounds = box$1(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds\n      };\n    };\n    const setupEvents = (editor, targetElm, ui, toolbarPersist) => {\n      const prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      const resizeContent = e => {\n        const {pos, bounds} = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop());\n        const {\n          pos: prevPos,\n          bounds: prevBounds\n        } = prevPosAndBounds.get();\n        const hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos,\n          bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(Docking.reset);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', () => ui.update(Docking.reset));\n      editor.on('NodeChange keydown', e => {\n        requestAnimationFrame(() => resizeContent(e));\n      });\n      let lastScrollX = 0;\n      const updateUi = last(() => ui.update(Docking.refresh), 33);\n      editor.on('ScrollWindow', () => {\n        const newScrollX = get$b().left;\n        if (newScrollX !== lastScrollX) {\n          lastScrollX = newScrollX;\n          updateUi.throttle();\n        }\n        ui.updateMode();\n      });\n      if (isSplitUiMode(editor)) {\n        editor.on('ElementScroll', _args => {\n          ui.update(Docking.refresh);\n        });\n      }\n      const elementLoad = unbindable();\n      elementLoad.set(capture(SugarElement.fromDom(editor.getBody()), 'load', e => resizeContent(e.raw)));\n      editor.on('remove', () => {\n        elementLoad.clear();\n      });\n    };\n    const render = (editor, uiRefs, rawUiConfig, backstage, args) => {\n      const {mainUi} = uiRefs;\n      const floatContainer = value$2();\n      const targetElm = SugarElement.fromDom(args.targetNode);\n      const ui = InlineHeader(editor, targetElm, uiRefs, backstage, floatContainer);\n      const toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      const render = () => {\n        if (floatContainer.isSet()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(mainUi.outerContainer).getOrDie());\n        const uiContainer = getUiContainer(editor);\n        if (isSplitUiMode(editor)) {\n          attachSystemAfter(targetElm, mainUi.mothership);\n          attachSystemAfter(targetElm, uiRefs.popupUi.mothership);\n        } else {\n          attachSystem(uiContainer, mainUi.mothership);\n        }\n        attachSystem(uiContainer, uiRefs.dialogUi.mothership);\n        setToolbar(editor, uiRefs, rawUiConfig, backstage);\n        OuterContainer.setMenubar(mainUi.outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', () => {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiRefs);\n      const api = {\n        show: render,\n        hide: ui.hide,\n        setEnabled: state => {\n          broadcastReadonly(uiRefs, !state);\n        },\n        isEnabled: () => !Disabling.isDisabled(mainUi.outerContainer)\n      };\n      return {\n        editorContainer: mainUi.outerContainer.element.dom,\n        api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render\n    });\n\n    const LazyUiReferences = () => {\n      const dialogUi = value$2();\n      const popupUi = value$2();\n      const mainUi = value$2();\n      const lazyGetInOuterOrDie = (label, f) => () => mainUi.get().bind(oc => f(oc.outerContainer)).getOrDie(`Could not find ${ label } element in OuterContainer`);\n      const getUiMotherships = () => {\n        const optDialogMothership = dialogUi.get().map(ui => ui.mothership);\n        const optPopupMothership = popupUi.get().map(ui => ui.mothership);\n        return optDialogMothership.fold(() => optPopupMothership.toArray(), dm => optPopupMothership.fold(() => [dm], pm => eq(dm.element, pm.element) ? [dm] : [\n          dm,\n          pm\n        ]));\n      };\n      return {\n        dialogUi,\n        popupUi,\n        mainUi,\n        getUiMotherships,\n        lazyGetInOuterOrDie\n      };\n    };\n\n    const showContextToolbarEvent = 'contexttoolbar-show';\n    const hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    const getFormApi = input => ({\n      hide: () => emit(input, sandboxClose()),\n      getValue: () => Representing.getValue(input)\n    });\n    const runOnExecute = (memInput, original) => run$1(internalToolbarButtonExecute, (comp, se) => {\n      const input = memInput.get(comp);\n      const formApi = getFormApi(input);\n      original.onAction(formApi, se.event.buttonApi);\n    });\n    const renderContextButton = (memInput, button, providers) => {\n      const {primary, ...rest} = button.original;\n      const bridged = getOrDie(createToolbarButton({\n        ...rest,\n        type: 'button',\n        onAction: noop\n      }));\n      return renderToolbarButtonWith(bridged, providers, [runOnExecute(memInput, button)]);\n    };\n    const renderContextToggleButton = (memInput, button, providers) => {\n      const {primary, ...rest} = button.original;\n      const bridged = getOrDie(createToggleButton({\n        ...rest,\n        type: 'togglebutton',\n        onAction: noop\n      }));\n      return renderToolbarToggleButtonWith(bridged, providers, [runOnExecute(memInput, button)]);\n    };\n    const isToggleButton = button => button.type === 'contextformtogglebutton';\n    const generateOne = (memInput, button, providersBackstage) => {\n      if (isToggleButton(button)) {\n        return renderContextToggleButton(memInput, button, providersBackstage);\n      } else {\n        return renderContextButton(memInput, button, providersBackstage);\n      }\n    };\n    const generate = (memInput, buttons, providersBackstage) => {\n      const mementos = map$2(buttons, button => record(generateOne(memInput, button, providersBackstage)));\n      const asSpecs = () => map$2(mementos, mem => mem.asSpec());\n      const findPrimary = compInSystem => findMap(buttons, (button, i) => {\n        if (button.primary) {\n          return Optional.from(mementos[i]).bind(mem => mem.getOpt(compInSystem)).filter(not(Disabling.isDisabled));\n        } else {\n          return Optional.none();\n        }\n      });\n      return {\n        asSpecs,\n        findPrimary\n      };\n    };\n\n    const buildInitGroups = (ctx, providers) => {\n      const inputAttributes = ctx.label.fold(() => ({}), label => ({ 'aria-label': label }));\n      const memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: input => commands.findPrimary(input).map(primary => {\n              emitExecute(primary);\n              return true;\n            }),\n            onLeft: (comp, se) => {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: (comp, se) => {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      const commands = generate(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    const renderContextForm = (toolbarType, ctx, providers) => renderToolbar({\n      type: toolbarType,\n      uid: generate$6('context-toolbar'),\n      initGroups: buildInitGroups(ctx, providers),\n      onEscape: Optional.none,\n      cyclicKeying: true,\n      providers\n    });\n    const ContextForm = {\n      renderContextForm,\n      buildInitGroups\n    };\n\n    const isVerticalOverlap = (a, b, threshold) => b.bottom - a.y >= threshold && a.bottom - b.y >= threshold;\n    const getRangeRect = rng => {\n      const rect = rng.getBoundingClientRect();\n      if (rect.height <= 0 && rect.width <= 0) {\n        const leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset).element;\n        const elm = isText(leaf$1) ? parent(leaf$1) : Optional.some(leaf$1);\n        return elm.filter(isElement$1).map(e => e.dom.getBoundingClientRect()).getOr(rect);\n      } else {\n        return rect;\n      }\n    };\n    const getSelectionBounds = editor => {\n      const rng = editor.selection.getRng();\n      const rect = getRangeRect(rng);\n      if (editor.inline) {\n        const scroll = get$b();\n        return bounds(scroll.left + rect.left, scroll.top + rect.top, rect.width, rect.height);\n      } else {\n        const bodyPos = absolute$2(SugarElement.fromDom(editor.getBody()));\n        return bounds(bodyPos.x + rect.left, bodyPos.y + rect.top, rect.width, rect.height);\n      }\n    };\n    const getAnchorElementBounds = (editor, lastElement) => lastElement.filter(elem => inBody(elem) && isHTMLElement(elem)).map(absolute$2).getOrThunk(() => getSelectionBounds(editor));\n    const getHorizontalBounds = (contentAreaBox, viewportBounds, margin) => {\n      const x = Math.max(contentAreaBox.x + margin, viewportBounds.x);\n      const right = Math.min(contentAreaBox.right - margin, viewportBounds.right);\n      return {\n        x,\n        width: right - x\n      };\n    };\n    const getVerticalBounds = (editor, contentAreaBox, viewportBounds, isToolbarLocationTop, toolbarType, margin) => {\n      const container = SugarElement.fromDom(editor.getContainer());\n      const header = descendant(container, '.tox-editor-header').getOr(container);\n      const headerBox = box$1(header);\n      const isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      const isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n        };\n      }\n      const containerBounds = toolbarType === 'line' ? box$1(container) : contentAreaBox;\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom + margin, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom - margin, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y + margin, viewportBounds.y),\n        bottom: Math.min(headerBox.y - margin, viewportBounds.bottom)\n      };\n    };\n    const getContextToolbarBounds = (editor, sharedBackstage, toolbarType, margin = 0) => {\n      const viewportBounds = getBounds$3(window);\n      const contentAreaBox = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n      const toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      const {x, width} = getHorizontalBounds(contentAreaBox, viewportBounds, margin);\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        const isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        const {y, bottom} = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop, toolbarType, margin);\n        return bounds(x, y, width, bottom - y);\n      }\n    };\n\n    const bubbleSize$1 = 12;\n    const bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top'],\n      inset: ['tox-pop--inset']\n    };\n    const anchorOverrides = {\n      maxHeightFunction: expandable$1(),\n      maxWidthFunction: expandable()\n    };\n    const isEntireElementSelected = (editor, elem) => {\n      const rng = editor.selection.getRng();\n      const leaf$1 = leaf(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      return rng.startContainer === rng.endContainer && rng.startOffset === rng.endOffset - 1 && eq(leaf$1.element, elem);\n    };\n    const preservePosition = (elem, position, f) => {\n      const currentPosition = getRaw(elem, 'position');\n      set$8(elem, 'position', position);\n      const result = f(elem);\n      currentPosition.each(pos => set$8(elem, 'position', pos));\n      return result;\n    };\n    const shouldUseInsetLayouts = position => position === 'node';\n    const determineInsetLayout = (editor, contextbar, elem, data, bounds) => {\n      const selectionBounds = getSelectionBounds(editor);\n      const isSameAnchorElement = data.lastElement().exists(prev => eq(elem, prev));\n      if (isEntireElementSelected(editor, elem)) {\n        return isSameAnchorElement ? preserve : north;\n      } else if (isSameAnchorElement) {\n        return preservePosition(contextbar, data.getMode(), () => {\n          const isOverlapping = isVerticalOverlap(selectionBounds, box$1(contextbar), -20);\n          return isOverlapping && !data.isReposition() ? flip : preserve;\n        });\n      } else {\n        const yBounds = data.getMode() === 'fixed' ? bounds.y + get$b().top : bounds.y;\n        const contextbarHeight = get$d(contextbar) + bubbleSize$1;\n        return yBounds + contextbarHeight <= selectionBounds.y ? north : south;\n      }\n    };\n    const getAnchorSpec$2 = (editor, mobile, data, position) => {\n      const smartInsetLayout = elem => (anchor, element, bubbles, placee, bounds) => {\n        const layout = determineInsetLayout(editor, placee, elem, data, bounds);\n        const newAnchor = {\n          ...anchor,\n          y: bounds.y,\n          height: bounds.height\n        };\n        return {\n          ...layout(newAnchor, element, bubbles, placee, bounds),\n          alwaysFit: true\n        };\n      };\n      const getInsetLayouts = elem => shouldUseInsetLayouts(position) ? [smartInsetLayout(elem)] : [];\n      const desktopAnchorSpecLayouts = {\n        onLtr: elem => [\n          north$2,\n          south$2,\n          northeast$2,\n          southeast$2,\n          northwest$2,\n          southwest$2\n        ].concat(getInsetLayouts(elem)),\n        onRtl: elem => [\n          north$2,\n          south$2,\n          northwest$2,\n          southwest$2,\n          northeast$2,\n          southeast$2\n        ].concat(getInsetLayouts(elem))\n      };\n      const mobileAnchorSpecLayouts = {\n        onLtr: elem => [\n          south$2,\n          southeast$2,\n          southwest$2,\n          northeast$2,\n          northwest$2,\n          north$2\n        ].concat(getInsetLayouts(elem)),\n        onRtl: elem => [\n          south$2,\n          southwest$2,\n          southeast$2,\n          northwest$2,\n          northeast$2,\n          north$2\n        ].concat(getInsetLayouts(elem))\n      };\n      return mobile ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts;\n    };\n    const getAnchorLayout = (editor, position, isTouch, data) => {\n      if (position === 'line') {\n        return {\n          bubble: nu$5(bubbleSize$1, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: () => [east$2],\n            onRtl: () => [west$2]\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$5(0, bubbleSize$1, bubbleAlignments$1, 1 / bubbleSize$1),\n          layouts: getAnchorSpec$2(editor, isTouch, data, position),\n          overrides: anchorOverrides\n        };\n      }\n    };\n\n    const matchTargetWith = (elem, candidates) => {\n      const ctxs = filter$2(candidates, toolbarApi => toolbarApi.predicate(elem.dom));\n      const {pass, fail} = partition$3(ctxs, t => t.type === 'contexttoolbar');\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    const filterByPositionForStartNode = toolbars => {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        const doesPositionExist = value => exists(toolbars, t => t.position === value);\n        const filterToolbarsByPosition = value => filter$2(toolbars, t => t.position === value);\n        const hasSelectionToolbars = doesPositionExist('selection');\n        const hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            const nodeToolbars = filterToolbarsByPosition('node');\n            const selectionToolbars = map$2(filterToolbarsByPosition('selection'), t => ({\n              ...t,\n              position: 'node'\n            }));\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    const filterByPositionForAncestorNode = toolbars => {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        const findPosition = value => find$5(toolbars, t => t.position === value);\n        const basePosition = findPosition('selection').orThunk(() => findPosition('node')).orThunk(() => findPosition('line')).map(t => t.position);\n        return basePosition.fold(() => [], pos => filter$2(toolbars, t => t.position === pos));\n      }\n    };\n    const matchStartNode = (elem, nodeCandidates, editorCandidates) => {\n      const nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        const editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          const toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem,\n            toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    const matchAncestor = (isRoot, startNode, scopes) => {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor$2(startNode, ancestorElem => {\n          if (isElement$1(ancestorElem)) {\n            const {contextToolbars, contextForms} = matchTargetWith(ancestorElem, scopes.inNodeScope);\n            const toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n            return toolbars.length > 0 ? Optional.some({\n              elem: ancestorElem,\n              toolbars\n            }) : Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }, isRoot);\n      }\n    };\n    const lookup$1 = (scopes, editor) => {\n      const rootElem = SugarElement.fromDom(editor.getBody());\n      const isRoot = elem => eq(elem, rootElem);\n      const isOutsideRoot = startNode => !isRoot(startNode) && !contains(rootElem, startNode);\n      const startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(() => matchAncestor(isRoot, startNode, scopes));\n    };\n\n    const categorise = (contextToolbars, navigate) => {\n      const forms = {};\n      const inNodeScope = [];\n      const inEditorScope = [];\n      const formNavigators = {};\n      const lookupTable = {};\n      const registerForm = (key, toolbarSpec) => {\n        const contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(launch => {\n          formNavigators['form:' + key + ''] = {\n            ...toolbarSpec.launch,\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: () => {\n              navigate(contextForm);\n            }\n          };\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      const registerToolbar = (key, toolbarSpec) => {\n        createContextToolbar(toolbarSpec).each(contextToolbar => {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      const keys$1 = keys(contextToolbars);\n      each$1(keys$1, key => {\n        const toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms,\n        inNodeScope,\n        inEditorScope,\n        lookupTable,\n        formNavigators\n      };\n    };\n\n    const forwardSlideEvent = generate$6('forward-slide');\n    const backSlideEvent = generate$6('backward-slide');\n    const changeSlideEvent = generate$6('change-slide-event');\n    const resizingClass = 'tox-pop--resizing';\n    const renderContextToolbar = spec => {\n      const stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: comp => {\n          stack.set([]);\n          InlineView.getContent(comp).each(c => {\n            remove$6(c.element, 'visibility');\n          });\n          remove$2(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), (comp, se) => {\n              if (se.event.raw.propertyName === 'width') {\n                remove$2(comp.element, resizingClass);\n                remove$6(comp.element, 'width');\n              }\n            }),\n            run$1(changeSlideEvent, (comp, se) => {\n              const elem = comp.element;\n              remove$6(elem, 'width');\n              const currentWidth = get$c(elem);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(elem, resizingClass);\n              const newWidth = get$c(elem);\n              set$8(elem, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(newContents => {\n                se.event.focus.bind(f => {\n                  focus$3(f);\n                  return search(elem);\n                }).orThunk(() => {\n                  Keying.focusIn(newContents);\n                  return active$1(getRootNode(elem));\n                });\n              });\n              setTimeout(() => {\n                set$8(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run$1(forwardSlideEvent, (comp, se) => {\n              InlineView.getContent(comp).each(oldContents => {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active$1(getRootNode(comp.element))\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run$1(backSlideEvent, (comp, _se) => {\n              last$1(stack.get()).each(last => {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: comp => last$1(stack.get()).fold(() => spec.onEscape(), _ => {\n              emit(comp, backSlideEvent);\n              return Optional.some(true);\n            })\n          })\n        ]),\n        lazySink: () => Result.value(spec.sink)\n      });\n    };\n\n    const transitionClass = 'tox-pop--transition';\n    const register$9 = (editor, registryContextToolbars, sink, extras) => {\n      const backstage = extras.backstage;\n      const sharedBackstage = backstage.shared;\n      const isTouch = detect$2().deviceType.isTouch;\n      const lastElement = value$2();\n      const lastTrigger = value$2();\n      const lastContextPosition = value$2();\n      const contextbar = build$1(renderContextToolbar({\n        sink,\n        onEscape: () => {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      const getBounds = () => {\n        const position = lastContextPosition.get().getOr('node');\n        const margin = shouldUseInsetLayouts(position) ? 1 : 0;\n        return getContextToolbarBounds(editor, sharedBackstage, position, margin);\n      };\n      const canLaunchToolbar = () => {\n        return !editor.removed && !(isTouch() && backstage.isContextMenuOpen());\n      };\n      const isSameLaunchElement = elem => is$1(lift2(elem, lastElement.get(), eq), true);\n      const shouldContextToolbarHide = () => {\n        if (!canLaunchToolbar()) {\n          return true;\n        } else {\n          const contextToolbarBounds = getBounds();\n          const anchorBounds = is$1(lastContextPosition.get(), 'node') ? getAnchorElementBounds(editor, lastElement.get()) : getSelectionBounds(editor);\n          return contextToolbarBounds.height <= 0 || !isVerticalOverlap(anchorBounds, contextToolbarBounds, 0.01);\n        }\n      };\n      const close = () => {\n        lastElement.clear();\n        lastTrigger.clear();\n        lastContextPosition.clear();\n        InlineView.hide(contextbar);\n      };\n      const hideOrRepositionIfNecessary = () => {\n        if (InlineView.isOpen(contextbar)) {\n          const contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$8(contextBarEle, 'display', 'none');\n          } else {\n            lastTrigger.set(0);\n            InlineView.reposition(contextbar);\n          }\n        }\n      };\n      const wrapInPopDialog = toolbarSpec => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop__dialog']\n        },\n        components: [toolbarSpec],\n        behaviours: derive$1([\n          Keying.config({ mode: 'acyclic' }),\n          config('pop-dialog-wrap-events', [\n            runOnAttached(comp => {\n              editor.shortcuts.add('ctrl+F9', 'focus statusbar', () => Keying.focusIn(comp));\n            }),\n            runOnDetached(_comp => {\n              editor.shortcuts.remove('ctrl+F9');\n            })\n          ])\n        ])\n      });\n      const getScopes = cached(() => categorise(registryContextToolbars, toolbarApi => {\n        const alloySpec = buildToolbar([toolbarApi]);\n        emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n      }));\n      const buildContextToolbarGroups = (allButtons, ctx) => identifyButtons(editor, {\n        buttons: allButtons,\n        toolbar: ctx.items,\n        allowToolbarGroups: false\n      }, extras.backstage, Optional.some(['form:']));\n      const buildContextFormGroups = (ctx, providers) => ContextForm.buildInitGroups(ctx, providers);\n      const buildToolbar = toolbars => {\n        const {buttons} = editor.ui.registry.getAll();\n        const scopes = getScopes();\n        const allButtons = {\n          ...buttons,\n          ...scopes.formNavigators\n        };\n        const toolbarType = getToolbarMode(editor) === ToolbarMode$1.scrolling ? ToolbarMode$1.scrolling : ToolbarMode$1.default;\n        const initGroups = flatten(map$2(toolbars, ctx => ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextFormGroups(ctx, sharedBackstage.providers)));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$6('context-toolbar'),\n          initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: sharedBackstage.providers\n        });\n      };\n      const getAnchor = (position, element) => {\n        const anchorage = position === 'node' ? sharedBackstage.anchors.node(element) : sharedBackstage.anchors.cursor();\n        const anchorLayout = getAnchorLayout(editor, position, isTouch(), {\n          lastElement: lastElement.get,\n          isReposition: () => is$1(lastTrigger.get(), 0),\n          getMode: () => Positioning.getMode(sink)\n        });\n        return deepMerge(anchorage, anchorLayout);\n      };\n      const launchContext = (toolbarApi, elem) => {\n        launchContextToolbar.cancel();\n        if (!canLaunchToolbar()) {\n          return;\n        }\n        const toolbarSpec = buildToolbar(toolbarApi);\n        const position = toolbarApi[0].position;\n        const anchor = getAnchor(position, elem);\n        lastContextPosition.set(position);\n        lastTrigger.set(1);\n        const contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        if (!isSameLaunchElement(elem)) {\n          remove$2(contextBarEle, transitionClass);\n          Positioning.reset(sink, contextbar);\n        }\n        InlineView.showWithinBounds(contextbar, wrapInPopDialog(toolbarSpec), {\n          anchor,\n          transition: {\n            classes: [transitionClass],\n            mode: 'placement'\n          }\n        }, () => Optional.some(getBounds()));\n        elem.fold(lastElement.clear, lastElement.set);\n        if (shouldContextToolbarHide()) {\n          set$8(contextBarEle, 'display', 'none');\n        }\n      };\n      let isDragging = false;\n      const launchContextToolbar = last(() => {\n        if (!editor.hasFocus() || editor.removed || isDragging) {\n          return;\n        }\n        if (has(contextbar.element, transitionClass)) {\n          launchContextToolbar.throttle();\n        } else {\n          const scopes = getScopes();\n          lookup$1(scopes, editor).fold(close, info => {\n            launchContext(info.toolbars, Optional.some(info.elem));\n          });\n        }\n      }, 17);\n      editor.on('init', () => {\n        editor.on('remove', close);\n        editor.on('ScrollContent ScrollWindow ObjectResized ResizeEditor longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent', launchContextToolbar.throttle);\n        editor.on(hideContextToolbarEvent, close);\n        editor.on(showContextToolbarEvent, e => {\n          const scopes = getScopes();\n          get$g(scopes.lookupTable, e.toolbarKey).each(ctx => {\n            launchContext([ctx], someIf(e.target !== editor, e.target));\n            InlineView.getContent(contextbar).each(Keying.focusIn);\n          });\n        });\n        editor.on('focusout', _e => {\n          global$9.setEditorTimeout(editor, () => {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              close();\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', () => {\n          if (editor.mode.isReadOnly()) {\n            close();\n          }\n        });\n        editor.on('AfterProgressState', event => {\n          if (event.state) {\n            close();\n          } else if (editor.hasFocus()) {\n            launchContextToolbar.throttle();\n          }\n        });\n        editor.on('dragstart', () => {\n          isDragging = true;\n        });\n        editor.on('dragend drop', () => {\n          isDragging = false;\n        });\n        editor.on('NodeChange', _e => {\n          search(contextbar.element).fold(launchContextToolbar.throttle, noop);\n        });\n      });\n    };\n\n    const register$8 = editor => {\n      const alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      each$1(alignToolbarButtons, item => {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          icon: item.icon,\n          onAction: onActionExecCommand(editor, item.cmd),\n          onSetup: onSetupStateToggle(editor, item.name)\n        });\n      });\n      editor.ui.registry.addButton('alignnone', {\n        tooltip: 'No alignment',\n        icon: 'align-none',\n        onSetup: onSetupEditableToggle(editor),\n        onAction: onActionExecCommand(editor, 'JustifyNone')\n      });\n    };\n\n    const registerController = (editor, spec) => {\n      const getMenuItems = () => {\n        const options = spec.getOptions(editor);\n        const initial = spec.getCurrent(editor).map(spec.hash);\n        const current = value$2();\n        return map$2(options, value => ({\n          type: 'togglemenuitem',\n          text: spec.display(value),\n          onSetup: api => {\n            const setActive = active => {\n              if (active) {\n                current.on(oldApi => oldApi.setActive(false));\n                current.set(api);\n              }\n              api.setActive(active);\n            };\n            setActive(is$1(initial, spec.hash(value)));\n            const unbindWatcher = spec.watcher(editor, value, setActive);\n            return () => {\n              current.clear();\n              unbindWatcher();\n            };\n          },\n          onAction: () => spec.setCurrent(editor, value)\n        }));\n      };\n      editor.ui.registry.addMenuButton(spec.name, {\n        tooltip: spec.text,\n        icon: spec.icon,\n        fetch: callback => callback(getMenuItems()),\n        onSetup: spec.onToolbarSetup\n      });\n      editor.ui.registry.addNestedMenuItem(spec.name, {\n        type: 'nestedmenuitem',\n        text: spec.text,\n        getSubmenuItems: getMenuItems,\n        onSetup: spec.onMenuSetup\n      });\n    };\n    const lineHeightSpec = editor => ({\n      name: 'lineheight',\n      text: 'Line height',\n      icon: 'line-height',\n      getOptions: getLineHeightFormats,\n      hash: input => normalise(input, [\n        'fixed',\n        'relative',\n        'empty'\n      ]).getOr(input),\n      display: identity,\n      watcher: (editor, value, callback) => editor.formatter.formatChanged('lineheight', callback, false, { value }).unbind,\n      getCurrent: editor => Optional.from(editor.queryCommandValue('LineHeight')),\n      setCurrent: (editor, value) => editor.execCommand('LineHeight', false, value),\n      onToolbarSetup: onSetupEditableToggle(editor),\n      onMenuSetup: onSetupEditableToggle(editor)\n    });\n    const languageSpec = editor => {\n      const settingsOpt = Optional.from(getContentLanguages(editor));\n      return settingsOpt.map(settings => ({\n        name: 'language',\n        text: 'Language',\n        icon: 'language',\n        getOptions: constant$1(settings),\n        hash: input => isUndefined(input.customCode) ? input.code : `${ input.code }/${ input.customCode }`,\n        display: input => input.title,\n        watcher: (editor, value, callback) => {\n          var _a;\n          return editor.formatter.formatChanged('lang', callback, false, {\n            value: value.code,\n            customValue: (_a = value.customCode) !== null && _a !== void 0 ? _a : null\n          }).unbind;\n        },\n        getCurrent: editor => {\n          const node = SugarElement.fromDom(editor.selection.getNode());\n          return closest$4(node, n => Optional.some(n).filter(isElement$1).bind(ele => {\n            const codeOpt = getOpt(ele, 'lang');\n            return codeOpt.map(code => {\n              const customCode = getOpt(ele, 'data-mce-lang').getOrUndefined();\n              return {\n                code,\n                customCode,\n                title: ''\n              };\n            });\n          }));\n        },\n        setCurrent: (editor, lang) => editor.execCommand('Lang', false, lang),\n        onToolbarSetup: api => {\n          const unbinder = unbindable();\n          api.setActive(editor.formatter.match('lang', {}, undefined, true));\n          unbinder.set(editor.formatter.formatChanged('lang', api.setActive, true));\n          return composeUnbinders(unbinder.clear, onSetupEditableToggle(editor)(api));\n        },\n        onMenuSetup: onSetupEditableToggle(editor)\n      }));\n    };\n    const register$7 = editor => {\n      registerController(editor, lineHeightSpec(editor));\n      languageSpec(editor).each(spec => registerController(editor, spec));\n    };\n\n    const register$6 = (editor, backstage) => {\n      createAlignMenu(editor, backstage);\n      createFontFamilyMenu(editor, backstage);\n      createStylesMenu(editor, backstage);\n      createBlocksMenu(editor, backstage);\n      createFontSizeMenu(editor, backstage);\n    };\n\n    const onSetupOutdentState = editor => onSetupEvent(editor, 'NodeChange', api => {\n      api.setEnabled(editor.queryCommandState('outdent') && editor.selection.isEditable());\n    });\n    const registerButtons$2 = editor => {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: onSetupOutdentState(editor),\n        onAction: onActionExecCommand(editor, 'outdent')\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onSetup: onSetupEditableToggle(editor),\n        onAction: onActionExecCommand(editor, 'indent')\n      });\n    };\n    const register$5 = editor => {\n      registerButtons$2(editor);\n    };\n\n    const makeSetupHandler = (editor, pasteAsText) => api => {\n      api.setActive(pasteAsText.get());\n      const pastePlainTextToggleHandler = e => {\n        pasteAsText.set(e.state);\n        api.setActive(e.state);\n      };\n      editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n      return composeUnbinders(() => editor.off('PastePlainTextToggle', pastePlainTextToggleHandler), onSetupEditableToggle(editor)(api));\n    };\n    const register$4 = editor => {\n      const pasteAsText = Cell(getPasteAsText(editor));\n      const onAction = () => editor.execCommand('mceTogglePlainTextPaste');\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction,\n        onSetup: makeSetupHandler(editor, pasteAsText)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        icon: 'paste-text',\n        onAction,\n        onSetup: makeSetupHandler(editor, pasteAsText)\n      });\n    };\n\n    const onActionToggleFormat = (editor, fmt) => () => {\n      editor.execCommand('mceToggleFormat', false, fmt);\n    };\n    const registerFormatButtons = editor => {\n      global$1.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], (btn, _idx) => {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupStateToggle(editor, btn.name),\n          onAction: onActionToggleFormat(editor, btn.name)\n        });\n      });\n      for (let i = 1; i <= 6; i++) {\n        const name = 'h' + i;\n        editor.ui.registry.addToggleButton(name, {\n          text: name.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupStateToggle(editor, name),\n          onAction: onActionToggleFormat(editor, name)\n        });\n      }\n    };\n    const registerCommandButtons = editor => {\n      global$1.each([\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'print',\n          text: 'Print',\n          action: 'mcePrint',\n          icon: 'print'\n        }\n      ], btn => {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n      global$1.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        },\n        {\n          name: 'hr',\n          text: 'Horizontal line',\n          action: 'InsertHorizontalRule',\n          icon: 'horizontal-rule'\n        }\n      ], btn => {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupEditableToggle(editor),\n          onAction: onActionExecCommand(editor, btn.action)\n        });\n      });\n    };\n    const registerCommandToggleButtons = editor => {\n      global$1.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], btn => {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: onActionExecCommand(editor, btn.action),\n          onSetup: onSetupStateToggle(editor, btn.name)\n        });\n      });\n    };\n    const registerButtons$1 = editor => {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    const registerMenuItems$2 = editor => {\n      global$1.each([\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        },\n        {\n          name: 'print',\n          text: 'Print...',\n          action: 'mcePrint',\n          icon: 'print',\n          shortcut: 'Meta+P'\n        }\n      ], menuitem => {\n        editor.ui.registry.addMenuItem(menuitem.name, {\n          text: menuitem.text,\n          icon: menuitem.icon,\n          shortcut: menuitem.shortcut,\n          onAction: onActionExecCommand(editor, menuitem.action)\n        });\n      });\n      global$1.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'hr',\n          text: 'Horizontal line',\n          action: 'InsertHorizontalRule',\n          icon: 'horizontal-rule'\n        }\n      ], menuitem => {\n        editor.ui.registry.addMenuItem(menuitem.name, {\n          text: menuitem.text,\n          icon: menuitem.icon,\n          shortcut: menuitem.shortcut,\n          onSetup: onSetupEditableToggle(editor),\n          onAction: onActionExecCommand(editor, menuitem.action)\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onSetup: onSetupEditableToggle(editor),\n        onAction: onActionToggleFormat(editor, 'code')\n      });\n    };\n    const register$3 = editor => {\n      registerButtons$1(editor);\n      registerMenuItems$2(editor);\n    };\n\n    const onSetupUndoRedoState = (editor, type) => onSetupEvent(editor, 'Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', api => {\n      api.setEnabled(!editor.mode.isReadOnly() && editor.undoManager[type]());\n    });\n    const registerMenuItems$1 = editor => {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    const registerButtons = editor => {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        enabled: false,\n        onSetup: onSetupUndoRedoState(editor, 'hasUndo'),\n        onAction: onActionExecCommand(editor, 'undo')\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        enabled: false,\n        onSetup: onSetupUndoRedoState(editor, 'hasRedo'),\n        onAction: onActionExecCommand(editor, 'redo')\n      });\n    };\n    const register$2 = editor => {\n      registerMenuItems$1(editor);\n      registerButtons(editor);\n    };\n\n    const onSetupVisualAidState = editor => onSetupEvent(editor, 'VisualAid', api => {\n      api.setActive(editor.hasVisual);\n    });\n    const registerMenuItems = editor => {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: onSetupVisualAidState(editor),\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    const registerToolbarButton = editor => {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: onActionExecCommand(editor, 'mceToggleVisualAid')\n      });\n    };\n    const register$1 = editor => {\n      registerToolbarButton(editor);\n      registerMenuItems(editor);\n    };\n\n    const setup$6 = (editor, backstage) => {\n      register$8(editor);\n      register$3(editor);\n      register$6(editor, backstage);\n      register$2(editor);\n      register$c(editor);\n      register$1(editor);\n      register$5(editor);\n      register$7(editor);\n      register$4(editor);\n    };\n\n    const patchPipeConfig = config => isString(config) ? config.split(/[ ,]/) : config;\n    const option = name => editor => editor.options.get(name);\n    const register = editor => {\n      const registerOption = editor.options.register;\n      registerOption('contextmenu_avoid_overlap', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('contextmenu_never_use_native', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('contextmenu', {\n        processor: value => {\n          if (value === false) {\n            return {\n              value: [],\n              valid: true\n            };\n          } else if (isString(value) || isArrayOf(value, isString)) {\n            return {\n              value: patchPipeConfig(value),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false or a string.'\n            };\n          }\n        },\n        default: 'link linkchecker image editimage table spellchecker configurepermanentpen'\n      });\n    };\n    const shouldNeverUseNative = option('contextmenu_never_use_native');\n    const getAvoidOverlapSelector = option('contextmenu_avoid_overlap');\n    const isContextMenuDisabled = editor => getContextMenu(editor).length === 0;\n    const getContextMenu = editor => {\n      const contextMenus = editor.ui.registry.getAll().contextMenus;\n      const contextMenu = editor.options.get('contextmenu');\n      if (editor.options.isSet('contextmenu')) {\n        return contextMenu;\n      } else {\n        return filter$2(contextMenu, item => has$2(contextMenus, item));\n      }\n    };\n\n    const nu = (x, y) => ({\n      type: 'makeshift',\n      x,\n      y\n    });\n    const transpose = (pos, dx, dy) => {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    const isTouchEvent$1 = e => e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    const fromPageXY = e => {\n      if (isTouchEvent$1(e)) {\n        const touch = e.touches[0];\n        return nu(touch.pageX, touch.pageY);\n      } else {\n        return nu(e.pageX, e.pageY);\n      }\n    };\n    const fromClientXY = e => {\n      if (isTouchEvent$1(e)) {\n        const touch = e.touches[0];\n        return nu(touch.clientX, touch.clientY);\n      } else {\n        return nu(e.clientX, e.clientY);\n      }\n    };\n    const transposeContentAreaContainer = (element, pos) => {\n      const containerPos = global$7.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    const getPointAnchor = (editor, e) => {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    const getSelectionAnchor = editor => {\n      return {\n        type: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    const getNodeAnchor = editor => ({\n      type: 'node',\n      node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n      root: SugarElement.fromDom(editor.getBody())\n    });\n    const getAnchorSpec$1 = (editor, e, anchorType) => {\n      switch (anchorType) {\n      case 'node':\n        return getNodeAnchor(editor);\n      case 'point':\n        return getPointAnchor(editor, e);\n      case 'selection':\n        return getSelectionAnchor(editor);\n      }\n    };\n\n    const initAndShow$1 = (editor, e, buildMenu, backstage, contextmenu, anchorType) => {\n      const items = buildMenu();\n      const anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n        isHorizontalMenu: false,\n        search: Optional.none()\n      }).map(menuData => {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, { anchor: anchorSpec }, {\n          menu: { markers: markers('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    const layouts = {\n      onLtr: () => [\n        south$2,\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2,\n        north$2,\n        north,\n        south,\n        northeast,\n        southeast,\n        northwest,\n        southwest\n      ],\n      onRtl: () => [\n        south$2,\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2,\n        north$2,\n        north,\n        south,\n        northwest,\n        southwest,\n        northeast,\n        southeast\n      ]\n    };\n    const bubbleSize = 12;\n    const bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    const isTouchWithinSelection = (editor, e) => {\n      const selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        const touch = e.touches[0];\n        const rng = selection.getRng();\n        const rngRectOpt = getFirstRect(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(rngRect => rngRect.left <= touch.clientX && rngRect.right >= touch.clientX && rngRect.top <= touch.clientY && rngRect.bottom >= touch.clientY);\n      }\n    };\n    const setupiOSOverrides = editor => {\n      const originalSelection = editor.selection.getRng();\n      const selectionReset = () => {\n        global$9.setEditorTimeout(editor, () => {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      const preventMousedown = e => {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      const clearSelectionReset = () => unbindEventListeners();\n      editor.once('longpresscancel', clearSelectionReset);\n      const unbindEventListeners = () => {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    const getAnchorSpec = (editor, e, anchorType) => {\n      const anchorSpec = getAnchorSpec$1(editor, e, anchorType);\n      const bubbleYOffset = anchorType === 'point' ? bubbleSize : 0;\n      return {\n        bubble: nu$5(0, bubbleYOffset, bubbleAlignments),\n        layouts,\n        overrides: {\n          maxWidthFunction: expandable(),\n          maxHeightFunction: expandable$1()\n        },\n        ...anchorSpec\n      };\n    };\n    const show = (editor, e, items, backstage, contextmenu, anchorType, highlightImmediately) => {\n      const anchorSpec = getAnchorSpec(editor, e, anchorType);\n      build(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, {\n        isHorizontalMenu: true,\n        search: Optional.none()\n      }).map(menuData => {\n        e.preventDefault();\n        const highlightOnOpen = highlightImmediately ? HighlightOnOpen.HighlightMenuAndItem : HighlightOnOpen.HighlightNone;\n        InlineView.showMenuWithinBounds(contextmenu, { anchor: anchorSpec }, {\n          menu: {\n            markers: markers('normal'),\n            highlightOnOpen\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, () => Optional.some(getContextToolbarBounds(editor, backstage.shared, anchorType === 'node' ? 'node' : 'selection')));\n        editor.dispatch(hideContextToolbarEvent);\n      });\n    };\n    const initAndShow = (editor, e, buildMenu, backstage, contextmenu, anchorType) => {\n      const detection = detect$2();\n      const isiOS = detection.os.isiOS();\n      const isMacOS = detection.os.isMacOS();\n      const isAndroid = detection.os.isAndroid();\n      const isTouch = detection.deviceType.isTouch();\n      const shouldHighlightImmediately = () => !(isAndroid || isiOS || isMacOS && isTouch);\n      const open = () => {\n        const items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, anchorType, shouldHighlightImmediately());\n      };\n      if ((isMacOS || isiOS) && anchorType !== 'node') {\n        const openiOS = () => {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS();\n        } else {\n          editor.once('selectionchange', openiOS);\n          editor.once('touchend', () => editor.off('selectionchange', openiOS));\n        }\n      } else {\n        open();\n      }\n    };\n\n    const isSeparator = item => isString(item) ? item === '|' : item.type === 'separator';\n    const separator = { type: 'separator' };\n    const makeContextItem = item => {\n      const commonMenuItem = item => ({\n        text: item.text,\n        icon: item.icon,\n        enabled: item.enabled,\n        shortcut: item.shortcut\n      });\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            ...commonMenuItem(item),\n            getSubmenuItems: () => {\n              const items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map$2(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          const commonItem = item;\n          return {\n            type: 'menuitem',\n            ...commonMenuItem(commonItem),\n            onAction: noarg(commonItem.onAction)\n          };\n        }\n      }\n    };\n    const addContextMenuGroup = (xs, groupItems) => {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      const lastMenuItem = last$1(xs).filter(item => !isSeparator(item));\n      const before = lastMenuItem.fold(() => [], _ => [separator]);\n      return xs.concat(before).concat(groupItems).concat([separator]);\n    };\n    const generateContextMenu = (contextMenus, menuConfig, selectedElement) => {\n      const sections = foldl(menuConfig, (acc, name) => {\n        return get$g(contextMenus, name.toLowerCase()).map(menu => {\n          const items = menu.update(selectedElement);\n          if (isString(items) && isNotEmpty(trim$1(items))) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (isArray(items) && items.length > 0) {\n            const allItems = map$2(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        }).getOrThunk(() => acc.concat([name]));\n      }, []);\n      if (sections.length > 0 && isSeparator(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    const isNativeOverrideKeyEvent = (editor, e) => e.ctrlKey && !shouldNeverUseNative(editor);\n    const isTouchEvent = e => e.type === 'longpress' || has$2(e, 'touches');\n    const isTriggeredByKeyboard = (editor, e) => !isTouchEvent(e) && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    const getSelectedElement = (editor, e) => isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    const getAnchorType = (editor, e) => {\n      const selector = getAvoidOverlapSelector(editor);\n      const anchorType = isTriggeredByKeyboard(editor, e) ? 'selection' : 'point';\n      if (isNotEmpty(selector)) {\n        const target = getSelectedElement(editor, e);\n        const selectorExists = closest(SugarElement.fromDom(target), selector);\n        return selectorExists ? 'node' : anchorType;\n      } else {\n        return anchorType;\n      }\n    };\n    const setup$5 = (editor, lazySink, backstage) => {\n      const detection = detect$2();\n      const isTouch = detection.deviceType.isTouch;\n      const contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink,\n        onEscape: () => editor.focus(),\n        onShow: () => backstage.setContextMenuState(true),\n        onHide: () => backstage.setContextMenuState(false),\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run$1(dismissRequested(), (comp, _se) => {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      const hideContextMenu = () => InlineView.hide(contextmenu);\n      const showContextMenu = e => {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        const anchorType = getAnchorType(editor, e);\n        const buildMenu = () => {\n          const selectedElement = getSelectedElement(editor, e);\n          const registry = editor.ui.registry.getAll();\n          const menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        const initAndShow$2 = isTouch() ? initAndShow : initAndShow$1;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, anchorType);\n      };\n      editor.on('init', () => {\n        const hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    const adt = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    const subtract = change => point => point.translate(-change.left, -change.top);\n    const add = change => point => point.translate(change.left, change.top);\n    const transform = changes => (x, y) => foldl(changes, (rest, f) => f(rest), SugarPosition(x, y));\n    const asFixed = (coord, scroll, origin) => coord.fold(transform([\n      add(origin),\n      subtract(scroll)\n    ]), transform([subtract(scroll)]), transform([]));\n    const asAbsolute = (coord, scroll, origin) => coord.fold(transform([add(origin)]), transform([]), transform([add(scroll)]));\n    const asOffset = (coord, scroll, origin) => coord.fold(transform([]), transform([subtract(origin)]), transform([\n      add(scroll),\n      subtract(origin)\n    ]));\n    const withinRange = (coord1, coord2, xRange, yRange, scroll, origin) => {\n      const a1 = asAbsolute(coord1, scroll, origin);\n      const a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    const getDeltas = (coord1, coord2, xRange, yRange, scroll, origin) => {\n      const a1 = asAbsolute(coord1, scroll, origin);\n      const a2 = asAbsolute(coord2, scroll, origin);\n      const left = Math.abs(a1.left - a2.left);\n      const top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    const toStyles = (coord, scroll, origin) => {\n      const stylesOpt = coord.fold((x, y) => ({\n        position: Optional.some('absolute'),\n        left: Optional.some(x + 'px'),\n        top: Optional.some(y + 'px')\n      }), (x, y) => ({\n        position: Optional.some('absolute'),\n        left: Optional.some(x - origin.left + 'px'),\n        top: Optional.some(y - origin.top + 'px')\n      }), (x, y) => ({\n        position: Optional.some('fixed'),\n        left: Optional.some(x + 'px'),\n        top: Optional.some(y + 'px')\n      }));\n      return {\n        right: Optional.none(),\n        bottom: Optional.none(),\n        ...stylesOpt\n      };\n    };\n    const translate = (coord, deltaX, deltaY) => coord.fold((x, y) => offset(x + deltaX, y + deltaY), (x, y) => absolute(x + deltaX, y + deltaY), (x, y) => fixed(x + deltaX, y + deltaY));\n    const absorb = (partialCoord, originalCoord, scroll, origin) => {\n      const absorbOne = (stencil, nu) => (optX, optY) => {\n        const original = stencil(originalCoord, scroll, origin);\n        return nu(optX.getOr(original.left), optY.getOr(original.top));\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute), absorbOne(asFixed, fixed));\n    };\n    const offset = adt.offset;\n    const absolute = adt.absolute;\n    const fixed = adt.fixed;\n\n    const parseAttrToInt = (element, name) => {\n      const value = get$f(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    const get = (component, snapsInfo) => {\n      const element = component.element;\n      const x = parseAttrToInt(element, snapsInfo.leftAttr);\n      const y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    const set = (component, snapsInfo, pt) => {\n      const element = component.element;\n      set$9(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$9(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    const clear = (component, snapsInfo) => {\n      const element = component.element;\n      remove$7(element, snapsInfo.leftAttr);\n      remove$7(element, snapsInfo.topAttr);\n    };\n\n    const getCoords = (component, snapInfo, coord, delta) => get(component, snapInfo).fold(() => coord, fixed$1 => fixed(fixed$1.left + delta.left, fixed$1.top + delta.top));\n    const moveOrSnap = (component, snapInfo, coord, delta, scroll, origin) => {\n      const newCoord = getCoords(component, snapInfo, coord, delta);\n      const snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      const fixedCoord = asFixed(newCoord, scroll, origin);\n      set(component, snapInfo, fixedCoord);\n      return snap.fold(() => ({\n        coord: fixed(fixedCoord.left, fixedCoord.top),\n        extra: Optional.none()\n      }), spanned => ({\n        coord: spanned.output,\n        extra: spanned.extra\n      }));\n    };\n    const stopDrag = (component, snapInfo) => {\n      clear(component, snapInfo);\n    };\n    const findMatchingSnap = (snaps, newCoord, scroll, origin) => findMap(snaps, snap => {\n      const sensor = snap.sensor;\n      const inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n      return inRange ? Optional.some({\n        output: absorb(snap.output, newCoord, scroll, origin),\n        extra: snap.extra\n      }) : Optional.none();\n    });\n    const findClosestSnap = (component, snapInfo, newCoord, scroll, origin) => {\n      const snaps = snapInfo.getSnapPoints(component);\n      const matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(() => {\n        const bestSnap = foldl(snaps, (acc, snap) => {\n          const sensor = snap.sensor;\n          const deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(() => ({\n            deltas: Optional.some(deltas),\n            snap: Optional.some(snap)\n          }), bestDeltas => {\n            const currAvg = (deltas.left + deltas.top) / 2;\n            const bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(snap => ({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }));\n      });\n    };\n    const findSnap = (component, snapInfo, newCoord, scroll, origin) => {\n      const snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    const snapTo$1 = (snap, scroll, origin) => ({\n      coord: absorb(snap.output, snap.output, scroll, origin),\n      extra: snap.extra\n    });\n\n    const snapTo = (component, dragConfig, _state, snap) => {\n      const target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        const doc = owner$4(component.element);\n        const scroll = get$b(doc);\n        const origin = getOrigin(target);\n        const snapPin = snapTo$1(snap, scroll, origin);\n        const styles = toStyles(snapPin.coord, scroll, origin);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo\n    });\n\n    const initialAttribute = 'data-initial-z-index';\n    const resetZIndex = blocker => {\n      parent(blocker.element).filter(isElement$1).each(root => {\n        getOpt(root, initialAttribute).fold(() => remove$6(root, 'z-index'), zIndex => set$8(root, 'z-index', zIndex));\n        remove$7(root, initialAttribute);\n      });\n    };\n    const changeZIndex = blocker => {\n      parent(blocker.element).filter(isElement$1).each(root => {\n        getRaw(root, 'z-index').each(zindex => {\n          set$9(root, initialAttribute, zindex);\n        });\n        set$8(root, 'z-index', get$e(blocker.element, 'z-index'));\n      });\n    };\n    const instigate = (anyComponent, blocker) => {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    const discard = blocker => {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    const createComponent = (component, blockerClass, blockerEvents) => component.getSystem().build(Container.sketch({\n      dom: {\n        styles: {\n          'left': '0px',\n          'top': '0px',\n          'width': '100%',\n          'height': '100%',\n          'position': 'fixed',\n          'z-index': '1000000000000000'\n        },\n        classes: [blockerClass]\n      },\n      events: blockerEvents\n    }));\n\n    var SnapSchema = optionObjOf('snaps', [\n      required$1('getSnapPoints'),\n      onHandler('onSensor'),\n      required$1('leftAttr'),\n      required$1('topAttr'),\n      defaulted('lazyViewport', win),\n      defaulted('mustSnap', false)\n    ]);\n\n    const schema$6 = [\n      defaulted('useFixed', never),\n      required$1('blockerClass'),\n      defaulted('getTarget', identity),\n      defaulted('onDrag', noop),\n      defaulted('repositionTarget', true),\n      defaulted('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    const getCurrentCoord = target => lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), (left, top, position) => {\n      const nu = position === 'fixed' ? fixed : offset;\n      return nu(parseInt(left, 10), parseInt(top, 10));\n    }).getOrThunk(() => {\n      const location = absolute$3(target);\n      return absolute(location.left, location.top);\n    });\n    const clampCoords = (component, coords, scroll, origin, startData) => {\n      const bounds = startData.bounds;\n      const absoluteCoord = asAbsolute(coords, scroll, origin);\n      const newX = clamp(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      const newY = clamp(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      const newCoords = absolute(newX, newY);\n      return coords.fold(() => {\n        const offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, constant$1(newCoords), () => {\n        const fixed$1 = asFixed(newCoords, scroll, origin);\n        return fixed(fixed$1.left, fixed$1.top);\n      });\n    };\n    const calcNewCoord = (component, optSnaps, currentCoord, scroll, origin, delta, startData) => {\n      const newCoord = optSnaps.fold(() => {\n        const translated = translate(currentCoord, delta.left, delta.top);\n        const fixedCoord = asFixed(translated, scroll, origin);\n        return fixed(fixedCoord.left, fixedCoord.top);\n      }, snapInfo => {\n        const snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(extra => {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    const dragBy = (component, dragConfig, startData, delta) => {\n      const target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        const doc = owner$4(component.element);\n        const scroll = get$b(doc);\n        const origin = getOrigin(target);\n        const currentCoord = getCurrentCoord(target);\n        const newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll, origin, delta, startData);\n        const styles = toStyles(newCoord, scroll, origin);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    const calcStartData = (dragConfig, comp) => ({\n      bounds: dragConfig.getBounds(),\n      height: getOuter$2(comp.element),\n      width: getOuter$1(comp.element)\n    });\n    const move = (component, dragConfig, dragState, dragMode, event) => {\n      const delta = dragState.update(dragMode, event);\n      const dragStartData = dragState.getStartData().getOrThunk(() => calcStartData(dragConfig, component));\n      delta.each(dlt => {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    const stop = (component, blocker, dragConfig, dragState) => {\n      blocker.each(discard);\n      dragConfig.snaps.each(snapInfo => {\n        stopDrag(component, snapInfo);\n      });\n      const target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    const handlers = events => (dragConfig, dragState) => {\n      const updateStartState = comp => {\n        dragState.setStartData(calcStartData(dragConfig, comp));\n      };\n      return derive$2([\n        run$1(windowScroll(), comp => {\n          dragState.getStartData().each(() => updateStartState(comp));\n        }),\n        ...events(dragConfig, dragState, updateStartState)\n      ]);\n    };\n\n    const init$3 = dragApi => derive$2([\n      run$1(mousedown(), dragApi.forceDrop),\n      run$1(mouseup(), dragApi.drop),\n      run$1(mousemove(), (comp, simulatedEvent) => {\n        dragApi.move(simulatedEvent.event);\n      }),\n      run$1(mouseout(), dragApi.delayDrop)\n    ]);\n\n    const getData$1 = event => Optional.from(SugarPosition(event.x, event.y));\n    const getDelta$1 = (old, nu) => SugarPosition(nu.left - old.left, nu.top - old.top);\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    const events$3 = (dragConfig, dragState, updateStartState) => [run$1(mousedown(), (component, simulatedEvent) => {\n        const raw = simulatedEvent.event.raw;\n        if (raw.button !== 0) {\n          return;\n        }\n        simulatedEvent.stop();\n        const stop$1 = () => stop(component, Optional.some(blocker), dragConfig, dragState);\n        const delayDrop = DelayedFunction(stop$1, 200);\n        const dragApi = {\n          drop: stop$1,\n          delayDrop: delayDrop.schedule,\n          forceDrop: stop$1,\n          move: event => {\n            delayDrop.cancel();\n            move(component, dragConfig, dragState, MouseData, event);\n          }\n        };\n        const blocker = createComponent(component, dragConfig.blockerClass, init$3(dragApi));\n        const start = () => {\n          updateStartState(component);\n          instigate(component, blocker);\n        };\n        start();\n      })];\n    const schema$5 = [\n      ...schema$6,\n      output$1('dragger', { handlers: handlers(events$3) })\n    ];\n\n    const init$2 = dragApi => derive$2([\n      run$1(touchstart(), dragApi.forceDrop),\n      run$1(touchend(), dragApi.drop),\n      run$1(touchcancel(), dragApi.drop),\n      run$1(touchmove(), (comp, simulatedEvent) => {\n        dragApi.move(simulatedEvent.event);\n      })\n    ]);\n\n    const getDataFrom = touches => {\n      const touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    const getData = event => {\n      const raw = event.raw;\n      const touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    const getDelta = (old, nu) => SugarPosition(nu.left - old.left, nu.top - old.top);\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData,\n        getDelta: getDelta\n    });\n\n    const events$2 = (dragConfig, dragState, updateStartState) => {\n      const blockerSingleton = value$2();\n      const stopBlocking = component => {\n        stop(component, blockerSingleton.get(), dragConfig, dragState);\n        blockerSingleton.clear();\n      };\n      return [\n        run$1(touchstart(), (component, simulatedEvent) => {\n          simulatedEvent.stop();\n          const stop = () => stopBlocking(component);\n          const dragApi = {\n            drop: stop,\n            delayDrop: noop,\n            forceDrop: stop,\n            move: event => {\n              move(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          const blocker = createComponent(component, dragConfig.blockerClass, init$2(dragApi));\n          blockerSingleton.set(blocker);\n          const start = () => {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run$1(touchmove(), (component, simulatedEvent) => {\n          simulatedEvent.stop();\n          move(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run$1(touchend(), (component, simulatedEvent) => {\n          simulatedEvent.stop();\n          stopBlocking(component);\n        }),\n        run$1(touchcancel(), stopBlocking)\n      ];\n    };\n    const schema$4 = [\n      ...schema$6,\n      output$1('dragger', { handlers: handlers(events$2) })\n    ];\n\n    const events$1 = (dragConfig, dragState, updateStartState) => [\n      ...events$3(dragConfig, dragState, updateStartState),\n      ...events$2(dragConfig, dragState, updateStartState)\n    ];\n    const schema$3 = [\n      ...schema$6,\n      output$1('dragger', { handlers: handlers(events$1) })\n    ];\n\n    const mouse = schema$5;\n    const touch = schema$4;\n    const mouseOrTouch = schema$3;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    const init$1 = () => {\n      let previous = Optional.none();\n      let startData = Optional.none();\n      const reset = () => {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      const calculateDelta = (mode, nu) => {\n        const result = previous.map(old => mode.getDelta(old, nu));\n        previous = Optional.some(nu);\n        return result;\n      };\n      const update = (mode, dragEvent) => mode.getData(dragEvent).bind(nuData => calculateDelta(mode, nuData));\n      const setStartData = data => {\n        startData = Optional.some(data);\n      };\n      const getStartData = () => startData;\n      const readState = constant$1({});\n      return nu$8({\n        readState,\n        reset,\n        update,\n        getStartData,\n        setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$1\n    });\n\n    const Dragging = createModes({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: (dragConfig, dragState) => {\n          const dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: sConfig => ({\n          sensor: sConfig.sensor,\n          range: sConfig.range,\n          output: sConfig.output,\n          extra: Optional.from(sConfig.extra)\n        })\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    const snapWidth = 40;\n    const snapOffset = snapWidth / 2;\n    const calcSnap = (selectorOpt, td, x, y, width, height) => selectorOpt.fold(() => Dragging.snap({\n      sensor: absolute(x - snapOffset, y - snapOffset),\n      range: SugarPosition(width, height),\n      output: absolute(Optional.some(x), Optional.some(y)),\n      extra: { td }\n    }), selectorHandle => {\n      const sensorLeft = x - snapOffset;\n      const sensorTop = y - snapOffset;\n      const sensorWidth = snapWidth;\n      const sensorHeight = snapWidth;\n      const rect = selectorHandle.element.dom.getBoundingClientRect();\n      return Dragging.snap({\n        sensor: absolute(sensorLeft, sensorTop),\n        range: SugarPosition(sensorWidth, sensorHeight),\n        output: absolute(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n        extra: { td }\n      });\n    });\n    const getSnapsConfig = (getSnapPoints, cell, onChange) => {\n      const isSameCell = (cellOpt, td) => cellOpt.exists(currentTd => eq(currentTd, td));\n      return {\n        getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: (component, extra) => {\n          const td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(td);\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    const createSelector = snaps => record(Button.sketch({\n      dom: {\n        tag: 'div',\n        classes: ['tox-selector']\n      },\n      buttonBehaviours: derive$1([\n        Dragging.config({\n          mode: 'mouseOrTouch',\n          blockerClass: 'blocker',\n          snaps\n        }),\n        Unselecting.config({})\n      ]),\n      eventOrder: {\n        mousedown: [\n          'dragging',\n          'alloy.base.behaviour'\n        ],\n        touchstart: [\n          'dragging',\n          'alloy.base.behaviour'\n        ]\n      }\n    }));\n    const setup$4 = (editor, sink) => {\n      const tlTds = Cell([]);\n      const brTds = Cell([]);\n      const isVisible = Cell(false);\n      const startCell = value$2();\n      const finishCell = value$2();\n      const getTopLeftSnap = td => {\n        const box = absolute$2(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      const getTopLeftSnaps = () => map$2(tlTds.get(), td => getTopLeftSnap(td));\n      const getBottomRightSnap = td => {\n        const box = absolute$2(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      const getBottomRightSnaps = () => map$2(brTds.get(), td => getBottomRightSnap(td));\n      const topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, start => {\n        finishCell.get().each(finish => {\n          editor.dispatch('TableSelectorChange', {\n            start,\n            finish\n          });\n        });\n      });\n      const bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, finish => {\n        startCell.get().each(start => {\n          editor.dispatch('TableSelectorChange', {\n            start,\n            finish\n          });\n        });\n      });\n      const memTopLeft = createSelector(topLeftSnaps);\n      const memBottomRight = createSelector(bottomRightSnaps);\n      const topLeft = build$1(memTopLeft.asSpec());\n      const bottomRight = build$1(memBottomRight.asSpec());\n      const showOrHideHandle = (selector, cell, isAbove, isBelow) => {\n        const cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        const viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        const aboveViewport = isAbove(cellRect);\n        const belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$8(selector.element, 'display', 'none');\n        }\n      };\n      const snapTo = (selector, cell, getSnapConfig, pos) => {\n        const snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        const isAbove = rect => rect[pos] < 0;\n        const isBelow = (rect, viewportHeight) => rect[pos] > viewportHeight;\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      const snapTopLeft = cell => snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      const snapLastTopLeft = () => startCell.get().each(snapTopLeft);\n      const snapBottomRight = cell => snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      const snapLastBottomRight = () => finishCell.get().each(snapBottomRight);\n      if (detect$2().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', e => {\n          if (!isVisible.get()) {\n            attach(sink, topLeft);\n            attach(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(e.start);\n          finishCell.set(e.finish);\n          e.otherCells.each(otherCells => {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', () => {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', () => {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.clear();\n          finishCell.clear();\n        });\n      }\n    };\n\n    var Logo = \"<svg width=\\\"50px\\\" height=\\\"16px\\\" viewBox=\\\"0 0 50 16\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z\\\"/>\\n</svg>\\n\";\n\n    const isHidden = elm => elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus') || elm.getAttribute('data-mce-type') === 'bookmark';\n    const renderElementPath = (editor, settings, providersBackstage) => {\n      var _a;\n      const delimiter = (_a = settings.delimiter) !== null && _a !== void 0 ? _a : '\\u203A';\n      const renderElement = (name, element, index) => Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path-item'],\n          attributes: {\n            'data-index': index,\n            'aria-level': index + 1\n          }\n        },\n        components: [text$2(name)],\n        action: _btn => {\n          editor.focus();\n          editor.selection.select(element);\n          editor.nodeChanged();\n        },\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig()\n        ])\n      });\n      const renderDivider = () => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path-divider'],\n          attributes: { 'aria-hidden': true }\n        },\n        components: [text$2(` ${ delimiter } `)]\n      });\n      const renderPathData = data => foldl(data, (acc, path, index) => {\n        const element = renderElement(path.name, path.element, index);\n        if (index === 0) {\n          return acc.concat([element]);\n        } else {\n          return acc.concat([\n            renderDivider(),\n            element\n          ]);\n        }\n      }, []);\n      const updatePath = parents => {\n        const newPath = [];\n        let i = parents.length;\n        while (i-- > 0) {\n          const parent = parents[i];\n          if (parent.nodeType === 1 && !isHidden(parent)) {\n            const args = fireResolveName(editor, parent);\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached((comp, _e) => {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', () => Keying.focusIn(comp));\n              editor.on('NodeChange', e => {\n                const newPath = updatePath(e.parents);\n                const newChildren = newPath.length > 0 ? renderPathData(newPath) : [];\n                Replacing.set(comp, newChildren);\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    const getDimensions = (editor, deltas, resizeType, originalHeight, originalWidth) => {\n      const dimensions = { height: calcCappedSize(originalHeight + deltas.top, getMinHeightOption(editor), getMaxHeightOption(editor)) };\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthOption(editor), getMaxWidthOption(editor));\n      }\n      return dimensions;\n    };\n    const resize = (editor, deltas, resizeType) => {\n      const container = SugarElement.fromDom(editor.getContainer());\n      const dimensions = getDimensions(editor, deltas, resizeType, get$d(container), get$c(container));\n      each(dimensions, (val, dim) => {\n        if (isNumber(val)) {\n          set$8(container, dim, numToPx(val));\n        }\n      });\n      fireResizeEditor(editor);\n    };\n\n    const getResizeType = editor => {\n      const resize = getResize(editor);\n      if (resize === false) {\n        return ResizeTypes.None;\n      } else if (resize === 'both') {\n        return ResizeTypes.Both;\n      } else {\n        return ResizeTypes.Vertical;\n      }\n    };\n    const keyboardHandler = (editor, resizeType, x, y) => {\n      const scale = 20;\n      const delta = SugarPosition(x * scale, y * scale);\n      resize(editor, delta, resizeType);\n      return Optional.some(true);\n    };\n    const renderResizeHandler = (editor, providersBackstage) => {\n      const resizeType = getResizeType(editor);\n      if (resizeType === ResizeTypes.None) {\n        return Optional.none();\n      }\n      const resizeLabel = resizeType === ResizeTypes.Both ? 'Press the arrow keys to resize the editor.' : 'Press the Up and Down arrow keys to resize the editor.';\n      return Optional.some(render$3('resize-handle', {\n        tag: 'div',\n        classes: ['tox-statusbar__resize-handle'],\n        attributes: {\n          'title': providersBackstage.translate('Resize'),\n          'aria-label': providersBackstage.translate(resizeLabel)\n        },\n        behaviours: [\n          Dragging.config({\n            mode: 'mouse',\n            repositionTarget: false,\n            onDrag: (_comp, _target, delta) => resize(editor, delta, resizeType),\n            blockerClass: 'tox-blocker'\n          }),\n          Keying.config({\n            mode: 'special',\n            onLeft: () => keyboardHandler(editor, resizeType, -1, 0),\n            onRight: () => keyboardHandler(editor, resizeType, 1, 0),\n            onUp: () => keyboardHandler(editor, resizeType, 0, -1),\n            onDown: () => keyboardHandler(editor, resizeType, 0, 1)\n          }),\n          Tabstopping.config({}),\n          Focusing.config({})\n        ]\n      }, providersBackstage.icons));\n    };\n\n    const renderWordCount = (editor, providersBackstage) => {\n      const replaceCountText = (comp, count, mode) => Replacing.set(comp, [text$2(providersBackstage.translate([\n          '{0} ' + mode,\n          count[mode]\n        ]))]);\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute$1(comp => {\n              const currentVal = Representing.getValue(comp);\n              const newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(comp => {\n              editor.on('wordCountUpdate', e => {\n                const {mode} = Representing.getValue(comp);\n                Representing.setValue(comp, {\n                  mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: {\n          [execute$5()]: [\n            'disabling',\n            'alloy.base.behaviour',\n            'wordcount-events'\n          ]\n        }\n      });\n    };\n\n    const renderStatusbar = (editor, providersBackstage) => {\n      const renderBranding = () => {\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding']\n          },\n          components: [{\n              dom: {\n                tag: 'a',\n                attributes: {\n                  'href': 'https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6',\n                  'rel': 'noopener',\n                  'target': '_blank',\n                  'aria-label': global$8.translate([\n                    'Powered by {0}',\n                    'Tiny'\n                  ])\n                },\n                innerHtml: Logo.trim()\n              },\n              behaviours: derive$1([Focusing.config({})])\n            }]\n        };\n      };\n      const renderHelpAccessibility = () => {\n        const shortcutText = convertText('Alt+0');\n        const text = `Press {0} for help`;\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__help-text']\n          },\n          components: [text$2(global$8.translate([\n              text,\n              shortcutText\n            ]))]\n        };\n      };\n      const renderRightContainer = () => {\n        const components = [];\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (useBranding(editor)) {\n          components.push(renderBranding());\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__right-container']\n          },\n          components\n        };\n      };\n      const getTextComponents = () => {\n        const components = [];\n        const shouldRenderHelp = useHelpAccessibility(editor);\n        const shouldRenderElementPath = useElementPath(editor);\n        const shouldRenderRightContainer = useBranding(editor) || editor.hasPlugin('wordcount');\n        const getTextComponentClasses = () => {\n          const flexStart = 'tox-statusbar__text-container--flex-start';\n          const flexEnd = 'tox-statusbar__text-container--flex-end';\n          const spaceAround = 'tox-statusbar__text-container--space-around';\n          if (shouldRenderHelp) {\n            const container3Columns = 'tox-statusbar__text-container-3-cols';\n            if (!shouldRenderRightContainer && !shouldRenderElementPath) {\n              return [\n                container3Columns,\n                spaceAround\n              ];\n            }\n            if (shouldRenderRightContainer && !shouldRenderElementPath) {\n              return [\n                container3Columns,\n                flexEnd\n              ];\n            }\n            return [\n              container3Columns,\n              flexStart\n            ];\n          }\n          return [shouldRenderRightContainer && !shouldRenderElementPath ? flexEnd : flexStart];\n        };\n        if (shouldRenderElementPath) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (shouldRenderHelp) {\n          components.push(renderHelpAccessibility());\n        }\n        if (shouldRenderRightContainer) {\n          components.push(renderRightContainer());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: [\n                  'tox-statusbar__text-container',\n                  ...getTextComponentClasses()\n                ]\n              },\n              components\n            }];\n        }\n        return [];\n      };\n      const getComponents = () => {\n        const components = getTextComponents();\n        const resizeHandler = renderResizeHandler(editor, providersBackstage);\n        return components.concat(resizeHandler.toArray());\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    const getLazyMothership = (label, singleton) => singleton.get().getOrDie(`UI for ${ label } has not been rendered`);\n    const setup$3 = (editor, setupForTheme) => {\n      const isInline = editor.inline;\n      const mode = isInline ? Inline : Iframe;\n      const header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      const lazyUiRefs = LazyUiReferences();\n      const lazyMothership = value$2();\n      const lazyDialogMothership = value$2();\n      const lazyPopupMothership = value$2();\n      const platform = detect$2();\n      const isTouch = platform.deviceType.isTouch();\n      const touchPlatformClass = 'tox-platform-touch';\n      const deviceClasses = isTouch ? [touchPlatformClass] : [];\n      const isToolbarBottom = isToolbarLocationBottom(editor);\n      const toolbarMode = getToolbarMode(editor);\n      const memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      const memBottomAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-bottom-anchorbar']\n        }\n      });\n      const lazyHeader = () => lazyUiRefs.mainUi.get().map(ui => ui.outerContainer).bind(OuterContainer.getHeader);\n      const lazyDialogSinkResult = () => Result.fromOption(lazyUiRefs.dialogUi.get().map(ui => ui.sink), 'UI has not been rendered');\n      const lazyPopupSinkResult = () => Result.fromOption(lazyUiRefs.popupUi.get().map(ui => ui.sink), '(popup) UI has not been rendered');\n      const lazyAnchorBar = lazyUiRefs.lazyGetInOuterOrDie('anchor bar', memAnchorBar.getOpt);\n      const lazyBottomAnchorBar = lazyUiRefs.lazyGetInOuterOrDie('bottom anchor bar', memBottomAnchorBar.getOpt);\n      const lazyToolbar = lazyUiRefs.lazyGetInOuterOrDie('toolbar', OuterContainer.getToolbar);\n      const lazyThrobber = lazyUiRefs.lazyGetInOuterOrDie('throbber', OuterContainer.getThrobber);\n      const backstages = init$6({\n        popup: lazyPopupSinkResult,\n        dialog: lazyDialogSinkResult\n      }, editor, lazyAnchorBar, lazyBottomAnchorBar);\n      const makeHeaderPart = () => {\n        const verticalDirAttributes = { attributes: { [Attribute]: isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom } };\n        const partMenubar = OuterContainer.parts.menubar({\n          dom: {\n            tag: 'div',\n            classes: ['tox-menubar']\n          },\n          backstage: backstages.popup,\n          onEscape: () => {\n            editor.focus();\n          }\n        });\n        const partToolbar = OuterContainer.parts.toolbar({\n          dom: {\n            tag: 'div',\n            classes: ['tox-toolbar']\n          },\n          getSink: backstages.popup.shared.getSink,\n          providers: backstages.popup.shared.providers,\n          onEscape: () => {\n            editor.focus();\n          },\n          onToolbarToggled: state => {\n            fireToggleToolbarDrawer(editor, state);\n          },\n          type: toolbarMode,\n          lazyToolbar,\n          lazyHeader: () => lazyHeader().getOrDie('Could not find header element'),\n          ...verticalDirAttributes\n        });\n        const partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n          dom: {\n            tag: 'div',\n            classes: ['tox-toolbar-overlord']\n          },\n          providers: backstages.popup.shared.providers,\n          onEscape: () => {\n            editor.focus();\n          },\n          type: toolbarMode\n        });\n        const hasMultipleToolbar = isMultipleToolbars(editor);\n        const hasToolbar = isToolbarEnabled(editor);\n        const hasMenubar = isMenubarEnabled(editor);\n        const shouldHavePromotion = promotionEnabled(editor);\n        const partPromotion = makePromotion();\n        const hasAnyContents = hasMultipleToolbar || hasToolbar || hasMenubar;\n        const getPartToolbar = () => {\n          if (hasMultipleToolbar) {\n            return [partMultipleToolbar];\n          } else if (hasToolbar) {\n            return [partToolbar];\n          } else {\n            return [];\n          }\n        };\n        const menubarCollection = shouldHavePromotion ? [\n          partPromotion,\n          partMenubar\n        ] : [partMenubar];\n        return OuterContainer.parts.header({\n          dom: {\n            tag: 'div',\n            classes: ['tox-editor-header'].concat(hasAnyContents ? [] : ['tox-editor-header--empty']),\n            ...verticalDirAttributes\n          },\n          components: flatten([\n            hasMenubar ? menubarCollection : [],\n            getPartToolbar(),\n            useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n          ]),\n          sticky: isStickyToolbar(editor),\n          editor,\n          sharedBackstage: backstages.popup.shared\n        });\n      };\n      const makePromotion = () => {\n        return OuterContainer.parts.promotion({\n          dom: {\n            tag: 'div',\n            classes: ['tox-promotion']\n          }\n        });\n      };\n      const makeSidebarDefinition = () => {\n        const partSocket = OuterContainer.parts.socket({\n          dom: {\n            tag: 'div',\n            classes: ['tox-edit-area']\n          }\n        });\n        const partSidebar = OuterContainer.parts.sidebar({\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar']\n          }\n        });\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar-wrap']\n          },\n          components: [\n            partSocket,\n            partSidebar\n          ]\n        };\n      };\n      const renderDialogUi = () => {\n        const uiContainer = getUiContainer(editor);\n        const isGridUiContainer = eq(body(), uiContainer) && get$e(uiContainer, 'display') === 'grid';\n        const sinkSpec = {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(deviceClasses),\n            attributes: { ...global$8.isRtl() ? { dir: 'rtl' } : {} }\n          },\n          behaviours: derive$1([Positioning.config({ useFixed: () => header.isDocked(lazyHeader) })])\n        };\n        const reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive$2([run$1(windowResize(), comp => {\n              set$8(comp.element, 'width', document.body.clientWidth + 'px');\n            })])\n        };\n        const sink = build$1(deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {}));\n        const uiMothership = takeover(sink);\n        lazyDialogMothership.set(uiMothership);\n        return {\n          sink,\n          mothership: uiMothership\n        };\n      };\n      const renderPopupUi = () => {\n        const sinkSpec = {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-silver-popup-sink',\n              'tox-tinymce-aux'\n            ].concat(deviceClasses),\n            attributes: { ...global$8.isRtl() ? { dir: 'rtl' } : {} }\n          },\n          behaviours: derive$1([Positioning.config({\n              useFixed: () => header.isDocked(lazyHeader),\n              getBounds: () => setupForTheme.getPopupSinkBounds()\n            })])\n        };\n        const sink = build$1(sinkSpec);\n        const uiMothership = takeover(sink);\n        lazyPopupMothership.set(uiMothership);\n        return {\n          sink,\n          mothership: uiMothership\n        };\n      };\n      const renderMainUi = () => {\n        const partHeader = makeHeaderPart();\n        const sidebarContainer = makeSidebarDefinition();\n        const partThrobber = OuterContainer.parts.throbber({\n          dom: {\n            tag: 'div',\n            classes: ['tox-throbber']\n          },\n          backstage: backstages.popup\n        });\n        const partViewWrapper = OuterContainer.parts.viewWrapper({ backstage: backstages.popup });\n        const statusbar = useStatusBar(editor) && !isInline ? Optional.some(renderStatusbar(editor, backstages.popup.shared.providers)) : Optional.none();\n        const editorComponents = flatten([\n          isToolbarBottom ? [] : [partHeader],\n          isInline ? [] : [sidebarContainer],\n          isToolbarBottom ? [partHeader] : []\n        ]);\n        const editorContainer = OuterContainer.parts.editorContainer({\n          components: flatten([\n            editorComponents,\n            isInline ? [] : [\n              memBottomAnchorBar.asSpec(),\n              ...statusbar.toArray()\n            ]\n          ])\n        });\n        const isHidden = isDistractionFree(editor);\n        const attributes = {\n          role: 'application',\n          ...global$8.isRtl() ? { dir: 'rtl' } : {},\n          ...isHidden ? { 'aria-hidden': 'true' } : {}\n        };\n        const outerContainer = build$1(OuterContainer.sketch({\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-tinymce'\n            ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses),\n            styles: {\n              visibility: 'hidden',\n              ...isHidden ? {\n                opacity: '0',\n                border: '0'\n              } : {}\n            },\n            attributes\n          },\n          components: [\n            editorContainer,\n            ...isInline ? [] : [partViewWrapper],\n            partThrobber\n          ],\n          behaviours: derive$1([\n            receivingConfig(),\n            Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n            Keying.config({\n              mode: 'cyclic',\n              selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle'\n            })\n          ])\n        }));\n        const mothership = takeover(outerContainer);\n        lazyMothership.set(mothership);\n        return {\n          mothership,\n          outerContainer\n        };\n      };\n      const setEditorSize = outerContainer => {\n        const parsedHeight = numToPx(getHeightWithFallback(editor));\n        const parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue$1('div', 'width', parsedWidth)) {\n            set$8(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue$1('div', 'height', parsedHeight)) {\n            set$8(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$8(outerContainer.element, 'height', '400px');\n          }\n        }\n        return parsedHeight;\n      };\n      const setupShortcutsAndCommands = outerContainer => {\n        editor.addShortcut('alt+F9', 'focus menubar', () => {\n          OuterContainer.focusMenubar(outerContainer);\n        });\n        editor.addShortcut('alt+F10', 'focus toolbar', () => {\n          OuterContainer.focusToolbar(outerContainer);\n        });\n        editor.addCommand('ToggleToolbarDrawer', (_ui, options) => {\n          if (options === null || options === void 0 ? void 0 : options.skipFocus) {\n            OuterContainer.toggleToolbarDrawerWithoutFocusing(outerContainer);\n          } else {\n            OuterContainer.toggleToolbarDrawer(outerContainer);\n          }\n        });\n        editor.addQueryStateHandler('ToggleToolbarDrawer', () => OuterContainer.isToolbarDrawerToggled(outerContainer));\n      };\n      const renderUIWithRefs = uiRefs => {\n        const {mainUi, popupUi, uiMotherships} = uiRefs;\n        map$1(getToolbarGroups(editor), (toolbarGroupButtonConfig, name) => {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        const {buttons, menuItems, contextToolbars, sidebars, views} = editor.ui.registry.getAll();\n        const toolbarOpt = getMultipleToolbarsOption(editor);\n        const rawUiConfig = {\n          menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(() => getToolbar(editor)),\n          allowToolbarGroups: toolbarMode === ToolbarMode$1.floating,\n          buttons,\n          sidebar: sidebars,\n          views\n        };\n        setupShortcutsAndCommands(mainUi.outerContainer);\n        setup$b(editor, mainUi.mothership, uiMotherships);\n        header.setup(editor, backstages.popup.shared, lazyHeader);\n        setup$6(editor, backstages.popup);\n        setup$5(editor, backstages.popup.shared.getSink, backstages.popup);\n        setup$8(editor);\n        setup$7(editor, lazyThrobber, backstages.popup.shared);\n        register$9(editor, contextToolbars, popupUi.sink, { backstage: backstages.popup });\n        setup$4(editor, popupUi.sink);\n        const elm = editor.getElement();\n        const height = setEditorSize(mainUi.outerContainer);\n        const args = {\n          targetNode: elm,\n          height\n        };\n        return mode.render(editor, uiRefs, rawUiConfig, backstages.popup, args);\n      };\n      const reuseDialogUiForPopuUi = dialogUi => {\n        lazyPopupMothership.set(dialogUi.mothership);\n        return dialogUi;\n      };\n      const renderUI = () => {\n        const mainUi = renderMainUi();\n        const dialogUi = renderDialogUi();\n        const popupUi = isSplitUiMode(editor) ? renderPopupUi() : reuseDialogUiForPopuUi(dialogUi);\n        lazyUiRefs.dialogUi.set(dialogUi);\n        lazyUiRefs.popupUi.set(popupUi);\n        lazyUiRefs.mainUi.set(mainUi);\n        const uiRefs = {\n          popupUi,\n          dialogUi,\n          mainUi,\n          uiMotherships: lazyUiRefs.getUiMotherships()\n        };\n        return renderUIWithRefs(uiRefs);\n      };\n      return {\n        popups: {\n          backstage: backstages.popup,\n          getMothership: () => getLazyMothership('popups', lazyPopupMothership)\n        },\n        dialogs: {\n          backstage: backstages.dialog,\n          getMothership: () => getLazyMothership('dialogs', lazyDialogMothership)\n        },\n        renderUI\n      };\n    };\n\n    const labelledBy = (labelledElement, labelElement) => {\n      const labelId = getOpt(labelledElement, 'id').fold(() => {\n        const id = generate$6('dialog-label');\n        set$9(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$9(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    const schema$2 = constant$1([\n      required$1('lazySink'),\n      option$3('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted('useTabstopAt', always),\n      defaulted('firstTabstop', 0),\n      defaulted('eventOrder', {}),\n      field('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    const basic = { sketch: identity };\n    const parts$2 = constant$1([\n      optional({\n        name: 'draghandle',\n        overrides: (detail, spec) => {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: handle => {\n                  return ancestor(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [required$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [required$1('dom')],\n        name: 'footer'\n      }),\n      external({\n        factory: {\n          sketch: (spec, detail) => ({\n            ...spec,\n            dom: detail.dom,\n            components: detail.components\n          })\n        },\n        schema: [\n          defaulted('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    const factory$4 = (detail, components, spec, externals) => {\n      const dialogComp = value$2();\n      const showDialog = dialog => {\n        dialogComp.set(dialog);\n        const sink = detail.lazySink(dialog).getOrDie();\n        const externalBlocker = externals.blocker();\n        const blocker = sink.getSystem().build({\n          ...externalBlocker,\n          components: externalBlocker.components.concat([premade(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), () => {\n                Blocking.isBlocked(dialog) ? noop() : Keying.focusIn(dialog);\n              })])\n          ])\n        });\n        attach(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      const hideDialog = dialog => {\n        dialogComp.clear();\n        parent(dialog.element).each(blockerDom => {\n          dialog.getSystem().getByDom(blockerDom).each(blocker => {\n            detach(blocker);\n          });\n        });\n      };\n      const getDialogBody = dialog => getPartOrDie(dialog, detail, 'body');\n      const getDialogFooter = dialog => getPart(dialog, detail, 'footer');\n      const setBusy = (dialog, getBusySpec) => {\n        Blocking.block(dialog, getBusySpec);\n      };\n      const setIdle = dialog => {\n        Blocking.unblock(dialog);\n      };\n      const modalEventsId = generate$6('modal-events');\n      const eventOrder = {\n        ...detail.eventOrder,\n        [attachedToDom()]: [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || [])\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle,\n          setBusy\n        },\n        eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt,\n            firstTabstop: detail.firstTabstop\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(c => {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n            })])\n        ])\n      };\n    };\n    const ModalDialog = composite({\n      name: 'ModalDialog',\n      configFields: schema$2(),\n      partFields: parts$2(),\n      factory: factory$4,\n      apis: {\n        show: (apis, dialog) => {\n          apis.show(dialog);\n        },\n        hide: (apis, dialog) => {\n          apis.hide(dialog);\n        },\n        getBody: (apis, dialog) => apis.getBody(dialog),\n        getFooter: (apis, dialog) => apis.getFooter(dialog),\n        setBusy: (apis, dialog, getBusySpec) => {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: (apis, dialog) => {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    const dialogToggleMenuItemSchema = objOf([\n      type,\n      name$1\n    ].concat(commonMenuItemFields));\n    const dialogToggleMenuItemDataProcessor = boolean;\n\n    const baseFooterButtonFields = [\n      generatedName('button'),\n      optionalIcon,\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      primary,\n      enabled,\n      optionStringEnum('buttonType', [\n        'primary',\n        'secondary'\n      ])\n    ];\n    const dialogFooterButtonFields = [\n      ...baseFooterButtonFields,\n      text\n    ];\n    const normalFooterButtonFields = [\n      requiredStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ]),\n      ...dialogFooterButtonFields\n    ];\n    const menuFooterButtonFields = [\n      requiredStringEnum('type', ['menu']),\n      optionalText,\n      optionalTooltip,\n      optionalIcon,\n      requiredArrayOf('items', dialogToggleMenuItemSchema),\n      ...baseFooterButtonFields\n    ];\n    const toggleButtonSpecFields = [\n      ...baseFooterButtonFields,\n      requiredStringEnum('type', ['togglebutton']),\n      requiredString('tooltip'),\n      optionalIcon,\n      optionalText,\n      defaultedBoolean('active', false)\n    ];\n    const dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields,\n      togglebutton: toggleButtonSpecFields\n    });\n\n    const alertBannerFields = [\n      type,\n      text,\n      requiredStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      icon,\n      defaulted('url', '')\n    ];\n    const alertBannerSchema = objOf(alertBannerFields);\n\n    const createBarFields = itemsField => [\n      type,\n      itemsField\n    ];\n\n    const buttonFields = [\n      type,\n      text,\n      enabled,\n      generatedName('button'),\n      optionalIcon,\n      borderless,\n      optionStringEnum('buttonType', [\n        'primary',\n        'secondary',\n        'toolbar'\n      ]),\n      primary\n    ];\n    const buttonSchema = objOf(buttonFields);\n\n    const formComponentFields = [\n      type,\n      name$1\n    ];\n    const formComponentWithLabelFields = formComponentFields.concat([optionalLabel]);\n\n    const checkboxFields = formComponentFields.concat([\n      label,\n      enabled\n    ]);\n    const checkboxSchema = objOf(checkboxFields);\n    const checkboxDataProcessor = boolean;\n\n    const collectionFields = formComponentWithLabelFields.concat([defaultedColumns('auto')]);\n    const collectionSchema = objOf(collectionFields);\n    const collectionDataProcessor = arrOfObj([\n      value$1,\n      text,\n      icon\n    ]);\n\n    const colorInputFields = formComponentWithLabelFields.concat([defaultedString('storageKey', 'default')]);\n    const colorInputSchema = objOf(colorInputFields);\n    const colorInputDataProcessor = string;\n\n    const colorPickerFields = formComponentWithLabelFields;\n    const colorPickerSchema = objOf(colorPickerFields);\n    const colorPickerDataProcessor = string;\n\n    const customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredString('scriptId'),\n      requiredString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    const customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      requiredFunction('init')\n    ]);\n    const customEditorSchema = valueOf(v => asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(() => asRaw('customeditor.new', objOfOnly(customEditorFields), v)));\n    const customEditorDataProcessor = string;\n\n    const dropZoneFields = formComponentWithLabelFields;\n    const dropZoneSchema = objOf(dropZoneFields);\n    const dropZoneDataProcessor = arrOfVal();\n\n    const createGridFields = itemsField => [\n      type,\n      requiredNumber('columns'),\n      itemsField\n    ];\n\n    const htmlPanelFields = [\n      type,\n      requiredString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    const htmlPanelSchema = objOf(htmlPanelFields);\n\n    const iframeFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('border', false),\n      defaultedBoolean('sandboxed', true),\n      defaultedBoolean('streamContent', false),\n      defaultedBoolean('transparent', true)\n    ]);\n    const iframeSchema = objOf(iframeFields);\n    const iframeDataProcessor = string;\n\n    const imagePreviewSchema = objOf(formComponentFields.concat([optionString('height')]));\n    const imagePreviewDataProcessor = objOf([\n      requiredString('url'),\n      optionNumber('zoom'),\n      optionNumber('cachedWidth'),\n      optionNumber('cachedHeight')\n    ]);\n\n    const inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      enabled\n    ]);\n    const inputSchema = objOf(inputFields);\n    const inputDataProcessor = string;\n\n    const createLabelFields = itemsField => [\n      type,\n      label,\n      itemsField,\n      defaultedStringEnum('align', 'start', [\n        'start',\n        'center',\n        'end'\n      ])\n    ];\n\n    const listBoxSingleItemFields = [\n      text,\n      value$1\n    ];\n    const listBoxNestedItemFields = [\n      text,\n      requiredArrayOf('items', thunkOf('items', () => listBoxItemSchema))\n    ];\n    const listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    const listBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOf('items', listBoxItemSchema),\n      enabled\n    ]);\n    const listBoxSchema = objOf(listBoxFields);\n    const listBoxDataProcessor = string;\n\n    const selectBoxFields = formComponentWithLabelFields.concat([\n      requiredArrayOfObj('items', [\n        text,\n        value$1\n      ]),\n      defaultedNumber('size', 1),\n      enabled\n    ]);\n    const selectBoxSchema = objOf(selectBoxFields);\n    const selectBoxDataProcessor = string;\n\n    const sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      enabled\n    ]);\n    const sizeInputSchema = objOf(sizeInputFields);\n    const sizeInputDataProcessor = objOf([\n      requiredString('width'),\n      requiredString('height')\n    ]);\n\n    const sliderFields = formComponentFields.concat([\n      label,\n      defaultedNumber('min', 0),\n      defaultedNumber('max', 0)\n    ]);\n    const sliderSchema = objOf(sliderFields);\n    const sliderInputDataProcessor = number;\n\n    const tableFields = [\n      type,\n      requiredArrayOf('header', string),\n      requiredArrayOf('cells', arrOf(string))\n    ];\n    const tableSchema = objOf(tableFields);\n\n    const textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      enabled\n    ]);\n    const textAreaSchema = objOf(textAreaFields);\n    const textAreaDataProcessor = string;\n\n    const baseTreeItemFields = [\n      requiredStringEnum('type', [\n        'directory',\n        'leaf'\n      ]),\n      title,\n      requiredString('id'),\n      optionOf('menu', MenuButtonSchema)\n    ];\n    const treeItemLeafFields = baseTreeItemFields;\n    const treeItemLeafSchema = objOf(treeItemLeafFields);\n    const treeItemDirectoryFields = baseTreeItemFields.concat([requiredArrayOf('children', thunkOf('children', () => {\n        return choose$2('type', {\n          directory: treeItemDirectorySchema,\n          leaf: treeItemLeafSchema\n        });\n      }))]);\n    const treeItemDirectorySchema = objOf(treeItemDirectoryFields);\n    const treeItemSchema = choose$2('type', {\n      directory: treeItemDirectorySchema,\n      leaf: treeItemLeafSchema\n    });\n    const treeFields = [\n      type,\n      requiredArrayOf('items', treeItemSchema),\n      optionFunction('onLeafAction'),\n      optionFunction('onToggleExpand'),\n      defaultedArrayOf('defaultExpandedIds', [], string),\n      optionString('defaultSelectedId')\n    ];\n    const treeSchema = objOf(treeFields);\n\n    const urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      enabled,\n      optionString('picker_text')\n    ]);\n    const urlInputSchema = objOf(urlInputFields);\n    const urlInputDataProcessor = objOf([\n      value$1,\n      defaultedMeta\n    ]);\n\n    const createItemsField = name => field$1('items', 'items', required$2(), arrOf(valueOf(v => asRaw(`Checking item of ${ name }`, itemSchema, v).fold(sErr => Result.error(formatError(sErr)), passValue => Result.value(passValue)))));\n    const itemSchema = valueThunk(() => choose$2('type', {\n      alertbanner: alertBannerSchema,\n      bar: objOf(createBarFields(createItemsField('bar'))),\n      button: buttonSchema,\n      checkbox: checkboxSchema,\n      colorinput: colorInputSchema,\n      colorpicker: colorPickerSchema,\n      dropzone: dropZoneSchema,\n      grid: objOf(createGridFields(createItemsField('grid'))),\n      iframe: iframeSchema,\n      input: inputSchema,\n      listbox: listBoxSchema,\n      selectbox: selectBoxSchema,\n      sizeinput: sizeInputSchema,\n      slider: sliderSchema,\n      textarea: textAreaSchema,\n      urlinput: urlInputSchema,\n      customeditor: customEditorSchema,\n      htmlpanel: htmlPanelSchema,\n      imagepreview: imagePreviewSchema,\n      collection: collectionSchema,\n      label: objOf(createLabelFields(createItemsField('label'))),\n      table: tableSchema,\n      tree: treeSchema,\n      panel: panelSchema\n    }));\n    const panelFields = [\n      type,\n      defaulted('classes', []),\n      requiredArrayOf('items', itemSchema)\n    ];\n    const panelSchema = objOf(panelFields);\n\n    const tabFields = [\n      generatedName('tab'),\n      title,\n      requiredArrayOf('items', itemSchema)\n    ];\n    const tabPanelFields = [\n      type,\n      requiredArrayOfObj('tabs', tabFields)\n    ];\n    const tabPanelSchema = objOf(tabPanelFields);\n\n    const dialogButtonFields = dialogFooterButtonFields;\n    const dialogButtonSchema = dialogFooterButtonSchema;\n    const dialogSchema = objOf([\n      requiredString('title'),\n      requiredOf('body', choose$2('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      defaultedArrayOf('buttons', [], dialogButtonSchema),\n      defaulted('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onTabChange', noop)\n    ]);\n    const createDialog = spec => asRaw('dialog', dialogSchema, spec);\n\n    const urlDialogButtonSchema = objOf([\n      requiredStringEnum('type', [\n        'cancel',\n        'custom'\n      ]),\n      ...dialogButtonFields\n    ]);\n    const urlDialogSchema = objOf([\n      requiredString('title'),\n      requiredString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    const createUrlDialog = spec => asRaw('dialog', urlDialogSchema, spec);\n\n    const getAllObjects = obj => {\n      if (isObject(obj)) {\n        return [obj].concat(bind$3(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind$3(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    const isNamedItem = obj => isString(obj.type) && isString(obj.name);\n    const dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      imagepreview: imagePreviewDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      slider: sliderInputDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    const getDataProcessor = item => Optional.from(dataProcessors[item.type]);\n    const getNamedItems = structure => filter$2(getAllObjects(structure), isNamedItem);\n\n    const createDataValidator = structure => {\n      const namedItems = getNamedItems(structure);\n      const fields = bind$3(namedItems, item => getDataProcessor(item).fold(() => [], schema => [requiredOf(item.name, schema)]));\n      return objOf(fields);\n    };\n\n    const extract = structure => {\n      var _a;\n      const internalDialog = getOrDie(createDialog(structure));\n      const dataValidator = createDataValidator(structure);\n      const initialData = (_a = structure.initialData) !== null && _a !== void 0 ? _a : {};\n      return {\n        internalDialog,\n        dataValidator,\n        initialData\n      };\n    };\n    const DialogManager = {\n      open: (factory, structure) => {\n        const extraction = extract(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: (factory, structure) => {\n        const internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: structure => extract(structure)\n    };\n\n    const events = (reflectingConfig, reflectingState) => {\n      const update = (component, data) => {\n        reflectingConfig.updateState.each(updateState => {\n          const newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(renderComponents => {\n          const newComponents = renderComponents(data, reflectingState.get());\n          const replacer = reflectingConfig.reuseDom ? withReuse : withoutReuse;\n          replacer(component, newComponents);\n        });\n      };\n      return derive$2([\n        run$1(receive(), (component, message) => {\n          const receivingData = message;\n          if (!receivingData.universal) {\n            const channel = reflectingConfig.channel;\n            if (contains$2(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached((comp, _se) => {\n          reflectingConfig.initialData.each(rawData => {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    const getState = (component, replaceConfig, reflectState) => reflectState;\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState\n    });\n\n    var ReflectingSchema = [\n      required$1('channel'),\n      option$3('renderComponents'),\n      option$3('updateState'),\n      option$3('initialData'),\n      defaultedBoolean('reuseDom', true)\n    ];\n\n    const init = () => {\n      const cell = Cell(Optional.none());\n      const clear = () => cell.set(Optional.none());\n      const readState = () => cell.get().getOr('none');\n      return {\n        readState,\n        get: cell.get,\n        set: cell.set,\n        clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    const Reflecting = create$4({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    const toValidValues = values => {\n      const errors = [];\n      const result = {};\n      each(values, (value, name) => {\n        value.fold(() => {\n          errors.push(name);\n        }, v => {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    const renderBodyPanel = (spec, dialogData, backstage) => {\n      const memForm = record(Form.sketch(parts => ({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form'].concat(spec.classes)\n        },\n        components: map$2(spec.items, item => interpretInForm(parts, item, dialogData, backstage))\n      })));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          memento(memForm, {\n            postprocess: formValue => toValidValues(formValue).fold(err => {\n              console.error(err);\n              return {};\n            }, identity)\n          }),\n          config('dialog-body-panel', [run$1(focusin(), (comp, se) => {\n              comp.getSystem().broadcastOn([dialogFocusShiftedChannel], { newFocus: Optional.some(se.event.target) });\n            })])\n        ])\n      };\n    };\n\n    const factory$3 = (detail, _spec) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      components: detail.components,\n      events: events$a(detail.action),\n      behaviours: augment(detail.tabButtonBehaviours, [\n        Focusing.config({}),\n        Keying.config({\n          mode: 'execution',\n          useSpace: true,\n          useEnter: true\n        }),\n        Representing.config({\n          store: {\n            mode: 'memory',\n            initialValue: detail.value\n          }\n        })\n      ]),\n      domModification: detail.domModification\n    });\n    const TabButton = single({\n      name: 'TabButton',\n      configFields: [\n        defaulted('uid', undefined),\n        required$1('value'),\n        field$1('dom', 'dom', mergeWithThunk(() => ({\n          attributes: {\n            'role': 'tab',\n            'id': generate$6('aria'),\n            'aria-selected': 'false'\n          }\n        })), anyValue()),\n        option$3('action'),\n        defaulted('domModification', {}),\n        field('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        required$1('view')\n      ],\n      factory: factory$3\n    });\n\n    const schema$1 = constant$1([\n      required$1('tabs'),\n      required$1('dom'),\n      defaulted('clickToDismiss', false),\n      field('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers$1([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    const tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: barDetail => {\n        const dismissTab$1 = (tabbar, button) => {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar,\n            button\n          });\n        };\n        const changeTab$1 = (tabbar, button) => {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar,\n            button\n          });\n        };\n        return {\n          action: button => {\n            const tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            const activeButton = Highlighting.isHighlighted(tabbar, button);\n            const response = (() => {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            })();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    const parts$1 = constant$1([tabsPart]);\n\n    const factory$2 = (detail, components, _spec, _externals) => ({\n      'uid': detail.uid,\n      'dom': detail.dom,\n      components,\n      'debug.sketcher': 'Tabbar',\n      'domModification': { attributes: { role: 'tablist' } },\n      'behaviours': augment(detail.tabbarBehaviours, [\n        Highlighting.config({\n          highlightClass: detail.markers.selectedClass,\n          itemClass: detail.markers.tabClass,\n          onHighlight: (tabbar, tab) => {\n            set$9(tab.element, 'aria-selected', 'true');\n          },\n          onDehighlight: (tabbar, tab) => {\n            set$9(tab.element, 'aria-selected', 'false');\n          }\n        }),\n        Keying.config({\n          mode: 'flow',\n          getInitial: tabbar => {\n            return Highlighting.getHighlighted(tabbar).map(tab => tab.element);\n          },\n          selector: '.' + detail.markers.tabClass,\n          executeOnMove: true\n        })\n      ])\n    });\n    const Tabbar = composite({\n      name: 'Tabbar',\n      configFields: schema$1(),\n      partFields: parts$1(),\n      factory: factory$2\n    });\n\n    const factory$1 = (detail, _spec) => ({\n      uid: detail.uid,\n      dom: detail.dom,\n      behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n      domModification: { attributes: { role: 'tabpanel' } }\n    });\n    const Tabview = single({\n      name: 'Tabview',\n      configFields: [field('tabviewBehaviours', [Replacing])],\n      factory: factory$1\n    });\n\n    const schema = constant$1([\n      defaulted('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted('tabs', []),\n      field('tabSectionBehaviours', [])\n    ]);\n    const barPart = required({\n      factory: Tabbar,\n      schema: [\n        required$1('dom'),\n        requiredObjOf('markers', [\n          required$1('tabClass'),\n          required$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: detail => {\n        return { tabs: detail.tabs };\n      }\n    });\n    const viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    const parts = constant$1([\n      barPart,\n      viewPart\n    ]);\n\n    const factory = (detail, components, _spec, _externals) => {\n      const changeTab$1 = button => {\n        const tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(tabview => {\n          const tabWithValue = find$5(detail.tabs, t => t.value === tabValue);\n          tabWithValue.each(tabData => {\n            const panel = tabData.view();\n            getOpt(button.element, 'id').each(id => {\n              set$9(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      const changeTabBy = (section, byPred) => {\n        getPart(section, detail, 'tabbar').each(tabbar => {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components,\n        behaviours: get$3(detail.tabSectionBehaviours),\n        events: derive$2(flatten([\n          detail.selectFirst ? [runOnAttached((section, _simulatedEvent) => {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run$1(changeTab(), (section, simulatedEvent) => {\n              const button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run$1(dismissTab(), (section, simulatedEvent) => {\n              const button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: section => {\n            return getPart(section, detail, 'tabview').map(tabview => Replacing.contents(tabview)).getOr([]);\n          },\n          showTab: (section, tabKey) => {\n            const getTabIfNotActive = tabbar => {\n              const candidates = Highlighting.getCandidates(tabbar);\n              const optTab = find$5(candidates, c => Representing.getValue(c) === tabKey);\n              return optTab.filter(tab => !Highlighting.isHighlighted(tabbar, tab));\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    const TabSection = composite({\n      name: 'TabSection',\n      configFields: schema(),\n      partFields: parts(),\n      factory,\n      apis: {\n        getViewItems: (apis, component) => apis.getViewItems(component),\n        showTab: (apis, component, tabKey) => {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    const measureHeights = (allTabs, tabview, tabviewComp) => map$2(allTabs, (_tab, i) => {\n      Replacing.set(tabviewComp, allTabs[i].view());\n      const rect = tabview.dom.getBoundingClientRect();\n      Replacing.set(tabviewComp, []);\n      return rect.height;\n    });\n    const getMaxHeight = heights => head(sort(heights, (a, b) => {\n      if (a > b) {\n        return -1;\n      } else if (a < b) {\n        return +1;\n      } else {\n        return 0;\n      }\n    }));\n    const getMaxTabviewHeight = (dialog, tabview, tablist) => {\n      const documentElement$1 = documentElement(dialog).dom;\n      const rootElm = ancestor(dialog, '.tox-dialog-wrap').getOr(dialog);\n      const isFixed = get$e(rootElm, 'position') === 'fixed';\n      let maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      const tabviewHeight = get$d(tabview);\n      const isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$c(tablist);\n      const currentTabHeight = isTabListBeside ? Math.max(get$d(tablist), tabviewHeight) : tabviewHeight;\n      const dialogTopMargin = parseInt(get$e(dialog, 'margin-top'), 10) || 0;\n      const dialogBottomMargin = parseInt(get$e(dialog, 'margin-bottom'), 10) || 0;\n      const dialogHeight = get$d(dialog) + dialogTopMargin + dialogBottomMargin;\n      const chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    const showTab = (allTabs, comp) => {\n      head(allTabs).each(tab => TabSection.showTab(comp, tab.value));\n    };\n    const setTabviewHeight = (tabview, height) => {\n      set$8(tabview, 'height', height + 'px');\n      set$8(tabview, 'flex-basis', height + 'px');\n    };\n    const updateTabviewHeight = (dialogBody, tabview, maxTabHeight) => {\n      ancestor(dialogBody, '[role=\"dialog\"]').each(dialog => {\n        descendant(dialog, '[role=\"tablist\"]').each(tablist => {\n          maxTabHeight.get().map(height => {\n            set$8(tabview, 'height', '0');\n            set$8(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(height => {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    const getTabview = dialog => descendant(dialog, '[role=\"tabpanel\"]');\n    const smartMode = allTabs => {\n      const maxTabHeight = value$2();\n      const extraEvents = [\n        runOnAttached(comp => {\n          const dialog = comp.element;\n          getTabview(dialog).each(tabview => {\n            set$8(tabview, 'visibility', 'hidden');\n            comp.getSystem().getByDom(tabview).toOptional().each(tabviewComp => {\n              const heights = measureHeights(allTabs, tabview, tabviewComp);\n              const maxTabHeightOpt = getMaxHeight(heights);\n              maxTabHeightOpt.fold(maxTabHeight.clear, maxTabHeight.set);\n            });\n            updateTabviewHeight(dialog, tabview, maxTabHeight);\n            remove$6(tabview, 'visibility');\n            showTab(allTabs, comp);\n            requestAnimationFrame(() => {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          });\n        }),\n        run$1(windowResize(), comp => {\n          const dialog = comp.element;\n          getTabview(dialog).each(tabview => {\n            updateTabviewHeight(dialog, tabview, maxTabHeight);\n          });\n        }),\n        run$1(formResizeEvent, (comp, _se) => {\n          const dialog = comp.element;\n          getTabview(dialog).each(tabview => {\n            const oldFocus = active$1(getRootNode(tabview));\n            set$8(tabview, 'visibility', 'hidden');\n            const oldHeight = getRaw(tabview, 'height').map(h => parseInt(h, 10));\n            remove$6(tabview, 'height');\n            remove$6(tabview, 'flex-basis');\n            const newHeight = tabview.dom.getBoundingClientRect().height;\n            const hasGrown = oldHeight.forall(h => newHeight > h);\n            if (hasGrown) {\n              maxTabHeight.set(newHeight);\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            } else {\n              oldHeight.each(h => {\n                setTabviewHeight(tabview, h);\n              });\n            }\n            remove$6(tabview, 'visibility');\n            oldFocus.each(focus$3);\n          });\n        })\n      ];\n      const selectFirst = false;\n      return {\n        extraEvents,\n        selectFirst\n      };\n    };\n\n    const SendDataToSectionChannel = 'send-data-to-section';\n    const SendDataToViewChannel = 'send-data-to-view';\n    const renderTabPanel = (spec, dialogData, backstage) => {\n      const storedValue = Cell({});\n      const updateDataWithForm = form => {\n        const formData = Representing.getValue(form);\n        const validData = toValidValues(formData).getOr({});\n        const currentData = storedValue.get();\n        const newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      const setDataOnForm = form => {\n        const tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      const oldTab = Cell(null);\n      const allTabs = map$2(spec.tabs, tab => {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item']\n          },\n          components: [text$2(backstage.shared.providers.translate(tab.title))],\n          view: () => {\n            return [Form.sketch(parts => ({\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-form']\n                },\n                components: map$2(tab.items, item => interpretInForm(parts, item, dialogData, backstage)),\n                formBehaviours: derive$1([\n                  Keying.config({\n                    mode: 'acyclic',\n                    useTabstopAt: not(isPseudoStop)\n                  }),\n                  config('TabView.form.events', [\n                    runOnAttached(setDataOnForm),\n                    runOnDetached(updateDataWithForm)\n                  ]),\n                  Receiving.config({\n                    channels: wrapAll([\n                      {\n                        key: SendDataToSectionChannel,\n                        value: { onReceive: updateDataWithForm }\n                      },\n                      {\n                        key: SendDataToViewChannel,\n                        value: { onReceive: setDataOnForm }\n                      }\n                    ])\n                  })\n                ])\n              }))];\n          }\n        };\n      });\n      const tabMode = smartMode(allTabs);\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: (section, button, _viewItems) => {\n          const name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({ find: comp => head(TabSection.getViewItems(comp)) }),\n          withComp(Optional.none(), tsection => {\n            tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n            return storedValue.get();\n          }, (tsection, value) => {\n            storedValue.set(value);\n            tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n          })\n        ])\n      });\n    };\n\n    const renderBody = (spec, dialogId, contentId, backstage, ariaAttrs) => {\n      const renderComponents = incoming => {\n        const body = incoming.body;\n        switch (body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(body, incoming.initialData, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(body, incoming.initialData, backstage)];\n          }\n        }\n      };\n      const updateState = (_comp, incoming) => Optional.some({ isTabPanel: () => incoming.body.type === 'tabpanel' });\n      const ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: {\n            ...contentId.map(x => ({ id: x })).getOr({}),\n            ...ariaAttrs ? ariaAttributes : {}\n          }\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: `${ bodyChannel }-${ dialogId }`,\n            updateState,\n            renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    const renderInlineBody = (spec, dialogId, contentId, backstage, ariaAttrs) => renderBody(spec, dialogId, Optional.some(contentId), backstage, ariaAttrs);\n    const renderModalBody = (spec, dialogId, backstage) => {\n      const bodySpec = renderBody(spec, dialogId, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    const renderIframeBody = spec => {\n      const bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft(Optional.none(), {\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    const isTouch = global$5.deviceType.isTouch();\n    const hiddenHeader = (title, close) => ({\n      dom: {\n        tag: 'div',\n        styles: { display: 'none' },\n        classes: ['tox-dialog__header']\n      },\n      components: [\n        title,\n        close\n      ]\n    });\n    const pClose = (onClose, providersBackstage) => ModalDialog.parts.close(Button.sketch({\n      dom: {\n        tag: 'button',\n        classes: [\n          'tox-button',\n          'tox-button--icon',\n          'tox-button--naked'\n        ],\n        attributes: {\n          'type': 'button',\n          'aria-label': providersBackstage.translate('Close')\n        }\n      },\n      action: onClose,\n      buttonBehaviours: derive$1([Tabstopping.config({})])\n    }));\n    const pUntitled = () => ModalDialog.parts.title({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__title'],\n        innerHtml: '',\n        styles: { display: 'none' }\n      }\n    });\n    const pBodyMessage = (message, providersBackstage) => ModalDialog.parts.body({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__body']\n      },\n      components: [{\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-content']\n          },\n          components: [{ dom: fromHtml(`<p>${ sanitizeHtmlString(providersBackstage.translate(message)) }</p>`) }]\n        }]\n    });\n    const pFooter = buttons => ModalDialog.parts.footer({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__footer']\n      },\n      components: buttons\n    });\n    const pFooterGroup = (startButtons, endButtons) => [\n      Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer-start']\n        },\n        components: startButtons\n      }),\n      Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer-end']\n        },\n        components: endButtons\n      })\n    ];\n    const renderDialog$1 = spec => {\n      const dialogClass = 'tox-dialog';\n      const blockerClass = dialogClass + '-wrap';\n      const blockerBackdropClass = blockerClass + '__backdrop';\n      const scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: comp => {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: elem => !isPseudoStop(elem),\n        firstTabstop: spec.firstTabstop,\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: {\n            position: 'relative',\n            ...spec.extraStyles\n          }\n        },\n        components: [\n          spec.header,\n          spec.body,\n          ...spec.footer.toArray()\n        ],\n        parts: {\n          blocker: {\n            dom: fromHtml(`<div class=\"${ blockerClass }\"></div>`),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([\n            runOnSource(focusin(), (comp, _se) => {\n              Blocking.isBlocked(comp) ? noop() : Keying.focusIn(comp);\n            }),\n            run$1(focusShifted(), (comp, se) => {\n              comp.getSystem().broadcastOn([dialogFocusShiftedChannel], { newFocus: se.event.newFocus });\n            })\n          ])),\n          config('scroll-lock', [\n            runOnAttached(() => {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(() => {\n              remove$2(body(), scrollLockClass);\n            })\n          ]),\n          ...spec.extraBehaviours\n        ]),\n        eventOrder: {\n          [execute$5()]: ['dialog-events'],\n          [attachedToDom()]: [\n            'scroll-lock',\n            'dialog-events',\n            'alloy.base.behaviour'\n          ],\n          [detachedFromDom()]: [\n            'alloy.base.behaviour',\n            'dialog-events',\n            'scroll-lock'\n          ],\n          ...spec.eventOrder\n        }\n      });\n    };\n\n    const renderClose = providersBackstage => Button.sketch({\n      dom: {\n        tag: 'button',\n        classes: [\n          'tox-button',\n          'tox-button--icon',\n          'tox-button--naked'\n        ],\n        attributes: {\n          'type': 'button',\n          'aria-label': providersBackstage.translate('Close'),\n          'title': providersBackstage.translate('Close')\n        }\n      },\n      buttonBehaviours: derive$1([Tabstopping.config({})]),\n      components: [render$3('close', {\n          tag: 'span',\n          classes: ['tox-icon']\n        }, providersBackstage.icons)],\n      action: comp => {\n        emit(comp, formCancelEvent);\n      }\n    });\n    const renderTitle = (spec, dialogId, titleId, providersBackstage) => {\n      const renderComponents = data => [text$2(providersBackstage.translate(data.title))];\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: { ...titleId.map(x => ({ id: x })).getOr({}) }\n        },\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: `${ titleChannel }-${ dialogId }`,\n            initialData: spec,\n            renderComponents\n          })])\n      };\n    };\n    const renderDragHandle = () => ({ dom: fromHtml('<div class=\"tox-dialog__draghandle\"></div>') });\n    const renderInlineHeader = (spec, dialogId, titleId, providersBackstage) => Container.sketch({\n      dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n      components: [\n        renderTitle(spec, dialogId, Optional.some(titleId), providersBackstage),\n        renderDragHandle(),\n        renderClose(providersBackstage)\n      ],\n      containerBehaviours: derive$1([Dragging.config({\n          mode: 'mouse',\n          blockerClass: 'blocker',\n          getTarget: handle => {\n            return closest$1(handle, '[role=\"dialog\"]').getOrDie();\n          },\n          snaps: {\n            getSnapPoints: () => [],\n            leftAttr: 'data-drag-left',\n            topAttr: 'data-drag-top'\n          }\n        })])\n    });\n    const renderModalHeader = (spec, dialogId, providersBackstage) => {\n      const pTitle = ModalDialog.parts.title(renderTitle(spec, dialogId, Optional.none(), providersBackstage));\n      const pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      const pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      const components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml('<div class=\"tox-dialog__header\"></div>'),\n        components\n      });\n    };\n\n    const getHeader = (title, dialogId, backstage) => renderModalHeader({\n      title: backstage.shared.providers.translate(title),\n      draggable: backstage.dialog.isDraggableModal()\n    }, dialogId, backstage.shared.providers);\n    const getBusySpec = (message, bs, providers, headerHeight) => ({\n      dom: {\n        tag: 'div',\n        classes: ['tox-dialog__busy-spinner'],\n        attributes: { 'aria-label': providers.translate(message) },\n        styles: {\n          left: '0px',\n          right: '0px',\n          bottom: '0px',\n          top: `${ headerHeight.getOr(0) }px`,\n          position: 'absolute'\n        }\n      },\n      behaviours: bs,\n      components: [{ dom: fromHtml('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n    });\n    const getEventExtras = (lazyDialog, providers, extra) => ({\n      onClose: () => extra.closeWindow(),\n      onBlock: blockEvent => {\n        const headerHeight = descendant(lazyDialog().element, '.tox-dialog__header').map(header => get$d(header));\n        ModalDialog.setBusy(lazyDialog(), (_comp, bs) => getBusySpec(blockEvent.message, bs, providers, headerHeight));\n      },\n      onUnblock: () => {\n        ModalDialog.setIdle(lazyDialog());\n      }\n    });\n    const fullscreenClass = 'tox-dialog--fullscreen';\n    const largeDialogClass = 'tox-dialog--width-lg';\n    const mediumDialogClass = 'tox-dialog--width-md';\n    const getDialogSizeClass = size => {\n      switch (size) {\n      case 'large':\n        return Optional.some(largeDialogClass);\n      case 'medium':\n        return Optional.some(mediumDialogClass);\n      default:\n        return Optional.none();\n      }\n    };\n    const updateDialogSizeClass = (size, component) => {\n      const dialogBody = SugarElement.fromDom(component.element.dom);\n      if (!has(dialogBody, fullscreenClass)) {\n        remove$1(dialogBody, [\n          largeDialogClass,\n          mediumDialogClass\n        ]);\n        getDialogSizeClass(size).each(dialogSizeClass => add$2(dialogBody, dialogSizeClass));\n      }\n    };\n    const toggleFullscreen = (comp, currentSize) => {\n      const dialogBody = SugarElement.fromDom(comp.element.dom);\n      const classes = get$7(dialogBody);\n      const currentSizeClass = find$5(classes, c => c === largeDialogClass || c === mediumDialogClass).or(getDialogSizeClass(currentSize));\n      toggle$3(dialogBody, [\n        fullscreenClass,\n        ...currentSizeClass.toArray()\n      ]);\n    };\n    const renderModalDialog = (spec, dialogEvents, backstage) => build$1(renderDialog$1({\n      ...spec,\n      firstTabstop: 1,\n      lazySink: backstage.shared.getSink,\n      extraBehaviours: [\n        memory({}),\n        ...spec.extraBehaviours\n      ],\n      onEscape: comp => {\n        emit(comp, formCancelEvent);\n      },\n      dialogEvents,\n      eventOrder: {\n        [receive()]: [\n          Reflecting.name(),\n          Receiving.name()\n        ],\n        [attachedToDom()]: [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ],\n        [detachedFromDom()]: [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ]\n      }\n    }));\n    const mapMenuButtons = (buttons, menuItemStates = {}) => {\n      const mapItems = button => {\n        const items = map$2(button.items, item => {\n          const cell = get$g(menuItemStates, item.name).getOr(Cell(false));\n          return {\n            ...item,\n            storage: cell\n          };\n        });\n        return {\n          ...button,\n          items\n        };\n      };\n      return map$2(buttons, button => {\n        return button.type === 'menu' ? mapItems(button) : button;\n      });\n    };\n    const extractCellsToObject = buttons => foldl(buttons, (acc, button) => {\n      if (button.type === 'menu') {\n        const menuButton = button;\n        return foldl(menuButton.items, (innerAcc, item) => {\n          innerAcc[item.name] = item.storage;\n          return innerAcc;\n        }, acc);\n      }\n      return acc;\n    }, {});\n\n    const initCommonEvents = (fireApiEvent, extras) => [\n      runWithTarget(focusin(), onFocus),\n      fireApiEvent(formCloseEvent, (_api, spec, _event, self) => {\n        active$1(getRootNode(self.element)).fold(noop, blur$1);\n        extras.onClose();\n        spec.onClose();\n      }),\n      fireApiEvent(formCancelEvent, (api, spec, _event, self) => {\n        spec.onCancel(api);\n        emit(self, formCloseEvent);\n      }),\n      run$1(formUnblockEvent, (_c, _se) => extras.onUnblock()),\n      run$1(formBlockEvent, (_c, se) => extras.onBlock(se.event))\n    ];\n    const initUrlDialog = (getInstanceApi, extras) => {\n      const fireApiEvent = (eventName, f) => run$1(eventName, (c, se) => {\n        withSpec(c, (spec, _c) => {\n          f(getInstanceApi(), spec, se.event, c);\n        });\n      });\n      const withSpec = (c, f) => {\n        Reflecting.getState(c).get().each(currentDialog => {\n          f(currentDialog, c);\n        });\n      };\n      return [\n        ...initCommonEvents(fireApiEvent, extras),\n        fireApiEvent(formActionEvent, (api, spec, event) => {\n          spec.onAction(api, { name: event.name });\n        })\n      ];\n    };\n    const initDialog = (getInstanceApi, extras, getSink) => {\n      const fireApiEvent = (eventName, f) => run$1(eventName, (c, se) => {\n        withSpec(c, (spec, _c) => {\n          f(getInstanceApi(), spec, se.event, c);\n        });\n      });\n      const withSpec = (c, f) => {\n        Reflecting.getState(c).get().each(currentDialogInit => {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return [\n        ...initCommonEvents(fireApiEvent, extras),\n        fireApiEvent(formSubmitEvent, (api, spec) => spec.onSubmit(api)),\n        fireApiEvent(formChangeEvent, (api, spec, event) => {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, (api, spec, event, component) => {\n          const focusIn = () => component.getSystem().isConnected() ? Keying.focusIn(component) : undefined;\n          const isDisabled = focused => has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(val => val === 'true');\n          const rootNode = getRootNode(component.element);\n          const current = active$1(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active$1(rootNode).fold(focusIn, focused => {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(cur => contains(focused, cur) && isDisabled(cur))) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(sink => !contains(sink.element, focused)).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, (api, spec, event) => {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(component => {\n          const api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ];\n    };\n\n    const makeButton = (button, backstage) => renderFooterButton(button, button.type, backstage);\n    const lookup = (compInSystem, footerButtons, buttonName) => find$5(footerButtons, button => button.name === buttonName).bind(memButton => memButton.memento.getOpt(compInSystem));\n    const renderComponents = (_data, state) => {\n      const footerButtons = state.map(s => s.footerButtons).getOr([]);\n      const buttonGroups = partition$3(footerButtons, button => button.align === 'start');\n      const makeGroup = (edge, buttons) => Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [`tox-dialog__footer-${ edge }`]\n        },\n        components: map$2(buttons, button => button.memento.asSpec())\n      });\n      const startButtons = makeGroup('start', buttonGroups.pass);\n      const endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    const renderFooter = (initSpec, dialogId, backstage) => {\n      const updateState = (comp, data) => {\n        const footerButtons = map$2(data.buttons, button => {\n          const memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        const lookupByName = buttonName => lookup(comp, footerButtons, buttonName);\n        return Optional.some({\n          lookupByName,\n          footerButtons\n        });\n      };\n      return {\n        dom: fromHtml('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: `${ footerChannel }-${ dialogId }`,\n            initialData: initSpec,\n            updateState,\n            renderComponents\n          })])\n      };\n    };\n    const renderInlineFooter = (initSpec, dialogId, backstage) => renderFooter(initSpec, dialogId, backstage);\n    const renderModalFooter = (initSpec, dialogId, backstage) => ModalDialog.parts.footer(renderFooter(initSpec, dialogId, backstage));\n\n    const getCompByName = (access, name) => {\n      const root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        const form = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form, name).orThunk(() => {\n          const footer = access.getFooter();\n          const footerState = footer.bind(f => Reflecting.getState(f).get());\n          return footerState.bind(f => f.lookupByName(name));\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const validateData$1 = (access, data) => {\n      const root = access.getRoot();\n      return Reflecting.getState(root).get().map(dialogState => getOrDie(asRaw('data', dialogState.dataValidator, data))).getOr(data);\n    };\n    const getDialogApi = (access, doRedial, menuItemStates) => {\n      const withRoot = f => {\n        const root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      const getData = () => {\n        const root = access.getRoot();\n        const valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        const representedValues = Representing.getValue(valueComp);\n        const menuItemCurrentState = map$1(menuItemStates, cell => cell.get());\n        return {\n          ...representedValues,\n          ...menuItemCurrentState\n        };\n      };\n      const setData = newData => {\n        withRoot(_ => {\n          const prevData = instanceApi.getData();\n          const mergedData = deepMerge(prevData, newData);\n          const newInternalData = validateData$1(access, mergedData);\n          const form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each(menuItemStates, (v, k) => {\n            if (has$2(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      const setEnabled = (name, state) => {\n        getCompByName(access, name).each(state ? Disabling.enable : Disabling.disable);\n      };\n      const focus = name => {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      const block = message => {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(root => {\n          emitWith(root, formBlockEvent, { message });\n        });\n      };\n      const unblock = () => {\n        withRoot(root => {\n          emit(root, formUnblockEvent);\n        });\n      };\n      const showTab = name => {\n        withRoot(_ => {\n          const body = access.getBody();\n          const bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(b => b.isTabPanel())) {\n            Composing.getCurrent(body).each(tabSection => {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      const redial = d => {\n        withRoot(root => {\n          const id = access.getId();\n          const dialogInit = doRedial(d);\n          const storedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons, menuItemStates);\n          root.getSystem().broadcastOn([`${ dialogChannel }-${ id }`], dialogInit);\n          root.getSystem().broadcastOn([`${ titleChannel }-${ id }`], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([`${ bodyChannel }-${ id }`], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([`${ footerChannel }-${ id }`], {\n            ...dialogInit.internalDialog,\n            buttons: storedMenuButtons\n          });\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      const close = () => {\n        withRoot(root => {\n          emit(root, formCloseEvent);\n        });\n      };\n      const instanceApi = {\n        getData,\n        setData,\n        setEnabled,\n        focus,\n        block,\n        unblock,\n        showTab,\n        redial,\n        close,\n        toggleFullscreen: access.toggleFullscreen\n      };\n      return instanceApi;\n    };\n\n    const renderDialog = (dialogInit, extra, backstage) => {\n      const dialogId = generate$6('dialog');\n      const internalDialog = dialogInit.internalDialog;\n      const header = getHeader(internalDialog.title, dialogId, backstage);\n      const dialogSize = Cell(internalDialog.size);\n      const dialogSizeClasses = getDialogSizeClass(dialogSize.get()).toArray();\n      const updateState = (comp, incoming) => {\n        dialogSize.set(incoming.internalDialog.size);\n        updateDialogSizeClass(incoming.internalDialog.size, comp);\n        return Optional.some(incoming);\n      };\n      const body = renderModalBody({\n        body: internalDialog.body,\n        initialData: internalDialog.initialData\n      }, dialogId, backstage);\n      const storedMenuButtons = mapMenuButtons(internalDialog.buttons);\n      const objOfCells = extractCellsToObject(storedMenuButtons);\n      const footer = someIf(storedMenuButtons.length !== 0, renderModalFooter({ buttons: storedMenuButtons }, dialogId, backstage));\n      const dialogEvents = initDialog(() => instanceApi, getEventExtras(() => dialog, backstage.shared.providers, extra), backstage.shared.getSink);\n      const spec = {\n        id: dialogId,\n        header,\n        body,\n        footer,\n        extraClasses: dialogSizeClasses,\n        extraBehaviours: [Reflecting.config({\n            channel: `${ dialogChannel }-${ dialogId }`,\n            updateState,\n            initialData: dialogInit\n          })],\n        extraStyles: {}\n      };\n      const dialog = renderModalDialog(spec, dialogEvents, backstage);\n      const modalAccess = (() => {\n        const getForm = () => {\n          const outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        const toggleFullscreen$1 = () => {\n          toggleFullscreen(dialog, dialogSize.get());\n        };\n        return {\n          getId: constant$1(dialogId),\n          getRoot: constant$1(dialog),\n          getBody: () => ModalDialog.getBody(dialog),\n          getFooter: () => ModalDialog.getFooter(dialog),\n          getFormWrapper: getForm,\n          toggleFullscreen: toggleFullscreen$1\n        };\n      })();\n      const instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog,\n        instanceApi\n      };\n    };\n\n    const renderInlineDialog = (dialogInit, extra, backstage, ariaAttrs = false, refreshDocking) => {\n      const dialogId = generate$6('dialog');\n      const dialogLabelId = generate$6('dialog-label');\n      const dialogContentId = generate$6('dialog-content');\n      const internalDialog = dialogInit.internalDialog;\n      const dialogSize = Cell(internalDialog.size);\n      const dialogSizeClass = getDialogSizeClass(dialogSize.get()).toArray();\n      const updateState = (comp, incoming) => {\n        dialogSize.set(incoming.internalDialog.size);\n        updateDialogSizeClass(incoming.internalDialog.size, comp);\n        refreshDocking();\n        return Optional.some(incoming);\n      };\n      const memHeader = record(renderInlineHeader({\n        title: internalDialog.title,\n        draggable: true\n      }, dialogId, dialogLabelId, backstage.shared.providers));\n      const memBody = record(renderInlineBody({\n        body: internalDialog.body,\n        initialData: internalDialog.initialData\n      }, dialogId, dialogContentId, backstage, ariaAttrs));\n      const storagedMenuButtons = mapMenuButtons(internalDialog.buttons);\n      const objOfCells = extractCellsToObject(storagedMenuButtons);\n      const optMemFooter = someIf(storagedMenuButtons.length !== 0, record(renderInlineFooter({ buttons: storagedMenuButtons }, dialogId, backstage)));\n      const dialogEvents = initDialog(() => instanceApi, {\n        onBlock: event => {\n          Blocking.block(dialog, (_comp, bs) => {\n            const headerHeight = memHeader.getOpt(dialog).map(dialog => get$d(dialog.element));\n            return getBusySpec(event.message, bs, backstage.shared.providers, headerHeight);\n          });\n        },\n        onUnblock: () => {\n          Blocking.unblock(dialog);\n        },\n        onClose: () => extra.closeWindow()\n      }, backstage.shared.getSink);\n      const inlineClass = 'tox-dialog-inline';\n      const dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            inlineClass,\n            ...dialogSizeClass\n          ],\n          attributes: {\n            role: 'dialog',\n            ['aria-labelledby']: dialogLabelId\n          }\n        },\n        eventOrder: {\n          [receive()]: [\n            Reflecting.name(),\n            Receiving.name()\n          ],\n          [execute$5()]: ['execute-on-form'],\n          [attachedToDom()]: [\n            'reflecting',\n            'execute-on-form'\n          ]\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: c => {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: elem => !isPseudoStop(elem) && (name$3(elem) !== 'button' || get$f(elem, 'disabled') !== 'disabled'),\n            firstTabstop: 1\n          }),\n          Reflecting.config({\n            channel: `${ dialogChannel }-${ dialogId }`,\n            updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([\n            runOnSource(focusin(), (comp, _se) => {\n              Keying.focusIn(comp);\n            }),\n            run$1(focusShifted(), (comp, se) => {\n              comp.getSystem().broadcastOn([dialogFocusShiftedChannel], { newFocus: se.event.newFocus });\n            })\n          ])),\n          Blocking.config({ getRoot: () => Optional.some(dialog) }),\n          Replacing.config({}),\n          memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          ...optMemFooter.map(memFooter => memFooter.asSpec()).toArray()\n        ]\n      });\n      const toggleFullscreen$1 = () => {\n        toggleFullscreen(dialog, dialogSize.get());\n      };\n      const instanceApi = getDialogApi({\n        getId: constant$1(dialogId),\n        getRoot: constant$1(dialog),\n        getFooter: () => optMemFooter.map(memFooter => memFooter.get(dialog)),\n        getBody: () => memBody.get(dialog),\n        getFormWrapper: () => {\n          const body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        },\n        toggleFullscreen: toggleFullscreen$1\n      }, extra.redial, objOfCells);\n      return {\n        dialog,\n        instanceApi\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    const getUrlDialogApi = root => {\n      const withRoot = f => {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      const block = message => {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(root => {\n          emitWith(root, formBlockEvent, { message });\n        });\n      };\n      const unblock = () => {\n        withRoot(root => {\n          emit(root, formUnblockEvent);\n        });\n      };\n      const close = () => {\n        withRoot(root => {\n          emit(root, formCloseEvent);\n        });\n      };\n      const sendMessage = data => {\n        withRoot(root => {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block,\n        unblock,\n        close,\n        sendMessage\n      };\n    };\n\n    const SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    const isSupportedMessage = data => isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    const isCustomMessage = data => !isSupportedMessage(data) && isObject(data) && has$2(data, 'mceAction');\n    const handleMessage = (editor, api, data) => {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        const ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    const renderUrlDialog = (internalDialog, extra, editor, backstage) => {\n      const dialogId = generate$6('dialog');\n      const header = getHeader(internalDialog.title, dialogId, backstage);\n      const body = renderIframeBody(internalDialog);\n      const footer = internalDialog.buttons.bind(buttons => {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons }, dialogId, backstage));\n        }\n      });\n      const dialogEvents = initUrlDialog(() => instanceApi, getEventExtras(() => dialog, backstage.shared.providers, extra));\n      const styles = {\n        ...internalDialog.height.fold(() => ({}), height => ({\n          'height': height + 'px',\n          'max-height': height + 'px'\n        })),\n        ...internalDialog.width.fold(() => ({}), width => ({\n          'width': width + 'px',\n          'max-width': width + 'px'\n        }))\n      };\n      const classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      const iframeUri = new global(internalDialog.url, { base_uri: new global(window.location.href) });\n      const iframeDomain = `${ iframeUri.protocol }://${ iframeUri.host }${ iframeUri.port ? ':' + iframeUri.port : '' }`;\n      const messageHandlerUnbinder = unbindable();\n      const updateState = (_comp, incoming) => Optional.some(incoming);\n      const extraBehaviours = [\n        Reflecting.config({\n          channel: `${ dialogChannel }-${ dialogId }`,\n          updateState,\n          initialData: internalDialog\n        }),\n        config('messages', [\n          runOnAttached(() => {\n            const unbind = bind(SugarElement.fromDom(window), 'message', e => {\n              if (iframeUri.isSameOrigin(new global(e.raw.origin))) {\n                const data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(unbind);\n          }),\n          runOnDetached(messageHandlerUnbinder.clear)\n        ]),\n        Receiving.config({\n          channels: {\n            [bodySendMessageChannel]: {\n              onReceive: (comp, data) => {\n                descendant(comp.element, 'iframe').each(iframeEle => {\n                  const iframeWin = iframeEle.dom.contentWindow;\n                  if (isNonNullable(iframeWin)) {\n                    iframeWin.postMessage(data, iframeDomain);\n                  }\n                });\n              }\n            }\n          }\n        })\n      ];\n      const spec = {\n        id: dialogId,\n        header,\n        body,\n        footer,\n        extraClasses: classes,\n        extraBehaviours,\n        extraStyles: styles\n      };\n      const dialog = renderModalDialog(spec, dialogEvents, backstage);\n      const instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog,\n        instanceApi\n      };\n    };\n\n    const setup$2 = backstage => {\n      const sharedBackstage = backstage.shared;\n      const open = (message, callback) => {\n        const closeDialog = () => {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        const memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          buttonType: Optional.some('primary'),\n          align: 'end',\n          enabled: true,\n          icon: Optional.none()\n        }, 'cancel', backstage));\n        const titleSpec = pUntitled();\n        const closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        const alertDialog = build$1(renderDialog$1({\n          lazySink: () => sharedBackstage.getSink(),\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run$1(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        const footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open };\n    };\n\n    const setup$1 = backstage => {\n      const sharedBackstage = backstage.shared;\n      const open = (message, callback) => {\n        const closeDialog = state => {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        const memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          buttonType: Optional.some('primary'),\n          align: 'end',\n          enabled: true,\n          icon: Optional.none()\n        }, 'submit', backstage));\n        const footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          buttonType: Optional.some('secondary'),\n          align: 'end',\n          enabled: true,\n          icon: Optional.none()\n        }, 'cancel', backstage);\n        const titleSpec = pUntitled();\n        const closeSpec = pClose(() => closeDialog(false), sharedBackstage.providers);\n        const confirmDialog = build$1(renderDialog$1({\n          lazySink: () => sharedBackstage.getSink(),\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: () => closeDialog(false),\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run$1(formCancelEvent, () => closeDialog(false)),\n            run$1(formSubmitEvent, () => closeDialog(true))\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        const footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open };\n    };\n\n    const validateData = (data, validator) => getOrDie(asRaw('data', validator, data));\n    const isAlertOrConfirmDialog = target => closest(target, '.tox-alert-dialog') || closest(target, '.tox-confirm-dialog');\n    const inlineAdditionalBehaviours = (editor, isStickyToolbar, isToolbarLocationTop) => {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: () => Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer()))),\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top'],\n            lazyViewport: comp => {\n              const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n              return optScrollingContext.map(sc => {\n                const combinedBounds = getBoundsFrom(sc);\n                return {\n                  bounds: combinedBounds,\n                  optScrollEnv: Optional.some({\n                    currentScrollTop: sc.element.dom.scrollTop,\n                    scrollElmTop: absolute$3(sc.element).top\n                  })\n                };\n              }).getOrThunk(() => ({\n                bounds: win(),\n                optScrollEnv: Optional.none()\n              }));\n            }\n          })];\n      }\n    };\n    const setup = extras => {\n      const editor = extras.editor;\n      const isStickyToolbar$1 = isStickyToolbar(editor);\n      const alertDialog = setup$2(extras.backstages.dialog);\n      const confirmDialog = setup$1(extras.backstages.dialog);\n      const open = (config, params, closeWindow) => {\n        if (!isUndefined(params)) {\n          if (params.inline === 'toolbar') {\n            return openInlineDialog(config, extras.backstages.popup.shared.anchors.inlineDialog(), closeWindow, params);\n          } else if (params.inline === 'bottom') {\n            return openBottomInlineDialog(config, extras.backstages.popup.shared.anchors.inlineBottomDialog(), closeWindow, params);\n          } else if (params.inline === 'cursor') {\n            return openInlineDialog(config, extras.backstages.popup.shared.anchors.cursor(), closeWindow, params);\n          }\n        }\n        return openModalDialog(config, closeWindow);\n      };\n      const openUrl = (config, closeWindow) => openModalUrlDialog(config, closeWindow);\n      const openModalUrlDialog = (config, closeWindow) => {\n        const factory = contents => {\n          const dialog = renderUrlDialog(contents, {\n            closeWindow: () => {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, extras.backstages.dialog);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      const openModalDialog = (config, closeWindow) => {\n        const factory = (contents, internalInitialData, dataValidator) => {\n          const initialData = internalInitialData;\n          const dialogInit = {\n            dataValidator,\n            initialData,\n            internalDialog: contents\n          };\n          const dialog = renderDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: () => {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, extras.backstages.dialog);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      const openInlineDialog = (config$1, anchor, closeWindow, windowParams) => {\n        const factory = (contents, internalInitialData, dataValidator) => {\n          const initialData = validateData(internalInitialData, dataValidator);\n          const inlineDialog = value$2();\n          const isToolbarLocationTop = extras.backstages.popup.shared.header.isPositionedAtTop();\n          const dialogInit = {\n            dataValidator,\n            initialData,\n            internalDialog: contents\n          };\n          const refreshDocking = () => inlineDialog.on(dialog => {\n            InlineView.reposition(dialog);\n            if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n              Docking.refresh(dialog);\n            }\n          });\n          const dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: () => {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, extras.backstages.popup, windowParams.ariaAttrs, refreshDocking);\n          const inlineDialogComp = build$1(InlineView.sketch({\n            lazySink: extras.backstages.popup.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: windowParams.persistent ? { event: 'doNotDismissYet' } : {},\n            ...isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} },\n            inlineBehaviours: derive$1([\n              config('window-manager-inline-events', [run$1(dismissRequested(), (_comp, _se) => {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })]),\n              ...inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop)\n            ]),\n            isExtraPart: (_comp, target) => isAlertOrConfirmDialog(target)\n          }));\n          inlineDialog.set(inlineDialogComp);\n          const getInlineDialogBounds = () => {\n            const elem = editor.inline ? body() : SugarElement.fromDom(editor.getContainer());\n            const bounds = box$1(elem);\n            return Optional.some(bounds);\n          };\n          InlineView.showWithinBounds(inlineDialogComp, premade(dialogUi.dialog), { anchor }, getInlineDialogBounds);\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      const openBottomInlineDialog = (config$1, anchor, closeWindow, windowParams) => {\n        const factory = (contents, internalInitialData, dataValidator) => {\n          const initialData = validateData(internalInitialData, dataValidator);\n          const inlineDialog = value$2();\n          const isToolbarLocationTop = extras.backstages.popup.shared.header.isPositionedAtTop();\n          const dialogInit = {\n            dataValidator,\n            initialData,\n            internalDialog: contents\n          };\n          const refreshDocking = () => inlineDialog.on(dialog => {\n            InlineView.reposition(dialog);\n            Docking.refresh(dialog);\n          });\n          const dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: () => {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor ScrollWindow ElementScroll', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, extras.backstages.popup, windowParams.ariaAttrs, refreshDocking);\n          const inlineDialogComp = build$1(InlineView.sketch({\n            lazySink: extras.backstages.popup.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: windowParams.persistent ? { event: 'doNotDismissYet' } : {},\n            ...isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} },\n            inlineBehaviours: derive$1([\n              config('window-manager-inline-events', [run$1(dismissRequested(), (_comp, _se) => {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })]),\n              Docking.config({\n                contextual: {\n                  lazyContext: () => Optional.some(box$1(SugarElement.fromDom(editor.getContentAreaContainer()))),\n                  fadeInClass: 'tox-dialog-dock-fadein',\n                  fadeOutClass: 'tox-dialog-dock-fadeout',\n                  transitionClass: 'tox-dialog-dock-transition'\n                },\n                modes: [\n                  'top',\n                  'bottom'\n                ],\n                lazyViewport: comp => {\n                  const optScrollingContext = detectWhenSplitUiMode(editor, comp.element);\n                  return optScrollingContext.map(sc => {\n                    const combinedBounds = getBoundsFrom(sc);\n                    return {\n                      bounds: combinedBounds,\n                      optScrollEnv: Optional.some({\n                        currentScrollTop: sc.element.dom.scrollTop,\n                        scrollElmTop: absolute$3(sc.element).top\n                      })\n                    };\n                  }).getOrThunk(() => ({\n                    bounds: win(),\n                    optScrollEnv: Optional.none()\n                  }));\n                }\n              })\n            ]),\n            isExtraPart: (_comp, target) => isAlertOrConfirmDialog(target)\n          }));\n          inlineDialog.set(inlineDialogComp);\n          const getInlineDialogBounds = () => {\n            return extras.backstages.popup.shared.getSink().toOptional().bind(s => {\n              const optScrollingContext = detectWhenSplitUiMode(editor, s.element);\n              const margin = 15;\n              const bounds$1 = optScrollingContext.map(sc => getBoundsFrom(sc)).getOr(win());\n              const contentAreaContainer = box$1(SugarElement.fromDom(editor.getContentAreaContainer()));\n              const constrainedBounds = constrain(contentAreaContainer, bounds$1);\n              return Optional.some(bounds(constrainedBounds.x, constrainedBounds.y, constrainedBounds.width, constrainedBounds.height - margin));\n            });\n          };\n          InlineView.showWithinBounds(inlineDialogComp, premade(dialogUi.dialog), { anchor }, getInlineDialogBounds);\n          Docking.refresh(inlineDialogComp);\n          editor.on('ResizeEditor ScrollWindow ElementScroll ResizeWindow', refreshDocking);\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      const confirm = (message, callback) => {\n        confirmDialog.open(message, callback);\n      };\n      const alert = (message, callback) => {\n        alertDialog.open(message, callback);\n      };\n      const close = instanceApi => {\n        instanceApi.close();\n      };\n      return {\n        open,\n        openUrl,\n        alert,\n        close,\n        confirm\n      };\n    };\n\n    const registerOptions = editor => {\n      register$e(editor);\n      register$d(editor);\n      register(editor);\n    };\n    var Theme = () => {\n      global$a.add('silver', editor => {\n        registerOptions(editor);\n        let popupSinkBounds = () => win();\n        const {\n          dialogs,\n          popups,\n          renderUI: renderModeUI\n        } = setup$3(editor, { getPopupSinkBounds: () => popupSinkBounds() });\n        const renderUI = () => {\n          const renderResult = renderModeUI();\n          const optScrollingContext = detectWhenSplitUiMode(editor, popups.getMothership().element);\n          optScrollingContext.each(sc => {\n            popupSinkBounds = () => {\n              return getBoundsFrom(sc);\n            };\n          });\n          return renderResult;\n        };\n        Autocompleter.register(editor, popups.backstage.shared);\n        const windowMgr = setup({\n          editor,\n          backstages: {\n            popup: popups.backstage,\n            dialog: dialogs.backstage\n          }\n        });\n        const getNotificationManagerImpl = () => NotificationManagerImpl(editor, { backstage: popups.backstage }, popups.getMothership());\n        return {\n          renderUI,\n          getWindowManagerImpl: constant$1(windowMgr),\n          getNotificationManagerImpl\n        };\n      });\n    };\n\n    Theme();\n\n})();\n"],"names":["getPrototypeOf$2","hasProto","v","constructor","predicate","_a","typeOf","x","t","proto","isType$1","type","value","isSimpleType","eq$1","a","is$2","isObject","isString","isPlainObject","isArray","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","i","len","noop","noarg","f","compose","fa","fb","args","compose1","fbc","fab","constant$1","identity","tripleEquals","b","curry","fn","initialArgs","restArgs","all","not","die","msg","apply$1","never","always","Optional","tag","onNone","onSome","mapper","binder","replacement","thunk","message","worker","nativeSlice","nativeIndexOf","nativePush","rawIndexOf","ts","indexOf","xs","r","contains$2","exists","range$2","num","chunk$1","array","size","map$2","each$1","eachr","partition$3","pass","fail","filter$2","foldr","acc","foldl","findUntil","until","find$5","findIndex$1","flatten","bind$3","forall","reverse","difference","a1","a2","mapToObject","pure$2","sort","comparator","copy","get$h","head","last$1","from","findMap","arr","keys","hasOwnProperty","each","obj","props","k","map$1","tupleMap","tuple","objAcc","internalFilter","onTrue","onFalse","bifilter","filter$1","mapToArray","name","find$4","values","get$g","key","has$2","hasNonNullableKey","is$1","lhs","rhs","left","equals","lift2","cat","push","sequence","oa","ob","lift3","oc","mapFrom","someIf","addToEnd","str","suffix","removeFromStart","numChars","checkRange","substr","start","removeLeading","prefix","startsWith","ensureTrailing","endsWith","contains$1","end","idx","trim$1","s","isNotEmpty","isEmpty","isSupported$1","dom","fromHtml$2","html","scope","div","fromDom","fromTag","node","fromText","text","SugarElement","docElm","y","Global","path$1","parts","resolve","p","unsafe","getOrDie$1","actual","getPrototypeOf$1","sandHTMLElement","isPrototypeOf","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","name$3","element","type$1","isType","isHTMLElement","isElement$1","isText","isDocument","isDocumentFragment","isTag","is","selector","elem","bypassSelector","all$3","base","one","eq","e1","e2","contains","d1","d2","owner$4","documentOrOwner","dos","documentElement","defaultView","parent","parentNode","parentElement","parents","isRoot","stop","ret","rawParent","offsetParent","nextSibling","children","child$2","index","cs","firstChild","spot","offset","leaf","isShadowRoot","supported","isSupported","getRootNode","e","getContentContainer","isInShadowRoot","getShadowRoot","getShadowHost","getOriginalEventTarget","event","el","isOpenShadowHost","composedPath","inBody","doc","body","getBody","rawSet","set$9","setAll$1","attrs","get$f","getOpt","has$1","remove$7","clone$2","attr","internalSet","property","internalRemove","set$8","setAll","css","setOptions","get$e","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue$1","remove$6","reflow","Dimension","getOffset","set","h","get","getOuter","aggregate","properties","val","cumulativeInclusions","api$2","get$d","getOuter$2","setMax$1","inclusions","absMax","r$1","top","SugarPosition","boxPosition","box","firstDefinedOrZero","absolute$3","win","scrollTop","scrollLeft","clientTop","clientLeft","viewport$1","api$1","set$7","get$c","getOuter$1","setMax","cached","called","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","firstMatch","regexes","find$3","agent","group","nu$d","detect$5","versionRegexes","cleanedAgent","unknown$3","major","minor","Version","detectBrowser$1","browsers","userAgentData","uaBrand","lcBrand","info","detect$4","candidates","candidate","detectBrowser","version","detectOs","oses","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chromium","ie","opera","firefox","safari","unknown$2","nu$c","current","isBrowser","Browser","windows","ios","android","linux","macos","solaris","freebsd","chromeos","unknown$1","nu$b","isOS","OperatingSystem","PlatformDetection","userAgentDataOpt","deviceType","query","platform","detect$2","mkEvent","prevent","kill","fromRawEvent$1","rawEvent","handle","filter","handler","useCapture","wrapped","unbind","bind$2","capture$1","before$1","marker","after$2","append$2","prepend$1","appendAt","append$1","elements","empty","rogue","remove$5","get$b","_DOC","to","get$a","_win","bounds$1","width","height","getBounds$3","scroll","visualViewport","getDocument","walkUp","navigation","rest","pathTo","d","paths","Navigation","find$2","frames","loc","pointed","point","rect","bounds","box$1","xy","w","absolute$2","position","constrain","original","constraint","right","bottom","constrainByMany","constraints","c","global$a","value$4","applyHelper","constHelper","outputHelper","output","_onError","onValue","Result","error$1","error","onError","_onValue","optional","err","SimpleResultType","fold$1","res","partition$2","results","errors","mapError","map","bind$1","bindError","svalue","serror","SimpleResult","field$2","newKey","presence","prop","customField$1","instantiator","fold","ifField","ifCustom","shallow$1","old","nu","deep$1","deepMerge","baseMerge","merger","objects","j","curObject","merge$1","required$2","defaultedThunk","fallbackThunk","defaulted$1","fallback","asOption","mergeWithThunk","baseThunk","mergeWith","mergeValues$1","mergeErrors$1","ResultCombine","partition","partitions","formatObj","input","formatErrors","es","nu$a","path","getErrorInfo","missingRequired","missingKey","missingBranch","branches","branch","unsupportedFields","unsupported","custom","value$3","validator","extract","toString","anyValue$1","requiredAccess","bundle","fallbackAccess","optionAccess","optionDefaultedAccess","opt","extractField","field","av","bundleAsOption","optValue","ov","result","extractFields","fields","success","valueThunk","getDelegate","getSetKeys","objOfOnly","delegate","objOf","fieldNames","o","extra","_okey","_presence","_instantiator","arrOf","oneOf","rawF","setOf$1","validateKeys","keys$1","validatedKeys","validKeys","schema","vk","_desc","processor","getP","arrOfObj","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","postMessageable","chooseFrom","ch","vp","choose$2","chosen","arrOfVal","valueOf","setOf","extractValue","label","errs","asRaw","getOrDie","extraction","errInfo","formatError","asRawOrDie$1","choose$1","thunkOf","desc","field$1","customField","validateEnum","required$1","requiredOf","requiredNumber","requiredString","requiredStringEnum","requiredBoolean","requiredFunction","forbid","_v","requiredObjOf","objSchema","requiredArrayOfObj","objFields","requiredArrayOf","option$3","optionOf","optionNumber","optionString","optionStringEnum","optionFunction","optionArrayOf","optionObjOf","optionObjOfOnly","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedPostMsg","defaultedArrayOf","defaultedObjOf","Cell","initial","Adt","cases","constructors","adt","acase","count","argLength","foldArgs","branchKeys","reqKey","partition$1","exclude$1","wrap$2","wrapAll$1","keyvalues","kv","exclude","wrap$1","wrapAll","mergeValues","mergeErrors","consolidate","objs","ensureIsRoot","ancestor$2","transform","transformed","closest$4","isSource","component","simulatedEvent","defaultEventHandler","nu$9","all$2","handlers","any","read$2","fuse$1","can","abort","constant","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","change","click","transitioncancel","transitionend","transitionstart","selectstart","prefixName","alloy","focus$4","postBlur","postPaste","receive","execute$5","focusItem","tap","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","externalElementScroll","changeTab","dismissTab","highlight$1","dehighlight$1","emit","dispatchWith","emitWith","emitExecute","dispatch","data","retargetAndDispatchWith","eventName","dispatchEvent","derive$2","configs","preventDefault","run$1","runActionExtra","action","runOnName","runOnSourceName","redirectToUid","uid","redirectee","redirectToPart","detail","partName","runWithTarget","ev","cutter","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute$1","fromHtml$1","get$9","set$6","content","docDom","fragment","contentElements","container","clone","clone$1","isDeep","shallow","deep","getHtml","isRecursive","originator","events$i","DefaultEvents","unique","generate$6","time","random","prefix$1","idAttr$1","idAttr","write","id","writeOnly","read$1","generate$5","make$8","NoContextApi","getComp","getMessage","warn","singleton$1","markAsBehaviourApi","apiName","apiFunction","endIndex","openBracketIndex","parameters","cleanParameters","markAsExtraApi","extraName","markAsSketchApi","premadeTag","premade$1","comp","isPremade","getPremade","spec","makeApi","NoState","nu$8","generateFrom$1","validated","optBlobThunk","blob","getBehaviours$3","bData","getData$2","byInnerKey","indexKey","chain","nu$7","merge","defnA","mod","combine$2","baseMod","behaviours","modsByBehaviour","behaviour","byAspect","modification","combineObjects","combinedClasses","combinedAttributes","combinedStyles","sortKeys","keyName","order","sorted","aKey","bKey","aIndex","bIndex","uncurried","purpose","curried","curryArgs","descHandler","extraArgs","getCurried","behaviourTuple","nameToHandlers","groupByEvents","behaviourEvents","combine$1","eventOrder","byEventName","combineGroups","assemble","rawHandler","missingOrderError","tuples","fuse","sortedTuples","assembled","baseBehaviour","schema$z","toInfo","toDefinition","toModification","toEvents","read","add$4","remove$4","supports","get$8","add$3","clazz","remove$3","toggle$5","add$2","cleanClass","remove$2","toggle$4","has","add$1","classes","remove$1","toggle$3","hasAll","getNative","classList","item","get$7","get$6","set$5","determineObsoleted","oldObsoleted","newObs","oldTag","ensureInDom","child","obsoleted","obs","patchChildrenWith","builtChildren","currentChildren","patchSpecChild","build","childComp","patchSpecChildren","specs","patchDomChildren","nodes","optObsoleted","diffKeyValueSet","newObj","oldObj","newKeys","oldKeys","toRemove","toSet","reconcileToDom","definition","style","existingAttributes","attrsToSet","attrsToRemove","updateAttrs","existingStyles","stylesToSet","stylesToRemove","updateStyles","existingClasses","classesToRemove","classesToAdd","updateClasses","updateHtml","updateChildren","updateValue","valueElement","introduceToDom","subject","attemptPatch","hasMixedChildren","renderToDom","canBePatched","getBehaviours$2","generateFrom","generate$4","getDomDefinition","bList","infoModification","baseModification","getEvents","baseEvents","build$2","getMe","me","systemApi","bBlob","modDefinition","events","subcomponents","connect","newApi","disconnect","syncComponents","children$1","subs","config","hasConfigured","getApis","readState","behaviourName","buildSubcomponents","components","build$1","buildOrPatch","buildFromSpec","userSpec","specEvents","completeSpec","text$2","textContent","external$1","extSpec","uids","isSketchSpec$1","userSpecWithUid","premade","ClosestOrAncestor","ancestor","ancestor$1","closest$3","test","child$1","descendant$1","descend","closest$2","descendant","closest$1","attribute","find$1","queryElem","dep","manager","ariaId","isAriaPartOf","owner","isPartOf$1","unknown","EventConfiguration","eventConfig","makeEventLogger","initialTarget","startTime","_name","finishTime","processEvent","patterns","noLogger","logger","getTrace","lines","line","ignoreEvent","monitorEvent","menuFields","itemFields","itemSchema$3","_initSize","itemMarkers","tieredMenuMarkers","markers$1","required","onPresenceHandler","fieldName","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","output$1","snapshot","initSize","nu$6","bubble","direction","placement","boundsRestriction","labelPrefix","alwaysFit","adt$a","cata$2","southeast","southwest","northeast","northwest","south","north","east","west","cataVertical","middle","cataHorizontal","southeast$3","southwest$3","northeast$3","northwest$3","south$3","north$3","east$3","west$3","cycleBy","delta","min","max","clamp","getRestriction","anchor","restriction","restrictions","dir","adjustBounds","bubbleOffset","applyRestriction","pos","isVerticalAxis","newPos","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","labelPrefix$2","eastX$1","middleX$1","westX$1","northY$2","southY$2","centreY$1","eastEdgeX$1","westEdgeX$1","southeast$2","bubbles","southwest$2","northeast$2","northwest$2","north$2","south$2","east$2","west$2","all$1","allRtl$1","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","chooseChannels","channels","ActiveReceiving","channelMap","receiveConfig","receivingData","targetChannels","channelInfo","channelSchema","ReceivingSchema","executeEvent","bConfig","bState","executor","loadEvent","_simulatedEvent","create$5","active","apis","state","configSchema","schemaSchema","doCreate","createModes$1","modes","wrapApi","bName","revokeBehaviour","getConfig","wrappedApis","apiF","extraF","prepared","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$4","modeSchema","createModes","revoke","Receiving","ActivePosition","posConfig","focus$3","preventScroll","blur$1","hasFocus","root","active$1","search","preserve$1","refocus","focused","oldFocus","newFocus","NuPositionCss","toPx","toOptions","applyPositionCss","adt$9","positionWithDirection","posName","decision","decisionRect","decisionX","decisionY","decisionWidth","decisionHeight","decisionRight","decisionBottom","none","reposition","origin","toBox","rel","viewport","optBounds","translate$2","removeScroll","outerScroll","cata$1","onRelative","onFixed","relative$1","fixed$1","anchorBox","placementAttribute","setPlacement$1","getPlacement","reset$2","adt$8","determinePosition","boundsX","boundsY","boundsRight","boundsBottom","xInBounds","yInBounds","originInBounds","rightInBounds","bottomInBounds","sizeInBounds","visibleW","visibleH","calcReposition","maxX","maxY","restrictedX","restrictedY","restrictedWidth","restrictedHeight","calcMaxSizes","upAvailable","downAvailable","maxHeight","westAvailable","eastAvailable","attempt","adjustedBounds","newX","newY","fits","fittedBox","isPartlyVisible","maxWidth","attempts","elementBox","panelWidth","panelHeight","attemptBestFit","layout","isVisible","next","attemptLayout","newReposition","newVisibleW","newVisibleH","newIsVisible","bestNext","singleton","doRevoke","destroyable","unbindable","value$2","bind","capture","fromRawEvent","timerAttr","isTransitioning$1","transition","shouldApplyTransitionCss","lastPlacement","placer","mode","hasChanges","intermediate","round","newValue","getTransitionDuration","times","parse","delay","duration","dur","setupTransitionListeners","transitionEnd","transitionCancel","timer","isSourceTransition","pseudoElement","transitionDone","transitionStart","startTransitioning","timerId","applyTransitionCss","shouldTransition","intermediatePosition","intermediateCssOptions","elementSize","options","setClasses","classInfo","setHeight","maxHeightFunction","setWidth","maxWidthFunction","position$2","positionCss","setPlacement","setMaxHeight","anchored","available","expandable$1","defaultOr","dephault","simple","layouts","overrideOptions","go","allAlignments","nu$5","xOffset","yOffset","insetModifier","insetXOffset","insetYOffset","getClasses","make","xDelta","yDelta","alignmentsOn","alignmentsOff","nu$4","onDirection","isLtr","isRtl","getDirection","AttributeValue","Attribute","isBottomToTopDir","schema$y","get$5","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","ls","customRtl","ltr","rtl","placement$4","anchorInfo","hotspot","HotspotAnchor","placement$3","MakeshiftAnchor","adt$7","toFixed","toAbsolute","sum","points","sumAsFixed","positions","sumAsAbsolute","screen","absolute$1","hasSameOwner","frame","frameOwner","compOwner","getRootPoint","getBox","calcNewAnchor","optBox","rootPoint","topLeft","layoutsLtr","layoutsRtl","placement$2","nodeBox","NodeAnchor","zeroWidth","nbsp","SimRange","soffset","finish","foffset","adt$6","cata","onBefore","onOn","onAfter","getStart$1","situ","before","on$1","after$1","Situ","adt$5","exactFromRange","simRange","getStart","selection","rng","startSitu","_finishSitu","_soffset","_finish","_foffset","domRange","relative","exact","getWin","range$1","SimSelection","setStart","setFinish","relativeToNative","finishSitu","range","exactToNative","toRect","getFirstRect$1","rects","getBounds$2","adt$4","fromRange","getRanges","doDiagnose","ranges","rev","diagnose","asLtrRange","ancestors","descendants","makeRange","after","same","getNativeSelection","readRange","firstRng","lastRng","doGetExact","focus","getExact","sel","getFirstRect","getBounds$1","api","getOption","get$4","descendOnce$1","last","descendOnce","isSimRange","getAnchorSelection","modStart","modFinish","placement$1","selectionBox","zeroWidth$1","rawRect","selectionRect","cell","SelectionAnchor","labelPrefix$1","eastX","westX","northY$1","southY$1","southeast$1","southwest$1","northeast$1","northwest$1","allRtl","submenuInfo","SubmenuAnchor","AnchorSchema","TransitionSchema","PositionSchema","PlacementSchema","getFixedOrigin","getRelativeOrigin","place","anchoring","placee","lastPlace","position$1","posState","placementSpec","optWithinBounds","positionWithinBounds","placeeDetail","anchorage","placeeState","oldVisibility","newState","vis","PositionApis","pConfig","_pState","PositioningState","Positioning","isConnected","fireDetaching","fireAttaching","virtualAttach","virtualDetach","attach$1","detachChildren$1","replaceChildren","newSpecs","buildNewChildren","newChildren","deleted","virtualReplaceChildren","existingComps","deletedComp","attach","attachWith","insertion","doDetach","detach","parent$1","detachChildren","attachSystem","guiSystem","attachSystemWith","attachSystemAfter","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","built","open$1","setContent","openWhileCloaked","transaction","cloak","decloak","close$1","isOpen$1","_sandbox","_sConfig","isPartOf","getState$2","store","cssKey","restore","oldValue","_sState","sink","hasPosition","SandboxApis","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","SandboxState","contents","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$x","receivingChannel$1","rawSpec","fe","schema$w","receivingChannel","onLoad$5","repConfig","repState","onUnload$2","RepresentApis","ActiveRepresenting","_se","memory$1","isNotSet","clear","manual","dataset","dataByValue","dataByText","itemString","items","currentDataByValue","currentDataByText","newDataByValue","newDataByText","meta","RepresentState","setValue$2","getValue$2","onLoad$4","onUnload$1","DatasetStore","getValue$1","_repState","setValue$1","onLoad$3","ManualStore","setValue","getValue","onLoad$2","initVal","onUnload","MemoryStore","RepresentSchema","Representing","source","forbidden","get$3","augment","SketchBehaviours","_placeholder","adt$3","isSubstituted","subPlaceholder","compSpec","placeholders","newSpec","scan","substitute","req","childSpecs","substituted","valuesThunk","substituteAll","oneReplace","replacements","used","replace","_","substitutePlaces","ps","ph","outcome","single$2","multiple","placeholder","adt$2","fFactory","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$2","asCommon","convert","adtConstructor","partSchema","external","PartType","combine","partSpec","partValidated","internals","externals","_partSpec","_partValidated","units","u","generate$3","np","g","doGenerateOne","pname","generateOne$1","schemas","names","substitutes","components$1","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","_k","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","partSchemas","partUidsSchemas","asRawOrDie","baseS","single$1","factory","specWithUid","supplyUid","composite$1","partUidsSchema","hasUid","isSketchSpec","singleSchema","compositeSchema","single","rawConfig","sketch","extraApis","composite","inside","ComposeApis","composeConfig","_composeState","ComposeSchema","Composing","nativeDisabled","onLoad$1","disableConfig","disableState","disable","enable","hasNative","nativeIsDisabled","nativeDisable","nativeEnable","ariaIsDisabled","ariaDisable","ariaEnable","_disableState","disableClass","isDisabled","DisableApis","disabled","ActiveDisable","DisableSchema","Disabling","dehighlightAllExcept","hConfig","hState","skip","highlighted","skipComp","dehighlightAll","dehighlight","isHighlighted","highlight","highlightFirst","getFirst","firstComp","highlightLast","getLast","lastComp","highlightAt","getByIndex","highlightBy","getCandidates","queryTarget","getHighlighted","_hState","getDelta$2","selected","dest","getPrevious","getNext","HighlightApis","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","and","preds","isShift$1","isControl","isNotShift","rule","matches","choose","transitions","reportFocusShifting","prevFocus","n","dom$2","focusee","highlights","FocusInsideModes","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","rules","onFocusHandler","focusIn","tryGoInsideComponent","isEnterOrSpace","keyboardEvents","create$2","cyclicField","tabbingConfig","findInitial","tabstops","visibles","findCurrent","isTabstop","_tabbingState","goFromTabstop","stopIndex","cycle","tabstop","goBackwards","navigate","goForwards","isFirstChild","goFromPseudoTabstop","execute","exit","AcyclicType","CyclicType","doDefaultExecute","defaultExecute","stopEventForFirefox","_component","schema$v","execute$4","executeConfig","getKeydownRules$5","_executeState","spaceExec","enterExec","downExec","execKeys","getKeyupRules$5","ExecutionType","flatgrid$1","dimensions","numRows","numColumns","KeyingState","useH","movement","move","use","west$1","moveLeft","moveRight","east$1","useV","north$1","south$1","move$1","isHidden$1","locate","locateVisible","visible","findIndex","withGrid","numCols","oldRow","oldColumn","address","newIndex","cycleHorizontal$1","colsInRow","newColumn","cycleVertical$1","newRow","newCol","cycleRight$1","cycleLeft$1","cycleUp$1","cycleDown$1","schema$u","focusIn$3","gridConfig","_gridState","first","findCurrent$1","execute$3","doMove$2","gridState","identified","handleTab","doEscape$1","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$4","getKeyupRules$4","FlatgridType","getNewIndex","isDisabledButton","tryNewIndex","horizontalWithoutCycles","prevIndex","oldCandidate","onNewIndex","horizontal","_oldCandidate","schema$t","flowConfig","execute$2","focusIn$2","_state","moveLeft$2","moveRight$2","doMove$1","flowState","doEscape","getKeydownRules$3","_flowState","westMovers","eastMovers","getKeyupRules$3","FlowType","toCell","matrix","rowIndex","columnIndex","row","cycleHorizontal","startCol","deltaCol","newColIndex","cycleVertical","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","cycleRight","cycleLeft","cycleUp","cycleDown","moveLeft$1","moveRight$1","moveUp$1","moveDown$1","schema$s","focusIn$1","matrixConfig","selectors","execute$1","toMatrix","rows","doMove","ifCycle","ifMove","inRow","cellsInRow","allRows","moveNorth","moveSouth","getKeydownRules$2","getKeyupRules$2","MatrixType","schema$r","menuConfig","moveUp","moveDown","fireShiftTab","menuState","fireTab","getKeydownRules$1","getKeyupRules$1","MenuType","schema$q","specialInfo","SpecialType","acyclic","cyclic","flow","flatgrid","execution","menu","special","KeyboardBranches","isFlatgridState","keyState","Keying","keyConfig","sendFocusIn","withoutReuse","withReuse","virtualReplace","replacee","replaceeIndex","childSpec","insert","set$3","replaceConfig","replaceState","append","appendee","prepend","prependee","remove","removee","_replaceConfig","replaceAt","replacer","ReplaceApis","replaceePred","Replacing","events$d","eventHandlers","focus$2","focusConfig","FocusApis","ActiveFocus","FocusSchema","Focusing","SetupBehaviourCellState","initialState","init","updateAriaState","toggleConfig","toggleState","ariaInfo","updateClass","toggleClass","set$2","toggle$2","on","off","isOn","onLoad","ToggleApis","ActiveToggle","load","updatePressed","status","updateExpanded","updateSelected","updateChecked","ToggleSchema","Toggling","pointerEvents","onClick","events$a","optAction","executeHandler","hoverEvent","focusEvent","toggledEvent","onHover","onFocus$1","onToggled","hover","focus$1","toggled","getItemRole","toggling","getTogglingSpec","tConfig","_value","builder$2","schema$p","builder$1","schema$o","owner$2","parts$h","builder","focusWidget","widget","onHorizontalArrow","_widget","schema$n","itemSchema$2","configureGrid","movementInfo","configureMatrix","configureMenu","parts$g","itemInfo","schema$m","deselectOtherRadioItems","checkedRadioItems","ele","make$7","_spec","_externals","Menu","transpose$1","trace","byItem","byMenu","triggerItem","triggerMenu","generate$2","menus","expansions","menuItems","menuPaths","_triggerItem","submenu","init$c","primary","directory","isClear","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","getTriggeringItem","menuValue","getTriggerData","getItemByValue","getPreparedMenu","triggeringItemValue","triggeredItem","getTriggeringPath","itemValue","extraPath","lookupItem","revPath","triggers","menuIndex","expand","collapse","refresh","lookupMenu","extractPreparedMenu","menuValues","prep","LayeredState","onMenuItemHighlightedEvent","onMenuItemDehighlightedEvent","HighlightOnOpen","make$6","_rawUiSpec","submenuParentItems","buildMenus","primaryName","makeSketch","menuComp","itemComp","layeredState","setup","componentMap","toDirectory","getItemValue","_container","_menuName","setActiveMenu","setActiveMenuAndItem","getMenus","mv","closeOthers","others","getSubmenuParents","parentItems","updateAriaExpansions","expanded","updateMenuPath","latestMenuName","menuPrep","activeMenu","ExpandHighlightDecision","buildIfRequired","expandRight","activeMenuPrep","collapseLeft","updateView","onRight","onLeft","onEscape","keyOnItem","tmenu","tmenuComp","se","getActiveItem","collapseMenuApi","currentItem","highlightPrimary","extractMenuFromContainer","allMenus","preparedMenus","triggeringPath","primaryMenu","_keyInfo","collapseItem$1","tieredData","singleData","collapseItem","tieredMenu","makeMenu","menuSandbox","menuSpec","getBounds","lazySink","isFirstTierSubmenu","triggeringPaths","getSubmenuLayouts","submenuTriggers","st","submenuLayouts","factory$o","isPartOfRelated","thing","showAt","showWithinBounds","showMenuAt","showMenuWithinBounds","hide","getContent","InlineView","global$9","Button","lookupAttr","getModAttributes","roleAttrs","role","getAttrs","attributes","fromHtml","record","anyInSystem","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create$1","apply","construct","fun","thisValue","Func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","unconstruct","func","thisArg","_len","_key","_len2","_key2","addToSet","transformCaseFunc","l","lcElement","cleanArray","object","newObject","lookupGetter","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","text$1","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","ATTR_NAME","policyName","scriptUrl","createDOMPurify","window","DOMPurify","document","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","parentTagName","_forceRemove","_removeAttribute","_initDocument","dirty","leadingWhitespace","dirtyPayload","_createNodeIterator","_isClobbered","elm","_isNode","_executeHook","entryPoint","currentNode","hook","_sanitizeElements","_isBasicCustomElement","childNodes","childCount","childClone","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","namespaceURI","attrValue","initValue","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","returnNode","nodeIterator","serializedHTML","hookFunction","purify","sanitizeHtmlString","global$8","rtlTransform","defaultIconName","defaultIcon","icons","getIconName","rtlName","lookupIcon","get$2","iconProvider","getOr","fallbackIcon","needsRtlTransform","iconName","addFocusableBehaviour","renderIcon$3","_b","rtlIconClasses","iconHtml","render$3","renderFirst","iconNames","notificationIconMap","Notification","memBannerText","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","banner","iconChoices","level","memButton","notificationIconSpec","notificationBodySpec","NotificationManagerImpl","editor","extras","uiMothership","sharedBackstage","contentArea","win$1","settings","closeCallback","close","notificationWrapper","notification","thisNotification","notificationSpec","anchorOverrides","allNotifications","previousNotification","nodeAnchor","nuText","global$7","global$6","global$5","ToolbarMode$1","ToolbarMode","ToolbarLocation$1","ToolbarLocation","option$2","wrapOptional","register$e","registerOption","stringOrFalseProcessor","stringOrNumberProcessor","isReadOnly","getHeightOption","getWidthOption","getMinWidthOption","getMinHeightOption","getMaxWidthOption","getMaxHeightOption","getUserStyleFormats","shouldMergeStyleFormats","shouldAutoHideStyleFormats","getContentLanguages","getRemovedMenuItems","getToolbarMode","getToolbarGroups","getToolbarLocation","fixedContainerSelector","fixedToolbarContainerTarget","isToolbarPersist","getStickyToolbarOffset","getMenubar","getToolbar","getFilePickerCallback","getFilePickerValidatorHandler","getFontSizeInputDefaultUnit","getFilePickerTypes","useTypeaheadUrls","getAnchorTop","getAnchorBottom","isDraggableModal$1","useStatusBar","useElementPath","useBranding","getResize","getPasteAsText","getSidebarShow","promotionEnabled","useHelpAccessibility","getDefaultFontStack","isSkinDisabled","isMenubarEnabled","getSkinUrl","skinUrl","skin","getSkinUrlOption","getLineHeightFormats","isToolbarEnabled","toolbar","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsOption","toolbars","toolbarArray","isToolbarLocationBottom","fixedContainerTarget","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","isSplitUiMode","Options","autocompleteSelector","detect$1","findIn","AutocompleterEditorEvents","redirectKeyToItem","getItem","keyCode","ItemResponse","ItemResponse$1","navClass","selectableClass","colorClass","presetClasses","tickedClass","groupHeadingClass","iconClass","textClass","accessoryClass","caretClass","checkmarkClass","activeClass","containerClass","containerColumnClass","containerRowClass","containerAlignRightClass","containerAlignLeftClass","containerValignTopClass","containerValignMiddleClass","containerValignBottomClass","classForPreset","presets","forMenu","markers","menuClasses","dom$1","hasIcons","columns","schema$l","focusBehaviours","factory$l","Input","refetchTriggerEvent","redirectMenuItemInteractionEvent","menuSearcherClass","findWithinSandbox","sandboxComp","inputElem","findWithinMenu","restoreState","inputComp","searcherState","saveState","fetchPattern","selectionStart","selectionEnd","setActiveDescendant","renderMenuSearcher","handleByBrowser","handleByHighlightedItem","eventData","customSearcherEventsName","searchResultsClass","augmentWithAria","chunk","rowDom","chunks","forSwatch","forToolbar","preprocessCollection","isSeparator","allSplits","currentSplit","insertItemsPlaceholder","initItems","onItem","rawItems","enrichedItems","_item","forCollection","_hasIcons","forCollectionWithSearchResults","ariaControlsSearchResults","forCollectionWithSearchField","searchField","forHorizontalCollection","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_menuLayout","structure","createPartialMenuWithAlloyItems","menuLayout","getNormalStructure","name$1","title","icon","value$1","fetch$1","getSubmenuItems","onAction","onItemAction","onSetup","optionalName","optionalText","optionalIcon","optionalTooltip","optionalLabel","optionalShortcut","optionalSelect","borderless","enabled","defaultedColumns","defaultedMeta","defaultedOnAction","defaultedType","generatedName","namePrefix","generatedValue","valuePrefix","separatorMenuItemSchema","createSeparatorMenuItem","autocompleterItemSchema","createSeparatorItem","createAutocompleterItem","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextFormSchema","createContextForm","contextToolbarSchema","createContextToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$1","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","createCardMenuItem","choiceMenuItemSchema","createChoiceMenuItem","baseFields","insertTableFields","colorSwatchFields","fancyMenuItemSchema","createFancyMenuItem","menuItemSchema","createMenuItem","nestedMenuItemSchema","createNestedMenuItem","toggleMenuItemSchema","createToggleMenuItem","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","namedEvents","SimpleBehaviours","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","tState","tooltip","ActiveTooltipping","tooltipConfig","show","popup","TooltippingSchema","TooltippingState","clearTimer","resetTimer","Tooltipping","escape","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiRefs","readonly","motherships","m","setupReadonlyModeSwitch","receivingConfig","DisablingConfigs","runWithApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","getApi","onMenuItemExecute","itemResponse","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersBackstage","buildData","convertText","isMac","shortcut","updated","segment","renderIcon$2","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderSubmenuCaret","renderDownwardsCaret","renderContainer","directionClass","alignClass","renderImage","src","alt","renderColorStructure","providerBackstage","colorPickerCommand","removeColorCommand","itemText","iconSvg","common","baseDom","renderItemDomStructure","ariaLabel","domTitle","renderNormalItemStructure","renderIcons","iconSpec","renderIcon","renderEmptyIcon","leftIcon","checkmark","textRender","renderItemStructure","tooltipBehaviour","tooltipWorker","_tooltip","encodeText","replaceText","matchText","translated","encoded","escapedMatchRegex","match","renderAutocompleteItem","useText","onItemValueHandler","_api","render$2","renderCardMenuItem","renderChoiceItem","isSelected","parts$f","hexColour","normalizeHex","shorthandRegex","longformRegex","isHexString","hex","fromString$1","getLongForm","extractValues","longForm","splitForm","toHex","fromRgba","rgbaColour","round$1","rgbRegex","rgbaRegex","red","green","blue","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","fromStringValues","fromString","rgbaString","rgbMatch","rgbaMatch","rgba","fireSkinLoaded$1","fireSkinLoadError$1","fireResizeEditor","fireResizeContent","fireScrollContent","fireTextColorChange","fireAfterProgressState","fireResolveName","fireToggleToolbarDrawer","fireStylesTextUpdate","fireAlignTextUpdate","fireFontSizeTextUpdate","fireFontSizeInputTextUpdate","fireBlocksTextUpdate","fireFontFamilyTextUpdate","composeUnbinders","onSetupEditableToggle","onSetupEvent","onSetupFormatToggle","boundFormatChangeCallback","binding","onSetupStateToggle","unbindEditableToogle","unbindFormatToggle","handleEvent","onActionToggleFormat$1","rawItem","onActionExecCommand","command","global$4","cacheStorage","ColorCache","storageId","storageString","localstorage","cache","list","add","getCacheForId","currentData","legacyDefault","storage","getCurrentColors","color","addColor","hsvColour","fromRgb","minRGB","maxRGB","hexToHsv","hsvToHex","anyToHex","canvas","canvasContext","foregroundId","backgroundId","fallbackCols","mapColors","colorMap","colors","option$1","fallbackColor","register$d","colorProcessor","colorColsProcessor","calcCols","defaultCols","getColors$2","calculatedCols","getColorCols$1","hasCustomColors$1","getDefaultForegroundColor","getDefaultBackgroundColor","defaultBackgroundColor","isValidBackgroundColor","getClosestCssBackgroundColorValue","getCurrentColor","format","cssRgbValue","applyFormat","removeFormat","registerCommands","getAdditionalColors","hasCustom","applyColor","onChoice","colorPickerDialog","colorOpt","getColors$1","getFetch$1","callback","setIconColor","splitButtonApi","newColor","setTooltip","buttonApi","select$1","optCurrentHex","getToolTipText","lastColor","tooltipPrefix","colorText","registerTextColorButton","_splitButtonApi","registerTextColorMenuItem","isValid","onSubmit","details","initialData","register$c","fallbackColorForeground","fallbackColorBackground","lastForeColor","lastBackColor","createPartialChoiceMenu","select","alloyItems","createChoiceItems","itemPresets","deriveMenuMovement","menuMarkers","deriveCollectionMovement","renderColorSwatchItem","backstage","getColorItems","widgetSpec","useCustomColors","cellOverEvent","cellExecuteEvent","makeAnnouncementText","col","makeCell","emitCellOver","makeCells","getCellLabel","cells","selectCells","selectedRow","selectedColumn","makeComponents","cellRow","makeLabelText","fancyMenuItems","emptyLabelText","memLabel","renderFancyMenuItem","render","renderNestedItem","downwardsCaret","caret","underlinePath","translatedTooltip","renderNormalItem","renderSeparatorItem","renderToggleMenuItem","autocomplete","separator$3","normal","nested","toggle$1","fancy","card","CouplingApis","coupleConfig","coupleState","CouplingSchema","CouplingState","coupled","lookupCoupled","coupledName","getOrCreate","getExisting","Coupling","nu$3","baseFn","callbacks","nCallback","isReady","call","run","cbs","cb","LazyValue","errorReporter","make$5","aFutureB","futureB","Future","partType$1","getAnchor","overrides","fetch","mapFetch","fetcher","openF","highlightOnOpen","futureData","getLazySink","getSink","tdata","open","onOpenSync","_onOpenSync","_highlightOnOpen","togglePopup","matchWidth","useMinWidth","buttonWidth","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox$1","ariaControls","onOpen","onClose","repositionMenus","sandboxFields","schema$k","parts$e","factory$k","switchToMenu","togglePopup$1","dropdownComp","triggerExecute","Dropdown","identifyMenuLayout","searchMode","handleRefetchTrigger","originalSandboxComp","dropdown","optSearcherState","newSandboxComp","handleRedirectToMenuItem","getActiveMenuItemFrom","activeItem","getSearchResults","activeMenuComp","updateAriaOnHighlight","resultsElem","controlledId","updateAriaOnDehighlight","focusSearchField","searcherComp","getSearchPattern","FocusMode","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createAutocompleteItems","highlightOn","createPartialMenu","itemHasIcon","createItem","createTieredDataFrom","partialMenu","createInlineMenuFrom","focusMode","getAutocompleterRange","initRange","Autocompleter","autocompleterId","processingAction","activeState","autocompleter","cancelIfNecessary","isMenuOpen","isActive","hideIfNecessary","editorBody","ariaOwnsAttr","getMenu","getCombinedItems","choices","itemMeta","nr","autocompleterApi","fetchOptions","display","lookupData","ld","updateDisplay","combinedItems","cloneAutocompleterToEditorDoc","newElm","autocompleterUiApi","nonScrollingOverflows","isScrollingOverflowValue","isScroller","overflowX","overflowY","detect","popupSinkElem","ancestorsScrollers","scrollers","detectWhenSplitUiMode","getBoundsFrom","sc","scrollableBoxes","closest","DelayedFunction","ref","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","isFarEnough","touch","distX","distY","monitor","startData","longpressFired","longpress$1","handleTouchstart","handleTouchmove","handleTouchend","isSame","isDangerous","setup$d","rawSettings","tapEvent","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","onFocusIn","focusoutTimeout","onFocusOut","derive","rawTarget","fromSource","fromExternal","adt$1","doTriggerHandler","lookup","eventType","handlerInfo","doTriggerOnUntilStopped","triggerHandler","broadcast","listeners","_logger","listener","triggerUntilStopped","triggerOnUntilStopped","eventHandler","broadcastHandler","EventRegistry","registry","registerId","findHandler","handlersById","_eventName","isAboveRoot","Registry","readOrTag","failOnDuplicate","tagId","conflict","unregister","register","Container","domWithoutAttributes","takeover","domEvents","_alloyId","getByUid","getByDom","addToWorld","removeFromWorld","broadcast$1","broadcastOn","broadcastEvent","destroy","broadcastData","receivers","receiver","renderBar","schema$j","parts$d","excludeFactory","factory$i","descriptor","descriptorId","FormField","ActiveTabstopping","tabConfig","TabstopSchema","Tabstopping","global$3","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormField","renderFormFieldDomWith","renderFormFieldDom","renderLabel$3","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","renderCollection","getIcon","runOnItem","htmlLines","iconContent","mapItemName","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","ariaElements","isAriaElement","markValid","invalidConfig","notifyInfo","markInvalid","invalidState","_invalidState","validatorInfo","valid","InvalidateApis","ActiveInvalidate","InvalidateSchema","Invalidating","ActiveUnselecting","Unselecting","renderPanelButton","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","renderColorInput","colorInputBackstage","inputValue","span","emitSwatchChange","colorBit","memColorButton","valueOpt","colorButton","_field","labelPart","edgePart","det","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","ledgePart","thumbPart","isShift","spectrumPart","model","setValueFrom","spectrum","SliderParts","sliderChangeEvent","isTouchEvent$2","evt","getEventSource","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","xRange","yRange","halfX","halfY","step","useMultiplier","snap","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","currentValue","xyValue","fireSliderChange$3","setToTLEdgeXY","setToTEdge","setToTEdgeXY","setToTREdgeXY","setToREdge","setToREdgeXY","setToBREdgeXY","setToBEdge","setToBEdgeXY","setToBLEdgeXY","setToLEdge","setToLEdgeXY","reduceBy","increaseBy","capValue","snapValueOf","extraValue","remainder","adjustment","rawSteps","maxSteps","numSteps","findOffsetOf","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOfValue$2","maxOffset","centerMinEdge","centerMaxEdge","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$2","findValueOfOffset$1","setValueFrom$2","xValue","setToMin$2","setToMax$2","moveBy$2","handleMovement$2","getValueFromEvent$2","findOffsetOfValue$1","minEdge","maxEdge","findPositionOfValue$1","slider","setPositionFromValue$2","thumb","edges","thumbRadius","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","HorizontalModel","fireSliderChange$1","findValueOfOffset","setValueFrom$1","yValue","setToMin$1","setToMax$1","moveBy$1","handleMovement$1","getValueFromEvent$1","findOffsetOfValue","findPositionOfValue","setPositionFromValue$1","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","fireSliderChange","sliderValue","moveBy","isVerticalMovement","handleMovement","setToMin","mX","mY","setToMax","getValueFromEvent","setPositionFromValue","xPos","yPos","thumbXRadius","thumbYRadius","onUp","onDown","edgeActions","TwoDModel","SliderSchema","Slider","getThumb","getSpectrum","getLeftEdge","getRightEdge","getTopEdge","getBottomEdge","modelDetail","changeValue","resetToMin","resetToMax","fireOnChoose","wasDown","onDragStart","onDragEnd","getInitial","fieldsUpdate","sliderUpdate","paletteUpdate","sliderFactory","translate","getClass","_thumb","owner$1","schema$i","getPartName$1","sketch$1","fSpec","fieldParts","make$4","toResult","form","resPs","resPThunk","pName","wrapper","Form","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","renderTextField","description","helptext","comps","concats","copyRgbToHex","hexField","copyRgbToForm","rgb","memPreview","updatePreview","preview","copyHexToRgb","setValueRgb","getValueRgb","onInvalidInput","onValidHex","onValidRgb","isHexInputEvent","onValidInput","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","paletteFactory","setColour","ctx","grdWhite","grdBlack","setPaletteHue","setPaletteThumb","_detail","getInitialValue","onChange","onInit","_slider","sliderBehaviours","_apis","makeFactory","rgbForm","sbPalette","hueSliderToDegrees","hueDegreesToSlider","memSlider","memPalette","memRgb","updatePalette","_hex","palette","updateFields","updateSlider","updatePaletteThumb","updateState","runUpdates","updates","update","onPaletteUpdate","oldHue","newHsv","newHex","onSliderUpdate","oldRgb","oldHsv","onFieldsUpdate","ComposingConfigs","mem","processors","memento","rawProcessors","other","rawValue","withComp","optInitialValue","getter","setter","initialValue","withElement","domHtml","memory","english","translate$1","renderColorPicker","colourPickerFactory","onInvalidHex","memPicker","picker","pattern","valOpt","global$2","isOldCustomEditor","renderCustomEditor","editorApi","memReplaced","ta","ea","cvalue","ed","global$1","filterByExtension","files","allowedImageFileTypes","isFileInAllowedTypes","file","renderDropZone","actions","onDrop","transferEvent","handleFiles","onSelect","memInput","renderField","renderGrid","adaptable","rate","newArgs","tempArgs","cancel","beforeObject","afterObject","craftWithClasses","craft","containerClasses","triggerTab","shiftKey","onFocus","targetComp","isPseudoStop","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","dialogFocusShiftedChannel","isSafari","isFirefox","isSafariOrFirefox","isChromium","isElementScrollAtBottom","scrollHeight","clientHeight","scrollToY","getScrollingElement","writeValue","iframeElement","fallbackFn","iframe","lastScrollTop","isScrollAtBottom","scrollAfterWrite","writeValueThrottler","interval","getDynamicSource","stream","cachedValue","_frameComponent","frameComponent","setSrcdocValue","throttler","renderIFrame","baseClass","opaqueClass","containerBorderedClass","sourcing","image","reject","loaded","calculateImagePosition","imageWidth","imageHeight","zoom","zoomToFit","panel","panelW","panelH","renderImagePreview","cachedData","memImage","memContainer","translatedData","z","applyFramePositioning","cachedWidth","cachedHeight","imageComponent","img","styles","fakeValidatedData","renderLabel$2","backstageShared","centerClass","endClass","internalToolbarButtonExecute","onToolbarButtonExecute","itemApi","commonButtonDisplayEvent","toolbarButtonEventOrder","forceInitialSize","renderIcon$1","iconsProvider","renderIconFromPack$1","renderReplaceableIconFromPack","renderLabel$1","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","tooltipAttributes","fixWidthBehaviourName","displayText","displayIcon","itemCompCausingCollapse","nowActiveMenuComp","isMenuItemReference","isSeparator$2","isExpandingMenuItem","separator$2","unwrapReferences","realItems","getFromExpandingItem","submenuItems","newMenus","newExpansions","generateValueIfRequired","itemWithValue","newData","getSearchModeForField","searchSettings","getSearchModeForResults","mainMenuSearchMode","mainMenu","submenuSearchMode","submenus","isSingleListItem","dataAttribute","fetchItems","selectedValue","findItemByValue","renderListBox","initialItem","sketchSpec","listBoxWrap","renderPanel","factory$h","option","initialValues","firstOption","HtmlSelect","renderSelectBox","translatedOptions","chevron","selectWrap","schema$h","getField","coupledPart","selfName","otherName","lock","parts$c","factory$g","FormCoupledInputs","formatSize","unitDec","maxDecimal","unit","numText","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","ratioSizeConversion","scale","makeRatioConverter","currentFieldText","otherFieldText","cValue","oValue","cSize","oSize","renderSizeInput","converter","ratioEvent","makeIcon","pLock","formGroup","getFieldPart","isField1","getLabel","widthField","heightField","_lock","newSize","optCurrent","optOther","value1","value2","renderSlider","renderTable","renderTh","renderHeader","header","renderTd","renderTr","renderRows","baseInputBehaviours","validatingBehaviours","vl","inputMode","inputAttributes","pTextField","extraClasses2","renderInput","renderTextarea","getAnimationRoot","slideConfig","getDimensionProperty","getDimension","disableTransitions","setShrunk","setGrown","doImmediateShrink","slideState","_calculatedSize","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","refresh$4","grow","shrink","immediateShrink","hasGrown","hasShrunk","isGrowing","_slideState","isShrinking","SlidingApis","ActiveSliding","SlidingSchema","SlidingState","Sliding","getMenuButtonApi","renderMenuButton","tabstopping","fetchContext","getFetch","getButton","getMenuItemAction","orig","getMenuItemSetup","renderLabel","leafLabelEventsId","renderLeafLabel","onLeafAction","treeId","selectedId","internalMenuButton","btn","button","isLeftArrowKey","isRightArrowKey","dirComp","dirLabelElement","renderIconFromPack","directoryLabelEventsId","renderDirectoryLabel","noChildren","toggleExpandChildren","directoryEle","directoryComp","willExpand","parentDirElement","parentDirLabelElement","renderDirectoryChildren","expandedIds","renderDirectory","directoryEventsId","labelTabstopping","expandedIdsCell","computedChildrenComponents","childrenVisible","_cmp","childrenComp","treeEventsId","renderTree","onToggleExpand","defaultExpandedIds","selectedIdCell","ActiveStreaming","streamConfig","streamState","throttle","_config","StreamingState","setup$c","streamInfo","sInfo","StreamingSchema","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","setSelectionToEnd","startOffset","attemptSelectOver","inputDisplay","itemExecute","make$3","navigateList","highlighter","focusBehaviours$1","getActiveMenu","typeaheadCustomEvents","previousValue","pv","sandboxIsOpen","typeaheadComp","_typeaheadComp","typeahead","schema$g","parts$b","_tmenu","selectOverTextInInput","_menu","Typeahead","wrap","resA","whenError","whenValue","timeout","errorThunk","timedOut","nu$1","FutureResult","future","promise","completer","renderCommonSpec","actionOpt","domFinal","renderIconButtonSpec","calculateClassesFromButtonType","buttonType","renderButtonSpec","translatedText","renderButton$1","buttonSpec","getAction","isMenuFooterButtonSpec","isNormalFooterButtonSpec","isToggleButtonSpec","renderToggleButton","providers","optMemIcon","memIcon","newIcon","buttonTypeClasses","showIconAndText","translatedTextComponed","iconButtonSpec","renderFooterButton","menuButtonSpec","fixedSpec","renderDialogButton","separator$1","toMenuItem","staticMenuItem","url","toMenuItems","targets","filterLinkTargets","filteredTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTargetBottom","historyTargets","history","joinMenuLists","filterByQuery","term","lowerCaseTerm","getItems","fileType","urlBackstage","urlInputValue","errorId","renderUrlInput","updateHistory","urlEntry","typeaheadSpec","memUrlBox","_newValue","memInvalidIcon","invalidComp","validation","trimmedValue","_entry","errId","memStatus","optUrlPicker","browseUrlEvent","memUrlPickerButton","controlHWrapper","openUrlPicker","componentData","urlData","chosenData","renderAlertBanner","set$1","get$1","renderCheckbox","toggleCheckboxHandler","className","memIcons","renderHtmlPanel","make$2","dialogData","makeIframe","iframeSpec","factories","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","interpretWithoutForm","westEdgeX","middleX","eastEdgeX","northY","southY","centreY","lookupPreserveLayout","preserve","lookupFlippedLayout","flip","bubbleAlignments$2","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","editableAreaAnchor","bubbleSize","standardAnchor","getInlineBottomDialogAnchor","inline","lazyBottomAnchorBar","getBannerAnchor","getCursorAnchor","bodyElement","selectedCells","firstCell","lastCell","selectionTableCellRange","getNodeAnchor$1","getAnchors","isToolbarTop","useFixedToolbarContainer","colorPicker","hasCustomColors","getColors","getColorCols","ColorInputBackstage","isDraggableModal","DialogBackstage","HeaderBackstage","isNestedFormat","isFormatReference","defaultStyleFormats","isNestedFormats","isBlockFormat","isInlineFormat","isSelectorFormat","mapFormats","userFormats","fmt","formatNameWithPrefix","registerCustomFormats","registerFormats","customFormats","getStyleFormats","registeredUserFormats","isSeparator$1","processBasic","isSelectedFor","getPreviewFor","register$a","formats","enrichSupported","enrichMenu","newItems","doEnrich","enrichCustom","formatName","newItem","init$7","settingsFormats","eventsFormats","replaceSettings","_e","enriched","modifications","fromSettings","fromEvents","getData","isElement","trim","hasContentEditableState","isContentEditableTrue","isContentEditableFalse","create","isChildOfContentEditableTrue","tempNode","getElementText","getOrGenerateId","isAnchor","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","elms","getAnchorTargets","getTargetElements","hasTitle","LinkTargets","STORAGE_KEY","HISTORY_LENGTH","isHttpUrl","isArrayOfUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","setAllHistory","getHistory","addToHistory","itemsWithoutUrl","isTruthy","makeMap","getPicker","getPickerTypes","optFileTypes","_picker","types","getPickerSetting","filetype","pickerTypes","getUrlPicker","entry","getTextSetting","getLinkInformation","getValidationHandler","UrlInputBackstage","init$6","lazySinks","contextMenuState","urlinput","colorinput","dialogSettings","isContextMenuOpen","setContextMenuState","commonBackstage","popupBackstage","dialogBackstage","setup$b","mothership","uiMotherships","channel","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onContentMousedown","loopEditor","onWindowScroll","onWindowResize","onElementScroll","onEditorResize","onEditorProgress","onDismissPopups","parts$a","partType","schema$f","itemsPart","parts$9","factory$f","_external","setItems","getListContainer","itemComps","numListsRequired","numListsToAdd","itemsToAdd","itemsToRemove","builtLists","CustomList","schema$e","parts$8","factory$e","setGroups","groups","getGroupContainer","Toolbar","setup$a","isDocked$2","getBehaviours$1","StaticHeader","getOffsetParent","offsetParent$1","getOrigin","appear","contextualInfo","disappear","isPartiallyVisible","isTopCompletelyVisible","isBottomCompletelyVisible","forceTopPosition","winBox","leftX","forceBottomPosition","getDockedLeftPosition","tryDockingPosition","isVisibleForModes","getXYForRestoring","priorY","scrollEnv","getXYForSaving","getPrior","storePrior","storePriorIfNone","revertToOriginal","offsetBox","scrollDelta","_left","_top","_right","tryMorphToOriginal","tryDecisionToFixedMorph","tryMorphToFixed","tryMorphToOriginalOrUpdateFixed","location","tryMorph","calculateMorphToOriginal","forceDockWith","getDecision","morphToStatic","morphToCoord","isDocked","updateVisibility","morphToDocked","contextInfo","applyFixedMorph","morph","applyMorph","refreshInternal","resetInternal","staticOrAbsoluteMorph","refresh$3","reset","forceDockWithDecision","forceDockToTop","forceDockToBottom","DockingApis","ActiveDocking","dockInfo","dockState","DockingSchema","DockingState","docked","initialBounds","Docking","toolbarHeightChange","visibility","editorStickyOnClass","editorStickyOffClass","scrollFromBehindHeader","containerHeader","viewHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","isDockedMode","updateIframeContentFlow","getOccupiedHeight","parentElem","padding","parentWidth","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","restoreFocus","headerElem","focusedElem","ownerDoc","activeElm","findFocusedElem","rootElm","setup$9","lazyHeader","getIframeBehaviours","getBehaviours","focusedElm","runOnSinkElement","onDockingSwitch","additionalBehaviours","headerHeight","boxHeight","topBound","constrainedBounds","constrainedBoundsY","boundsWithoutOffset","StickyHeader","groupToolbarButtonSchema","createGroupToolbarButton","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","createSplitButton","SilverMenubar","setMenus","internal","activeButton","hoveredButton","activeComp","hoveredComp","prev","promotionMessage","promotionLink","renderPromotion","schema$d","getPartName","sSpec","make$1","getSlotNames","getSlot","onSlot","def","slot","onSlots","doShowing","doShow","doHide","isShowing","hideSlot","hideSlots","hideAllSlots","showSlot","SlotContainer","sidebarSchema","createSidebar","setup$8","sidebars","handleToggle","makePanels","panelConfigs","bridged","sidepanel","sidePanelSpec","makeSidebar","slotContainer","setSidebar","sidebar","showSidebar","configKey","updateSidebarRoleOnToggle","sidebarState","toggleSidebar","whichSidebar","fixSize","autoSize","renderSidebar","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","blocker","blockingConfig","blockingState","BlockingSchema","BlockingState","blockWith","Blocking","getBusySpec$1","_root","_behaviours","focusBusyComponent","throbber","toggleEditorTabIndex","tabIndexAttr","dataTabIndexAttr","tabIndex","toggleThrobber","throbberFocus","busyComp","renderThrobber","isFocusEvent","isPasteBinTarget","targetElm","setup$7","lazyThrobber","throbberState","stealFocus","toggle","generate$1","within","withinWidth","apportion","total","parray","toUnit","fitLast","overflow","overflower","fitAll","tryFit","divide","setGroups$1","storedGroups","bGroups","findFocusedComp","refresh$2","setOverflow","builtGroups","overflowGroup","focusedComp","availableWidth","overflows","schema$c","schema$b","parts$7","expandable","schema$a","parts$6","shouldSkipFocus","toggleWithoutFocusing","toolbarSandbox","bounder","makeSandbox","skipFocus","FloatingToolbarButton","schema$9","parts$5","factory$b","ToolbarGroup","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","factory$a","SplitFloatingToolbar","schema$8","parts$4","isOpen","toggleToolbar","overf","factory$9","toolbarToggleEvent","doSetGroups","_button","SplitSlidingToolbar","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarBehaviours","toolbarSpec","modeName","onAttached","renderMoreToolbarCommon","renderFloatingMoreToolbar","baseSpec","overflowXOffset","headerBounds","docElem","docBounds","renderSlidingMoreToolbar","renderToolbar","baseButtonFields","normalButtonFields","toggleButtonFields","schemaWithoutGroupButton","groupFields","viewButtonSchema","viewSchema","createView","renderButton","isToggleButton","setIcon","setActive","optTranslatedText","optTranslatedTextComponed","optIconSpec","hasIconAndText","renderViewButton","renderButtonsGroup","deviceDetection","renderViewHeader","hasGroups","endButtons","btnspec","renderViewPane","factory$8","_comp","View","makeViews","viewConfigs","internalViewConfig","makeSlotContainer","getCurrentName","hideContainer","showContainer","makeViewInstanceApi","runOnPaneWithInstanceApi","view","pane","runOnShow","runOnHide","ViewWrapper","showMainView","hideMainView","optCurrentSlotName","isTogglingCurrentView","prevName","views","outerContainer","editorCont","factory$6","toolbarDrawerOpenState","renderedGroups","mToolbar","renderedToolbars","menubar","partMenubar","toolbarFactory","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","renderer","partHeader","partPromotion","partSocket","partSidebar","partThrobber","partViewWrapper","renderEditorContainer","partEditorContainer","OuterContainer","defaultMenubar","defaultMenus","removedMenuItems","itemName","removedMenuItem","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","isDefaultMenu","menuData","isNotSeparator","fireSkinLoaded","done","fireSkinLoadError","loadStylesheet","stylesheetUrl","styleSheetLoader","loadRawCss","loadUiSkins","skinUiCss","loadShadowDomUiSkins","shadowDomSkinCss","loadUrlSkin","isInline","skinResourceIdentifier","skinContentCss","loadSkin","makeTooltipText","labelWithPlaceholder","generateSelectItems","generateItem","response","invalid","validate","si","validateItems","preItems","getStyleItems","createMenuItems","createSelectButton","tooltipWithPlaceholder","textUpdateEventName","process","rawFormats","buildBasicStaticDataset","Delimiter","split","delimiter","buildBasicSettingsDataset","settingName","menuTitle$4","btnTooltip$4","fallbackAlignment","alignMenuItems","getSpec$4","getMatchingValue","updateSelectMenuIcon","alignment","createAlignButton","createAlignMenu","findNearest","getStyles","menuTitle$3","btnTooltip$3","fallbackFormat","getSpec$3","updateSelectMenuText","createBlocksButton","createBlocksMenu","menuTitle$2","btnTooltip$2","systemFont","systemStackFonts","splitFonts","fontFamily","fonts","font","matchesStack","stack","isSystemFontStack","userStack","getSpec$2","getFirstFont","getCurrentValue","matchOpt","createFontFamilyButton","createFontFamilyMenu","decimalDigits","exponentPart","dot","float","isUnit","accepted","check","unitRaw","normalise","Keys","createBespokeNumberInput","currentComp","getValueFromCurrentComp","alloyComp","customEvents","fromInput","focusBack","lenghtDelta","oldStart","oldEnd","decrease","increase","goToParent","focusInput","makeStepperButton","editorOffCellStepButton","altExecuting","memMinus","memPlus","buttonNode","wrapperComp","menuTitle$1","btnTooltip$1","fallbackFontSize","legacyFontSizes","keywordFontSizes","precision","factor","toPt","fontSize","toLegacy","getSpec$1","pt","legacy","createFontSizeButton","getConfigFromUnit","baseConfig","defaultValue","isValidValue","getNumberInputSpec","updateFunction","parsedText","defaultUnit","createFontSizeInputButton","createFontSizeMenu","menuTitle","btnTooltip","getSpec","getFormatItems","flattenedItems","createStylesButton","createStylesMenu","schema$7","arrowPart","arrow","buttonPart","splitDropdown","parts$3","factory$5","openMenu","executeOnButton","buttonEvents","SplitDropdown","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","renderCommonStructure","optIcon","optText","renderFloatingToolbarButton","identifyButtons","specialisation","renderCommonToolbarButton","_d","renderToolbarButton","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButton","renderToolbarToggleButtonWith","fetchChoices","renderSplitButton","buttonComp","_c","defaultToolbar","renderFromBridge","bridgeBuilder","buttons","identify","extractFrom","bespokeButtons","removeUnusedDefaults","filteredItemGroups","subItem","convertStringToolbar","strToolbar","groupsStrings","isToolbarGroupSettingArray","createToolbar","toolbarConfig","lookupButton","toolbarItem","allowToolbarGroups","prefixes","toolbarGroups","setToolbar","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","setupEvents$1","contentWindow","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","outer","resizeDocument","docEle","inner","elementLoad","attachUiMotherships","uiRoot","Iframe","mainUi","lastToolbarWidth","eTargetNode","socket","limit","unbinder","_ui","toolbarMode","refreshDrawer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getHeight","baseHeight","minHeight","getHeightWithFallback","getWidth","baseWidth","minWidth","getWidthWithFallback","maximumDistanceToEdge","InlineHeader","floatContainer","DOM","isSticky","editorMaxWidthOpt","headerBackstage","isPositionedAtTop","isSplitToolbar","calcToolbarOffset","tbar","calcMode","toolbarHeight","targetBounds","docHeight","setupMode","verticalDir","updateChromeWidth","bodyMargin","updateChromePosition","optToolbarWidth","getOffsetParent$1","isOffsetParentBody","topValue","baseProperties","widthProperties","toolbarWidth","minimumToolbarWidth","repositionPopups$1","restoreAndGetCompleteOuterContainerWidth","stickyAction","doUpdateMode","fc","currentMode","newMode","getTargetPosAndBounds","setupEvents","ui","toolbarPersist","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","lastScrollX","updateUi","newScrollX","_args","Inline","uiContainer","LazyUiReferences","dialogUi","popupUi","optDialogMothership","optPopupMothership","dm","pm","showContextToolbarEvent","hideContextToolbarEvent","getFormApi","runOnExecute","formApi","renderContextButton","renderContextToggleButton","generateOne","generate","mementos","compInSystem","buildInitGroups","commands","ContextForm","toolbarType","isVerticalOverlap","threshold","getRangeRect","leaf$1","getSelectionBounds","bodyPos","getAnchorElementBounds","lastElement","getHorizontalBounds","contentAreaBox","viewportBounds","getVerticalBounds","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getContextToolbarBounds","toolbarOrMenubarEnabled","bubbleSize$1","bubbleAlignments$1","isEntireElementSelected","preservePosition","currentPosition","shouldUseInsetLayouts","determineInsetLayout","contextbar","selectionBounds","isSameAnchorElement","yBounds","contextbarHeight","getAnchorSpec$2","mobile","smartInsetLayout","newAnchor","getInsetLayouts","getAnchorLayout","matchTargetWith","ctxs","toolbarApi","filterByPositionForStartNode","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForAncestorNode","findPosition","matchStartNode","nodeCandidates","editorCandidates","nodeMatches","editorMatches","matchAncestor","startNode","scopes","ancestorElem","contextToolbars","contextForms","lookup$1","rootElem","isOutsideRoot","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","registerForm","contextForm","launch","registerToolbar","contextToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","renderContextToolbar","currentWidth","newWidth","newContents","oldContents","transitionClass","register$9","registryContextToolbars","lastTrigger","lastContextPosition","canLaunchToolbar","isSameLaunchElement","shouldContextToolbarHide","contextToolbarBounds","anchorBounds","hideOrRepositionIfNecessary","contextBarEle","wrapInPopDialog","getScopes","alloySpec","buildToolbar","buildContextToolbarGroups","allButtons","buildContextFormGroups","initGroups","anchorLayout","launchContext","launchContextToolbar","isDragging","register$8","registerController","getMenuItems","oldApi","unbindWatcher","lineHeightSpec","languageSpec","code","customCode","lang","register$7","register$6","onSetupOutdentState","registerButtons$2","register$5","makeSetupHandler","pasteAsText","pastePlainTextToggleHandler","register$4","onActionToggleFormat","registerFormatButtons","_idx","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems$2","register$3","onSetupUndoRedoState","registerMenuItems$1","registerButtons","register$2","onSetupVisualAidState","registerMenuItems","registerToolbarButton","register$1","setup$6","patchPipeConfig","shouldNeverUseNative","getAvoidOverlapSelector","isContextMenuDisabled","getContextMenu","contextMenus","contextMenu","transpose","dx","dy","isTouchEvent$1","fromPageXY","fromClientXY","transposeContentAreaContainer","containerPos","getPointAnchor","getSelectionAnchor","getNodeAnchor","getAnchorSpec$1","anchorType","initAndShow$1","buildMenu","contextmenu","anchorSpec","bubbleAlignments","isTouchWithinSelection","rngRect","setupiOSOverrides","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","getAnchorSpec","highlightImmediately","initAndShow","isiOS","isMacOS","isAndroid","shouldHighlightImmediately","openiOS","separator","makeContextItem","commonMenuItem","commonItem","addContextMenuGroup","groupItems","generateContextMenu","selectedElement","sections","allItems","isNativeOverrideKeyEvent","isTouchEvent","isTriggeredByKeyboard","getSelectedElement","getAnchorType","setup$5","hideContextMenu","showContextMenu","hideEvents","subtract","changes","asFixed","coord","asAbsolute","asOffset","withinRange","coord1","coord2","getDeltas","toStyles","stylesOpt","deltaX","deltaY","absolute","fixed","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","parseAttrToInt","snapsInfo","getCoords","snapInfo","moveOrSnap","newCoord","findClosestSnap","findSnap","fixedCoord","spanned","stopDrag","findMatchingSnap","snaps","sensor","deltas","bestDeltas","currAvg","bestAvg","snapTo$1","DraggingApis","dragConfig","snapPin","initialAttribute","resetZIndex","zIndex","changeZIndex","zindex","instigate","anyComponent","discard","createComponent","blockerClass","blockerEvents","SnapSchema","schema$6","getCurrentCoord","clampCoords","coords","absoluteCoord","newCoords","offset$1","calcNewCoord","optSnaps","currentCoord","snapping","dragBy","calcStartData","dragState","dragMode","dragStartData","dlt","updateStartState","init$3","dragApi","MouseData","events$3","stop$1","delayDrop","schema$5","init$2","getDataFrom","touches","TouchData","events$2","blockerSingleton","stopBlocking","schema$4","events$1","schema$3","DraggingBranches","DragState","previous","calculateDelta","dragEvent","nuData","setStartData","getStartData","Dragging","snapWidth","snapOffset","calcSnap","selectorOpt","td","selectorHandle","sensorLeft","sensorTop","sensorWidth","sensorHeight","getSnapsConfig","getSnapPoints","isSameCell","cellOpt","currentTd","createSelector","setup$4","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getTopLeftSnaps","getBottomRightSnap","memBottomRight","getBottomRightSnaps","topLeftSnaps","bottomRightSnaps","bottomRight","showOrHideHandle","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","snapTo","getSnapConfig","snapTopLeft","snapLastTopLeft","snapBottomRight","snapLastBottomRight","otherCells","Logo","isHidden","renderElementPath","renderElement","_btn","renderDivider","renderPathData","updatePath","newPath","ResizeTypes","getDimensions","resizeType","originalHeight","originalWidth","resize","dim","getResizeType","keyboardHandler","renderResizeHandler","resizeLabel","_target","renderWordCount","replaceCountText","currentVal","renderStatusbar","renderBranding","renderHelpAccessibility","shortcutText","renderRightContainer","getTextComponents","shouldRenderHelp","shouldRenderElementPath","shouldRenderRightContainer","getTextComponentClasses","flexStart","flexEnd","spaceAround","container3Columns","resizeHandler","getLazyMothership","setup$3","setupForTheme","lazyUiRefs","lazyMothership","lazyDialogMothership","lazyPopupMothership","deviceClasses","isToolbarBottom","memAnchorBar","memBottomAnchorBar","lazyDialogSinkResult","lazyPopupSinkResult","lazyAnchorBar","lazyToolbar","backstages","makeHeaderPart","verticalDirAttributes","hasMultipleToolbar","hasToolbar","hasMenubar","shouldHavePromotion","makePromotion","hasAnyContents","getPartToolbar","menubarCollection","makeSidebarDefinition","renderDialogUi","isGridUiContainer","sinkSpec","reactiveWidthSpec","renderPopupUi","renderMainUi","sidebarContainer","statusbar","editorComponents","setEditorSize","parsedHeight","parsedWidth","setupShortcutsAndCommands","renderUIWithRefs","toolbarGroupButtonConfig","toolbarOpt","reuseDialogUiForPopuUi","renderUI","labelledBy","labelledElement","labelElement","labelId","schema$2","basic","parts$2","factory$4","dialogComp","showDialog","dialog","externalBlocker","hideDialog","blockerDom","getDialogBody","getDialogFooter","setBusy","setIdle","modalEventsId","ModalDialog","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","toggleButtonSpecFields","dialogFooterButtonSchema","alertBannerFields","alertBannerSchema","createBarFields","itemsField","buttonFields","buttonSchema","formComponentFields","formComponentWithLabelFields","checkboxFields","checkboxSchema","checkboxDataProcessor","collectionFields","collectionSchema","collectionDataProcessor","colorInputFields","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imagePreviewSchema","imagePreviewDataProcessor","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","sliderFields","sliderSchema","sliderInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","baseTreeItemFields","treeItemLeafSchema","treeItemDirectoryFields","treeItemDirectorySchema","treeItemSchema","treeFields","treeSchema","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","createDialog","urlDialogButtonSchema","urlDialogSchema","createUrlDialog","getAllObjects","isNamedItem","dataProcessors","getDataProcessor","getNamedItems","createDataValidator","namedItems","internalDialog","dataValidator","DialogManager","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","rawData","ReflectingApis","reflectState","ReflectingSchema","ReflectingState","Reflecting","toValidValues","renderBodyPanel","memForm","formValue","factory$3","TabButton","schema$1","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","parts$1","factory$2","tab","Tabbar","factory$1","Tabview","barPart","viewPart","tabValue","tabview","tabData","changeTabBy","section","byPred","tabKey","TabSection","measureHeights","allTabs","tabviewComp","_tab","getMaxHeight","heights","getMaxTabviewHeight","tablist","documentElement$1","isFixed","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","chromeHeight","showTab","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","getTabview","smartMode","oldHeight","newHeight","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","setDataOnForm","oldTab","tabMode","_viewItems","tsection","renderBody","dialogId","contentId","ariaAttrs","incoming","ariaAttributes","renderInlineBody","renderModalBody","bodySpec","renderIframeBody","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","pFooterGroup","startButtons","renderDialog$1","dialogClass","blockerBackdropClass","scrollLockClass","renderClose","renderTitle","titleId","renderDragHandle","renderInlineHeader","renderModalHeader","pTitle","pHandle","getHeader","bs","getEventExtras","lazyDialog","blockEvent","fullscreenClass","largeDialogClass","mediumDialogClass","getDialogSizeClass","updateDialogSizeClass","dialogSizeClass","toggleFullscreen","currentSize","currentSizeClass","renderModalDialog","dialogEvents","mapMenuButtons","menuItemStates","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","self","initUrlDialog","getInstanceApi","withSpec","currentDialog","initDialog","currentDialogInit","rootNode","cur","makeButton","footerButtons","buttonName","buttonGroups","makeGroup","renderFooter","initSpec","lookupByName","renderInlineFooter","renderModalFooter","getCompByName","access","validateData$1","dialogState","getDialogApi","doRedial","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","tabSection","dialogInit","storedMenuButtons","renderDialog","dialogSize","dialogSizeClasses","objOfCells","footer","modalAccess","getForm","outerForm","toggleFullscreen$1","renderInlineDialog","refreshDocking","dialogLabelId","dialogContentId","memHeader","memBody","storagedMenuButtons","optMemFooter","memFooter","global","getUrlDialogApi","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","isCustomMessage","handleMessage","renderUrlDialog","iframeUri","iframeDomain","messageHandlerUnbinder","iframeEle","iframeWin","setup$2","closeDialog","alertDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$1","confirmDialog","memFooterYes","footerNo","footerYesButton","validateData","isAlertOrConfirmDialog","inlineAdditionalBehaviours","isStickyToolbar$1","params","closeWindow","openInlineDialog","openBottomInlineDialog","openModalDialog","openUrl","openModalUrlDialog","internalInitialData","config$1","windowParams","inlineDialog","inlineDialogComp","getInlineDialogBounds","optScrollingContext","contentAreaContainer","registerOptions","Theme","popupSinkBounds","dialogs","popups","renderModeUI","renderResult","windowMgr","getNotificationManagerImpl"],"mappings":"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","x_google_ignoreList":[0]}