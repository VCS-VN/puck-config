{"version":3,"file":"index-bPs83CzX.cjs","sources":["../node_modules/.pnpm/tinymce@6.8.6/node_modules/tinymce/plugins/image/plugin.js"],"sourcesContent":["/**\n * TinyMCE version 6.8.6 (TBD)\n */\n\n(function () {\n    'use strict';\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    const getPrototypeOf = Object.getPrototypeOf;\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq = t => a => t === a;\n    const is = (value, constructor) => isObject(value) && hasProto(value, constructor, (o, proto) => getPrototypeOf(o) === proto);\n    const isString = isType('string');\n    const isObject = isType('object');\n    const isPlainObject = value => is(value, Object);\n    const isArray = isType('array');\n    const isNull = eq(null);\n    const isBoolean = isSimpleType('boolean');\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isNumber = isSimpleType('number');\n    const isArrayOf = (value, pred) => {\n      if (isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const keys = Object.keys;\n    const hasOwnProperty = Object.hasOwnProperty;\n    const each = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const filter = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const has = (obj, key) => hasOwnProperty.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n\n    const nativePush = Array.prototype.push;\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const get = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = xs => get(xs, 0);\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    const rawSet = (dom, key, value) => {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    const set = (element, key, value) => {\n      rawSet(element.dom, key, value);\n    };\n    const remove = (element, key) => {\n      element.dom.removeAttribute(key);\n    };\n\n    const fromHtml = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        const message = 'HTML does not have a single root node';\n        console.error(message, html);\n        throw new Error(message);\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    const fromTag = (tag, scope) => {\n      const doc = scope || document;\n      const node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    const fromText = (text, scope) => {\n      const doc = scope || document;\n      const node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    const fromDom = node => {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    const fromPoint = (docElm, x, y) => Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    const SugarElement = {\n      fromHtml,\n      fromTag,\n      fromText,\n      fromDom,\n      fromPoint\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    const isNotEmpty = s => s.length > 0;\n\n    const option = name => editor => editor.options.get(name);\n    const register$2 = editor => {\n      const registerOption = editor.options.register;\n      registerOption('image_dimensions', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('image_advtab', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('image_uploadtab', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('image_prepend_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('image_class_list', { processor: 'object[]' });\n      registerOption('image_description', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('image_title', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('image_caption', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('image_list', {\n        processor: value => {\n          const valid = value === false || isString(value) || isArrayOf(value, isObject) || isFunction(value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be false, a string, an array or a function.'\n          };\n        },\n        default: false\n      });\n    };\n    const hasDimensions = option('image_dimensions');\n    const hasAdvTab = option('image_advtab');\n    const hasUploadTab = option('image_uploadtab');\n    const getPrependUrl = option('image_prepend_url');\n    const getClassList = option('image_class_list');\n    const hasDescription = option('image_description');\n    const hasImageTitle = option('image_title');\n    const hasImageCaption = option('image_caption');\n    const getImageList = option('image_list');\n    const showAccessibilityOptions = option('a11y_advanced_options');\n    const isAutomaticUploadsEnabled = option('automatic_uploads');\n    const hasUploadUrl = editor => isNotEmpty(editor.options.get('images_upload_url'));\n    const hasUploadHandler = editor => isNonNullable(editor.options.get('images_upload_handler'));\n\n    const parseIntAndGetMax = (val1, val2) => Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    const getImageSize = url => new Promise(callback => {\n      const img = document.createElement('img');\n      const done = dimensions => {\n        img.onload = img.onerror = null;\n        if (img.parentNode) {\n          img.parentNode.removeChild(img);\n        }\n        callback(dimensions);\n      };\n      img.onload = () => {\n        const width = parseIntAndGetMax(img.width, img.clientWidth);\n        const height = parseIntAndGetMax(img.height, img.clientHeight);\n        const dimensions = {\n          width,\n          height\n        };\n        done(Promise.resolve(dimensions));\n      };\n      img.onerror = () => {\n        done(Promise.reject(`Failed to get image dimensions for: ${ url }`));\n      };\n      const style = img.style;\n      style.visibility = 'hidden';\n      style.position = 'fixed';\n      style.bottom = style.left = '0px';\n      style.width = style.height = 'auto';\n      document.body.appendChild(img);\n      img.src = url;\n    });\n    const removePixelSuffix = value => {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    const addPixelSuffix = value => {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    const mergeMargins = css => {\n      if (css.margin) {\n        const splitMargin = String(css.margin).split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    const createImageList = (editor, callback) => {\n      const imageList = getImageList(editor);\n      if (isString(imageList)) {\n        fetch(imageList).then(res => {\n          if (res.ok) {\n            res.json().then(callback);\n          }\n        });\n      } else if (isFunction(imageList)) {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    const waitLoadImage = (editor, data, imgElm) => {\n      const selectImage = () => {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      };\n      imgElm.onload = () => {\n        if (!data.width && !data.height && hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: String(imgElm.clientWidth),\n            height: String(imgElm.clientHeight)\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    const blobToDataUri = blob => new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        resolve(reader.result);\n      };\n      reader.onerror = () => {\n        var _a;\n        reject((_a = reader.error) === null || _a === void 0 ? void 0 : _a.message);\n      };\n      reader.readAsDataURL(blob);\n    });\n    const isPlaceholderImage = imgElm => imgElm.nodeName === 'IMG' && (imgElm.hasAttribute('data-mce-object') || imgElm.hasAttribute('data-mce-placeholder'));\n    const isSafeImageUrl = (editor, src) => {\n      const getOption = editor.options.get;\n      return global$2.isDomSafe(src, 'img', {\n        allow_html_data_urls: getOption('allow_html_data_urls'),\n        allow_script_urls: getOption('allow_script_urls'),\n        allow_svg_data_urls: getOption('allow_svg_data_urls')\n      });\n    };\n\n    const DOM = global$3.DOM;\n    const getHspace = image => {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    const getVspace = image => {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    const getBorder = image => {\n      if (image.style.borderWidth) {\n        return removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    const getAttrib = (image, name) => {\n      var _a;\n      if (image.hasAttribute(name)) {\n        return (_a = image.getAttribute(name)) !== null && _a !== void 0 ? _a : '';\n      } else {\n        return '';\n      }\n    };\n    const hasCaption = image => image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    const updateAttrib = (image, name, value) => {\n      if (value === '' || value === null) {\n        image.removeAttribute(name);\n      } else {\n        image.setAttribute(name, value);\n      }\n    };\n    const wrapInFigure = image => {\n      const figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    const removeFigure = image => {\n      const figureElm = image.parentNode;\n      if (isNonNullable(figureElm)) {\n        DOM.insertAfter(image, figureElm);\n        DOM.remove(figureElm);\n      }\n    };\n    const toggleCaption = image => {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    const normalizeStyle = (image, normalizeCss) => {\n      const attrValue = image.getAttribute('style');\n      const value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    const setSize = (name, normalizeCss) => (image, name, value) => {\n      const styles = image.style;\n      if (styles[name]) {\n        styles[name] = addPixelSuffix(value);\n        normalizeStyle(image, normalizeCss);\n      } else {\n        updateAttrib(image, name, value);\n      }\n    };\n    const getSize = (image, name) => {\n      if (image.style[name]) {\n        return removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    const setHspace = (image, value) => {\n      const pxValue = addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    const setVspace = (image, value) => {\n      const pxValue = addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    const setBorder = (image, value) => {\n      const pxValue = addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    const setBorderStyle = (image, value) => {\n      image.style.borderStyle = value;\n    };\n    const getBorderStyle = image => {\n      var _a;\n      return (_a = image.style.borderStyle) !== null && _a !== void 0 ? _a : '';\n    };\n    const isFigure = elm => isNonNullable(elm) && elm.nodeName === 'FIGURE';\n    const isImage = elm => elm.nodeName === 'IMG';\n    const getIsDecorative = image => DOM.getAttrib(image, 'alt').length === 0 && DOM.getAttrib(image, 'role') === 'presentation';\n    const getAlt = image => {\n      if (getIsDecorative(image)) {\n        return '';\n      } else {\n        return getAttrib(image, 'alt');\n      }\n    };\n    const defaultData = () => ({\n      src: '',\n      alt: '',\n      title: '',\n      width: '',\n      height: '',\n      class: '',\n      style: '',\n      caption: false,\n      hspace: '',\n      vspace: '',\n      border: '',\n      borderStyle: '',\n      isDecorative: false\n    });\n    const getStyleValue = (normalizeCss, data) => {\n      var _a;\n      const image = document.createElement('img');\n      updateAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss((_a = image.getAttribute('style')) !== null && _a !== void 0 ? _a : '');\n    };\n    const create = (normalizeCss, data) => {\n      const image = document.createElement('img');\n      write(normalizeCss, {\n        ...data,\n        caption: false\n      }, image);\n      setAlt(image, data.alt, data.isDecorative);\n      if (data.caption) {\n        const figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: 'true' }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    const read = (normalizeCss, image) => ({\n      src: getAttrib(image, 'src'),\n      alt: getAlt(image),\n      title: getAttrib(image, 'title'),\n      width: getSize(image, 'width'),\n      height: getSize(image, 'height'),\n      class: getAttrib(image, 'class'),\n      style: normalizeCss(getAttrib(image, 'style')),\n      caption: hasCaption(image),\n      hspace: getHspace(image),\n      vspace: getVspace(image),\n      border: getBorder(image),\n      borderStyle: getBorderStyle(image),\n      isDecorative: getIsDecorative(image)\n    });\n    const updateProp = (image, oldData, newData, name, set) => {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, String(newData[name]));\n      }\n    };\n    const setAlt = (image, alt, isDecorative) => {\n      if (isDecorative) {\n        DOM.setAttrib(image, 'role', 'presentation');\n        const sugarImage = SugarElement.fromDom(image);\n        set(sugarImage, 'alt', '');\n      } else {\n        if (isNull(alt)) {\n          const sugarImage = SugarElement.fromDom(image);\n          remove(sugarImage, 'alt');\n        } else {\n          const sugarImage = SugarElement.fromDom(image);\n          set(sugarImage, 'alt', alt);\n        }\n        if (DOM.getAttrib(image, 'role') === 'presentation') {\n          DOM.setAttrib(image, 'role', '');\n        }\n      }\n    };\n    const updateAlt = (image, oldData, newData) => {\n      if (newData.alt !== oldData.alt || newData.isDecorative !== oldData.isDecorative) {\n        setAlt(image, newData.alt, newData.isDecorative);\n      }\n    };\n    const normalized = (set, normalizeCss) => (image, name, value) => {\n      set(image, value);\n      normalizeStyle(image, normalizeCss);\n    };\n    const write = (normalizeCss, newData, image) => {\n      const oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', (image, _name, _value) => toggleCaption(image));\n      updateProp(image, oldData, newData, 'src', updateAttrib);\n      updateProp(image, oldData, newData, 'title', updateAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', updateAttrib);\n      updateProp(image, oldData, newData, 'style', normalized((image, value) => updateAttrib(image, 'style', value), normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n      updateAlt(image, oldData, newData);\n    };\n\n    const normalizeCss$1 = (editor, cssText) => {\n      const css = editor.dom.styles.parse(cssText);\n      const mergedCss = mergeMargins(css);\n      const compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    const getSelectedImage = editor => {\n      const imgElm = editor.selection.getNode();\n      const figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || isPlaceholderImage(imgElm))) {\n        return null;\n      }\n      return imgElm;\n    };\n    const splitTextBlock = (editor, figure) => {\n      var _a;\n      const dom = editor.dom;\n      const textBlockElements = filter(editor.schema.getTextBlockElements(), (_, parentElm) => !editor.schema.isValidChild(parentElm, 'figure'));\n      const textBlock = dom.getParent(figure.parentNode, node => hasNonNullableKey(textBlockElements, node.nodeName), editor.getBody());\n      if (textBlock) {\n        return (_a = dom.split(textBlock, figure)) !== null && _a !== void 0 ? _a : figure;\n      } else {\n        return figure;\n      }\n    };\n    const readImageDataFromSelection = editor => {\n      const image = getSelectedImage(editor);\n      return image ? read(css => normalizeCss$1(editor, css), image) : defaultData();\n    };\n    const insertImageAtCaret = (editor, data) => {\n      const elm = create(css => normalizeCss$1(editor, css), data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      const insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        const figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    const syncSrcAttr = (editor, image) => {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    const deleteImage = (editor, image) => {\n      if (image) {\n        const elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    const writeImageDataToSelection = (editor, data) => {\n      const image = getSelectedImage(editor);\n      if (image) {\n        write(css => normalizeCss$1(editor, css), data, image);\n        syncSrcAttr(editor, image);\n        if (isFigure(image.parentNode)) {\n          const figure = image.parentNode;\n          splitTextBlock(editor, figure);\n          editor.selection.select(image.parentNode);\n        } else {\n          editor.selection.select(image);\n          waitLoadImage(editor, data, image);\n        }\n      }\n    };\n    const sanitizeImageData = (editor, data) => {\n      const src = data.src;\n      return {\n        ...data,\n        src: isSafeImageUrl(editor, src) ? src : ''\n      };\n    };\n    const insertOrUpdateImage = (editor, partialData) => {\n      const image = getSelectedImage(editor);\n      if (image) {\n        const selectedImageData = read(css => normalizeCss$1(editor, css), image);\n        const data = {\n          ...selectedImageData,\n          ...partialData\n        };\n        const sanitizedData = sanitizeImageData(editor, data);\n        if (data.src) {\n          writeImageDataToSelection(editor, sanitizedData);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (partialData.src) {\n        insertImageAtCaret(editor, {\n          ...defaultData(),\n          ...partialData\n        });\n      }\n    };\n\n    const deep = (old, nu) => {\n      const bothObjects = isPlainObject(old) && isPlainObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    const baseMerge = merger => {\n      return (...objects) => {\n        if (objects.length === 0) {\n          throw new Error(`Can't merge zero objects`);\n        }\n        const ret = {};\n        for (let j = 0; j < objects.length; j++) {\n          const curObject = objects[j];\n          for (const key in curObject) {\n            if (has(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    const deepMerge = baseMerge(deep);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.ImageUploader');\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    const getValue = item => isString(item.value) ? item.value : '';\n    const getText = item => {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    const sanitizeList = (list, extractValue) => {\n      const out = [];\n      global.each(list, item => {\n        const text = getText(item);\n        if (item.menu !== undefined) {\n          const items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text,\n            items\n          });\n        } else {\n          const value = extractValue(item);\n          out.push({\n            text,\n            value\n          });\n        }\n      });\n      return out;\n    };\n    const sanitizer = (extractor = getValue) => list => {\n      if (list) {\n        return Optional.from(list).map(list => sanitizeList(list, extractor));\n      } else {\n        return Optional.none();\n      }\n    };\n    const sanitize = list => sanitizer(getValue)(list);\n    const isGroup = item => has(item, 'items');\n    const findEntryDelegate = (list, value) => findMap(list, item => {\n      if (isGroup(item)) {\n        return findEntryDelegate(item.items, value);\n      } else if (item.value === value) {\n        return Optional.some(item);\n      } else {\n        return Optional.none();\n      }\n    });\n    const findEntry = (optList, value) => optList.bind(list => findEntryDelegate(list, value));\n    const ListUtils = {\n      sanitizer,\n      sanitize,\n      findEntry\n    };\n\n    const makeTab$2 = _info => ({\n      title: 'Advanced',\n      name: 'advanced',\n      items: [{\n          type: 'grid',\n          columns: 2,\n          items: [\n            {\n              type: 'input',\n              label: 'Vertical space',\n              name: 'vspace',\n              inputMode: 'numeric'\n            },\n            {\n              type: 'input',\n              label: 'Horizontal space',\n              name: 'hspace',\n              inputMode: 'numeric'\n            },\n            {\n              type: 'input',\n              label: 'Border width',\n              name: 'border',\n              inputMode: 'numeric'\n            },\n            {\n              type: 'listbox',\n              name: 'borderstyle',\n              label: 'Border style',\n              items: [\n                {\n                  text: 'Select...',\n                  value: ''\n                },\n                {\n                  text: 'Solid',\n                  value: 'solid'\n                },\n                {\n                  text: 'Dotted',\n                  value: 'dotted'\n                },\n                {\n                  text: 'Dashed',\n                  value: 'dashed'\n                },\n                {\n                  text: 'Double',\n                  value: 'double'\n                },\n                {\n                  text: 'Groove',\n                  value: 'groove'\n                },\n                {\n                  text: 'Ridge',\n                  value: 'ridge'\n                },\n                {\n                  text: 'Inset',\n                  value: 'inset'\n                },\n                {\n                  text: 'Outset',\n                  value: 'outset'\n                },\n                {\n                  text: 'None',\n                  value: 'none'\n                },\n                {\n                  text: 'Hidden',\n                  value: 'hidden'\n                }\n              ]\n            }\n          ]\n        }]\n    });\n    const AdvTab = { makeTab: makeTab$2 };\n\n    const collect = editor => {\n      const urlListSanitizer = ListUtils.sanitizer(item => editor.convertURL(item.value || item.url || '', 'src'));\n      const futureImageList = new Promise(completer => {\n        createImageList(editor, imageList => {\n          completer(urlListSanitizer(imageList).map(items => flatten([\n            [{\n                text: 'None',\n                value: ''\n              }],\n            items\n          ])));\n        });\n      });\n      const classList = ListUtils.sanitize(getClassList(editor));\n      const hasAdvTab$1 = hasAdvTab(editor);\n      const hasUploadTab$1 = hasUploadTab(editor);\n      const hasUploadUrl$1 = hasUploadUrl(editor);\n      const hasUploadHandler$1 = hasUploadHandler(editor);\n      const image = readImageDataFromSelection(editor);\n      const hasDescription$1 = hasDescription(editor);\n      const hasImageTitle$1 = hasImageTitle(editor);\n      const hasDimensions$1 = hasDimensions(editor);\n      const hasImageCaption$1 = hasImageCaption(editor);\n      const hasAccessibilityOptions = showAccessibilityOptions(editor);\n      const automaticUploads = isAutomaticUploadsEnabled(editor);\n      const prependURL = Optional.some(getPrependUrl(editor)).filter(preUrl => isString(preUrl) && preUrl.length > 0);\n      return futureImageList.then(imageList => ({\n        image,\n        imageList,\n        classList,\n        hasAdvTab: hasAdvTab$1,\n        hasUploadTab: hasUploadTab$1,\n        hasUploadUrl: hasUploadUrl$1,\n        hasUploadHandler: hasUploadHandler$1,\n        hasDescription: hasDescription$1,\n        hasImageTitle: hasImageTitle$1,\n        hasDimensions: hasDimensions$1,\n        hasImageCaption: hasImageCaption$1,\n        prependURL,\n        hasAccessibilityOptions,\n        automaticUploads\n      }));\n    };\n\n    const makeItems = info => {\n      const imageUrl = {\n        name: 'src',\n        type: 'urlinput',\n        filetype: 'image',\n        label: 'Source',\n        picker_text: 'Browse files'\n      };\n      const imageList = info.imageList.map(items => ({\n        name: 'images',\n        type: 'listbox',\n        label: 'Image list',\n        items\n      }));\n      const imageDescription = {\n        name: 'alt',\n        type: 'input',\n        label: 'Alternative description',\n        enabled: !(info.hasAccessibilityOptions && info.image.isDecorative)\n      };\n      const imageTitle = {\n        name: 'title',\n        type: 'input',\n        label: 'Image title'\n      };\n      const imageDimensions = {\n        name: 'dimensions',\n        type: 'sizeinput'\n      };\n      const isDecorative = {\n        type: 'label',\n        label: 'Accessibility',\n        items: [{\n            name: 'isDecorative',\n            type: 'checkbox',\n            label: 'Image is decorative'\n          }]\n      };\n      const classList = info.classList.map(items => ({\n        name: 'classes',\n        type: 'listbox',\n        label: 'Class',\n        items\n      }));\n      const caption = {\n        type: 'label',\n        label: 'Caption',\n        items: [{\n            type: 'checkbox',\n            name: 'caption',\n            label: 'Show caption'\n          }]\n      };\n      const getDialogContainerType = useColumns => useColumns ? {\n        type: 'grid',\n        columns: 2\n      } : { type: 'panel' };\n      return flatten([\n        [imageUrl],\n        imageList.toArray(),\n        info.hasAccessibilityOptions && info.hasDescription ? [isDecorative] : [],\n        info.hasDescription ? [imageDescription] : [],\n        info.hasImageTitle ? [imageTitle] : [],\n        info.hasDimensions ? [imageDimensions] : [],\n        [{\n            ...getDialogContainerType(info.classList.isSome() && info.hasImageCaption),\n            items: flatten([\n              classList.toArray(),\n              info.hasImageCaption ? [caption] : []\n            ])\n          }]\n      ]);\n    };\n    const makeTab$1 = info => ({\n      title: 'General',\n      name: 'general',\n      items: makeItems(info)\n    });\n    const MainTab = {\n      makeTab: makeTab$1,\n      makeItems\n    };\n\n    const makeTab = _info => {\n      const items = [{\n          type: 'dropzone',\n          name: 'fileinput'\n        }];\n      return {\n        title: 'Upload',\n        name: 'upload',\n        items\n      };\n    };\n    const UploadTab = { makeTab };\n\n    const createState = info => ({\n      prevImage: ListUtils.findEntry(info.imageList, info.image.src),\n      prevAlt: info.image.alt,\n      open: true\n    });\n    const fromImageData = image => ({\n      src: {\n        value: image.src,\n        meta: {}\n      },\n      images: image.src,\n      alt: image.alt,\n      title: image.title,\n      dimensions: {\n        width: image.width,\n        height: image.height\n      },\n      classes: image.class,\n      caption: image.caption,\n      style: image.style,\n      vspace: image.vspace,\n      border: image.border,\n      hspace: image.hspace,\n      borderstyle: image.borderStyle,\n      fileinput: [],\n      isDecorative: image.isDecorative\n    });\n    const toImageData = (data, removeEmptyAlt) => ({\n      src: data.src.value,\n      alt: (data.alt === null || data.alt.length === 0) && removeEmptyAlt ? null : data.alt,\n      title: data.title,\n      width: data.dimensions.width,\n      height: data.dimensions.height,\n      class: data.classes,\n      style: data.style,\n      caption: data.caption,\n      hspace: data.hspace,\n      vspace: data.vspace,\n      border: data.border,\n      borderStyle: data.borderstyle,\n      isDecorative: data.isDecorative\n    });\n    const addPrependUrl2 = (info, srcURL) => {\n      if (!/^(?:[a-zA-Z]+:)?\\/\\//.test(srcURL)) {\n        return info.prependURL.bind(prependUrl => {\n          if (srcURL.substring(0, prependUrl.length) !== prependUrl) {\n            return Optional.some(prependUrl + srcURL);\n          }\n          return Optional.none();\n        });\n      }\n      return Optional.none();\n    };\n    const addPrependUrl = (info, api) => {\n      const data = api.getData();\n      addPrependUrl2(info, data.src.value).each(srcURL => {\n        api.setData({\n          src: {\n            value: srcURL,\n            meta: data.src.meta\n          }\n        });\n      });\n    };\n    const formFillFromMeta2 = (info, data, meta) => {\n      if (info.hasDescription && isString(meta.alt)) {\n        data.alt = meta.alt;\n      }\n      if (info.hasAccessibilityOptions) {\n        data.isDecorative = meta.isDecorative || data.isDecorative || false;\n      }\n      if (info.hasImageTitle && isString(meta.title)) {\n        data.title = meta.title;\n      }\n      if (info.hasDimensions) {\n        if (isString(meta.width)) {\n          data.dimensions.width = meta.width;\n        }\n        if (isString(meta.height)) {\n          data.dimensions.height = meta.height;\n        }\n      }\n      if (isString(meta.class)) {\n        ListUtils.findEntry(info.classList, meta.class).each(entry => {\n          data.classes = entry.value;\n        });\n      }\n      if (info.hasImageCaption) {\n        if (isBoolean(meta.caption)) {\n          data.caption = meta.caption;\n        }\n      }\n      if (info.hasAdvTab) {\n        if (isString(meta.style)) {\n          data.style = meta.style;\n        }\n        if (isString(meta.vspace)) {\n          data.vspace = meta.vspace;\n        }\n        if (isString(meta.border)) {\n          data.border = meta.border;\n        }\n        if (isString(meta.hspace)) {\n          data.hspace = meta.hspace;\n        }\n        if (isString(meta.borderstyle)) {\n          data.borderstyle = meta.borderstyle;\n        }\n      }\n    };\n    const formFillFromMeta = (info, api) => {\n      const data = api.getData();\n      const meta = data.src.meta;\n      if (meta !== undefined) {\n        const newData = deepMerge({}, data);\n        formFillFromMeta2(info, newData, meta);\n        api.setData(newData);\n      }\n    };\n    const calculateImageSize = (helpers, info, state, api) => {\n      const data = api.getData();\n      const url = data.src.value;\n      const meta = data.src.meta || {};\n      if (!meta.width && !meta.height && info.hasDimensions) {\n        if (isNotEmpty(url)) {\n          helpers.imageSize(url).then(size => {\n            if (state.open) {\n              api.setData({ dimensions: size });\n            }\n          }).catch(e => console.error(e));\n        } else {\n          api.setData({\n            dimensions: {\n              width: '',\n              height: ''\n            }\n          });\n        }\n      }\n    };\n    const updateImagesDropdown = (info, state, api) => {\n      const data = api.getData();\n      const image = ListUtils.findEntry(info.imageList, data.src.value);\n      state.prevImage = image;\n      api.setData({ images: image.map(entry => entry.value).getOr('') });\n    };\n    const changeSrc = (helpers, info, state, api) => {\n      addPrependUrl(info, api);\n      formFillFromMeta(info, api);\n      calculateImageSize(helpers, info, state, api);\n      updateImagesDropdown(info, state, api);\n    };\n    const changeImages = (helpers, info, state, api) => {\n      const data = api.getData();\n      const image = ListUtils.findEntry(info.imageList, data.images);\n      image.each(img => {\n        const updateAlt = data.alt === '' || state.prevImage.map(image => image.text === data.alt).getOr(false);\n        if (updateAlt) {\n          if (img.value === '') {\n            api.setData({\n              src: img,\n              alt: state.prevAlt\n            });\n          } else {\n            api.setData({\n              src: img,\n              alt: img.text\n            });\n          }\n        } else {\n          api.setData({ src: img });\n        }\n      });\n      state.prevImage = image;\n      changeSrc(helpers, info, state, api);\n    };\n    const changeFileInput = (helpers, info, state, api) => {\n      const data = api.getData();\n      api.block('Uploading image');\n      head(data.fileinput).fold(() => {\n        api.unblock();\n      }, file => {\n        const blobUri = URL.createObjectURL(file);\n        const finalize = () => {\n          api.unblock();\n          URL.revokeObjectURL(blobUri);\n        };\n        const updateSrcAndSwitchTab = url => {\n          api.setData({\n            src: {\n              value: url,\n              meta: {}\n            }\n          });\n          api.showTab('general');\n          changeSrc(helpers, info, state, api);\n        };\n        blobToDataUri(file).then(dataUrl => {\n          const blobInfo = helpers.createBlobCache(file, blobUri, dataUrl);\n          if (info.automaticUploads) {\n            helpers.uploadImage(blobInfo).then(result => {\n              updateSrcAndSwitchTab(result.url);\n              finalize();\n            }).catch(err => {\n              finalize();\n              helpers.alertErr(err);\n            });\n          } else {\n            helpers.addToBlobCache(blobInfo);\n            updateSrcAndSwitchTab(blobInfo.blobUri());\n            api.unblock();\n          }\n        });\n      });\n    };\n    const changeHandler = (helpers, info, state) => (api, evt) => {\n      if (evt.name === 'src') {\n        changeSrc(helpers, info, state, api);\n      } else if (evt.name === 'images') {\n        changeImages(helpers, info, state, api);\n      } else if (evt.name === 'alt') {\n        state.prevAlt = api.getData().alt;\n      } else if (evt.name === 'fileinput') {\n        changeFileInput(helpers, info, state, api);\n      } else if (evt.name === 'isDecorative') {\n        api.setEnabled('alt', !api.getData().isDecorative);\n      }\n    };\n    const closeHandler = state => () => {\n      state.open = false;\n    };\n    const makeDialogBody = info => {\n      if (info.hasAdvTab || info.hasUploadUrl || info.hasUploadHandler) {\n        const tabPanel = {\n          type: 'tabpanel',\n          tabs: flatten([\n            [MainTab.makeTab(info)],\n            info.hasAdvTab ? [AdvTab.makeTab(info)] : [],\n            info.hasUploadTab && (info.hasUploadUrl || info.hasUploadHandler) ? [UploadTab.makeTab(info)] : []\n          ])\n        };\n        return tabPanel;\n      } else {\n        const panel = {\n          type: 'panel',\n          items: MainTab.makeItems(info)\n        };\n        return panel;\n      }\n    };\n    const submitHandler = (editor, info, helpers) => api => {\n      const data = deepMerge(fromImageData(info.image), api.getData());\n      const finalData = {\n        ...data,\n        style: getStyleValue(helpers.normalizeCss, toImageData(data, false))\n      };\n      editor.execCommand('mceUpdateImage', false, toImageData(finalData, info.hasAccessibilityOptions));\n      editor.editorUpload.uploadImagesAuto();\n      api.close();\n    };\n    const imageSize = editor => url => {\n      if (!isSafeImageUrl(editor, url)) {\n        return Promise.resolve({\n          width: '',\n          height: ''\n        });\n      } else {\n        return getImageSize(editor.documentBaseURI.toAbsolute(url)).then(dimensions => ({\n          width: String(dimensions.width),\n          height: String(dimensions.height)\n        }));\n      }\n    };\n    const createBlobCache = editor => (file, blobUri, dataUrl) => {\n      var _a;\n      return editor.editorUpload.blobCache.create({\n        blob: file,\n        blobUri,\n        name: (_a = file.name) === null || _a === void 0 ? void 0 : _a.replace(/\\.[^\\.]+$/, ''),\n        filename: file.name,\n        base64: dataUrl.split(',')[1]\n      });\n    };\n    const addToBlobCache = editor => blobInfo => {\n      editor.editorUpload.blobCache.add(blobInfo);\n    };\n    const alertErr = editor => message => {\n      editor.windowManager.alert(message);\n    };\n    const normalizeCss = editor => cssText => normalizeCss$1(editor, cssText);\n    const parseStyle = editor => cssText => editor.dom.parseStyle(cssText);\n    const serializeStyle = editor => (stylesArg, name) => editor.dom.serializeStyle(stylesArg, name);\n    const uploadImage = editor => blobInfo => global$1(editor).upload([blobInfo], false).then(results => {\n      var _a;\n      if (results.length === 0) {\n        return Promise.reject('Failed to upload image');\n      } else if (results[0].status === false) {\n        return Promise.reject((_a = results[0].error) === null || _a === void 0 ? void 0 : _a.message);\n      } else {\n        return results[0];\n      }\n    });\n    const Dialog = editor => {\n      const helpers = {\n        imageSize: imageSize(editor),\n        addToBlobCache: addToBlobCache(editor),\n        createBlobCache: createBlobCache(editor),\n        alertErr: alertErr(editor),\n        normalizeCss: normalizeCss(editor),\n        parseStyle: parseStyle(editor),\n        serializeStyle: serializeStyle(editor),\n        uploadImage: uploadImage(editor)\n      };\n      const open = () => {\n        collect(editor).then(info => {\n          const state = createState(info);\n          return {\n            title: 'Insert/Edit Image',\n            size: 'normal',\n            body: makeDialogBody(info),\n            buttons: [\n              {\n                type: 'cancel',\n                name: 'cancel',\n                text: 'Cancel'\n              },\n              {\n                type: 'submit',\n                name: 'save',\n                text: 'Save',\n                primary: true\n              }\n            ],\n            initialData: fromImageData(info.image),\n            onSubmit: submitHandler(editor, info, helpers),\n            onChange: changeHandler(helpers, info, state),\n            onClose: closeHandler(state)\n          };\n        }).then(editor.windowManager.open);\n      };\n      return { open };\n    };\n\n    const register$1 = editor => {\n      editor.addCommand('mceImage', Dialog(editor).open);\n      editor.addCommand('mceUpdateImage', (_ui, data) => {\n        editor.undoManager.transact(() => insertOrUpdateImage(editor, data));\n      });\n    };\n\n    const hasImageClass = node => {\n      const className = node.attr('class');\n      return isNonNullable(className) && /\\bimage\\b/.test(className);\n    };\n    const toggleContentEditableState = state => nodes => {\n      let i = nodes.length;\n      const toggleContentEditable = node => {\n        node.attr('contenteditable', state ? 'true' : null);\n      };\n      while (i--) {\n        const node = nodes[i];\n        if (hasImageClass(node)) {\n          node.attr('contenteditable', state ? 'false' : null);\n          global.each(node.getAll('figcaption'), toggleContentEditable);\n        }\n      }\n    };\n    const setup = editor => {\n      editor.on('PreInit', () => {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n\n    const onSetupEditable = editor => api => {\n      const nodeChanged = () => {\n        api.setEnabled(editor.selection.isEditable());\n      };\n      editor.on('NodeChange', nodeChanged);\n      nodeChanged();\n      return () => {\n        editor.off('NodeChange', nodeChanged);\n      };\n    };\n    const register = editor => {\n      editor.ui.registry.addToggleButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onAction: Dialog(editor).open,\n        onSetup: buttonApi => {\n          buttonApi.setActive(isNonNullable(getSelectedImage(editor)));\n          const unbindSelectorChanged = editor.selection.selectorChangedWithUnbind('img:not([data-mce-object]):not([data-mce-placeholder]),figure.image', buttonApi.setActive).unbind;\n          const unbindEditable = onSetupEditable(editor)(buttonApi);\n          return () => {\n            unbindSelectorChanged();\n            unbindEditable();\n          };\n        }\n      });\n      editor.ui.registry.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image...',\n        onAction: Dialog(editor).open,\n        onSetup: onSetupEditable(editor)\n      });\n      editor.ui.registry.addContextMenu('image', { update: element => editor.selection.isEditable() && (isFigure(element) || isImage(element) && !isPlaceholderImage(element)) ? ['image'] : [] });\n    };\n\n    var Plugin = () => {\n      global$4.add('image', editor => {\n        register$2(editor);\n        setup(editor);\n        register(editor);\n        register$1(editor);\n      });\n    };\n\n    Plugin();\n\n})();\n"],"names":["global$4","getPrototypeOf","hasProto","v","constructor","predicate","_a","typeOf","x","o","proto","isType","type","value","isSimpleType","eq","t","a","is","isObject","isString","isPlainObject","isArray","isNull","isBoolean","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","i","len","noop","Optional","tag","onNone","onSome","mapper","binder","replacement","thunk","message","worker","keys","hasOwnProperty","each","obj","f","props","k","objAcc","r","internalFilter","onTrue","onFalse","filter","has","key","hasNonNullableKey","nativePush","flatten","xs","get","head","findMap","arr","rawSet","dom","set","element","remove","fromHtml","html","scope","div","fromDom","fromTag","node","fromText","text","SugarElement","docElm","y","global$3","global$2","isNotEmpty","s","option","name","editor","register$2","registerOption","valid","hasDimensions","hasAdvTab","hasUploadTab","getPrependUrl","getClassList","hasDescription","hasImageTitle","hasImageCaption","getImageList","showAccessibilityOptions","isAutomaticUploadsEnabled","hasUploadUrl","hasUploadHandler","parseIntAndGetMax","val1","val2","getImageSize","url","callback","img","done","dimensions","width","height","style","removePixelSuffix","addPixelSuffix","mergeMargins","css","splitMargin","createImageList","imageList","res","waitLoadImage","data","imgElm","selectImage","blobToDataUri","blob","resolve","reject","reader","isPlaceholderImage","isSafeImageUrl","src","getOption","DOM","getHspace","image","getVspace","getBorder","getAttrib","hasCaption","updateAttrib","wrapInFigure","figureElm","removeFigure","toggleCaption","normalizeStyle","normalizeCss","attrValue","setSize","styles","getSize","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","elm","isImage","getIsDecorative","getAlt","defaultData","getStyleValue","create","write","setAlt","figure","read","updateProp","oldData","newData","alt","isDecorative","sugarImage","updateAlt","normalized","_name","_value","normalizeCss$1","cssText","mergedCss","compressed","getSelectedImage","splitTextBlock","textBlockElements","_","parentElm","textBlock","readImageDataFromSelection","insertImageAtCaret","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","sanitizeImageData","insertOrUpdateImage","partialData","sanitizedData","deepMerge","merger","objects","ret","j","curObject","old","nu","global$1","global","getValue","item","getText","sanitizeList","list","extractValue","out","items","sanitizer","extractor","sanitize","isGroup","findEntryDelegate","ListUtils","optList","AdvTab","_info","collect","urlListSanitizer","futureImageList","completer","classList","hasAdvTab$1","hasUploadTab$1","hasUploadUrl$1","hasUploadHandler$1","hasDescription$1","hasImageTitle$1","hasDimensions$1","hasImageCaption$1","hasAccessibilityOptions","automaticUploads","prependURL","preUrl","makeItems","info","imageUrl","imageDescription","imageTitle","imageDimensions","caption","getDialogContainerType","useColumns","MainTab","UploadTab","createState","fromImageData","toImageData","removeEmptyAlt","addPrependUrl2","srcURL","prependUrl","addPrependUrl","api","formFillFromMeta2","meta","entry","formFillFromMeta","calculateImageSize","helpers","state","size","e","updateImagesDropdown","changeSrc","changeImages","changeFileInput","file","blobUri","finalize","updateSrcAndSwitchTab","dataUrl","blobInfo","result","err","changeHandler","evt","closeHandler","makeDialogBody","submitHandler","finalData","imageSize","createBlobCache","addToBlobCache","alertErr","parseStyle","serializeStyle","stylesArg","uploadImage","results","Dialog","register$1","_ui","hasImageClass","className","toggleContentEditableState","nodes","toggleContentEditable","setup","onSetupEditable","nodeChanged","register","buttonApi","unbindSelectorChanged","unbindEditable","Plugin"],"mappings":"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","x_google_ignoreList":[0]}