{"version":3,"file":"index-BZs_hcsz.cjs","sources":["../node_modules/.pnpm/tinymce@6.8.6/node_modules/tinymce/plugins/autolink/plugin.js"],"sourcesContent":["/**\n * TinyMCE version 6.8.6 (TBD)\n */\n\n(function () {\n  'use strict';\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  const link = () => /(?:[A-Za-z][A-Za-z\\d.+-]{0,14}:\\/\\/(?:[-.~*+=!&;:'%@?^${}(),\\w]+@)?|www\\.|[-;:&=+$,.\\w]+@)[A-Za-z\\d-]+(?:\\.[A-Za-z\\d-]+)*(?::\\d+)?(?:\\/(?:[-.~*+=!;:'%@$(),\\/\\w]*[-~*+=%@$()\\/\\w])?)?(?:\\?(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\\/\\w]+))?/g;\n\n  const option = name => editor => editor.options.get(name);\n  const register = editor => {\n    const registerOption = editor.options.register;\n    registerOption('autolink_pattern', {\n      processor: 'regexp',\n      default: new RegExp('^' + link().source + '$', 'i')\n    });\n    registerOption('link_default_target', { processor: 'string' });\n    registerOption('link_default_protocol', {\n      processor: 'string',\n      default: 'https'\n    });\n  };\n  const getAutoLinkPattern = option('autolink_pattern');\n  const getDefaultLinkTarget = option('link_default_target');\n  const getDefaultLinkProtocol = option('link_default_protocol');\n  const allowUnsafeLinkTarget = option('allow_unsafe_link_target');\n\n  const hasProto = (v, constructor, predicate) => {\n    var _a;\n    if (predicate(v, constructor.prototype)) {\n      return true;\n    } else {\n      return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n    }\n  };\n  const typeOf = x => {\n    const t = typeof x;\n    if (x === null) {\n      return 'null';\n    } else if (t === 'object' && Array.isArray(x)) {\n      return 'array';\n    } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n      return 'string';\n    } else {\n      return t;\n    }\n  };\n  const isType = type => value => typeOf(value) === type;\n  const eq = t => a => t === a;\n  const isString = isType('string');\n  const isUndefined = eq(undefined);\n  const isNullable = a => a === null || a === undefined;\n  const isNonNullable = a => !isNullable(a);\n\n  const not = f => t => !f(t);\n\n  const hasOwnProperty = Object.hasOwnProperty;\n  const has = (obj, key) => hasOwnProperty.call(obj, key);\n\n  const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n  const contains = (str, substr, start = 0, end) => {\n    const idx = str.indexOf(substr, start);\n    if (idx !== -1) {\n      return isUndefined(end) ? true : idx + substr.length <= end;\n    } else {\n      return false;\n    }\n  };\n  const startsWith = (str, prefix) => {\n    return checkRange(str, prefix, 0);\n  };\n\n  const zeroWidth = '\\uFEFF';\n  const isZwsp = char => char === zeroWidth;\n  const removeZwsp = s => s.replace(/\\uFEFF/g, '');\n\n  var global = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n  const isTextNode = node => node.nodeType === 3;\n  const isElement = node => node.nodeType === 1;\n  const isBracketOrSpace = char => /^[(\\[{ \\u00a0]$/.test(char);\n  const hasProtocol = url => /^([A-Za-z][A-Za-z\\d.+-]*:\\/\\/)|mailto:/.test(url);\n  const isPunctuation = char => /[?!,.;:]/.test(char);\n  const findChar = (text, index, predicate) => {\n    for (let i = index - 1; i >= 0; i--) {\n      const char = text.charAt(i);\n      if (!isZwsp(char) && predicate(char)) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  const freefallRtl = (container, offset) => {\n    let tempNode = container;\n    let tempOffset = offset;\n    while (isElement(tempNode) && tempNode.childNodes[tempOffset]) {\n      tempNode = tempNode.childNodes[tempOffset];\n      tempOffset = isTextNode(tempNode) ? tempNode.data.length : tempNode.childNodes.length;\n    }\n    return {\n      container: tempNode,\n      offset: tempOffset\n    };\n  };\n\n  const parseCurrentLine = (editor, offset) => {\n    var _a;\n    const voidElements = editor.schema.getVoidElements();\n    const autoLinkPattern = getAutoLinkPattern(editor);\n    const {dom, selection} = editor;\n    if (dom.getParent(selection.getNode(), 'a[href]') !== null) {\n      return null;\n    }\n    const rng = selection.getRng();\n    const textSeeker = global(dom, node => {\n      return dom.isBlock(node) || has(voidElements, node.nodeName.toLowerCase()) || dom.getContentEditable(node) === 'false';\n    });\n    const {\n      container: endContainer,\n      offset: endOffset\n    } = freefallRtl(rng.endContainer, rng.endOffset);\n    const root = (_a = dom.getParent(endContainer, dom.isBlock)) !== null && _a !== void 0 ? _a : dom.getRoot();\n    const endSpot = textSeeker.backwards(endContainer, endOffset + offset, (node, offset) => {\n      const text = node.data;\n      const idx = findChar(text, offset, not(isBracketOrSpace));\n      return idx === -1 || isPunctuation(text[idx]) ? idx : idx + 1;\n    }, root);\n    if (!endSpot) {\n      return null;\n    }\n    let lastTextNode = endSpot.container;\n    const startSpot = textSeeker.backwards(endSpot.container, endSpot.offset, (node, offset) => {\n      lastTextNode = node;\n      const idx = findChar(node.data, offset, isBracketOrSpace);\n      return idx === -1 ? idx : idx + 1;\n    }, root);\n    const newRng = dom.createRng();\n    if (!startSpot) {\n      newRng.setStart(lastTextNode, 0);\n    } else {\n      newRng.setStart(startSpot.container, startSpot.offset);\n    }\n    newRng.setEnd(endSpot.container, endSpot.offset);\n    const rngText = removeZwsp(newRng.toString());\n    const matches = rngText.match(autoLinkPattern);\n    if (matches) {\n      let url = matches[0];\n      if (startsWith(url, 'www.')) {\n        const protocol = getDefaultLinkProtocol(editor);\n        url = protocol + '://' + url;\n      } else if (contains(url, '@') && !hasProtocol(url)) {\n        url = 'mailto:' + url;\n      }\n      return {\n        rng: newRng,\n        url\n      };\n    } else {\n      return null;\n    }\n  };\n  const convertToLink = (editor, result) => {\n    const {dom, selection} = editor;\n    const {rng, url} = result;\n    const bookmark = selection.getBookmark();\n    selection.setRng(rng);\n    const command = 'createlink';\n    const args = {\n      command,\n      ui: false,\n      value: url\n    };\n    const beforeExecEvent = editor.dispatch('BeforeExecCommand', args);\n    if (!beforeExecEvent.isDefaultPrevented()) {\n      editor.getDoc().execCommand(command, false, url);\n      editor.dispatch('ExecCommand', args);\n      const defaultLinkTarget = getDefaultLinkTarget(editor);\n      if (isString(defaultLinkTarget)) {\n        const anchor = selection.getNode();\n        dom.setAttrib(anchor, 'target', defaultLinkTarget);\n        if (defaultLinkTarget === '_blank' && !allowUnsafeLinkTarget(editor)) {\n          dom.setAttrib(anchor, 'rel', 'noopener');\n        }\n      }\n    }\n    selection.moveToBookmark(bookmark);\n    editor.nodeChanged();\n  };\n  const handleSpacebar = editor => {\n    const result = parseCurrentLine(editor, -1);\n    if (isNonNullable(result)) {\n      convertToLink(editor, result);\n    }\n  };\n  const handleBracket = handleSpacebar;\n  const handleEnter = editor => {\n    const result = parseCurrentLine(editor, 0);\n    if (isNonNullable(result)) {\n      convertToLink(editor, result);\n    }\n  };\n  const setup = editor => {\n    editor.on('keydown', e => {\n      if (e.keyCode === 13 && !e.isDefaultPrevented()) {\n        handleEnter(editor);\n      }\n    });\n    editor.on('keyup', e => {\n      if (e.keyCode === 32) {\n        handleSpacebar(editor);\n      } else if (e.keyCode === 48 && e.shiftKey || e.keyCode === 221) {\n        handleBracket(editor);\n      }\n    });\n  };\n\n  var Plugin = () => {\n    global$1.add('autolink', editor => {\n      register(editor);\n      setup(editor);\n    });\n  };\n\n  Plugin();\n\n})();\n"],"names":["global$1","link","option","name","editor","register","registerOption","getAutoLinkPattern","getDefaultLinkTarget","getDefaultLinkProtocol","allowUnsafeLinkTarget","hasProto","v","constructor","predicate","_a","typeOf","x","t","o","proto","isType","type","value","eq","a","isString","isUndefined","isNullable","isNonNullable","not","f","hasOwnProperty","has","obj","key","checkRange","str","substr","start","contains","end","idx","startsWith","prefix","zeroWidth","isZwsp","char","removeZwsp","s","global","isTextNode","node","isElement","isBracketOrSpace","hasProtocol","url","isPunctuation","findChar","text","index","i","freefallRtl","container","offset","tempNode","tempOffset","parseCurrentLine","voidElements","autoLinkPattern","dom","selection","rng","textSeeker","endContainer","endOffset","root","endSpot","lastTextNode","startSpot","newRng","matches","convertToLink","result","bookmark","command","args","defaultLinkTarget","anchor","handleSpacebar","handleBracket","handleEnter","setup","Plugin"],"mappings":"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","x_google_ignoreList":[0]}