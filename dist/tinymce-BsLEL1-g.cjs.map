{"version":3,"file":"tinymce-BsLEL1-g.cjs","sources":["../node_modules/.pnpm/tinymce@6.8.6/node_modules/tinymce/tinymce.js"],"sourcesContent":["/**\n * TinyMCE version 6.8.6 (TBD)\n */\n\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    const getPrototypeOf$2 = Object.getPrototypeOf;\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType$1 = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq$1 = t => a => t === a;\n    const is$4 = (value, constructor) => isObject(value) && hasProto(value, constructor, (o, proto) => getPrototypeOf$2(o) === proto);\n    const isString = isType$1('string');\n    const isObject = isType$1('object');\n    const isPlainObject = value => is$4(value, Object);\n    const isArray$1 = isType$1('array');\n    const isNull = eq$1(null);\n    const isBoolean = isSimpleType('boolean');\n    const isUndefined = eq$1(undefined);\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isNumber = isSimpleType('number');\n    const isArrayOf = (value, pred) => {\n      if (isArray$1(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const compose = (fa, fb) => {\n      return (...args) => {\n        return fa(fb.apply(null, args));\n      };\n    };\n    const compose1 = (fbc, fab) => a => fbc(fab(a));\n    const constant = value => {\n      return () => {\n        return value;\n      };\n    };\n    const identity = x => {\n      return x;\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n    function curry(fn, ...initialArgs) {\n      return (...restArgs) => {\n        const all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    const not = f => t => !f(t);\n    const die = msg => {\n      return () => {\n        throw new Error(msg);\n      };\n    };\n    const apply$1 = f => {\n      return f();\n    };\n    const call = f => {\n      f();\n    };\n    const never = constant(false);\n    const always = constant(true);\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeSlice = Array.prototype.slice;\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const indexOf$1 = (xs, x) => {\n      const r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    const contains$2 = (xs, x) => rawIndexOf(xs, x) > -1;\n    const exists = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const map$3 = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$e = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const eachr = (xs, f) => {\n      for (let i = xs.length - 1; i >= 0; i--) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const partition$2 = (xs, pred) => {\n      const pass = [];\n      const fail = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        const arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass,\n        fail\n      };\n    };\n    const filter$5 = (xs, pred) => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    const foldr = (xs, f, acc) => {\n      eachr(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const foldl = (xs, f, acc) => {\n      each$e(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const findUntil$1 = (xs, pred, until) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const find$2 = (xs, pred) => {\n      return findUntil$1(xs, pred, never);\n    };\n    const findIndex$2 = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind$3 = (xs, f) => flatten(map$3(xs, f));\n    const forall = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        const x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const reverse = xs => {\n      const r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    const difference = (a1, a2) => filter$5(a1, x => !contains$2(a2, x));\n    const mapToObject = (xs, f) => {\n      const r = {};\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    const sort = (xs, comparator) => {\n      const copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    const get$b = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = xs => get$b(xs, 0);\n    const last$3 = xs => get$b(xs, xs.length - 1);\n    const from = isFunction(Array.from) ? Array.from : x => nativeSlice.call(x);\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n    const unique$1 = (xs, comparator) => {\n      const r = [];\n      const isDuplicated = isFunction(comparator) ? x => exists(r, i => comparator(i, x)) : x => contains$2(r, x);\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (!isDuplicated(x)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n\n    const keys = Object.keys;\n    const hasOwnProperty$1 = Object.hasOwnProperty;\n    const each$d = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const map$2 = (obj, f) => {\n      return tupleMap(obj, (x, i) => ({\n        k: i,\n        v: f(x, i)\n      }));\n    };\n    const tupleMap = (obj, f) => {\n      const r = {};\n      each$d(obj, (x, i) => {\n        const tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each$d(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const bifilter = (obj, pred) => {\n      const t = {};\n      const f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t,\n        f\n      };\n    };\n    const filter$4 = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const mapToArray = (obj, f) => {\n      const r = [];\n      each$d(obj, (value, name) => {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    const values = obj => {\n      return mapToArray(obj, identity);\n    };\n    const get$a = (obj, key) => {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    const has$2 = (obj, key) => hasOwnProperty$1.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    const equal$1 = (a1, a2, eq = eqAny) => eqRecord(eq).eq(a1, a2);\n\n    const stringArray = a => {\n      const all = {};\n      each$e(a, key => {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    const isArrayLike = o => o.length !== undefined;\n    const isArray = Array.isArray;\n    const toArray$1 = obj => {\n      if (!isArray(obj)) {\n        const array = [];\n        for (let i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    const each$c = (o, cb, s) => {\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (isArrayLike(o)) {\n        for (let n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (const n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    const map$1 = (array, callback) => {\n      const out = [];\n      each$c(array, (item, index) => {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    const filter$3 = (a, f) => {\n      const o = [];\n      each$c(a, (v, index) => {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    const indexOf = (a, v) => {\n      if (a) {\n        for (let i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    const reduce = (collection, iteratee, accumulator, thisArg) => {\n      let acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (let i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    const findIndex$1 = (array, predicate, thisArg) => {\n      for (let i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    const last$2 = collection => collection[collection.length - 1];\n\n    const cached = f => {\n      let called = false;\n      let r;\n      return (...args) => {\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    const DeviceType = (os, browser, userAgent, mediaMatch) => {\n      const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      const isiPhone = os.isiOS() && !isiPad;\n      const isMobile = os.isiOS() || os.isAndroid();\n      const isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      const isPhone = isiPhone || isMobile && !isTablet;\n      const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      const isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    const firstMatch = (regexes, s) => {\n      for (let i = 0; i < regexes.length; i++) {\n        const x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    const find$1 = (regexes, agent) => {\n      const r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      const group = i => {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$3(group(1), group(2));\n    };\n    const detect$5 = (versionRegexes, agent) => {\n      const cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    const unknown$2 = () => {\n      return nu$3(0, 0);\n    };\n    const nu$3 = (major, minor) => {\n      return {\n        major,\n        minor\n      };\n    };\n    const Version = {\n      nu: nu$3,\n      detect: detect$5,\n      unknown: unknown$2\n    };\n\n    const detectBrowser$1 = (browsers, userAgentData) => {\n      return findMap(userAgentData.brands, uaBrand => {\n        const lcBrand = uaBrand.brand.toLowerCase();\n        return find$2(browsers, browser => {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(info => ({\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        }));\n      });\n    };\n\n    const detect$4 = (candidates, userAgent) => {\n      const agent = String(userAgent).toLowerCase();\n      return find$2(candidates, candidate => {\n        return candidate.search(agent);\n      });\n    };\n    const detectBrowser = (browsers, userAgent) => {\n      return detect$4(browsers, userAgent).map(browser => {\n        const version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version\n        };\n      });\n    };\n    const detectOs = (oses, userAgent) => {\n      return detect$4(oses, userAgent).map(os => {\n        const version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version\n        };\n      });\n    };\n\n    const removeFromStart = (str, numChars) => {\n      return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    const contains$1 = (str, substr, start = 0, end) => {\n      const idx = str.indexOf(substr, start);\n      if (idx !== -1) {\n        return isUndefined(end) ? true : idx + substr.length <= end;\n      } else {\n        return false;\n      }\n    };\n    const startsWith = (str, prefix) => {\n      return checkRange(str, prefix, 0);\n    };\n    const endsWith = (str, suffix) => {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    const blank = r => s => s.replace(r, '');\n    const trim$4 = blank(/^\\s+|\\s+$/g);\n    const lTrim = blank(/^\\s+/g);\n    const rTrim = blank(/\\s+$/g);\n    const isNotEmpty = s => s.length > 0;\n    const isEmpty$3 = s => !isNotEmpty(s);\n    const repeat = (s, count) => count <= 0 ? '' : new Array(count + 1).join(s);\n    const toInt = (value, radix = 10) => {\n      const num = parseInt(value, radix);\n      return isNaN(num) ? Optional.none() : Optional.some(num);\n    };\n\n    const normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    const checkContains = target => {\n      return uastring => {\n        return contains$1(uastring, target);\n      };\n    };\n    const browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: uastring => {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chromium',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: uastring => {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    const oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: uastring => {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'macOS',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    const PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    const edge = 'Edge';\n    const chromium = 'Chromium';\n    const ie = 'IE';\n    const opera = 'Opera';\n    const firefox = 'Firefox';\n    const safari = 'Safari';\n    const unknown$1 = () => {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$2 = info => {\n      const current = info.current;\n      const version = info.version;\n      const isBrowser = name => () => current === name;\n      return {\n        current,\n        version,\n        isEdge: isBrowser(edge),\n        isChromium: isBrowser(chromium),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    const Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chromium: constant(chromium),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    const windows = 'Windows';\n    const ios = 'iOS';\n    const android = 'Android';\n    const linux = 'Linux';\n    const macos = 'macOS';\n    const solaris = 'Solaris';\n    const freebsd = 'FreeBSD';\n    const chromeos = 'ChromeOS';\n    const unknown = () => {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$1 = info => {\n      const current = info.current;\n      const version = info.version;\n      const isOS = name => () => current === name;\n      return {\n        current,\n        version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isMacOS: isOS(macos),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    const OperatingSystem = {\n      unknown,\n      nu: nu$1,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      macos: constant(macos),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    const detect$3 = (userAgent, userAgentDataOpt, mediaMatch) => {\n      const browsers = PlatformInfo.browsers();\n      const oses = PlatformInfo.oses();\n      const browser = userAgentDataOpt.bind(userAgentData => detectBrowser$1(browsers, userAgentData)).orThunk(() => detectBrowser(browsers, userAgent)).fold(Browser.unknown, Browser.nu);\n      const os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      const deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser,\n        os,\n        deviceType\n      };\n    };\n    const PlatformDetection = { detect: detect$3 };\n\n    const mediaMatch = query => window.matchMedia(query).matches;\n    let platform$4 = cached(() => PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch));\n    const detect$2 = () => platform$4();\n\n    const userAgent = navigator.userAgent;\n    const platform$3 = detect$2();\n    const browser$3 = platform$3.browser;\n    const os$1 = platform$3.os;\n    const deviceType = platform$3.deviceType;\n    const windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    const Env = {\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      documentMode: browser$3.isIE() ? document.documentMode || 7 : 10,\n      cacheSuffix: null,\n      container: null,\n      canHaveCSP: !browser$3.isIE(),\n      windowsPhone,\n      browser: {\n        current: browser$3.current,\n        version: browser$3.version,\n        isChromium: browser$3.isChromium,\n        isEdge: browser$3.isEdge,\n        isFirefox: browser$3.isFirefox,\n        isIE: browser$3.isIE,\n        isOpera: browser$3.isOpera,\n        isSafari: browser$3.isSafari\n      },\n      os: {\n        current: os$1.current,\n        version: os$1.version,\n        isAndroid: os$1.isAndroid,\n        isChromeOS: os$1.isChromeOS,\n        isFreeBSD: os$1.isFreeBSD,\n        isiOS: os$1.isiOS,\n        isLinux: os$1.isLinux,\n        isMacOS: os$1.isMacOS,\n        isSolaris: os$1.isSolaris,\n        isWindows: os$1.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    const whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    const trim$3 = str => {\n      return isNullable(str) ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    const is$3 = (obj, type) => {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    const makeMap$4 = (items, delim, map = {}) => {\n      const resolvedItems = isString(items) ? items.split(delim || ',') : items || [];\n      let i = resolvedItems.length;\n      while (i--) {\n        map[resolvedItems[i]] = {};\n      }\n      return map;\n    };\n    const hasOwnProperty = has$2;\n    const extend$3 = (obj, ...exts) => {\n      for (let i = 0; i < exts.length; i++) {\n        const ext = exts[i];\n        for (const name in ext) {\n          if (has$2(ext, name)) {\n            const value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    const walk$4 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$c(o, (o, i) => {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          } else {\n            walk$4(o, f, n, s);\n            return true;\n          }\n        });\n      }\n    };\n    const resolve$3 = (n, o = window) => {\n      const path = n.split('.');\n      for (let i = 0, l = path.length; i < l; i++) {\n        o = o[path[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    const explode$3 = (s, d) => {\n      if (isArray$1(s)) {\n        return s;\n      } else if (s === '') {\n        return [];\n      } else {\n        return map$1(s.split(d || ','), trim$3);\n      }\n    };\n    const _addCacheSuffix = url => {\n      const cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    const Tools = {\n      trim: trim$3,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$c,\n      map: map$1,\n      grep: filter$3,\n      inArray: indexOf,\n      hasOwn: hasOwnProperty,\n      extend: extend$3,\n      walk: walk$4,\n      resolve: resolve$3,\n      explode: explode$3,\n      _addCacheSuffix\n    };\n\n    const is$2 = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const equals = (lhs, rhs, comparator = tripleEquals) => lift2(lhs, rhs, comparator).getOr(lhs.isNone() && rhs.isNone());\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const lift2 = (oa, ob, f) => oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    const lift3 = (oa, ob, oc, f) => oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    const path = (parts, scope) => {\n      let o = scope !== undefined && scope !== null ? scope : Global;\n      for (let i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    const resolve$2 = (p, scope) => {\n      const parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    const unsafe = (name, scope) => {\n      return resolve$2(name, scope);\n    };\n    const getOrDie = (name, scope) => {\n      const actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n\n    const getPrototypeOf$1 = Object.getPrototypeOf;\n    const sandHTMLElement = scope => {\n      return getOrDie('HTMLElement', scope);\n    };\n    const isPrototypeOf = x => {\n      const scope = resolve$2('ownerDocument.defaultView', x);\n      return isObject(x) && (sandHTMLElement(scope).prototype.isPrototypeOf(x) || /^HTML\\w*Element$/.test(getPrototypeOf$1(x).constructor.name));\n    };\n\n    const COMMENT = 8;\n    const DOCUMENT = 9;\n    const DOCUMENT_FRAGMENT = 11;\n    const ELEMENT = 1;\n    const TEXT = 3;\n\n    const name = element => {\n      const r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    const type$1 = element => element.dom.nodeType;\n    const isType = t => element => type$1(element) === t;\n    const isComment$1 = element => type$1(element) === COMMENT || name(element) === '#comment';\n    const isHTMLElement$1 = element => isElement$7(element) && isPrototypeOf(element.dom);\n    const isElement$7 = isType(ELEMENT);\n    const isText$b = isType(TEXT);\n    const isDocument$2 = isType(DOCUMENT);\n    const isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    const isTag = tag => e => isElement$7(e) && name(e) === tag;\n\n    const rawSet = (dom, key, value) => {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    const set$3 = (element, key, value) => {\n      rawSet(element.dom, key, value);\n    };\n    const setAll$1 = (element, attrs) => {\n      const dom = element.dom;\n      each$d(attrs, (v, k) => {\n        rawSet(dom, k, v);\n      });\n    };\n    const get$9 = (element, key) => {\n      const v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    const getOpt = (element, key) => Optional.from(get$9(element, key));\n    const has$1 = (element, key) => {\n      const dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    const remove$a = (element, key) => {\n      element.dom.removeAttribute(key);\n    };\n    const hasNone = element => {\n      const attrs = element.dom.attributes;\n      return attrs === undefined || attrs === null || attrs.length === 0;\n    };\n    const clone$4 = element => foldl(element.dom.attributes, (acc, attr) => {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n\n    const read$4 = (element, attr) => {\n      const value = get$9(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    const add$4 = (element, attr, id) => {\n      const old = read$4(element, attr);\n      const nu = old.concat([id]);\n      set$3(element, attr, nu.join(' '));\n      return true;\n    };\n    const remove$9 = (element, attr, id) => {\n      const nu = filter$5(read$4(element, attr), v => v !== id);\n      if (nu.length > 0) {\n        set$3(element, attr, nu.join(' '));\n      } else {\n        remove$a(element, attr);\n      }\n      return false;\n    };\n\n    const supports = element => element.dom.classList !== undefined;\n    const get$8 = element => read$4(element, 'class');\n    const add$3 = (element, clazz) => add$4(element, 'class', clazz);\n    const remove$8 = (element, clazz) => remove$9(element, 'class', clazz);\n    const toggle$2 = (element, clazz) => {\n      if (contains$2(get$8(element), clazz)) {\n        return remove$8(element, clazz);\n      } else {\n        return add$3(element, clazz);\n      }\n    };\n\n    const add$2 = (element, clazz) => {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    const cleanClass = element => {\n      const classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove$a(element, 'class');\n      }\n    };\n    const remove$7 = (element, clazz) => {\n      if (supports(element)) {\n        const classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$8(element, clazz);\n      }\n      cleanClass(element);\n    };\n    const toggle$1 = (element, clazz) => {\n      const result = supports(element) ? element.dom.classList.toggle(clazz) : toggle$2(element, clazz);\n      cleanClass(element);\n      return result;\n    };\n    const has = (element, clazz) => supports(element) && element.dom.classList.contains(clazz);\n\n    const fromHtml$1 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        const message = 'HTML does not have a single root node';\n        console.error(message, html);\n        throw new Error(message);\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    const fromTag = (tag, scope) => {\n      const doc = scope || document;\n      const node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    const fromText = (text, scope) => {\n      const doc = scope || document;\n      const node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    const fromDom$2 = node => {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    const fromPoint$2 = (docElm, x, y) => Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    const SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag,\n      fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$2\n    };\n\n    const toArray = (target, f) => {\n      const r = [];\n      const recurse = e => {\n        r.push(e);\n        return f(e);\n      };\n      let cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    const is$1 = (element, selector) => {\n      const dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        const elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    const bypassSelector = dom => dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    const all = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    const one = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    const eq = (e1, e2) => e1.dom === e2.dom;\n    const contains = (e1, e2) => {\n      const d1 = e1.dom;\n      const d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n\n    const owner$1 = element => SugarElement.fromDom(element.dom.ownerDocument);\n    const documentOrOwner = dos => isDocument$2(dos) ? dos : owner$1(dos);\n    const documentElement = element => SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    const defaultView = element => SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    const parent = element => Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    const parentElement = element => Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    const parents$1 = (element, isRoot) => {\n      const stop = isFunction(isRoot) ? isRoot : never;\n      let dom = element.dom;\n      const ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        const rawParent = dom.parentNode;\n        const p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    const siblings = element => {\n      const filterSelf = elements => filter$5(elements, x => !eq(element, x));\n      return parent(element).map(children$1).map(filterSelf).getOr([]);\n    };\n    const prevSibling = element => Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    const nextSibling = element => Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    const prevSiblings = element => reverse(toArray(element, prevSibling));\n    const nextSiblings = element => toArray(element, nextSibling);\n    const children$1 = element => map$3(element.dom.childNodes, SugarElement.fromDom);\n    const child$1 = (element, index) => {\n      const cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    const firstChild = element => child$1(element, 0);\n    const lastChild = element => child$1(element, element.dom.childNodes.length - 1);\n    const childNodesCount = element => element.dom.childNodes.length;\n    const hasChildNodes = element => element.dom.hasChildNodes();\n\n    const getHead = doc => {\n      const b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    const isShadowRoot = dos => isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    const supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    const isSupported$1 = constant(supported);\n    const getRootNode = supported ? e => SugarElement.fromDom(e.dom.getRootNode()) : documentOrOwner;\n    const getStyleContainer = dos => isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    const getContentContainer = dos => isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    const getShadowRoot = e => {\n      const r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    const getShadowHost = e => SugarElement.fromDom(e.dom.host);\n    const getOriginalEventTarget = event => {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        const el = SugarElement.fromDom(event.target);\n        if (isElement$7(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            const composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    const isOpenShadowHost = element => isNonNullable(element.dom.shadowRoot);\n\n    const inBody = element => {\n      const dom = isText$b(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      const doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(() => doc.body.contains(dom), compose1(inBody, getShadowHost));\n    };\n\n    var ClosestOrAncestor = (is, ancestor, scope, a, isRoot) => {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    };\n\n    const ancestor$4 = (scope, predicate, isRoot) => {\n      let element = scope.dom;\n      const stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$4 = (scope, predicate, isRoot) => {\n      const is = (s, test) => test(s);\n      return ClosestOrAncestor(is, ancestor$4, scope, predicate, isRoot);\n    };\n    const sibling$1 = (scope, predicate) => {\n      const element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), x => !eq(scope, x) && predicate(x));\n    };\n    const child = (scope, predicate) => {\n      const pred = node => predicate(SugarElement.fromDom(node));\n      const result = find$2(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    const descendant$2 = (scope, predicate) => {\n      const descend = node => {\n        for (let i = 0; i < node.childNodes.length; i++) {\n          const child = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    const ancestor$3 = (scope, selector, isRoot) => ancestor$4(scope, e => is$1(e, selector), isRoot);\n    const descendant$1 = (scope, selector) => one(selector, scope);\n    const closest$3 = (scope, selector, isRoot) => {\n      const is = (element, selector) => is$1(element, selector);\n      return ClosestOrAncestor(is, ancestor$3, scope, selector, isRoot);\n    };\n\n    const closest$2 = target => closest$3(target, '[contenteditable]');\n    const isEditable$2 = (element, assumeEditable = false) => {\n      if (inBody(element)) {\n        return element.dom.isContentEditable;\n      } else {\n        return closest$2(element).fold(constant(assumeEditable), editable => getRaw$1(editable) === 'true');\n      }\n    };\n    const getRaw$1 = element => element.dom.contentEditable;\n\n    const isSupported = dom => dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n\n    const internalSet = (dom, property, value) => {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    const internalRemove = (dom, property) => {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    const set$2 = (element, property, value) => {\n      const dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    const setAll = (element, css) => {\n      const dom = element.dom;\n      each$d(css, (v, k) => {\n        internalSet(dom, k, v);\n      });\n    };\n    const get$7 = (element, property) => {\n      const dom = element.dom;\n      const styles = window.getComputedStyle(dom);\n      const r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    const getUnsafeProperty = (dom, property) => isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    const getRaw = (element, property) => {\n      const dom = element.dom;\n      const raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(r => r.length > 0);\n    };\n    const getAllRaw = element => {\n      const css = {};\n      const dom = element.dom;\n      if (isSupported(dom)) {\n        for (let i = 0; i < dom.style.length; i++) {\n          const ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    const remove$6 = (element, property) => {\n      const dom = element.dom;\n      internalRemove(dom, property);\n      if (is$2(getOpt(element, 'style').map(trim$4), '')) {\n        remove$a(element, 'style');\n      }\n    };\n    const reflow = e => e.dom.offsetWidth;\n\n    const before$3 = (marker, element) => {\n      const parent$1 = parent(marker);\n      parent$1.each(v => {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    const after$4 = (marker, element) => {\n      const sibling = nextSibling(marker);\n      sibling.fold(() => {\n        const parent$1 = parent(marker);\n        parent$1.each(v => {\n          append$1(v, element);\n        });\n      }, v => {\n        before$3(v, element);\n      });\n    };\n    const prepend = (parent, element) => {\n      const firstChild$1 = firstChild(parent);\n      firstChild$1.fold(() => {\n        append$1(parent, element);\n      }, v => {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    const append$1 = (parent, element) => {\n      parent.dom.appendChild(element.dom);\n    };\n    const wrap$2 = (element, wrapper) => {\n      before$3(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    const after$3 = (marker, elements) => {\n      each$e(elements, (x, i) => {\n        const e = i === 0 ? marker : elements[i - 1];\n        after$4(e, x);\n      });\n    };\n    const append = (parent, elements) => {\n      each$e(elements, x => {\n        append$1(parent, x);\n      });\n    };\n\n    const empty = element => {\n      element.dom.textContent = '';\n      each$e(children$1(element), rogue => {\n        remove$5(rogue);\n      });\n    };\n    const remove$5 = element => {\n      const dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    const unwrap = wrapper => {\n      const children = children$1(wrapper);\n      if (children.length > 0) {\n        after$3(wrapper, children);\n      }\n      remove$5(wrapper);\n    };\n\n    const fromHtml = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      return children$1(SugarElement.fromDom(div));\n    };\n    const fromDom$1 = nodes => map$3(nodes, SugarElement.fromDom);\n\n    const get$6 = element => element.dom.innerHTML;\n    const set$1 = (element, content) => {\n      const owner = owner$1(element);\n      const docDom = owner.dom;\n      const fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      const contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n    const getOuter = element => {\n      const container = SugarElement.fromTag('div');\n      const clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$1(container, clone);\n      return get$6(container);\n    };\n\n    const mkEvent = (target, x, y, stop, prevent, kill, raw) => ({\n      target,\n      x,\n      y,\n      stop,\n      prevent,\n      kill,\n      raw\n    });\n    const fromRawEvent = rawEvent => {\n      const target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      const stop = () => rawEvent.stopPropagation();\n      const prevent = () => rawEvent.preventDefault();\n      const kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    const handle$1 = (filter, handler) => rawEvent => {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent(rawEvent));\n      }\n    };\n    const binder = (element, event, filter, handler, useCapture) => {\n      const wrapped = handle$1(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    const bind$2 = (element, event, filter, handler) => binder(element, event, filter, handler, false);\n    const unbind = (element, event, handler, useCapture) => {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    const r = (left, top) => {\n      const translate = (x, y) => r(left + x, top + y);\n      return {\n        left,\n        top,\n        translate\n      };\n    };\n    const SugarPosition = r;\n\n    const boxPosition = dom => {\n      const box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    const firstDefinedOrZero = (a, b) => {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    const absolute = element => {\n      const doc = element.dom.ownerDocument;\n      const body = doc.body;\n      const win = doc.defaultView;\n      const html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      const scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      const scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    const viewport = element => {\n      const dom = element.dom;\n      const doc = dom.ownerDocument;\n      const body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    const get$5 = _DOC => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      const y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    const to = (x, y, _DOC) => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    const intoView = (element, alignToTop) => {\n      const isSafari = detect$2().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    const get$4 = _win => {\n      const win = _win === undefined ? window : _win;\n      if (detect$2().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win.visualViewport);\n      }\n    };\n    const bounds = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const getBounds = _win => {\n      const win = _win === undefined ? window : _win;\n      const doc = win.document;\n      const scroll = get$5(SugarElement.fromDom(doc));\n      return get$4(win).fold(() => {\n        const html = win.document.documentElement;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, visualViewport => bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height));\n    };\n\n    const children = (scope, predicate) => filter$5(children$1(scope), predicate);\n    const descendants$1 = (scope, predicate) => {\n      let result = [];\n      each$e(children$1(scope), x => {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    const descendants = (scope, selector) => all(selector, scope);\n\n    const ancestor$2 = (scope, selector, isRoot) => ancestor$3(scope, selector, isRoot).isSome();\n\n    class DomTreeWalker {\n      constructor(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      current() {\n        return this.node;\n      }\n      next(shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      }\n      prev(shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      }\n      prev2(shallow) {\n        this.node = this.findPreviousNode(this.node, shallow);\n        return this.node;\n      }\n      findSibling(node, startName, siblingName, shallow) {\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            let sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (let parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n        return undefined;\n      }\n      findPreviousNode(node, shallow) {\n        if (node) {\n          const sibling = node.previousSibling;\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (let child = sibling.lastChild; child; child = child.lastChild) {\n                if (!child.lastChild) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          const parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n        return undefined;\n      }\n    }\n\n    const isNodeType = type => {\n      return node => {\n        return !!node && node.nodeType === type;\n      };\n    };\n    const isRestrictedNode = node => !!node && !Object.getPrototypeOf(node);\n    const isElement$6 = isNodeType(1);\n    const isHTMLElement = node => isElement$6(node) && isHTMLElement$1(SugarElement.fromDom(node));\n    const isSVGElement = node => isElement$6(node) && node.namespaceURI === 'http://www.w3.org/2000/svg';\n    const matchNodeName = name => {\n      const lowerCasedName = name.toLowerCase();\n      return node => isNonNullable(node) && node.nodeName.toLowerCase() === lowerCasedName;\n    };\n    const matchNodeNames = names => {\n      const lowerCasedNames = names.map(s => s.toLowerCase());\n      return node => {\n        if (node && node.nodeName) {\n          const nodeName = node.nodeName.toLowerCase();\n          return contains$2(lowerCasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    const matchStyleValues = (name, values) => {\n      const items = values.toLowerCase().split(' ');\n      return node => {\n        if (isElement$6(node)) {\n          const win = node.ownerDocument.defaultView;\n          if (win) {\n            for (let i = 0; i < items.length; i++) {\n              const computed = win.getComputedStyle(node, null);\n              const cssValue = computed ? computed.getPropertyValue(name) : null;\n              if (cssValue === items[i]) {\n                return true;\n              }\n            }\n          }\n        }\n        return false;\n      };\n    };\n    const hasAttribute = attrName => {\n      return node => {\n        return isElement$6(node) && node.hasAttribute(attrName);\n      };\n    };\n    const hasAttributeValue = (attrName, attrValue) => {\n      return node => {\n        return isElement$6(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    const isBogus$2 = node => isElement$6(node) && node.hasAttribute('data-mce-bogus');\n    const isBogusAll$1 = node => isElement$6(node) && node.getAttribute('data-mce-bogus') === 'all';\n    const isTable$2 = node => isElement$6(node) && node.tagName === 'TABLE';\n    const hasContentEditableState = value => {\n      return node => {\n        if (isHTMLElement(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    const isText$a = isNodeType(3);\n    const isCData = isNodeType(4);\n    const isPi = isNodeType(7);\n    const isComment = isNodeType(8);\n    const isDocument$1 = isNodeType(9);\n    const isDocumentFragment = isNodeType(11);\n    const isBr$6 = matchNodeName('br');\n    const isImg = matchNodeName('img');\n    const isContentEditableTrue$3 = hasContentEditableState('true');\n    const isContentEditableFalse$b = hasContentEditableState('false');\n    const isTableCell$3 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    const isTableCellOrCaption = matchNodeNames([\n      'td',\n      'th',\n      'caption'\n    ]);\n    const isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    const isListItem$2 = matchNodeName('li');\n    const isDetails = matchNodeName('details');\n    const isSummary$1 = matchNodeName('summary');\n\n    const zeroWidth = '\\uFEFF';\n    const nbsp = '\\xA0';\n    const isZwsp$2 = char => char === zeroWidth;\n    const removeZwsp = s => s.replace(/\\uFEFF/g, '');\n\n    const NodeValue = (is, name) => {\n      const get = element => {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      const getOption = element => is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      const set = (element, value) => {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get,\n        getOption,\n        set\n      };\n    };\n\n    const api$1 = NodeValue(isText$b, 'text');\n    const get$3 = element => api$1.get(element);\n    const getOption = element => api$1.getOption(element);\n    const set = (element, value) => api$1.set(element, value);\n\n    const tableCells = [\n      'td',\n      'th'\n    ];\n    const tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    const textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    const listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    const lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    const wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    const lazyLookup = items => {\n      let lookup;\n      return node => {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    const isTable$1 = node => name(node) === 'table';\n    const isBr$5 = node => isElement$7(node) && name(node) === 'br';\n    const isTextBlock$2 = lazyLookup(textBlocks);\n    const isList = lazyLookup(lists);\n    const isListItem$1 = lazyLookup(listItems$1);\n    const isTableSection = lazyLookup(tableSections);\n    const isTableCell$2 = lazyLookup(tableCells);\n    const isWsPreserveElement = lazyLookup(wsElements);\n\n    const getLastChildren$1 = elm => {\n      const children = [];\n      let rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    const removeTrailingBr = elm => {\n      const allBrs = descendants(elm, 'br');\n      const brs = filter$5(getLastChildren$1(elm).slice(-1), isBr$5);\n      if (allBrs.length === brs.length) {\n        each$e(brs, remove$5);\n      }\n    };\n    const createPaddingBr = () => {\n      const br = SugarElement.fromTag('br');\n      set$3(br, 'data-mce-bogus', '1');\n      return br;\n    };\n    const fillWithPaddingBr = elm => {\n      empty(elm);\n      append$1(elm, createPaddingBr());\n    };\n    const trimBlockTrailingBr = (elm, schema) => {\n      lastChild(elm).each(lastChild => {\n        prevSibling(lastChild).each(lastChildPrevSibling => {\n          if (schema.isBlock(name(elm)) && isBr$5(lastChild) && schema.isBlock(name(lastChildPrevSibling))) {\n            remove$5(lastChild);\n          }\n        });\n      });\n    };\n\n    const ZWSP$1 = zeroWidth;\n    const isZwsp$1 = isZwsp$2;\n    const trim$2 = removeZwsp;\n    const insert$5 = editor => editor.insertContent(ZWSP$1, { preserve_zwsp: true });\n\n    const isElement$5 = isElement$6;\n    const isText$9 = isText$a;\n    const isCaretContainerBlock$1 = node => {\n      if (isText$9(node)) {\n        node = node.parentNode;\n      }\n      return isElement$5(node) && node.hasAttribute('data-mce-caret');\n    };\n    const isCaretContainerInline = node => isText$9(node) && isZwsp$1(node.data);\n    const isCaretContainer$2 = node => isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    const hasContent = node => node.firstChild !== node.lastChild || !isBr$6(node.firstChild);\n    const insertInline$1 = (node, before) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const textNode = doc.createTextNode(ZWSP$1);\n      const parentNode = node.parentNode;\n      if (!before) {\n        const sibling = node.nextSibling;\n        if (isText$9(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.appendChild(textNode);\n        }\n      } else {\n        const sibling = node.previousSibling;\n        if (isText$9(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    const isBeforeInline = pos => {\n      const container = pos.container();\n      if (!isText$a(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    const isAfterInline = pos => {\n      const container = pos.container();\n      if (!isText$a(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    const insertBlock = (blockName, node, before) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createPaddingBr().dom);\n      const parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    const startsWithCaretContainer$1 = node => isText$9(node) && node.data[0] === ZWSP$1;\n    const endsWithCaretContainer$1 = node => isText$9(node) && node.data[node.data.length - 1] === ZWSP$1;\n    const trimBogusBr = elm => {\n      var _a;\n      const brs = elm.getElementsByTagName('br');\n      const lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        (_a = lastBr.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(lastBr);\n      }\n    };\n    const showCaretContainerBlock = caretContainer => {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('data-mce-style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    const isRangeInCaretContainerBlock = range => isCaretContainerBlock$1(range.startContainer);\n\n    const isContentEditableTrue$2 = isContentEditableTrue$3;\n    const isContentEditableFalse$a = isContentEditableFalse$b;\n    const isBr$4 = isBr$6;\n    const isText$8 = isText$a;\n    const isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    const isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    const isTable = matchNodeNames(['table']);\n    const isCaretContainer$1 = isCaretContainer$2;\n    const isCaretCandidate$3 = node => {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$8(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$4(node) || isTable(node) || isNonUiContentEditableFalse(node);\n    };\n    const isUnselectable = node => isElement$6(node) && node.getAttribute('unselectable') === 'true';\n    const isNonUiContentEditableFalse = node => !isUnselectable(node) && isContentEditableFalse$a(node);\n    const isInEditable = (node, root) => {\n      for (let tempNode = node.parentNode; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n        if (isNonUiContentEditableFalse(tempNode)) {\n          return false;\n        }\n        if (isContentEditableTrue$2(tempNode)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    const isAtomicContentEditableFalse = node => {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return !foldl(from(node.getElementsByTagName('*')), (result, elm) => {\n        return result || isContentEditableTrue$2(elm);\n      }, false);\n    };\n    const isAtomic$1 = node => isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    const isEditableCaretCandidate$1 = (node, root) => isCaretCandidate$3(node) && isInEditable(node, root);\n\n    const whiteSpaceRegExp = /^[ \\t\\r\\n]*$/;\n    const isWhitespaceText = text => whiteSpaceRegExp.test(text);\n    const isZwsp = text => {\n      for (const c of text) {\n        if (!isZwsp$2(c)) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const isCollapsibleWhitespace$1 = c => ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    const isNewLineChar = c => c === '\\n' || c === '\\r';\n    const isNewline = (text, idx) => idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    const normalize$4 = (text, tabSpaces = 4, isStartOfContent = true, isEndOfContent = true) => {\n      const tabSpace = repeat(' ', tabSpaces);\n      const normalizedText = text.replace(/\\t/g, tabSpace);\n      const result = foldl(normalizedText, (acc, c) => {\n        if (isCollapsibleWhitespace$1(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' && isStartOfContent || acc.str.length === normalizedText.length - 1 && isEndOfContent || isNewline(normalizedText, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    const hasWhitespacePreserveParent = (node, rootNode) => {\n      const rootElement = SugarElement.fromDom(rootNode);\n      const startNode = SugarElement.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    const isWhitespace$1 = (node, rootNode) => {\n      return isText$a(node) && isWhitespaceText(node.data) && !hasWhitespacePreserveParent(node, rootNode);\n    };\n    const isNamedAnchor = node => {\n      return isElement$6(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    const isContent$1 = (node, rootNode) => {\n      return isCaretCandidate$3(node) && !isWhitespace$1(node, rootNode) || isNamedAnchor(node) || isBookmark(node);\n    };\n    const isBookmark = hasAttribute('data-mce-bookmark');\n    const isBogus$1 = hasAttribute('data-mce-bogus');\n    const isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    const hasNonEditableParent = node => parentElement(SugarElement.fromDom(node)).exists(parent => !isEditable$2(parent));\n    const isEmptyNode = (targetNode, skipBogus) => {\n      let brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        let node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        const walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isContentEditableTrue$3(node) && hasNonEditableParent(node)) {\n            return false;\n          }\n          if (isBr$6(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    const isEmpty$2 = (elm, skipBogus = true) => isEmptyNode(elm.dom, skipBogus);\n\n    const isNonHtmlElementRootName = name => name.toLowerCase() === 'svg';\n    const isNonHtmlElementRoot = node => isNonHtmlElementRootName(node.nodeName);\n    const toScopeType = node => (node === null || node === void 0 ? void 0 : node.nodeName) === 'svg' ? 'svg' : 'html';\n    const namespaceElements = ['svg'];\n    const createNamespaceTracker = () => {\n      let scopes = [];\n      const peek = () => scopes[scopes.length - 1];\n      const track = node => {\n        if (isNonHtmlElementRoot(node)) {\n          scopes.push(node);\n        }\n        let currentScope = peek();\n        if (currentScope && !currentScope.contains(node)) {\n          scopes.pop();\n          currentScope = peek();\n        }\n        return toScopeType(currentScope);\n      };\n      const current = () => toScopeType(peek());\n      const reset = () => {\n        scopes = [];\n      };\n      return {\n        track,\n        current,\n        reset\n      };\n    };\n\n    const transparentBlockAttr = 'data-mce-block';\n    const elementNames = map => filter$5(keys(map), key => !/[A-Z]/.test(key));\n    const makeSelectorFromSchemaMap = map => map$3(elementNames(map), name => {\n      return `${ name }:` + map$3(namespaceElements, ns => `not(${ ns } ${ name })`).join(':');\n    }).join(',');\n    const updateTransparent = (blocksSelector, transparent) => {\n      if (isNonNullable(transparent.querySelector(blocksSelector))) {\n        transparent.setAttribute(transparentBlockAttr, 'true');\n        if (transparent.getAttribute('data-mce-selected') === 'inline-boundary') {\n          transparent.removeAttribute('data-mce-selected');\n        }\n        return true;\n      } else {\n        transparent.removeAttribute(transparentBlockAttr);\n        return false;\n      }\n    };\n    const updateBlockStateOnChildren = (schema, scope) => {\n      const transparentSelector = makeSelectorFromSchemaMap(schema.getTransparentElements());\n      const blocksSelector = makeSelectorFromSchemaMap(schema.getBlockElements());\n      return filter$5(scope.querySelectorAll(transparentSelector), transparent => updateTransparent(blocksSelector, transparent));\n    };\n    const trimEdge = (el, leftSide) => {\n      var _a;\n      const childPropertyName = leftSide ? 'lastChild' : 'firstChild';\n      for (let child = el[childPropertyName]; child; child = child[childPropertyName]) {\n        if (isEmpty$2(SugarElement.fromDom(child))) {\n          (_a = child.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(child);\n          return;\n        }\n      }\n    };\n    const split$2 = (parentElm, splitElm) => {\n      const range = document.createRange();\n      const parentNode = parentElm.parentNode;\n      if (parentNode) {\n        range.setStartBefore(parentElm);\n        range.setEndBefore(splitElm);\n        const beforeFragment = range.extractContents();\n        trimEdge(beforeFragment, true);\n        range.setStartAfter(splitElm);\n        range.setEndAfter(parentElm);\n        const afterFragment = range.extractContents();\n        trimEdge(afterFragment, false);\n        if (!isEmpty$2(SugarElement.fromDom(beforeFragment))) {\n          parentNode.insertBefore(beforeFragment, parentElm);\n        }\n        if (!isEmpty$2(SugarElement.fromDom(splitElm))) {\n          parentNode.insertBefore(splitElm, parentElm);\n        }\n        if (!isEmpty$2(SugarElement.fromDom(afterFragment))) {\n          parentNode.insertBefore(afterFragment, parentElm);\n        }\n        parentNode.removeChild(parentElm);\n      }\n    };\n    const splitInvalidChildren = (schema, scope, transparentBlocks) => {\n      const blocksElements = schema.getBlockElements();\n      const rootNode = SugarElement.fromDom(scope);\n      const isBlock = el => name(el) in blocksElements;\n      const isRoot = el => eq(el, rootNode);\n      each$e(fromDom$1(transparentBlocks), transparentBlock => {\n        ancestor$4(transparentBlock, isBlock, isRoot).each(parentBlock => {\n          const invalidChildren = children(transparentBlock, el => isBlock(el) && !schema.isValidChild(name(parentBlock), name(el)));\n          if (invalidChildren.length > 0) {\n            const stateScope = parentElement(parentBlock);\n            each$e(invalidChildren, child => {\n              ancestor$4(child, isBlock, isRoot).each(parentBlock => {\n                split$2(parentBlock.dom, child.dom);\n              });\n            });\n            stateScope.each(scope => updateBlockStateOnChildren(schema, scope.dom));\n          }\n        });\n      });\n    };\n    const unwrapInvalidChildren = (schema, scope, transparentBlocks) => {\n      each$e([\n        ...transparentBlocks,\n        ...isTransparentBlock(schema, scope) ? [scope] : []\n      ], block => each$e(descendants(SugarElement.fromDom(block), block.nodeName.toLowerCase()), elm => {\n        if (isTransparentInline(schema, elm.dom)) {\n          unwrap(elm);\n        }\n      }));\n    };\n    const updateChildren = (schema, scope) => {\n      const transparentBlocks = updateBlockStateOnChildren(schema, scope);\n      splitInvalidChildren(schema, scope, transparentBlocks);\n      unwrapInvalidChildren(schema, scope, transparentBlocks);\n    };\n    const updateElement = (schema, target) => {\n      if (isTransparentElement(schema, target)) {\n        const blocksSelector = makeSelectorFromSchemaMap(schema.getBlockElements());\n        updateTransparent(blocksSelector, target);\n      }\n    };\n    const updateCaret = (schema, root, caretParent) => {\n      const isRoot = el => eq(el, SugarElement.fromDom(root));\n      const parents = parents$1(SugarElement.fromDom(caretParent), isRoot);\n      get$b(parents, parents.length - 2).filter(isElement$7).fold(() => updateChildren(schema, root), scope => updateChildren(schema, scope.dom));\n    };\n    const hasBlockAttr = el => el.hasAttribute(transparentBlockAttr);\n    const isTransparentElementName = (schema, name) => has$2(schema.getTransparentElements(), name);\n    const isTransparentElement = (schema, node) => isElement$6(node) && isTransparentElementName(schema, node.nodeName);\n    const isTransparentBlock = (schema, node) => isTransparentElement(schema, node) && hasBlockAttr(node);\n    const isTransparentInline = (schema, node) => isTransparentElement(schema, node) && !hasBlockAttr(node);\n    const isTransparentAstBlock = (schema, node) => node.type === 1 && isTransparentElementName(schema, node.name) && isString(node.attr(transparentBlockAttr));\n\n    const browser$2 = detect$2().browser;\n    const firstElement = nodes => find$2(nodes, isElement$7);\n    const getTableCaptionDeltaY = elm => {\n      if (browser$2.isFirefox() && name(elm) === 'table') {\n        return firstElement(children$1(elm)).filter(elm => {\n          return name(elm) === 'caption';\n        }).bind(caption => {\n          return firstElement(nextSiblings(caption)).map(body => {\n            const bodyTop = body.dom.offsetTop;\n            const captionTop = caption.dom.offsetTop;\n            const captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    const hasChild = (elm, child) => elm.children && contains$2(elm.children, child);\n    const getPos = (body, elm, rootElm) => {\n      let x = 0, y = 0;\n      const doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$7(SugarElement.fromDom(body), 'position') === 'static') {\n          const pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x,\n            y\n          };\n        }\n        let offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          const castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x,\n        y\n      };\n    };\n\n    const StyleSheetLoader = (documentOrShadowRoot, settings = {}) => {\n      let idCount = 0;\n      const loadedStates = {};\n      const edos = SugarElement.fromDom(documentOrShadowRoot);\n      const doc = documentOrOwner(edos);\n      const _setReferrerPolicy = referrerPolicy => {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      const _setContentCssCors = contentCssCors => {\n        settings.contentCssCors = contentCssCors;\n      };\n      const addStyle = element => {\n        append$1(getStyleContainer(edos), element);\n      };\n      const removeStyle = id => {\n        const styleContainer = getStyleContainer(edos);\n        descendant$1(styleContainer, '#' + id).each(remove$5);\n      };\n      const getOrCreateState = url => get$a(loadedStates, url).getOrThunk(() => ({\n        id: 'mce-u' + idCount++,\n        passed: [],\n        failed: [],\n        count: 0\n      }));\n      const load = url => new Promise((success, failure) => {\n        let link;\n        const urlWithSuffix = Tools._addCacheSuffix(url);\n        const state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        const resolve = (callbacks, status) => {\n          each$e(callbacks, call);\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        const passed = () => resolve(state.passed, 2);\n        const failed = () => resolve(state.failed, 3);\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        const linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        if (settings.contentCssCors) {\n          set$3(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$3(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = passed;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$3(linkElem, 'href', urlWithSuffix);\n      });\n      const loadRawCss = (key, css) => {\n        const state = getOrCreateState(key);\n        loadedStates[key] = state;\n        state.count++;\n        const styleElem = SugarElement.fromTag('style', doc.dom);\n        setAll$1(styleElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        styleElem.dom.innerHTML = css;\n        addStyle(styleElem);\n      };\n      const loadAll = urls => {\n        const loadedUrls = Promise.allSettled(map$3(urls, url => load(url).then(constant(url))));\n        return loadedUrls.then(results => {\n          const parts = partition$2(results, r => r.status === 'fulfilled');\n          if (parts.fail.length > 0) {\n            return Promise.reject(map$3(parts.fail, result => result.reason));\n          } else {\n            return map$3(parts.pass, result => result.value);\n          }\n        });\n      };\n      const unload = url => {\n        const urlWithSuffix = Tools._addCacheSuffix(url);\n        get$a(loadedStates, urlWithSuffix).each(state => {\n          const count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      const unloadRawCss = key => {\n        get$a(loadedStates, key).each(state => {\n          const count = --state.count;\n          if (count === 0) {\n            delete loadedStates[key];\n            removeStyle(state.id);\n          }\n        });\n      };\n      const unloadAll = urls => {\n        each$e(urls, url => {\n          unload(url);\n        });\n      };\n      return {\n        load,\n        loadRawCss,\n        loadAll,\n        unload,\n        unloadRawCss,\n        unloadAll,\n        _setReferrerPolicy,\n        _setContentCssCors\n      };\n    };\n\n    const create$d = () => {\n      const map = new WeakMap();\n      const forElement = (referenceElement, settings) => {\n        const root = getRootNode(referenceElement);\n        const rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(() => {\n          const sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement };\n    };\n    const instance = create$d();\n\n    const isSpan = node => node.nodeName.toLowerCase() === 'span';\n    const isInlineContent = (node, root, schema) => isNonNullable(node) && (isContent$1(node, root) || schema.isInline(node.nodeName.toLowerCase()));\n    const surroundedByInlineContent = (node, root, schema) => {\n      const prev = new DomTreeWalker(node, root).prev(false);\n      const next = new DomTreeWalker(node, root).next(false);\n      const prevIsInline = isUndefined(prev) || isInlineContent(prev, root, schema);\n      const nextIsInline = isUndefined(next) || isInlineContent(next, root, schema);\n      return prevIsInline && nextIsInline;\n    };\n    const isBookmarkNode$2 = node => isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    const isKeepTextNode = (node, root, schema) => isText$a(node) && node.data.length > 0 && surroundedByInlineContent(node, root, schema);\n    const isKeepElement = node => isElement$6(node) ? node.childNodes.length > 0 : false;\n    const isDocument = node => isDocumentFragment(node) || isDocument$1(node);\n    const trimNode = (dom, node, schema, root) => {\n      var _a;\n      const rootNode = root || node;\n      if (isElement$6(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      const children = node.childNodes;\n      for (let i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], schema, rootNode);\n      }\n      if (isElement$6(node)) {\n        const currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode, schema)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    const makeMap$3 = Tools.makeMap;\n    const attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    const textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    const rawCharsRegExp = /[<>&\\\"\\']/g;\n    const entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    const asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    const baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    const reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': `'`\n    };\n    const nativeDecode = text => {\n      const elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    const buildEntitiesLookup = (items, radix) => {\n      const lookup = {};\n      if (items) {\n        const itemList = items.split(',');\n        radix = radix || 10;\n        for (let i = 0; i < itemList.length; i += 2) {\n          const chr = String.fromCharCode(parseInt(itemList[i], radix));\n          if (!baseEntities[chr]) {\n            const entity = '&' + itemList[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      } else {\n        return undefined;\n      }\n    };\n    const namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    const encodeRaw = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n      return baseEntities[chr] || chr;\n    });\n    const encodeAllRaw = text => ('' + text).replace(rawCharsRegExp, chr => {\n      return baseEntities[chr] || chr;\n    });\n    const encodeNumeric = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n      if (chr.length > 1) {\n        return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n      }\n      return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n    });\n    const encodeNamed = (text, attr, entities) => {\n      const resolveEntities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n        return baseEntities[chr] || resolveEntities[chr] || chr;\n      });\n    };\n    const getEncodeFunc = (name, entities) => {\n      const entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      const encodeNamedAndNumeric = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n        if (baseEntities[chr] !== undefined) {\n          return baseEntities[chr];\n        }\n        if (entitiesMap[chr] !== undefined) {\n          return entitiesMap[chr];\n        }\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return '&#' + chr.charCodeAt(0) + ';';\n      });\n      const encodeCustomNamed = (text, attr) => {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      const nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    const decode = text => text.replace(entityRegExp, (all, numeric) => {\n      if (numeric) {\n        if (numeric.charAt(0).toLowerCase() === 'x') {\n          numeric = parseInt(numeric.substr(1), 16);\n        } else {\n          numeric = parseInt(numeric, 10);\n        }\n        if (numeric > 65535) {\n          numeric -= 65536;\n          return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n        }\n        return asciiMap[numeric] || String.fromCharCode(numeric);\n      }\n      return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n    });\n    const Entities = {\n      encodeRaw,\n      encodeAllRaw,\n      encodeNumeric,\n      encodeNamed,\n      getEncodeFunc,\n      decode\n    };\n\n    const split$1 = (items, delim) => {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    const patternToRegExp = str => new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n\n    const parseCustomElementsRules = value => {\n      const customElementRegExp = /^(~)?(.+)$/;\n      return bind$3(split$1(value, ','), rule => {\n        const matches = customElementRegExp.exec(rule);\n        if (matches) {\n          const inline = matches[1] === '~';\n          const cloneName = inline ? 'span' : 'div';\n          const name = matches[2];\n          return [{\n              inline,\n              cloneName,\n              name\n            }];\n        } else {\n          return [];\n        }\n      });\n    };\n\n    const getElementSetsAsStrings = type => {\n      let globalAttributes, blockContent;\n      let phrasingContent;\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        const transparentContent = 'a ins del canvas map';\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav ' + transparentContent;\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen svg';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        const html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        const html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n      }\n      const flowContent = [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      return {\n        globalAttributes,\n        blockContent,\n        phrasingContent,\n        flowContent\n      };\n    };\n\n    const makeSchema = type => {\n      const {globalAttributes, phrasingContent, flowContent} = getElementSetsAsStrings(type);\n      const schema = {};\n      const addElement = (name, attributes, children) => {\n        schema[name] = {\n          attributes: mapToObject(attributes, constant({})),\n          attributesOrder: attributes,\n          children: mapToObject(children, constant({}))\n        };\n      };\n      const add = (name, attributes = '', children = '') => {\n        const childNames = split$1(children);\n        const names = split$1(name);\n        let ni = names.length;\n        const allAttributes = split$1([\n          globalAttributes,\n          attributes\n        ].join(' '));\n        while (ni--) {\n          addElement(names[ni], allAttributes.slice(), childNames);\n        }\n      };\n      const addAttrs = (name, attributes) => {\n        const names = split$1(name);\n        const attrs = split$1(attributes);\n        let ni = names.length;\n        while (ni--) {\n          const schemaItem = schema[names[ni]];\n          for (let i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (type !== 'html5-strict') {\n        const html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        each$e(split$1(html4PhrasingContent), name => {\n          add(name, '', phrasingContent);\n        });\n        const html4BlockContent = 'center dir isindex noframes';\n        each$e(split$1(html4BlockContent), name => {\n          add(name, '', flowContent);\n        });\n      }\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('dd div', '', flowContent);\n      add('address dt caption', '', type === 'html4' ? phrasingContent : flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', type === 'html4' ? phrasingContent : flowContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp bdi', '', phrasingContent);\n        add('summary', '', [\n          phrasingContent,\n          'h1 h2 h3 h4 h5 h6'\n        ].join(' '));\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n        addElement('svg', 'id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform'.split(' '), []);\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allow allowfullscreen loading');\n      }\n      if (type !== 'html4') {\n        each$e([\n          schema.video,\n          schema.audio\n        ], item => {\n          delete item.children.audio;\n          delete item.children.video;\n        });\n      }\n      each$e(split$1('a form meter progress dfn'), name => {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      return schema;\n    };\n\n    const prefixToOperation = prefix => prefix === '-' ? 'remove' : 'add';\n    const parseValidChildrenRules = value => {\n      const childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n      return bind$3(split$1(value, ','), rule => {\n        const matches = childRuleRegExp.exec(rule);\n        if (matches) {\n          const prefix = matches[1];\n          const operation = prefix ? prefixToOperation(prefix) : 'replace';\n          const name = matches[2];\n          const validChildren = split$1(matches[3], '|');\n          return [{\n              operation,\n              name,\n              validChildren\n            }];\n        } else {\n          return [];\n        }\n      });\n    };\n\n    const parseValidElementsAttrDataIntoElement = (attrData, targetElement) => {\n      const attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=~<]+)?(?:([=~<])(.*))?$/;\n      const hasPatternsRegExp = /[*?+]/;\n      const {attributes, attributesOrder} = targetElement;\n      return each$e(split$1(attrData, '|'), rule => {\n        const matches = attrRuleRegExp.exec(rule);\n        if (matches) {\n          const attr = {};\n          const attrType = matches[1];\n          const attrName = matches[2].replace(/[\\\\:]:/g, ':');\n          const attrPrefix = matches[3];\n          const value = matches[4];\n          if (attrType === '!') {\n            targetElement.attributesRequired = targetElement.attributesRequired || [];\n            targetElement.attributesRequired.push(attrName);\n            attr.required = true;\n          }\n          if (attrType === '-') {\n            delete attributes[attrName];\n            attributesOrder.splice(Tools.inArray(attributesOrder, attrName), 1);\n            return;\n          }\n          if (attrPrefix) {\n            if (attrPrefix === '=') {\n              targetElement.attributesDefault = targetElement.attributesDefault || [];\n              targetElement.attributesDefault.push({\n                name: attrName,\n                value\n              });\n              attr.defaultValue = value;\n            } else if (attrPrefix === '~') {\n              targetElement.attributesForced = targetElement.attributesForced || [];\n              targetElement.attributesForced.push({\n                name: attrName,\n                value\n              });\n              attr.forcedValue = value;\n            } else if (attrPrefix === '<') {\n              attr.validValues = Tools.makeMap(value, '?');\n            }\n          }\n          if (hasPatternsRegExp.test(attrName)) {\n            const attrPattern = attr;\n            targetElement.attributePatterns = targetElement.attributePatterns || [];\n            attrPattern.pattern = patternToRegExp(attrName);\n            targetElement.attributePatterns.push(attrPattern);\n          } else {\n            if (!attributes[attrName]) {\n              attributesOrder.push(attrName);\n            }\n            attributes[attrName] = attr;\n          }\n        }\n      });\n    };\n    const cloneAttributesInto = (from, to) => {\n      each$d(from.attributes, (value, key) => {\n        to.attributes[key] = value;\n      });\n      to.attributesOrder.push(...from.attributesOrder);\n    };\n    const parseValidElementsRules = (globalElement, validElements) => {\n      const elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/;\n      return bind$3(split$1(validElements, ','), rule => {\n        const matches = elementRuleRegExp.exec(rule);\n        if (matches) {\n          const prefix = matches[1];\n          const elementName = matches[2];\n          const outputName = matches[3];\n          const attrsPrefix = matches[4];\n          const attrData = matches[5];\n          const element = {\n            attributes: {},\n            attributesOrder: []\n          };\n          globalElement.each(el => cloneAttributesInto(el, element));\n          if (prefix === '#') {\n            element.paddEmpty = true;\n          } else if (prefix === '-') {\n            element.removeEmpty = true;\n          }\n          if (attrsPrefix === '!') {\n            element.removeEmptyAttrs = true;\n          }\n          if (attrData) {\n            parseValidElementsAttrDataIntoElement(attrData, element);\n          }\n          if (outputName) {\n            element.outputName = elementName;\n          }\n          if (elementName === '@') {\n            if (globalElement.isNone()) {\n              globalElement = Optional.some(element);\n            } else {\n              return [];\n            }\n          }\n          return [outputName ? {\n              name: elementName,\n              element,\n              aliasName: outputName\n            } : {\n              name: elementName,\n              element\n            }];\n        } else {\n          return [];\n        }\n      });\n    };\n\n    const mapCache = {};\n    const makeMap$2 = Tools.makeMap, each$b = Tools.each, extend$2 = Tools.extend, explode$2 = Tools.explode;\n    const createMap = (defaultValue, extendWith = {}) => {\n      const value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$2(value, extendWith);\n    };\n    const getTextRootBlockElements = schema => createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    const compileElementMap = (value, mode) => {\n      if (value) {\n        const styles = {};\n        if (isString(value)) {\n          value = { '*': value };\n        }\n        each$b(value, (value, key) => {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$2(value, /[, ]/);\n        });\n        return styles;\n      } else {\n        return undefined;\n      }\n    };\n    const Schema = (settings = {}) => {\n      var _a;\n      const elements = {};\n      const children = {};\n      let patternElements = [];\n      const customElementsMap = {};\n      const specialElements = {};\n      const createLookupTable = (option, defaultValue, extendWith) => {\n        const value = settings[option];\n        if (!value) {\n          let newValue = mapCache[option];\n          if (!newValue) {\n            newValue = createMap(defaultValue, extendWith);\n            mapCache[option] = newValue;\n          }\n          return newValue;\n        } else {\n          return makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n      };\n      const schemaType = (_a = settings.schema) !== null && _a !== void 0 ? _a : 'html5';\n      const schemaItems = makeSchema(schemaType);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      const validStyles = compileElementMap(settings.valid_styles);\n      const invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      const validClasses = compileElementMap(settings.valid_classes, 'map');\n      const whitespaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      const selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      const voidElementsMap = createLookupTable('void_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      const boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls allowfullscreen');\n      const nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      const nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre svg', voidElementsMap);\n      const moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', voidElementsMap);\n      const headings = 'h1 h2 h3 h4 h5 h6';\n      const textBlockElementsMap = createLookupTable('text_block_elements', headings + ' p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      const blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary html body multicol listing', textBlockElementsMap);\n      const textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      const transparentElementsMap = createLookupTable('transparent_elements', 'a ins del canvas map');\n      const wrapBlockElementsMap = createLookupTable('wrap_block_elements', 'pre ' + headings);\n      each$b('script noscript iframe noframes noembed title style textarea xmp plaintext'.split(' '), name => {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      const addValidElements = validElements => {\n        const globalElement = Optional.from(elements['@']);\n        const hasPatternsRegExp = /[*?+]/;\n        each$e(parseValidElementsRules(globalElement, validElements !== null && validElements !== void 0 ? validElements : ''), ({name, element, aliasName}) => {\n          if (aliasName) {\n            elements[aliasName] = element;\n          }\n          if (hasPatternsRegExp.test(name)) {\n            const patternElement = element;\n            patternElement.pattern = patternToRegExp(name);\n            patternElements.push(patternElement);\n          } else {\n            elements[name] = element;\n          }\n        });\n      };\n      const setValidElements = validElements => {\n        patternElements = [];\n        each$e(keys(elements), name => {\n          delete elements[name];\n        });\n        addValidElements(validElements);\n      };\n      const addCustomElements = customElements => {\n        delete mapCache.text_block_elements;\n        delete mapCache.block_elements;\n        each$e(parseCustomElementsRules(customElements !== null && customElements !== void 0 ? customElements : ''), ({inline, name, cloneName}) => {\n          children[name] = children[cloneName];\n          customElementsMap[name] = cloneName;\n          nonEmptyElementsMap[name.toUpperCase()] = {};\n          nonEmptyElementsMap[name] = {};\n          if (!inline) {\n            blockElementsMap[name.toUpperCase()] = {};\n            blockElementsMap[name] = {};\n          }\n          if (!elements[name]) {\n            let customRule = elements[cloneName];\n            customRule = extend$2({}, customRule);\n            delete customRule.removeEmptyAttrs;\n            delete customRule.removeEmpty;\n            elements[name] = customRule;\n          }\n          each$d(children, (element, elmName) => {\n            if (element[cloneName]) {\n              children[elmName] = element = extend$2({}, children[elmName]);\n              element[name] = element[cloneName];\n            }\n          });\n        });\n      };\n      const addValidChildren = validChildren => {\n        each$e(parseValidChildrenRules(validChildren !== null && validChildren !== void 0 ? validChildren : ''), ({operation, name, validChildren}) => {\n          const parent = operation === 'replace' ? { '#comment': {} } : children[name];\n          each$e(validChildren, child => {\n            if (operation === 'remove') {\n              delete parent[child];\n            } else {\n              parent[child] = {};\n            }\n          });\n          children[name] = parent;\n        });\n      };\n      const getElementRule = name => {\n        const element = elements[name];\n        if (element) {\n          return element;\n        }\n        let i = patternElements.length;\n        while (i--) {\n          const patternElement = patternElements[i];\n          if (patternElement.pattern.test(name)) {\n            return patternElement;\n          }\n        }\n        return undefined;\n      };\n      if (!settings.valid_elements) {\n        each$b(schemaItems, (element, name) => {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        each$b(split$1('strong/b em/i'), item => {\n          const items = split$1(item, '/');\n          elements[items[1]].outputName = items[0];\n        });\n        each$b(textInlineElementsMap, (_val, name) => {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$b(split$1('ol ul blockquote a table tbody'), name => {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$b(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary'), name => {\n          if (elements[name]) {\n            elements[name].paddEmpty = true;\n          }\n        });\n        each$b(split$1('span'), name => {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n        each$b(schemaItems, (element, name) => {\n          children[name] = element.children;\n        });\n      }\n      delete elements.svg;\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$b({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, (parents, item) => {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$b(explode$2(settings.invalid_elements), item => {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      const getValidStyles = constant(validStyles);\n      const getInvalidStyles = constant(invalidStyles);\n      const getValidClasses = constant(validClasses);\n      const getBoolAttrs = constant(boolAttrMap);\n      const getBlockElements = constant(blockElementsMap);\n      const getTextBlockElements = constant(textBlockElementsMap);\n      const getTextInlineElements = constant(textInlineElementsMap);\n      const getVoidElements = constant(Object.seal(voidElementsMap));\n      const getSelfClosingElements = constant(selfClosingElementsMap);\n      const getNonEmptyElements = constant(nonEmptyElementsMap);\n      const getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      const getWhitespaceElements = constant(whitespaceElementsMap);\n      const getTransparentElements = constant(transparentElementsMap);\n      const getWrapBlockElements = constant(wrapBlockElementsMap);\n      const getSpecialElements = constant(Object.seal(specialElements));\n      const isValidChild = (name, child) => {\n        const parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      const isValid = (name, attr) => {\n        const rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            const attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              let i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(attr)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      const isBlock = name => has$2(getBlockElements(), name);\n      const isInline = name => !startsWith(name, '#') && isValid(name) && !isBlock(name);\n      const isWrapper = name => has$2(getWrapBlockElements(), name) || isInline(name);\n      const getCustomElements = constant(customElementsMap);\n      return {\n        type: schemaType,\n        children,\n        elements,\n        getValidStyles,\n        getValidClasses,\n        getBlockElements,\n        getInvalidStyles,\n        getVoidElements,\n        getTextBlockElements,\n        getTextInlineElements,\n        getBoolAttrs,\n        getElementRule,\n        getSelfClosingElements,\n        getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements,\n        getWhitespaceElements,\n        getTransparentElements,\n        getSpecialElements,\n        isValidChild,\n        isValid,\n        isBlock,\n        isInline,\n        isWrapper,\n        getCustomElements,\n        addValidElements,\n        setValidElements,\n        addCustomElements,\n        addValidChildren\n      };\n    };\n\n    const hexColour = value => ({ value: normalizeHex(value) });\n    const normalizeHex = hex => removeLeading(hex, '#').toUpperCase();\n    const toHex = component => {\n      const hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    const fromRgba = rgbaColour => {\n      const value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    const rgbRegex = /^\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i;\n    const rgbaRegex = /^\\s*rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?(?:\\.\\d+)?)\\s*\\)\\s*$/i;\n    const rgbaColour = (red, green, blue, alpha) => ({\n      red,\n      green,\n      blue,\n      alpha\n    });\n    const fromStringValues = (red, green, blue, alpha) => {\n      const r = parseInt(red, 10);\n      const g = parseInt(green, 10);\n      const b = parseInt(blue, 10);\n      const a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    const fromString = rgbaString => {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      const rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      const rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    const toString = rgba => `rgba(${ rgba.red },${ rgba.green },${ rgba.blue },${ rgba.alpha })`;\n\n    const rgbaToHexString = color => fromString(color).map(fromRgba).map(h => '#' + h.value).getOr(color);\n\n    const Styles = (settings = {}, schema) => {\n      const urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      const styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      const trimRightRegExp = /\\s+$/;\n      const encodingLookup = {};\n      let validStyles;\n      let invalidStyles;\n      const invisibleChar = zeroWidth;\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      const encodingItems = (`\\\\\" \\\\' \\\\; \\\\: ; : ` + invisibleChar).split(' ');\n      for (let i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      const self = {\n        parse: css => {\n          const styles = {};\n          let isEncoded = false;\n          const urlConverter = settings.url_converter;\n          const urlConverterScope = settings.url_converter_scope || self;\n          const compress = (prefix, suffix, noJoin) => {\n            const top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            const right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            const bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            const left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            const box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            let i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          const canCompress = key => {\n            const value = styles[key];\n            if (!value) {\n              return;\n            }\n            const values = value.indexOf(',') > -1 ? [value] : value.split(' ');\n            let i = values.length;\n            while (i--) {\n              if (values[i] !== values[0]) {\n                return false;\n              }\n            }\n            styles[key] = values[0];\n            return true;\n          };\n          const compress2 = (target, a, b, c) => {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          const encode = str => {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          const decode = (str, keepSlashes) => {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, str => {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          const decodeSingleHexSequence = escSeq => {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          const decodeHexSequences = value => {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          const processUrl = (match, url, url2, url3, str, str2) => {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return `'` + str.replace(/\\'/g, `\\\\'`) + `'`;\n            }\n            url = decode(url || url2 || url3 || '');\n            if (!settings.allow_script_urls) {\n              const scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return `url('` + url.replace(/\\'/g, `\\\\'`) + `')`;\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, str => {\n              return str.replace(/[;:]/g, encode);\n            });\n            let matches;\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              let name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              let value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                if (isString(settings.force_hex_color) && settings.force_hex_color !== 'off') {\n                  fromString(value).each(rgba => {\n                    if (settings.force_hex_color === 'always' || rgba.alpha === 1) {\n                      value = rgbaToHexString(toString(rgba));\n                    }\n                  });\n                }\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: (styles, elementName) => {\n          let css = '';\n          const serializeStyles = (elemName, validStyleList) => {\n            const styleList = validStyleList[elemName];\n            if (styleList) {\n              for (let i = 0, l = styleList.length; i < l; i++) {\n                const name = styleList[i];\n                const value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          const isValid = (name, elemName) => {\n            if (!invalidStyles || !elemName) {\n              return true;\n            }\n            let styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elemName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*', validStyles);\n            serializeStyles(elementName, validStyles);\n          } else {\n            each$d(styles, (value, name) => {\n              if (value && isValid(name, elementName)) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n      return self;\n    };\n\n    const deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    const isNativeEvent = event => event instanceof Event || isFunction(event.initEvent);\n    const hasIsDefaultPrevented = event => event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    const needsNormalizing = event => isNullable(event.preventDefault) || isNativeEvent(event);\n    const clone$3 = (originalEvent, data) => {\n      const event = data !== null && data !== void 0 ? data : {};\n      for (const name in originalEvent) {\n        if (!has$2(deprecated, name)) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (isNonNullable(originalEvent.composedPath)) {\n        event.composedPath = () => originalEvent.composedPath();\n      }\n      if (isNonNullable(originalEvent.getModifierState)) {\n        event.getModifierState = keyArg => originalEvent.getModifierState(keyArg);\n      }\n      if (isNonNullable(originalEvent.getTargetRanges)) {\n        event.getTargetRanges = () => originalEvent.getTargetRanges();\n      }\n      return event;\n    };\n    const normalize$3 = (type, originalEvent, fallbackTarget, data) => {\n      var _a;\n      const event = clone$3(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = () => {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          }\n        };\n        event.stopPropagation = () => {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          }\n        };\n        event.stopImmediatePropagation = () => {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    const eventExpandoPrefix = 'mce-data-';\n    const mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    const addEvent = (target, name, callback, capture) => {\n      target.addEventListener(name, callback, capture || false);\n    };\n    const removeEvent = (target, name, callback, capture) => {\n      target.removeEventListener(name, callback, capture || false);\n    };\n    const isMouseEvent = event => isNonNullable(event) && mouseEventRe.test(event.type);\n    const fix = (originalEvent, data) => {\n      const event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        const eventDoc = event.target.ownerDocument || document;\n        const doc = eventDoc.documentElement;\n        const body = eventDoc.body;\n        const mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      return event;\n    };\n    const bindOnReady = (win, callback, eventUtils) => {\n      const doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      const isDocReady = () => {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      const readyHandler = () => {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    class EventUtils {\n      constructor() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      bind(target, names, callback, scope) {\n        const self = this;\n        let callbackList;\n        const win = window;\n        const defaultNativeHandler = evt => {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || isText$a(target) || isComment(target)) {\n          return callback;\n        }\n        let id;\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        const namesList = names.split(' ');\n        let i = namesList.length;\n        while (i--) {\n          let name = namesList[i];\n          let nativeHandler = defaultNativeHandler;\n          let capture = false;\n          let fakeName = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = evt => {\n              const event = fix(evt || win.event);\n              event.type = event.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(event, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      }\n      unbind(target, names, callback) {\n        if (!target || isText$a(target) || isComment(target)) {\n          return this;\n        }\n        const id = target[this.expando];\n        if (id) {\n          let eventMap = this.events[id];\n          if (names) {\n            const namesList = names.split(' ');\n            let i = namesList.length;\n            while (i--) {\n              const name = namesList[i];\n              const callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  let ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      const nativeHandler = callbackList.nativeHandler;\n                      const fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      const newCallbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      newCallbackList.nativeHandler = nativeHandler;\n                      newCallbackList.fakeName = fakeName;\n                      newCallbackList.capture = capture;\n                      eventMap[name] = newCallbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$d(eventMap, (callbackList, name) => {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (const name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      }\n      fire(target, name, args) {\n        return this.dispatch(target, name, args);\n      }\n      dispatch(target, name, args) {\n        if (!target || isText$a(target) || isComment(target)) {\n          return this;\n        }\n        const event = fix({\n          type: name,\n          target\n        }, args);\n        do {\n          const id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      }\n      clean(target) {\n        if (!target || isText$a(target) || isComment(target)) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          const children = target.getElementsByTagName('*');\n          let i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      }\n      destroy() {\n        this.events = {};\n      }\n      cancel(e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      }\n      executeHandlers(evt, id) {\n        const container = this.events[id];\n        const callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (let i = 0, l = callbackList.length; i < l; i++) {\n            const callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      }\n    }\n    EventUtils.Event = new EventUtils();\n\n    const each$a = Tools.each;\n    const grep = Tools.grep;\n    const internalStyleName = 'data-mce-style';\n    const numericalCssMap = Tools.makeMap('fill-opacity font-weight line-height opacity orphans widows z-index zoom', ' ');\n    const legacySetAttribute = (elm, name, value) => {\n      if (isNullable(value) || value === '') {\n        remove$a(elm, name);\n      } else {\n        set$3(elm, name, value);\n      }\n    };\n    const camelCaseToHyphens = name => name.replace(/[A-Z]/g, v => '-' + v.toLowerCase());\n    const findNodeIndex = (node, normalized) => {\n      let idx = 0;\n      if (node) {\n        for (let lastNodeType = node.nodeType, tempNode = node.previousSibling; tempNode; tempNode = tempNode.previousSibling) {\n          const nodeType = tempNode.nodeType;\n          if (normalized && isText$a(tempNode)) {\n            if (nodeType === lastNodeType || !tempNode.data.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    const updateInternalStyleAttr = (styles, elm) => {\n      const rawValue = get$9(elm, 'style');\n      const value = styles.serialize(styles.parse(rawValue), name(elm));\n      legacySetAttribute(elm, internalStyleName, value);\n    };\n    const convertStyleToString = (cssValue, cssName) => {\n      if (isNumber(cssValue)) {\n        return has$2(numericalCssMap, cssName) ? cssValue + '' : cssValue + 'px';\n      } else {\n        return cssValue;\n      }\n    };\n    const applyStyle$1 = ($elm, cssName, cssValue) => {\n      const normalizedName = camelCaseToHyphens(cssName);\n      if (isNullable(cssValue) || cssValue === '') {\n        remove$6($elm, normalizedName);\n      } else {\n        set$2($elm, normalizedName, convertStyleToString(cssValue, normalizedName));\n      }\n    };\n    const setupAttrHooks = (styles, settings, getContext) => {\n      const keepValues = settings.keep_values;\n      const keepUrlHook = {\n        set: (elm, value, name) => {\n          const sugarElm = SugarElement.fromDom(elm);\n          if (isFunction(settings.url_converter) && isNonNullable(value)) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), String(value), name, elm);\n          }\n          const internalName = 'data-mce-' + name;\n          legacySetAttribute(sugarElm, internalName, value);\n          legacySetAttribute(sugarElm, name, value);\n        },\n        get: (elm, name) => {\n          const sugarElm = SugarElement.fromDom(elm);\n          return get$9(sugarElm, 'data-mce-' + name) || get$9(sugarElm, name);\n        }\n      };\n      const attrHooks = {\n        style: {\n          set: (elm, value) => {\n            const sugarElm = SugarElement.fromDom(elm);\n            if (keepValues) {\n              legacySetAttribute(sugarElm, internalStyleName, value);\n            }\n            remove$a(sugarElm, 'style');\n            if (isString(value)) {\n              setAll(sugarElm, styles.parse(value));\n            }\n          },\n          get: elm => {\n            const sugarElm = SugarElement.fromDom(elm);\n            const value = get$9(sugarElm, internalStyleName) || get$9(sugarElm, 'style');\n            return styles.serialize(styles.parse(value), name(sugarElm));\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    const DOMUtils = (doc, settings = {}) => {\n      const addedStyles = {};\n      const win = window;\n      const files = {};\n      let counter = 0;\n      const stdMode = true;\n      const boxModel = true;\n      const styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      const boundEvents = [];\n      const schema = settings.schema ? settings.schema : Schema({});\n      const styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        force_hex_color: settings.force_hex_color\n      }, settings.schema);\n      const events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      const blockElementsMap = schema.getBlockElements();\n      const isBlock = node => {\n        if (isString(node)) {\n          return has$2(blockElementsMap, node);\n        } else {\n          return isElement$6(node) && (has$2(blockElementsMap, node.nodeName) || isTransparentBlock(schema, node));\n        }\n      };\n      const get = elm => elm && doc && isString(elm) ? doc.getElementById(elm) : elm;\n      const _get = elm => {\n        const value = get(elm);\n        return isNonNullable(value) ? SugarElement.fromDom(value) : null;\n      };\n      const getAttrib = (elm, name, defaultVal = '') => {\n        let value;\n        const $elm = _get(elm);\n        if (isNonNullable($elm) && isElement$7($elm)) {\n          const hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm.dom, name);\n          } else {\n            value = get$9($elm, name);\n          }\n        }\n        return isNonNullable(value) ? value : defaultVal;\n      };\n      const getAttribs = elm => {\n        const node = get(elm);\n        return isNullable(node) ? [] : node.attributes;\n      };\n      const setAttrib = (elm, name, value) => {\n        run(elm, e => {\n          if (isElement$6(e)) {\n            const $elm = SugarElement.fromDom(e);\n            const val = value === '' ? null : value;\n            const originalValue = get$9($elm, name);\n            const hook = attrHooks[name];\n            if (hook && hook.set) {\n              hook.set($elm.dom, val, name);\n            } else {\n              legacySetAttribute($elm, name, val);\n            }\n            if (originalValue !== val && settings.onSetAttrib) {\n              settings.onSetAttrib({\n                attrElm: $elm.dom,\n                attrName: name,\n                attrValue: val\n              });\n            }\n          }\n        });\n      };\n      const clone = (node, deep) => {\n        return node.cloneNode(deep);\n      };\n      const getRoot = () => settings.root_element || doc.body;\n      const getViewPort = argWin => {\n        const vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      const getPos$1 = (elm, rootElm) => getPos(doc.body, get(elm), rootElm);\n      const setStyle = (elm, name, value) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          applyStyle$1($elm, name, value);\n          if (settings.update_styles) {\n            updateInternalStyleAttr(styles, $elm);\n          }\n        });\n      };\n      const setStyles = (elm, stylesArg) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          each$d(stylesArg, (v, n) => {\n            applyStyle$1($elm, n, v);\n          });\n          if (settings.update_styles) {\n            updateInternalStyleAttr(styles, $elm);\n          }\n        });\n      };\n      const getStyle = (elm, name, computed) => {\n        const $elm = get(elm);\n        if (isNullable($elm) || !isHTMLElement($elm) && !isSVGElement($elm)) {\n          return undefined;\n        }\n        if (computed) {\n          return get$7(SugarElement.fromDom($elm), camelCaseToHyphens(name));\n        } else {\n          name = name.replace(/-(\\D)/g, (a, b) => b.toUpperCase());\n          if (name === 'float') {\n            name = 'cssFloat';\n          }\n          return $elm.style ? $elm.style[name] : undefined;\n        }\n      };\n      const getSize = elm => {\n        const $elm = get(elm);\n        if (!$elm) {\n          return {\n            w: 0,\n            h: 0\n          };\n        }\n        let w = getStyle($elm, 'width');\n        let h = getStyle($elm, 'height');\n        if (!w || w.indexOf('px') === -1) {\n          w = '0';\n        }\n        if (!h || h.indexOf('px') === -1) {\n          h = '0';\n        }\n        return {\n          w: parseInt(w, 10) || $elm.offsetWidth || $elm.clientWidth,\n          h: parseInt(h, 10) || $elm.offsetHeight || $elm.clientHeight\n        };\n      };\n      const getRect = elm => {\n        const $elm = get(elm);\n        const pos = getPos$1($elm);\n        const size = getSize($elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      const is = (elm, selector) => {\n        if (!elm) {\n          return false;\n        }\n        const elms = isArray$1(elm) ? elm : [elm];\n        return exists(elms, e => {\n          return is$1(SugarElement.fromDom(e), selector);\n        });\n      };\n      const getParents = (elm, selector, root, collect) => {\n        const result = [];\n        let node = get(elm);\n        collect = collect === undefined;\n        const resolvedRoot = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (isString(selector)) {\n          if (selector === '*') {\n            selector = isElement$6;\n          } else {\n            const selectorVal = selector;\n            selector = node => is(node, selectorVal);\n          }\n        }\n        while (node) {\n          if (node === resolvedRoot || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      const getParent = (node, selector, root) => {\n        const parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      const _findSib = (node, selector, name) => {\n        let func = selector;\n        if (node) {\n          if (isString(selector)) {\n            func = node => {\n              return is(node, selector);\n            };\n          }\n          for (let tempNode = node[name]; tempNode; tempNode = tempNode[name]) {\n            if (isFunction(func) && func(tempNode)) {\n              return tempNode;\n            }\n          }\n        }\n        return null;\n      };\n      const getNext = (node, selector) => _findSib(node, selector, 'nextSibling');\n      const getPrev = (node, selector) => _findSib(node, selector, 'previousSibling');\n      const isParentNode = node => isFunction(node.querySelectorAll);\n      const select = (selector, scope) => {\n        var _a, _b;\n        const elm = (_b = (_a = get(scope)) !== null && _a !== void 0 ? _a : settings.root_element) !== null && _b !== void 0 ? _b : doc;\n        return isParentNode(elm) ? from(elm.querySelectorAll(selector)) : [];\n      };\n      const run = function (elm, func, scope) {\n        const context = scope !== null && scope !== void 0 ? scope : this;\n        if (isArray$1(elm)) {\n          const result = [];\n          each$a(elm, (e, i) => {\n            const node = get(e);\n            if (node) {\n              result.push(func.call(context, node, i));\n            }\n          });\n          return result;\n        } else {\n          const node = get(elm);\n          return !node ? false : func.call(context, node);\n        }\n      };\n      const setAttribs = (elm, attrs) => {\n        run(elm, $elm => {\n          each$d(attrs, (value, name) => {\n            setAttrib($elm, name, value);\n          });\n        });\n      };\n      const setHTML = (elm, html) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          set$1($elm, html);\n        });\n      };\n      const add = (parentElm, name, attrs, html, create) => run(parentElm, parentElm => {\n        const newElm = isString(name) ? doc.createElement(name) : name;\n        if (isNonNullable(attrs)) {\n          setAttribs(newElm, attrs);\n        }\n        if (html) {\n          if (!isString(html) && html.nodeType) {\n            newElm.appendChild(html);\n          } else if (isString(html)) {\n            setHTML(newElm, html);\n          }\n        }\n        return !create ? parentElm.appendChild(newElm) : newElm;\n      });\n      const create = (name, attrs, html) => add(doc.createElement(name), name, attrs, html, true);\n      const decode = Entities.decode;\n      const encode = Entities.encodeAllRaw;\n      const createHTML = (name, attrs, html = '') => {\n        let outHtml = '<' + name;\n        for (const key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (isEmpty$3(html) && has$2(schema.getVoidElements(), name)) {\n          return outHtml + ' />';\n        } else {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n      };\n      const createFragment = html => {\n        const container = doc.createElement('div');\n        const frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        let node;\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      const remove = (node, keepChildren) => {\n        return run(node, n => {\n          const $node = SugarElement.fromDom(n);\n          if (keepChildren) {\n            each$e(children$1($node), child => {\n              if (isText$b(child) && child.dom.length === 0) {\n                remove$5(child);\n              } else {\n                before$3($node, child);\n              }\n            });\n          }\n          remove$5($node);\n          return $node.dom;\n        });\n      };\n      const removeAllAttribs = e => run(e, e => {\n        const attrs = e.attributes;\n        for (let i = attrs.length - 1; i >= 0; i--) {\n          e.removeAttributeNode(attrs.item(i));\n        }\n      });\n      const parseStyle = cssText => styles.parse(cssText);\n      const serializeStyle = (stylesArg, name) => styles.serialize(stylesArg, name);\n      const addStyle = cssText => {\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        let styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          const head = doc.head;\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      const loadCSS = urls => {\n        if (!urls) {\n          urls = '';\n        }\n        each$e(urls.split(','), url => {\n          files[url] = true;\n          styleSheetLoader.load(url).catch(noop);\n        });\n      };\n      const toggleClass = (elm, cls, state) => {\n        run(elm, e => {\n          if (isElement$6(e)) {\n            const $elm = SugarElement.fromDom(e);\n            const classes = cls.split(' ');\n            each$e(classes, c => {\n              if (isNonNullable(state)) {\n                const fn = state ? add$2 : remove$7;\n                fn($elm, c);\n              } else {\n                toggle$1($elm, c);\n              }\n            });\n          }\n        });\n      };\n      const addClass = (elm, cls) => {\n        toggleClass(elm, cls, true);\n      };\n      const removeClass = (elm, cls) => {\n        toggleClass(elm, cls, false);\n      };\n      const hasClass = (elm, cls) => {\n        const $elm = _get(elm);\n        const classes = cls.split(' ');\n        return isNonNullable($elm) && forall(classes, c => has($elm, c));\n      };\n      const show = elm => {\n        run(elm, e => remove$6(SugarElement.fromDom(e), 'display'));\n      };\n      const hide = elm => {\n        run(elm, e => set$2(SugarElement.fromDom(e), 'display', 'none'));\n      };\n      const isHidden = elm => {\n        const $elm = _get(elm);\n        return isNonNullable($elm) && is$2(getRaw($elm, 'display'), 'none');\n      };\n      const uniqueId = prefix => (!prefix ? 'mce_' : prefix) + counter++;\n      const getOuterHTML = elm => {\n        const $elm = _get(elm);\n        if (isNonNullable($elm)) {\n          return isElement$6($elm.dom) ? $elm.dom.outerHTML : getOuter($elm);\n        } else {\n          return '';\n        }\n      };\n      const setOuterHTML = (elm, html) => {\n        run(elm, $elm => {\n          if (isElement$6($elm)) {\n            $elm.outerHTML = html;\n          }\n        });\n      };\n      const insertAfter = (node, reference) => {\n        const referenceNode = get(reference);\n        return run(node, node => {\n          const parent = referenceNode === null || referenceNode === void 0 ? void 0 : referenceNode.parentNode;\n          const nextSibling = referenceNode === null || referenceNode === void 0 ? void 0 : referenceNode.nextSibling;\n          if (parent) {\n            if (nextSibling) {\n              parent.insertBefore(node, nextSibling);\n            } else {\n              parent.appendChild(node);\n            }\n          }\n          return node;\n        });\n      };\n      const replace = (newElm, oldElm, keepChildren) => run(oldElm, elm => {\n        var _a;\n        const replacee = isArray$1(oldElm) ? newElm.cloneNode(true) : newElm;\n        if (keepChildren) {\n          each$a(grep(elm.childNodes), node => {\n            replacee.appendChild(node);\n          });\n        }\n        (_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(replacee, elm);\n        return elm;\n      });\n      const rename = (elm, name) => {\n        if (elm.nodeName !== name.toUpperCase()) {\n          const newElm = create(name);\n          each$a(getAttribs(elm), attrNode => {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n          return newElm;\n        } else {\n          return elm;\n        }\n      };\n      const findCommonAncestor = (a, b) => {\n        let ps = a;\n        while (ps) {\n          let pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        } else {\n          return ps;\n        }\n      };\n      const isNonEmptyElement = node => {\n        if (isElement$6(node)) {\n          const isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      const isEmpty = (node, elements, options) => {\n        let brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        const firstChild = node.firstChild;\n        if (firstChild) {\n          const walker = new DomTreeWalker(firstChild, node);\n          const whitespaceElements = schema ? schema.getWhitespaceElements() : {};\n          const nonEmptyElements = elements || (schema ? schema.getNonEmptyElements() : null);\n          let tempNode = firstChild;\n          do {\n            if (isElement$6(tempNode)) {\n              const bogusVal = tempNode.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                tempNode = walker.next(bogusVal === 'all');\n                continue;\n              }\n              const name = tempNode.nodeName.toLowerCase();\n              if (nonEmptyElements && nonEmptyElements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  tempNode = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(tempNode)) {\n                return false;\n              }\n            }\n            if (isComment(tempNode)) {\n              return false;\n            }\n            if (isText$a(tempNode) && !isWhitespaceText(tempNode.data) && (!(options === null || options === void 0 ? void 0 : options.includeZwsp) || !isZwsp(tempNode.data))) {\n              return false;\n            }\n            if (isText$a(tempNode) && tempNode.parentNode && whitespaceElements[tempNode.parentNode.nodeName] && isWhitespaceText(tempNode.data)) {\n              return false;\n            }\n            tempNode = walker.next();\n          } while (tempNode);\n        }\n        return brCount <= 1;\n      };\n      const createRng = () => doc.createRange();\n      const split = (parentElm, splitElm, replacementElm) => {\n        let range = createRng();\n        let beforeFragment;\n        let afterFragment;\n        if (parentElm && splitElm && parentElm.parentNode && splitElm.parentNode) {\n          const parentNode = parentElm.parentNode;\n          range.setStart(parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode.insertBefore(trimNode(self, beforeFragment, schema), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment, schema), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        } else {\n          return undefined;\n        }\n      };\n      const bind = (target, name, func, scope) => {\n        if (isArray$1(target)) {\n          let i = target.length;\n          const rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        } else {\n          if (settings.collect && (target === doc || target === win)) {\n            boundEvents.push([\n              target,\n              name,\n              func,\n              scope\n            ]);\n          }\n          return events.bind(target, name, func, scope || self);\n        }\n      };\n      const unbind = (target, name, func) => {\n        if (isArray$1(target)) {\n          let i = target.length;\n          const rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            let i = boundEvents.length;\n            while (i--) {\n              const [boundTarget, boundName, boundFunc] = boundEvents[i];\n              if (target === boundTarget && (!name || name === boundName) && (!func || func === boundFunc)) {\n                events.unbind(boundTarget, boundName, boundFunc);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      const dispatch = (target, name, evt) => events.dispatch(target, name, evt);\n      const fire = (target, name, evt) => events.dispatch(target, name, evt);\n      const getContentEditable = node => {\n        if (node && isHTMLElement(node)) {\n          const contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      const getContentEditableParent = node => {\n        const root = getRoot();\n        let state = null;\n        for (let tempNode = node; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n          state = getContentEditable(tempNode);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      const isEditable = node => {\n        if (isNonNullable(node)) {\n          const scope = isElement$6(node) ? node : node.parentElement;\n          return isNonNullable(scope) && isHTMLElement(scope) && isEditable$2(SugarElement.fromDom(scope));\n        } else {\n          return false;\n        }\n      };\n      const destroy = () => {\n        if (boundEvents.length > 0) {\n          let i = boundEvents.length;\n          while (i--) {\n            const [boundTarget, boundName, boundFunc] = boundEvents[i];\n            events.unbind(boundTarget, boundName, boundFunc);\n          }\n        }\n        each$d(files, (_, url) => {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n      };\n      const isChildOf = (node, parent) => {\n        return node === parent || parent.contains(node);\n      };\n      const dumpRng = r => 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      const self = {\n        doc,\n        settings,\n        win,\n        files,\n        stdMode,\n        boxModel,\n        styleSheetLoader,\n        boundEvents,\n        styles,\n        schema,\n        events,\n        isBlock: isBlock,\n        root: null,\n        clone,\n        getRoot,\n        getViewPort,\n        getRect,\n        getSize,\n        getParent,\n        getParents: getParents,\n        get,\n        getNext,\n        getPrev,\n        select,\n        is,\n        add,\n        create,\n        createHTML,\n        createFragment,\n        remove,\n        setStyle,\n        getStyle: getStyle,\n        setStyles,\n        removeAllAttribs,\n        setAttrib,\n        setAttribs,\n        getAttrib,\n        getPos: getPos$1,\n        parseStyle,\n        serializeStyle,\n        addStyle,\n        loadCSS,\n        addClass,\n        removeClass,\n        hasClass,\n        toggleClass,\n        show,\n        hide,\n        isHidden,\n        uniqueId,\n        setHTML,\n        getOuterHTML,\n        setOuterHTML,\n        decode,\n        encode,\n        insertAfter,\n        replace,\n        rename,\n        findCommonAncestor,\n        run,\n        getAttribs,\n        isEmpty,\n        createRng,\n        nodeIndex: findNodeIndex,\n        split,\n        bind: bind,\n        unbind: unbind,\n        fire,\n        dispatch,\n        getContentEditable,\n        getContentEditableParent,\n        isEditable,\n        destroy,\n        isChildOf,\n        dumpRng\n      };\n      const attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    const DOM$b = DOMUtils.DOM;\n    const QUEUED = 0;\n    const LOADING = 1;\n    const LOADED = 2;\n    const FAILED = 3;\n    class ScriptLoader {\n      constructor(settings = {}) {\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = false;\n        this.settings = settings;\n      }\n      _setReferrerPolicy(referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      }\n      loadScript(url) {\n        return new Promise((resolve, reject) => {\n          const dom = DOM$b;\n          let elm;\n          const cleanup = () => {\n            dom.remove(id);\n            if (elm) {\n              elm.onerror = elm.onload = elm = null;\n            }\n          };\n          const done = () => {\n            cleanup();\n            resolve();\n          };\n          const error = () => {\n            cleanup();\n            reject('Failed to load script: ' + url);\n          };\n          const id = dom.uniqueId();\n          elm = document.createElement('script');\n          elm.id = id;\n          elm.type = 'text/javascript';\n          elm.src = Tools._addCacheSuffix(url);\n          if (this.settings.referrerPolicy) {\n            dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n          }\n          elm.onload = done;\n          elm.onerror = error;\n          (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n        });\n      }\n      isDone(url) {\n        return this.states[url] === LOADED;\n      }\n      markDone(url) {\n        this.states[url] = LOADED;\n      }\n      add(url) {\n        const self = this;\n        self.queue.push(url);\n        const state = self.states[url];\n        if (state === undefined) {\n          self.states[url] = QUEUED;\n        }\n        return new Promise((resolve, reject) => {\n          if (!self.scriptLoadedCallbacks[url]) {\n            self.scriptLoadedCallbacks[url] = [];\n          }\n          self.scriptLoadedCallbacks[url].push({\n            resolve,\n            reject\n          });\n        });\n      }\n      load(url) {\n        return this.add(url);\n      }\n      remove(url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      }\n      loadQueue() {\n        const queue = this.queue;\n        this.queue = [];\n        return this.loadScripts(queue);\n      }\n      loadScripts(scripts) {\n        const self = this;\n        const execCallbacks = (name, url) => {\n          get$a(self.scriptLoadedCallbacks, url).each(callbacks => {\n            each$e(callbacks, callback => callback[name](url));\n          });\n          delete self.scriptLoadedCallbacks[url];\n        };\n        const processResults = results => {\n          const failures = filter$5(results, result => result.status === 'rejected');\n          if (failures.length > 0) {\n            return Promise.reject(bind$3(failures, ({reason}) => isArray$1(reason) ? reason : [reason]));\n          } else {\n            return Promise.resolve();\n          }\n        };\n        const load = urls => Promise.allSettled(map$3(urls, url => {\n          if (self.states[url] === LOADED) {\n            execCallbacks('resolve', url);\n            return Promise.resolve();\n          } else if (self.states[url] === FAILED) {\n            execCallbacks('reject', url);\n            return Promise.reject(url);\n          } else {\n            self.states[url] = LOADING;\n            return self.loadScript(url).then(() => {\n              self.states[url] = LOADED;\n              execCallbacks('resolve', url);\n              const queue = self.queue;\n              if (queue.length > 0) {\n                self.queue = [];\n                return load(queue).then(processResults);\n              } else {\n                return Promise.resolve();\n              }\n            }, () => {\n              self.states[url] = FAILED;\n              execCallbacks('reject', url);\n              return Promise.reject(url);\n            });\n          }\n        }));\n        const processQueue = urls => {\n          self.loading = true;\n          return load(urls).then(results => {\n            self.loading = false;\n            const nextQueuedItem = self.queueLoadedCallbacks.shift();\n            Optional.from(nextQueuedItem).each(call);\n            return processResults(results);\n          });\n        };\n        const uniqueScripts = stringArray(scripts);\n        if (self.loading) {\n          return new Promise((resolve, reject) => {\n            self.queueLoadedCallbacks.push(() => {\n              processQueue(uniqueScripts).then(resolve, reject);\n            });\n          });\n        } else {\n          return processQueue(uniqueScripts);\n        }\n      }\n    }\n    ScriptLoader.ScriptLoader = new ScriptLoader();\n\n    const Cell = initial => {\n      let value = initial;\n      const get = () => {\n        return value;\n      };\n      const set = v => {\n        value = v;\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    const isDuplicated = (items, item) => {\n      const firstIndex = items.indexOf(item);\n      return firstIndex !== -1 && items.indexOf(item, firstIndex + 1) > firstIndex;\n    };\n    const isRaw = str => isObject(str) && has$2(str, 'raw');\n    const isTokenised = str => isArray$1(str) && str.length > 1;\n    const data = {};\n    const currentCode = Cell('en');\n    const getLanguageData = () => get$a(data, currentCode.get());\n    const getData$1 = () => map$2(data, value => ({ ...value }));\n    const setCode = newCode => {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    const getCode = () => currentCode.get();\n    const add$1 = (code, items) => {\n      let langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      const lcNames = map$3(keys(items), name => name.toLowerCase());\n      each$d(items, (translation, name) => {\n        const lcName = name.toLowerCase();\n        if (lcName !== name && isDuplicated(lcNames, lcName)) {\n          if (!has$2(items, lcName)) {\n            langData[lcName] = translation;\n          }\n          langData[name] = translation;\n        } else {\n          langData[lcName] = translation;\n        }\n      });\n    };\n    const translate = text => {\n      const langData = getLanguageData().getOr({});\n      const toString = obj => {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      const isEmpty = text => text === '' || text === null || text === undefined;\n      const getLangData = text => {\n        const textStr = toString(text);\n        return has$2(langData, textStr) ? toString(langData[textStr]) : get$a(langData, textStr.toLowerCase()).map(toString).getOr(textStr);\n      };\n      const removeContext = str => str.replace(/{context:\\w+}$/, '');\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        const values = text.slice(1);\n        const substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, ($1, $2) => has$2(values, $2) ? toString(values[$2]) : $1);\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    const isRtl$1 = () => getLanguageData().bind(items => get$a(items, '_dir')).exists(dir => dir === 'rtl');\n    const hasCode = code => has$2(data, code);\n    const I18n = {\n      getData: getData$1,\n      setCode,\n      getCode,\n      add: add$1,\n      translate,\n      isRtl: isRtl$1,\n      hasCode\n    };\n\n    const AddOnManager = () => {\n      const items = [];\n      const urls = {};\n      const lookup = {};\n      const _listeners = [];\n      const runListeners = (name, state) => {\n        const matchedListeners = filter$5(_listeners, listener => listener.name === name && listener.state === state);\n        each$e(matchedListeners, listener => listener.resolve());\n      };\n      const isLoaded = name => has$2(urls, name);\n      const isAdded = name => has$2(lookup, name);\n      const get = name => {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      const loadLanguagePack = (name, languages) => {\n        const language = I18n.getCode();\n        const wrappedLanguages = ',' + (languages || '') + ',';\n        if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n          return;\n        }\n        ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n      };\n      const requireLangPack = (name, languages) => {\n        if (AddOnManager.languageLoad !== false) {\n          if (isLoaded(name)) {\n            loadLanguagePack(name, languages);\n          } else {\n            waitFor(name, 'loaded').then(() => loadLanguagePack(name, languages));\n          }\n        }\n      };\n      const add = (id, addOn) => {\n        items.push(addOn);\n        lookup[id] = { instance: addOn };\n        runListeners(id, 'added');\n        return addOn;\n      };\n      const remove = name => {\n        delete urls[name];\n        delete lookup[name];\n      };\n      const createUrl = (baseUrl, dep) => {\n        if (isString(dep)) {\n          return isString(baseUrl) ? {\n            prefix: '',\n            resource: dep,\n            suffix: ''\n          } : {\n            prefix: baseUrl.prefix,\n            resource: dep,\n            suffix: baseUrl.suffix\n          };\n        } else {\n          return dep;\n        }\n      };\n      const load = (name, addOnUrl) => {\n        if (urls[name]) {\n          return Promise.resolve();\n        }\n        let urlString = isString(addOnUrl) ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        const done = () => {\n          runListeners(name, 'loaded');\n          return Promise.resolve();\n        };\n        if (lookup[name]) {\n          return done();\n        } else {\n          return ScriptLoader.ScriptLoader.add(urlString).then(done);\n        }\n      };\n      const waitFor = (name, state = 'added') => {\n        if (state === 'added' && isAdded(name)) {\n          return Promise.resolve();\n        } else if (state === 'loaded' && isLoaded(name)) {\n          return Promise.resolve();\n        } else {\n          return new Promise(resolve => {\n            _listeners.push({\n              name,\n              state,\n              resolve\n            });\n          });\n        }\n      };\n      return {\n        items,\n        urls,\n        lookup,\n        get,\n        requireLangPack,\n        add,\n        remove,\n        createUrl,\n        load,\n        waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n    AddOnManager.ModelManager = AddOnManager();\n\n    const singleton = doRevoke => {\n      const subject = Cell(Optional.none());\n      const revoke = () => subject.get().each(doRevoke);\n      const clear = () => {\n        revoke();\n        subject.set(Optional.none());\n      };\n      const isSet = () => subject.get().isSome();\n      const get = () => subject.get();\n      const set = s => {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const repeatable = delay => {\n      const intervalId = Cell(Optional.none());\n      const revoke = () => intervalId.get().each(id => clearInterval(id));\n      const clear = () => {\n        revoke();\n        intervalId.set(Optional.none());\n      };\n      const isSet = () => intervalId.get().isSome();\n      const get = () => intervalId.get();\n      const set = functionToRepeat => {\n        revoke();\n        intervalId.set(Optional.some(setInterval(functionToRepeat, delay)));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const value$2 = () => {\n      const subject = singleton(noop);\n      const on = f => subject.get().each(f);\n      return {\n        ...subject,\n        on\n      };\n    };\n\n    const first$1 = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const last$1 = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        cancel();\n        timer = setTimeout(() => {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n\n    const annotation = constant('mce-annotation');\n    const dataAnnotation = constant('data-mce-annotation');\n    const dataAnnotationId = constant('data-mce-annotation-uid');\n    const dataAnnotationActive = constant('data-mce-annotation-active');\n    const dataAnnotationClasses = constant('data-mce-annotation-classes');\n    const dataAnnotationAttributes = constant('data-mce-annotation-attrs');\n\n    const isRoot$1 = root => node => eq(node, root);\n    const identify = (editor, annotationName) => {\n      const rng = editor.selection.getRng();\n      const start = SugarElement.fromDom(rng.startContainer);\n      const root = SugarElement.fromDom(editor.getBody());\n      const selector = annotationName.fold(() => '.' + annotation(), an => `[${ dataAnnotation() }=\"${ an }\"]`);\n      const newStart = child$1(start, rng.startOffset).getOr(start);\n      const closest = closest$3(newStart, selector, isRoot$1(root));\n      return closest.bind(c => getOpt(c, `${ dataAnnotationId() }`).bind(uid => getOpt(c, `${ dataAnnotation() }`).map(name => {\n        const elements = findMarkers(editor, uid);\n        return {\n          uid,\n          name,\n          elements\n        };\n      })));\n    };\n    const isAnnotation = elem => isElement$7(elem) && has(elem, annotation());\n    const isBogusElement = (elem, root) => has$1(elem, 'data-mce-bogus') || ancestor$2(elem, '[data-mce-bogus=\"all\"]', isRoot$1(root));\n    const findMarkers = (editor, uid) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const descendants$1 = descendants(body, `[${ dataAnnotationId() }=\"${ uid }\"]`);\n      return filter$5(descendants$1, descendant => !isBogusElement(descendant, body));\n    };\n    const findAll = (editor, name) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const markers = descendants(body, `[${ dataAnnotation() }=\"${ name }\"]`);\n      const directory = {};\n      each$e(markers, m => {\n        if (!isBogusElement(m, body)) {\n          const uid = get$9(m, dataAnnotationId());\n          const nodesAlready = get$a(directory, uid).getOr([]);\n          directory[uid] = nodesAlready.concat([m]);\n        }\n      });\n      return directory;\n    };\n\n    const setup$y = (editor, registry) => {\n      const changeCallbacks = Cell({});\n      const initData = () => ({\n        listeners: [],\n        previous: value$2()\n      });\n      const withCallbacks = (name, f) => {\n        updateCallbacks(name, data => {\n          f(data);\n          return data;\n        });\n      };\n      const updateCallbacks = (name, f) => {\n        const callbackMap = changeCallbacks.get();\n        const data = get$a(callbackMap, name).getOrThunk(initData);\n        const outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      const fireCallbacks = (name, uid, elements) => {\n        withCallbacks(name, data => {\n          each$e(data.listeners, f => f(true, name, {\n            uid,\n            nodes: map$3(elements, elem => elem.dom)\n          }));\n        });\n      };\n      const fireNoAnnotation = name => {\n        withCallbacks(name, data => {\n          each$e(data.listeners, f => f(false, name));\n        });\n      };\n      const toggleActiveAttr = (uid, state) => {\n        each$e(findMarkers(editor, uid), elem => {\n          if (state) {\n            set$3(elem, dataAnnotationActive(), 'true');\n          } else {\n            remove$a(elem, dataAnnotationActive());\n          }\n        });\n      };\n      const onNodeChange = last$1(() => {\n        const annotations = sort(registry.getNames());\n        each$e(annotations, name => {\n          updateCallbacks(name, data => {\n            const prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(() => {\n              prev.each(uid => {\n                fireNoAnnotation(name);\n                data.previous.clear();\n                toggleActiveAttr(uid, false);\n              });\n            }, ({uid, name, elements}) => {\n              if (!is$2(prev, uid)) {\n                prev.each(uid => toggleActiveAttr(uid, false));\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n                toggleActiveAttr(uid, true);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', () => {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', () => {\n        onNodeChange.throttle();\n      });\n      const addListener = (name, f) => {\n        updateCallbacks(name, data => ({\n          previous: data.previous,\n          listeners: data.listeners.concat([f])\n        }));\n      };\n      return { addListener };\n    };\n\n    const setup$x = (editor, registry) => {\n      const dataAnnotation$1 = dataAnnotation();\n      const identifyParserNode = node => Optional.from(node.attr(dataAnnotation$1)).bind(registry.lookup);\n      const removeDirectAnnotation = node => {\n        var _a, _b;\n        node.attr(dataAnnotationId(), null);\n        node.attr(dataAnnotation(), null);\n        node.attr(dataAnnotationActive(), null);\n        const customAttrNames = Optional.from(node.attr(dataAnnotationAttributes())).map(names => names.split(',')).getOr([]);\n        const customClasses = Optional.from(node.attr(dataAnnotationClasses())).map(names => names.split(',')).getOr([]);\n        each$e(customAttrNames, name => node.attr(name, null));\n        const classList = (_b = (_a = node.attr('class')) === null || _a === void 0 ? void 0 : _a.split(' ')) !== null && _b !== void 0 ? _b : [];\n        const newClassList = difference(classList, [annotation()].concat(customClasses));\n        node.attr('class', newClassList.length > 0 ? newClassList.join(' ') : null);\n        node.attr(dataAnnotationClasses(), null);\n        node.attr(dataAnnotationAttributes(), null);\n      };\n      editor.serializer.addTempAttr(dataAnnotationActive());\n      editor.serializer.addAttributeFilter(dataAnnotation$1, nodes => {\n        for (const node of nodes) {\n          identifyParserNode(node).each(settings => {\n            if (settings.persistent === false) {\n              if (node.name === 'span') {\n                node.unwrap();\n              } else {\n                removeDirectAnnotation(node);\n              }\n            }\n          });\n        }\n      });\n    };\n\n    const create$c = () => {\n      const annotations = {};\n      const register = (name, settings) => {\n        annotations[name] = {\n          name,\n          settings\n        };\n      };\n      const lookup = name => get$a(annotations, name).map(a => a.settings);\n      const getNames = () => keys(annotations);\n      return {\n        register,\n        lookup,\n        getNames\n      };\n    };\n\n    let unique = 0;\n    const generate$1 = prefix => {\n      const date = new Date();\n      const time = date.getTime();\n      const random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    const add = (element, classes) => {\n      each$e(classes, x => {\n        add$2(element, x);\n      });\n    };\n    const remove$4 = (element, classes) => {\n      each$e(classes, x => {\n        remove$7(element, x);\n      });\n    };\n\n    const clone$2 = (original, isDeep) => SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    const shallow$1 = original => clone$2(original, false);\n    const deep$1 = original => clone$2(original, true);\n    const shallowAs = (original, tag) => {\n      const nu = SugarElement.fromTag(tag);\n      const attributes = clone$4(original);\n      setAll$1(nu, attributes);\n      return nu;\n    };\n    const mutate = (original, tag) => {\n      const nu = shallowAs(original, tag);\n      after$4(original, nu);\n      const children = children$1(original);\n      append(nu, children);\n      remove$5(original);\n      return nu;\n    };\n\n    const TextWalker = (startNode, rootNode, isBoundary = never) => {\n      const walker = new DomTreeWalker(startNode, rootNode);\n      const walk = direction => {\n        let next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$a(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$a);\n      };\n      return {\n        current: () => Optional.from(walker.current()).filter(isText$a),\n        next: () => walk('next'),\n        prev: () => walk('prev'),\n        prev2: () => walk('prev2')\n      };\n    };\n\n    const TextSeeker = (dom, isBoundary) => {\n      const isBlockBoundary = isBoundary ? isBoundary : node => dom.isBlock(node) || isBr$6(node) || isContentEditableFalse$b(node);\n      const walk = (node, offset, walker, process) => {\n        if (isText$a(node)) {\n          const newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(next => walk(next.container, next.offset, walker, process));\n      };\n      const backwards = (node, offset, process, root) => {\n        const walker = TextWalker(node, root !== null && root !== void 0 ? root : dom.getRoot(), isBlockBoundary);\n        return walk(node, offset, () => walker.prev().map(prev => ({\n          container: prev,\n          offset: prev.length\n        })), process).getOrNull();\n      };\n      const forwards = (node, offset, process, root) => {\n        const walker = TextWalker(node, root !== null && root !== void 0 ? root : dom.getRoot(), isBlockBoundary);\n        return walk(node, offset, () => walker.next().map(next => ({\n          container: next,\n          offset: 0\n        })), process).getOrNull();\n      };\n      return {\n        backwards,\n        forwards\n      };\n    };\n\n    const round$2 = Math.round;\n    const clone$1 = rect => {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    const collapse = (rect, toStart) => {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    const isEqual = (rect1, rect2) => rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    const isValidOverflow = (overflowY, rect1, rect2) => overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    const isAbove$1 = (rect1, rect2) => {\n      const halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    const isBelow$1 = (rect1, rect2) => {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    const containsXY = (rect, clientX, clientY) => clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    const boundingClientRectFromRects = rects => {\n      return foldl(rects, (acc, rect) => {\n        return acc.fold(() => Optional.some(rect), prevRect => {\n          const left = Math.min(rect.left, prevRect.left);\n          const top = Math.min(rect.top, prevRect.top);\n          const right = Math.max(rect.right, prevRect.right);\n          const bottom = Math.max(rect.bottom, prevRect.bottom);\n          return Optional.some({\n            top,\n            right,\n            bottom,\n            left,\n            width: right - left,\n            height: bottom - top\n          });\n        });\n      }, Optional.none());\n    };\n    const distanceToRectEdgeFromXY = (rect, x, y) => {\n      const cx = Math.max(Math.min(x, rect.left + rect.width), rect.left);\n      const cy = Math.max(Math.min(y, rect.top + rect.height), rect.top);\n      return Math.sqrt((x - cx) * (x - cx) + (y - cy) * (y - cy));\n    };\n    const overlapY = (r1, r2) => Math.max(0, Math.min(r1.bottom, r2.bottom) - Math.max(r1.top, r2.top));\n\n    const clamp$2 = (value, min, max) => Math.min(Math.max(value, min), max);\n\n    const getSelectedNode = range => {\n      const startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer === range.endContainer && startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    const getNode$1 = (container, offset) => {\n      if (isElement$6(container) && container.hasChildNodes()) {\n        const childNodes = container.childNodes;\n        const safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    const getNodeUnsafe = (container, offset) => {\n      if (offset < 0 && isElement$6(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    const extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    const isExtendingChar = ch => isString(ch) && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n\n    const or = (...args) => {\n      return x => {\n        for (let i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const and = (...args) => {\n      return x => {\n        for (let i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    const isElement$4 = isElement$6;\n    const isCaretCandidate$2 = isCaretCandidate$3;\n    const isBlock$2 = matchStyleValues('display', 'block table');\n    const isFloated = matchStyleValues('float', 'left right');\n    const isValidElementCaretCandidate = and(isElement$4, isCaretCandidate$2, not(isFloated));\n    const isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    const isText$7 = isText$a;\n    const isBr$3 = isBr$6;\n    const nodeIndex$1 = DOMUtils.nodeIndex;\n    const resolveIndex$1 = getNodeUnsafe;\n    const createRange$1 = doc => doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    const isWhiteSpace$1 = chr => isString(chr) && /[\\r\\n\\t ]/.test(chr);\n    const isRange = rng => !!rng.setStart && !!rng.setEnd;\n    const isHiddenWhiteSpaceRange = range => {\n      const container = range.startContainer;\n      const offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$a(container)) {\n        const text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const getBrClientRect = brNode => {\n      const doc = brNode.ownerDocument;\n      const rng = createRange$1(doc);\n      const nbsp$1 = doc.createTextNode(nbsp);\n      const parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      const clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    const getBoundingClientRectWebKitText = rng => {\n      const sc = rng.startContainer;\n      const ec = rng.endContainer;\n      const so = rng.startOffset;\n      const eo = rng.endOffset;\n      if (sc === ec && isText$a(ec) && so === 0 && eo === 1) {\n        const newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    const isZeroRect = r => r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    const getBoundingClientRect$1 = item => {\n      var _a;\n      let clientRect;\n      const clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return (_a = getBoundingClientRectWebKitText(item)) !== null && _a !== void 0 ? _a : clientRect;\n      }\n      return clientRect;\n    };\n    const collapseAndInflateWidth = (clientRect, toStart) => {\n      const newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    const getCaretPositionClientRects = caretPosition => {\n      const clientRects = [];\n      const addUniqueAndValidRect = clientRect => {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      const addCharacterOffset = (container, offset) => {\n        const range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      const container = caretPosition.container();\n      const offset = caretPosition.offset();\n      if (isText$7(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$4(container)) {\n        if (caretPosition.isAtEnd()) {\n          const node = resolveIndex$1(container, offset);\n          if (isText$7(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          const node = resolveIndex$1(container, offset);\n          if (isText$7(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          const beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$2(beforeNode) || isBlock$2(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    const CaretPosition = (container, offset, clientRects) => {\n      const isAtStart = () => {\n        if (isText$7(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      const isAtEnd = () => {\n        if (isText$7(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      const toRange = () => {\n        const range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      const getClientRects = () => {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      const isVisible = () => getClientRects().length > 0;\n      const isEqual = caretPosition => caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      const getNode = before => resolveIndex$1(container, before ? offset - 1 : offset);\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange,\n        getClientRects,\n        isVisible,\n        isAtStart,\n        isAtEnd,\n        isEqual,\n        getNode\n      };\n    };\n    CaretPosition.fromRangeStart = range => CaretPosition(range.startContainer, range.startOffset);\n    CaretPosition.fromRangeEnd = range => CaretPosition(range.endContainer, range.endOffset);\n    CaretPosition.after = node => CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    CaretPosition.before = node => CaretPosition(node.parentNode, nodeIndex$1(node));\n    CaretPosition.isAbove = (pos1, pos2) => lift2(head(pos2.getClientRects()), last$3(pos1.getClientRects()), isAbove$1).getOr(false);\n    CaretPosition.isBelow = (pos1, pos2) => lift2(last$3(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    CaretPosition.isAtStart = pos => pos ? pos.isAtStart() : false;\n    CaretPosition.isAtEnd = pos => pos ? pos.isAtEnd() : false;\n    CaretPosition.isTextPosition = pos => pos ? isText$a(pos.container()) : false;\n    CaretPosition.isElementPosition = pos => !CaretPosition.isTextPosition(pos);\n\n    const trimEmptyTextNode$1 = (dom, node) => {\n      if (isText$a(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    const insertNode = (dom, rng, node) => {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    const insertFragment = (dom, rng, frag) => {\n      const firstChild = Optional.from(frag.firstChild);\n      const lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(child => trimEmptyTextNode$1(dom, child.previousSibling));\n      lastChild.each(child => trimEmptyTextNode$1(dom, child.nextSibling));\n    };\n    const rangeInsertNode = (dom, rng, node) => {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    const isText$6 = isText$a;\n    const isBogus = isBogus$2;\n    const nodeIndex = DOMUtils.nodeIndex;\n    const normalizedParent = node => {\n      const parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    const getChildNodes = node => {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, (result, node) => {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    const normalizedTextOffset = (node, offset) => {\n      let tempNode = node;\n      while (tempNode = tempNode.previousSibling) {\n        if (!isText$6(tempNode)) {\n          break;\n        }\n        offset += tempNode.data.length;\n      }\n      return offset;\n    };\n    const equal = a => b => a === b;\n    const normalizedNodeIndex = node => {\n      let nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      const numTextFragments = reduce(nodes, (result, node, i) => {\n        if (isText$6(node) && isText$6(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$3(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    const createPathItem = node => {\n      const name = isText$6(node) ? 'text()' : node.nodeName.toLowerCase();\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    const parentsUntil$1 = (root, node, predicate) => {\n      const parents = [];\n      for (let tempNode = node.parentNode; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n        if (predicate && predicate(tempNode)) {\n          break;\n        }\n        parents.push(tempNode);\n      }\n      return parents;\n    };\n    const create$b = (root, caretPosition) => {\n      let path = [];\n      let container = caretPosition.container();\n      let offset = caretPosition.offset();\n      let outputOffset;\n      if (isText$6(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        const childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      let parents = parentsUntil$1(root, container);\n      parents = filter$3(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, node => {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    const resolvePathItem = (node, name, index) => {\n      let nodes = getChildNodes(node);\n      nodes = filter$3(nodes, (node, index) => {\n        return !isText$6(node) || !isText$6(nodes[index - 1]);\n      });\n      nodes = filter$3(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    const findTextPosition = (container, offset) => {\n      let node = container;\n      let targetOffset = 0;\n      while (isText$6(node)) {\n        const dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$6(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$6(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    const resolve$1 = (root, path) => {\n      if (!path) {\n        return null;\n      }\n      const parts = path.split(',');\n      const paths = parts[0].split('/');\n      const offset = parts.length > 1 ? parts[1] : 'before';\n      const container = reduce(paths, (result, value) => {\n        const match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$6(container) && container.parentNode) {\n        let nodeOffset;\n        if (offset === 'after') {\n          nodeOffset = nodeIndex(container) + 1;\n        } else {\n          nodeOffset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, nodeOffset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    const isContentEditableFalse$9 = isContentEditableFalse$b;\n    const getNormalizedTextOffset$1 = (trim, container, offset) => {\n      let trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (let node = container.previousSibling; node && isText$a(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    const getPoint = (dom, trim, normalized, rng, start) => {\n      const container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      const point = [];\n      const root = dom.getRoot();\n      if (isText$a(container)) {\n        point.push(normalized ? getNormalizedTextOffset$1(trim, container, offset) : offset);\n      } else {\n        let after = 0;\n        const childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (let node = container; node && node !== root; node = node.parentNode) {\n        point.push(dom.nodeIndex(node, normalized));\n      }\n      return point;\n    };\n    const getLocation = (trim, selection, normalized, rng) => {\n      const dom = selection.dom;\n      const start = getPoint(dom, trim, normalized, rng, true);\n      const forward = selection.isForward();\n      const fakeCaret = isRangeInCaretContainerBlock(rng) ? { isFakeCaret: true } : {};\n      if (!selection.isCollapsed()) {\n        const end = getPoint(dom, trim, normalized, rng, false);\n        return {\n          start,\n          end,\n          forward,\n          ...fakeCaret\n        };\n      } else {\n        return {\n          start,\n          forward,\n          ...fakeCaret\n        };\n      }\n    };\n    const findIndex = (dom, name, element) => {\n      let count = 0;\n      Tools.each(dom.select(name), node => {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        } else if (node === element) {\n          return false;\n        } else {\n          count++;\n          return;\n        }\n      });\n      return count;\n    };\n    const moveEndPoint$1 = (rng, start) => {\n      let container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      if (isElement$6(container) && container.nodeName === 'TR') {\n        const childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          if (start) {\n            rng.setStart(container, offset);\n          } else {\n            rng.setEnd(container, offset);\n          }\n        }\n      }\n    };\n    const normalizeTableCellSelection = rng => {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    const findSibling = (node, offset) => {\n      if (isElement$6(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$9(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$a(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        let sibling = node.previousSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$9(sibling)) {\n          return sibling;\n        }\n      }\n      return undefined;\n    };\n    const findAdjacentContentEditableFalseElm = rng => {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    const getOffsetBookmark = (trim, normalized, selection) => {\n      const element = selection.getNode();\n      const rng = selection.getRng();\n      if (element.nodeName === 'IMG' || isContentEditableFalse$9(element)) {\n        const name = element.nodeName;\n        return {\n          name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      const sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        const name = sibling.tagName;\n        return {\n          name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    const getCaretBookmark = selection => {\n      const rng = selection.getRng();\n      return {\n        start: create$b(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$b(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng)),\n        forward: selection.isForward()\n      };\n    };\n    const getRangeBookmark = selection => {\n      return {\n        rng: selection.getRng(),\n        forward: selection.isForward()\n      };\n    };\n    const createBookmarkSpan = (dom, id, filled) => {\n      const args = {\n        'data-mce-type': 'bookmark',\n        id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    const getPersistentBookmark = (selection, filled) => {\n      const dom = selection.dom;\n      let rng = selection.getRng();\n      const id = dom.uniqueId();\n      const collapsed = selection.isCollapsed();\n      const element = selection.getNode();\n      const name = element.nodeName;\n      const forward = selection.isForward();\n      if (name === 'IMG') {\n        return {\n          name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      const rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        const endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      const startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id,\n        keep: true,\n        forward\n      });\n      return {\n        id,\n        forward\n      };\n    };\n    const getBookmark$2 = (selection, type, normalized = false) => {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    const getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    const value$1 = value => {\n      const applyHelper = fn => fn(value);\n      const constHelper = constant(value);\n      const outputHelper = () => output;\n      const output = {\n        tag: true,\n        inner: value,\n        fold: (_onError, onValue) => onValue(value),\n        isValue: always,\n        isError: never,\n        map: mapper => Result.value(mapper(value)),\n        mapError: outputHelper,\n        bind: applyHelper,\n        exists: applyHelper,\n        forall: applyHelper,\n        getOr: constHelper,\n        or: outputHelper,\n        getOrThunk: constHelper,\n        orThunk: outputHelper,\n        getOrDie: constHelper,\n        each: fn => {\n          fn(value);\n        },\n        toOptional: () => Optional.some(value)\n      };\n      return output;\n    };\n    const error = error => {\n      const outputHelper = () => output;\n      const output = {\n        tag: false,\n        inner: error,\n        fold: (onError, _onValue) => onError(error),\n        isValue: never,\n        isError: always,\n        map: outputHelper,\n        mapError: mapper => Result.error(mapper(error)),\n        bind: outputHelper,\n        exists: never,\n        forall: always,\n        getOr: identity,\n        or: identity,\n        getOrThunk: apply$1,\n        orThunk: apply$1,\n        getOrDie: die(String(error)),\n        each: noop,\n        toOptional: Optional.none\n      };\n      return output;\n    };\n    const fromOption = (optional, err) => optional.fold(() => error(err), value$1);\n    const Result = {\n      value: value$1,\n      error,\n      fromOption\n    };\n\n    const generate = cases => {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      const constructors = [];\n      const adt = {};\n      each$e(cases, (acase, count) => {\n        const keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        const key = keys$1[0];\n        const value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = (...args) => {\n          const argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          const match = branches => {\n            const branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            const allReqd = forall(constructors, reqKey => {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: (...foldArgs) => {\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              const target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match,\n            log: label => {\n              console.log(label, {\n                constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    const Adt = { generate };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    const partition$1 = results => {\n      const errors = [];\n      const values = [];\n      each$e(results, result => {\n        result.fold(err => {\n          errors.push(err);\n        }, value => {\n          values.push(value);\n        });\n      });\n      return {\n        errors,\n        values\n      };\n    };\n\n    const isInlinePattern = pattern => pattern.type === 'inline-command' || pattern.type === 'inline-format';\n    const isBlockPattern = pattern => pattern.type === 'block-command' || pattern.type === 'block-format';\n    const normalizePattern = pattern => {\n      const err = message => Result.error({\n        message,\n        pattern\n      });\n      const formatOrCmd = (name, onFormat, onCommand) => {\n        if (pattern.format !== undefined) {\n          let formats;\n          if (isArray$1(pattern.format)) {\n            if (!forall(pattern.format, isString)) {\n              return err(name + ' pattern has non-string items in the `format` array');\n            }\n            formats = pattern.format;\n          } else if (isString(pattern.format)) {\n            formats = [pattern.format];\n          } else {\n            return err(name + ' pattern has non-string `format` parameter');\n          }\n          return Result.value(onFormat(formats));\n        } else if (pattern.cmd !== undefined) {\n          if (!isString(pattern.cmd)) {\n            return err(name + ' pattern has non-string `cmd` parameter');\n          }\n          return Result.value(onCommand(pattern.cmd, pattern.value));\n        } else {\n          return err(name + ' pattern is missing both `format` and `cmd` parameters');\n        }\n      };\n      if (!isObject(pattern)) {\n        return err('Raw pattern is not an object');\n      }\n      if (!isString(pattern.start)) {\n        return err('Raw pattern is missing `start` parameter');\n      }\n      if (pattern.end !== undefined) {\n        if (!isString(pattern.end)) {\n          return err('Inline pattern has non-string `end` parameter');\n        }\n        if (pattern.start.length === 0 && pattern.end.length === 0) {\n          return err('Inline pattern has empty `start` and `end` parameters');\n        }\n        let start = pattern.start;\n        let end = pattern.end;\n        if (end.length === 0) {\n          end = start;\n          start = '';\n        }\n        return formatOrCmd('Inline', format => ({\n          type: 'inline-format',\n          start,\n          end,\n          format\n        }), (cmd, value) => ({\n          type: 'inline-command',\n          start,\n          end,\n          cmd,\n          value\n        }));\n      } else if (pattern.replacement !== undefined) {\n        if (!isString(pattern.replacement)) {\n          return err('Replacement pattern has non-string `replacement` parameter');\n        }\n        if (pattern.start.length === 0) {\n          return err('Replacement pattern has empty `start` parameter');\n        }\n        return Result.value({\n          type: 'inline-command',\n          start: '',\n          end: pattern.start,\n          cmd: 'mceInsertContent',\n          value: pattern.replacement\n        });\n      } else {\n        if (pattern.start.length === 0) {\n          return err('Block pattern has empty `start` parameter');\n        }\n        return formatOrCmd('Block', formats => ({\n          type: 'block-format',\n          start: pattern.start,\n          format: formats[0]\n        }), (command, commandValue) => ({\n          type: 'block-command',\n          start: pattern.start,\n          cmd: command,\n          value: commandValue\n        }));\n      }\n    };\n    const getBlockPatterns = patterns => filter$5(patterns, isBlockPattern);\n    const getInlinePatterns = patterns => filter$5(patterns, isInlinePattern);\n    const createPatternSet = (patterns, dynamicPatternsLookup) => ({\n      inlinePatterns: getInlinePatterns(patterns),\n      blockPatterns: getBlockPatterns(patterns),\n      dynamicPatternsLookup\n    });\n    const fromRawPatterns = patterns => {\n      const normalized = partition$1(map$3(patterns, normalizePattern));\n      each$e(normalized.errors, err => console.error(err.message, err.pattern));\n      return normalized.values;\n    };\n    const fromRawPatternsLookup = lookupFn => {\n      return ctx => {\n        const rawPatterns = lookupFn(ctx);\n        return fromRawPatterns(rawPatterns);\n      };\n    };\n\n    const deviceDetection$1 = detect$2().deviceType;\n    const isTouch = deviceDetection$1.isTouch();\n    const DOM$a = DOMUtils.DOM;\n    const getHash = value => {\n      const items = value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(',');\n      return foldl(items, (output, item) => {\n        const arr = item.split('=');\n        const key = arr[0];\n        const val = arr.length > 1 ? arr[1] : key;\n        output[trim$4(key)] = trim$4(val);\n        return output;\n      }, {});\n    };\n    const isRegExp = x => is$4(x, RegExp);\n    const option = name => editor => editor.options.get(name);\n    const stringOrObjectProcessor = value => isString(value) || isObject(value);\n    const bodyOptionProcessor = (editor, defaultValue = '') => value => {\n      const valid = isString(value);\n      if (valid) {\n        if (value.indexOf('=') !== -1) {\n          const bodyObj = getHash(value);\n          return {\n            value: get$a(bodyObj, editor.id).getOr(defaultValue),\n            valid\n          };\n        } else {\n          return {\n            value,\n            valid\n          };\n        }\n      } else {\n        return {\n          valid: false,\n          message: 'Must be a string.'\n        };\n      }\n    };\n    const register$7 = editor => {\n      const registerOption = editor.options.register;\n      registerOption('id', {\n        processor: 'string',\n        default: editor.id\n      });\n      registerOption('selector', { processor: 'string' });\n      registerOption('target', { processor: 'object' });\n      registerOption('suffix', { processor: 'string' });\n      registerOption('cache_suffix', { processor: 'string' });\n      registerOption('base_url', { processor: 'string' });\n      registerOption('referrer_policy', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('language_load', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('inline', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('iframe_attrs', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('doctype', {\n        processor: 'string',\n        default: '<!DOCTYPE html>'\n      });\n      registerOption('document_base_url', {\n        processor: 'string',\n        default: editor.documentBaseUrl\n      });\n      registerOption('body_id', {\n        processor: bodyOptionProcessor(editor, 'tinymce'),\n        default: 'tinymce'\n      });\n      registerOption('body_class', {\n        processor: bodyOptionProcessor(editor),\n        default: ''\n      });\n      registerOption('content_security_policy', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('br_in_pre', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('forced_root_block', {\n        processor: value => {\n          const valid = isString(value) && isNotEmpty(value);\n          if (valid) {\n            return {\n              value,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a non-empty string.'\n            };\n          }\n        },\n        default: 'p'\n      });\n      registerOption('forced_root_block_attrs', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('newline_behavior', {\n        processor: value => {\n          const valid = contains$2([\n            'block',\n            'linebreak',\n            'invert',\n            'default'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: block, linebreak, invert or default.'\n          };\n        },\n        default: 'default'\n      });\n      registerOption('br_newline_selector', {\n        processor: 'string',\n        default: '.mce-toc h2,figcaption,caption'\n      });\n      registerOption('no_newline_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('keep_styles', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('end_container_on_empty_block', {\n        processor: value => {\n          if (isBoolean(value)) {\n            return {\n              valid: true,\n              value\n            };\n          } else if (isString(value)) {\n            return {\n              valid: true,\n              value\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be boolean or a string'\n            };\n          }\n        },\n        default: 'blockquote'\n      });\n      registerOption('font_size_style_values', {\n        processor: 'string',\n        default: 'xx-small,x-small,small,medium,large,x-large,xx-large'\n      });\n      registerOption('font_size_legacy_values', {\n        processor: 'string',\n        default: 'xx-small,small,medium,large,x-large,xx-large,300%'\n      });\n      registerOption('font_size_classes', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('automatic_uploads', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('images_reuse_filename', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('images_replace_blob_uris', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('icons', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('icons_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_base_path', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_credentials', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('images_upload_handler', { processor: 'function' });\n      registerOption('language', {\n        processor: 'string',\n        default: 'en'\n      });\n      registerOption('language_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('entity_encoding', {\n        processor: 'string',\n        default: 'named'\n      });\n      registerOption('indent', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('indent_before', {\n        processor: 'string',\n        default: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'\n      });\n      registerOption('indent_after', {\n        processor: 'string',\n        default: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'\n      });\n      registerOption('indent_use_margin', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('indentation', {\n        processor: 'string',\n        default: '40px'\n      });\n      registerOption('content_css', {\n        processor: value => {\n          const valid = value === false || isString(value) || isArrayOf(value, isString);\n          if (valid) {\n            if (isString(value)) {\n              return {\n                value: map$3(value.split(','), trim$4),\n                valid\n              };\n            } else if (isArray$1(value)) {\n              return {\n                value,\n                valid\n              };\n            } else if (value === false) {\n              return {\n                value: [],\n                valid\n              };\n            } else {\n              return {\n                value,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false, a string or an array of strings.'\n            };\n          }\n        },\n        default: isInline$1(editor) ? [] : ['default']\n      });\n      registerOption('content_style', { processor: 'string' });\n      registerOption('content_css_cors', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('font_css', {\n        processor: value => {\n          const valid = isString(value) || isArrayOf(value, isString);\n          if (valid) {\n            const newValue = isArray$1(value) ? value : map$3(value.split(','), trim$4);\n            return {\n              value: newValue,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a string or an array of strings.'\n            };\n          }\n        },\n        default: []\n      });\n      registerOption('inline_boundaries', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('inline_boundaries_selector', {\n        processor: 'string',\n        default: 'a[href],code,span.mce-annotation'\n      });\n      registerOption('object_resizing', {\n        processor: value => {\n          const valid = isBoolean(value) || isString(value);\n          if (valid) {\n            if (value === false || deviceDetection$1.isiPhone() || deviceDetection$1.isiPad()) {\n              return {\n                value: '',\n                valid\n              };\n            } else {\n              return {\n                value: value === true ? 'table,img,figure.image,div,video,iframe' : value,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be boolean or a string'\n            };\n          }\n        },\n        default: !isTouch\n      });\n      registerOption('resize_img_proportional', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('event_root', { processor: 'object' });\n      registerOption('service_message', { processor: 'string' });\n      registerOption('theme', {\n        processor: value => value === false || isString(value) || isFunction(value),\n        default: 'silver'\n      });\n      registerOption('theme_url', { processor: 'string' });\n      registerOption('formats', { processor: 'object' });\n      registerOption('format_empty_lines', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('format_noneditable_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('preview_styles', {\n        processor: value => {\n          const valid = value === false || isString(value);\n          if (valid) {\n            return {\n              value: value === false ? '' : value,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false or a string'\n            };\n          }\n        },\n        default: 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow'\n      });\n      registerOption('custom_ui_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('hidden_input', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('submit_patch', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('encoding', { processor: 'string' });\n      registerOption('add_form_submit_trigger', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('add_unload_trigger', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('custom_undo_redo_levels', {\n        processor: 'number',\n        default: 0\n      });\n      registerOption('disable_nodechange', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('readonly', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('editable_root', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('plugins', {\n        processor: 'string[]',\n        default: []\n      });\n      registerOption('external_plugins', { processor: 'object' });\n      registerOption('forced_plugins', { processor: 'string[]' });\n      registerOption('model', {\n        processor: 'string',\n        default: editor.hasPlugin('rtc') ? 'plugin' : 'dom'\n      });\n      registerOption('model_url', { processor: 'string' });\n      registerOption('block_unsupported_drop', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('visual', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('visual_table_class', {\n        processor: 'string',\n        default: 'mce-item-table'\n      });\n      registerOption('visual_anchor_class', {\n        processor: 'string',\n        default: 'mce-item-anchor'\n      });\n      registerOption('iframe_aria_text', {\n        processor: 'string',\n        default: 'Rich Text Area. Press ALT-0 for help.'\n      });\n      registerOption('setup', { processor: 'function' });\n      registerOption('init_instance_callback', { processor: 'function' });\n      registerOption('url_converter', {\n        processor: 'function',\n        default: editor.convertURL\n      });\n      registerOption('url_converter_scope', {\n        processor: 'object',\n        default: editor\n      });\n      registerOption('urlconverter_callback', { processor: 'function' });\n      registerOption('allow_conditional_comments', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_html_data_urls', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_svg_data_urls', { processor: 'boolean' });\n      registerOption('allow_html_in_named_anchor', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_script_urls', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_unsafe_link_target', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('convert_fonts_to_spans', {\n        processor: 'boolean',\n        default: true,\n        deprecated: true\n      });\n      registerOption('fix_list_elements', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('preserve_cdata', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('remove_trailing_brs', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('pad_empty_with_br', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('inline_styles', {\n        processor: 'boolean',\n        default: true,\n        deprecated: true\n      });\n      registerOption('element_format', {\n        processor: 'string',\n        default: 'html'\n      });\n      registerOption('entities', { processor: 'string' });\n      registerOption('schema', {\n        processor: 'string',\n        default: 'html5'\n      });\n      registerOption('convert_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('relative_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('remove_script_host', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('custom_elements', { processor: 'string' });\n      registerOption('extended_valid_elements', { processor: 'string' });\n      registerOption('invalid_elements', { processor: 'string' });\n      registerOption('invalid_styles', { processor: stringOrObjectProcessor });\n      registerOption('valid_children', { processor: 'string' });\n      registerOption('valid_classes', { processor: stringOrObjectProcessor });\n      registerOption('valid_elements', { processor: 'string' });\n      registerOption('valid_styles', { processor: stringOrObjectProcessor });\n      registerOption('verify_html', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('auto_focus', { processor: value => isString(value) || value === true });\n      registerOption('browser_spellcheck', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('protect', { processor: 'array' });\n      registerOption('images_file_types', {\n        processor: 'string',\n        default: 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp'\n      });\n      registerOption('deprecation_warnings', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('a11y_advanced_options', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('api_key', { processor: 'string' });\n      registerOption('paste_block_drop', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('paste_data_images', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_preprocess', { processor: 'function' });\n      registerOption('paste_postprocess', { processor: 'function' });\n      registerOption('paste_webkit_styles', {\n        processor: 'string',\n        default: 'none'\n      });\n      registerOption('paste_remove_styles_if_webkit', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_merge_formats', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('smart_paste', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_as_text', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('paste_tab_spaces', {\n        processor: 'number',\n        default: 4\n      });\n      registerOption('text_patterns', {\n        processor: value => {\n          if (isArrayOf(value, isObject) || value === false) {\n            const patterns = value === false ? [] : value;\n            return {\n              value: fromRawPatterns(patterns),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be an array of objects or false.'\n            };\n          }\n        },\n        default: [\n          {\n            start: '*',\n            end: '*',\n            format: 'italic'\n          },\n          {\n            start: '**',\n            end: '**',\n            format: 'bold'\n          },\n          {\n            start: '#',\n            format: 'h1'\n          },\n          {\n            start: '##',\n            format: 'h2'\n          },\n          {\n            start: '###',\n            format: 'h3'\n          },\n          {\n            start: '####',\n            format: 'h4'\n          },\n          {\n            start: '#####',\n            format: 'h5'\n          },\n          {\n            start: '######',\n            format: 'h6'\n          },\n          {\n            start: '1. ',\n            cmd: 'InsertOrderedList'\n          },\n          {\n            start: '* ',\n            cmd: 'InsertUnorderedList'\n          },\n          {\n            start: '- ',\n            cmd: 'InsertUnorderedList'\n          }\n        ]\n      });\n      registerOption('text_patterns_lookup', {\n        processor: value => {\n          if (isFunction(value)) {\n            return {\n              value: fromRawPatternsLookup(value),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a single function'\n            };\n          }\n        },\n        default: _ctx => []\n      });\n      registerOption('noneditable_class', {\n        processor: 'string',\n        default: 'mceNonEditable'\n      });\n      registerOption('editable_class', {\n        processor: 'string',\n        default: 'mceEditable'\n      });\n      registerOption('noneditable_regexp', {\n        processor: value => {\n          if (isArrayOf(value, isRegExp)) {\n            return {\n              value,\n              valid: true\n            };\n          } else if (isRegExp(value)) {\n            return {\n              value: [value],\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a RegExp or an array of RegExp.'\n            };\n          }\n        },\n        default: []\n      });\n      registerOption('table_tab_navigation', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('highlight_on_focus', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('xss_sanitization', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('details_initial_state', {\n        processor: value => {\n          const valid = contains$2([\n            'inherited',\n            'collapsed',\n            'expanded'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: inherited, collapsed, or expanded.'\n          };\n        },\n        default: 'inherited'\n      });\n      registerOption('details_serialized_state', {\n        processor: value => {\n          const valid = contains$2([\n            'inherited',\n            'collapsed',\n            'expanded'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: inherited, collapsed, or expanded.'\n          };\n        },\n        default: 'inherited'\n      });\n      registerOption('init_content_sync', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('newdocument_content', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('force_hex_color', {\n        processor: value => {\n          const options = [\n            'always',\n            'rgb_only',\n            'off'\n          ];\n          const valid = contains$2(options, value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: `Must be one of: ${ options.join(', ') }.`\n          };\n        },\n        default: 'off'\n      });\n      registerOption('sandbox_iframes', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('convert_unsafe_embeds', {\n        processor: 'boolean',\n        default: false\n      });\n      editor.on('ScriptsLoaded', () => {\n        registerOption('directionality', {\n          processor: 'string',\n          default: I18n.isRtl() ? 'rtl' : undefined\n        });\n        registerOption('placeholder', {\n          processor: 'string',\n          default: DOM$a.getAttrib(editor.getElement(), 'placeholder')\n        });\n      });\n    };\n    const getIframeAttrs = option('iframe_attrs');\n    const getDocType = option('doctype');\n    const getDocumentBaseUrl = option('document_base_url');\n    const getBodyId = option('body_id');\n    const getBodyClass = option('body_class');\n    const getContentSecurityPolicy = option('content_security_policy');\n    const shouldPutBrInPre$1 = option('br_in_pre');\n    const getForcedRootBlock = option('forced_root_block');\n    const getForcedRootBlockAttrs = option('forced_root_block_attrs');\n    const getNewlineBehavior = option('newline_behavior');\n    const getBrNewLineSelector = option('br_newline_selector');\n    const getNoNewLineSelector = option('no_newline_selector');\n    const shouldKeepStyles = option('keep_styles');\n    const shouldEndContainerOnEmptyBlock = option('end_container_on_empty_block');\n    const isAutomaticUploadsEnabled = option('automatic_uploads');\n    const shouldReuseFileName = option('images_reuse_filename');\n    const shouldReplaceBlobUris = option('images_replace_blob_uris');\n    const getIconPackName = option('icons');\n    const getIconsUrl = option('icons_url');\n    const getImageUploadUrl = option('images_upload_url');\n    const getImageUploadBasePath = option('images_upload_base_path');\n    const getImagesUploadCredentials = option('images_upload_credentials');\n    const getImagesUploadHandler = option('images_upload_handler');\n    const shouldUseContentCssCors = option('content_css_cors');\n    const getReferrerPolicy = option('referrer_policy');\n    const getLanguageCode = option('language');\n    const getLanguageUrl = option('language_url');\n    const shouldIndentUseMargin = option('indent_use_margin');\n    const getIndentation = option('indentation');\n    const getContentCss = option('content_css');\n    const getContentStyle = option('content_style');\n    const getFontCss = option('font_css');\n    const getDirectionality = option('directionality');\n    const getInlineBoundarySelector = option('inline_boundaries_selector');\n    const getObjectResizing = option('object_resizing');\n    const getResizeImgProportional = option('resize_img_proportional');\n    const getPlaceholder = option('placeholder');\n    const getEventRoot = option('event_root');\n    const getServiceMessage = option('service_message');\n    const getTheme = option('theme');\n    const getThemeUrl = option('theme_url');\n    const getModel = option('model');\n    const getModelUrl = option('model_url');\n    const isInlineBoundariesEnabled = option('inline_boundaries');\n    const getFormats = option('formats');\n    const getPreviewStyles = option('preview_styles');\n    const canFormatEmptyLines = option('format_empty_lines');\n    const getFormatNoneditableSelector = option('format_noneditable_selector');\n    const getCustomUiSelector = option('custom_ui_selector');\n    const isInline$1 = option('inline');\n    const hasHiddenInput = option('hidden_input');\n    const shouldPatchSubmit = option('submit_patch');\n    const shouldAddFormSubmitTrigger = option('add_form_submit_trigger');\n    const shouldAddUnloadTrigger = option('add_unload_trigger');\n    const getCustomUndoRedoLevels = option('custom_undo_redo_levels');\n    const shouldDisableNodeChange = option('disable_nodechange');\n    const isReadOnly$1 = option('readonly');\n    const hasEditableRoot$1 = option('editable_root');\n    const hasContentCssCors = option('content_css_cors');\n    const getPlugins = option('plugins');\n    const getExternalPlugins$1 = option('external_plugins');\n    const shouldBlockUnsupportedDrop = option('block_unsupported_drop');\n    const isVisualAidsEnabled = option('visual');\n    const getVisualAidsTableClass = option('visual_table_class');\n    const getVisualAidsAnchorClass = option('visual_anchor_class');\n    const getIframeAriaText = option('iframe_aria_text');\n    const getSetupCallback = option('setup');\n    const getInitInstanceCallback = option('init_instance_callback');\n    const getUrlConverterCallback = option('urlconverter_callback');\n    const getAutoFocus = option('auto_focus');\n    const shouldBrowserSpellcheck = option('browser_spellcheck');\n    const getProtect = option('protect');\n    const shouldPasteBlockDrop = option('paste_block_drop');\n    const shouldPasteDataImages = option('paste_data_images');\n    const getPastePreProcess = option('paste_preprocess');\n    const getPastePostProcess = option('paste_postprocess');\n    const getNewDocumentContent = option('newdocument_content');\n    const getPasteWebkitStyles = option('paste_webkit_styles');\n    const shouldPasteRemoveWebKitStyles = option('paste_remove_styles_if_webkit');\n    const shouldPasteMergeFormats = option('paste_merge_formats');\n    const isSmartPasteEnabled = option('smart_paste');\n    const isPasteAsTextEnabled = option('paste_as_text');\n    const getPasteTabSpaces = option('paste_tab_spaces');\n    const shouldAllowHtmlDataUrls = option('allow_html_data_urls');\n    const getTextPatterns = option('text_patterns');\n    const getTextPatternsLookup = option('text_patterns_lookup');\n    const getNonEditableClass = option('noneditable_class');\n    const getEditableClass = option('editable_class');\n    const getNonEditableRegExps = option('noneditable_regexp');\n    const shouldPreserveCData = option('preserve_cdata');\n    const shouldHighlightOnFocus = option('highlight_on_focus');\n    const shouldSanitizeXss = option('xss_sanitization');\n    const shouldUseDocumentWrite = option('init_content_sync');\n    const hasTextPatternsLookup = editor => editor.options.isSet('text_patterns_lookup');\n    const getFontStyleValues = editor => Tools.explode(editor.options.get('font_size_style_values'));\n    const getFontSizeClasses = editor => Tools.explode(editor.options.get('font_size_classes'));\n    const isEncodingXml = editor => editor.options.get('encoding') === 'xml';\n    const getAllowedImageFileTypes = editor => Tools.explode(editor.options.get('images_file_types'));\n    const hasTableTabNavigation = option('table_tab_navigation');\n    const getDetailsInitialState = option('details_initial_state');\n    const getDetailsSerializedState = option('details_serialized_state');\n    const shouldForceHexColor = option('force_hex_color');\n    const shouldSandboxIframes = option('sandbox_iframes');\n\n    const isElement$3 = isElement$6;\n    const isText$5 = isText$a;\n    const removeNode$1 = node => {\n      const parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    const trimCount = text => {\n      const trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    const deleteZwspChars = caretContainer => {\n      let idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    const removeUnchanged = (caretContainer, pos) => {\n      remove$3(caretContainer);\n      return pos;\n    };\n    const removeTextAndReposition = (caretContainer, pos) => {\n      const before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      const after = trimCount(caretContainer.data.substr(pos.offset()));\n      const text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    const removeElementAndReposition = (caretContainer, pos) => {\n      const parentNode = pos.container();\n      const newPosition = indexOf$1(from(parentNode.childNodes), caretContainer).map(index => {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$3(caretContainer);\n      return newPosition;\n    };\n    const removeTextCaretContainer = (caretContainer, pos) => isText$5(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    const removeElementCaretContainer = (caretContainer, pos) => pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    const removeAndReposition = (container, pos) => CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    const remove$3 = caretContainerNode => {\n      if (isElement$3(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$5(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    const isContentEditableFalse$8 = isContentEditableFalse$b;\n    const isMedia$1 = isMedia$2;\n    const isTableCell$1 = isTableCell$3;\n    const inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    const getAbsoluteClientRect = (root, element, before) => {\n      const clientRect = collapse(element.getBoundingClientRect(), before);\n      let scrollX;\n      let scrollY;\n      if (root.tagName === 'BODY') {\n        const docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        const rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      let margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    const trimInlineCaretContainers = root => {\n      var _a, _b;\n      const fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (let i = 0; i < fakeCaretTargetNodes.length; i++) {\n        const node = fakeCaretTargetNodes[i].dom;\n        let sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          const data = sibling.data;\n          if (data.length === 1) {\n            (_a = sibling.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          const data = sibling.data;\n          if (data.length === 1) {\n            (_b = sibling.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    const FakeCaret = (editor, root, isBlock, hasFocus) => {\n      const lastVisualCaret = value$2();\n      let cursorInterval;\n      let caretContainerNode;\n      const caretBlock = getForcedRootBlock(editor);\n      const dom = editor.dom;\n      const show = (before, element) => {\n        let rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          const caretContainer = insertBlock(caretBlock, element, before);\n          const clientRect = getAbsoluteClientRect(root, element, before);\n          dom.setStyle(caretContainer, 'top', clientRect.top);\n          caretContainerNode = caretContainer;\n          const caret = dom.create('div', {\n            'class': 'mce-visual-caret',\n            'data-mce-bogus': 'all'\n          });\n          dom.setStyles(caret, { ...clientRect });\n          dom.add(root, caret);\n          lastVisualCaret.set({\n            caret,\n            element,\n            before\n          });\n          if (before) {\n            dom.addClass(caret, 'mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainer, 0);\n          rng.setEnd(caretContainer, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      const hide = () => {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$3(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(caretState => {\n          dom.remove(caretState.caret);\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      const startBlink = () => {\n        cursorInterval = setInterval(() => {\n          lastVisualCaret.on(caretState => {\n            if (hasFocus()) {\n              dom.toggleClass(caretState.caret, 'mce-visual-caret-hidden');\n            } else {\n              dom.addClass(caretState.caret, 'mce-visual-caret-hidden');\n            }\n          });\n        }, 500);\n      };\n      const reposition = () => {\n        lastVisualCaret.on(caretState => {\n          const clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          dom.setStyles(caretState.caret, { ...clientRect });\n        });\n      };\n      const destroy = () => clearInterval(cursorInterval);\n      const getCss = () => '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      return {\n        show,\n        hide,\n        getCss,\n        reposition,\n        destroy\n      };\n    };\n    const isFakeCaretTableBrowser = () => Env.browser.isFirefox();\n    const isInlineFakeCaretTarget = node => isContentEditableFalse$8(node) || isMedia$1(node);\n    const isFakeCaretTarget = node => {\n      const isTarget = isInlineFakeCaretTarget(node) || isTable$2(node) && isFakeCaretTableBrowser();\n      return isTarget && parentElement(SugarElement.fromDom(node)).exists(isEditable$2);\n    };\n\n    const isContentEditableTrue$1 = isContentEditableTrue$3;\n    const isContentEditableFalse$7 = isContentEditableFalse$b;\n    const isMedia = isMedia$2;\n    const isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    const isCaretContainer = isCaretContainer$2;\n    const isCaretContainerBlock = isCaretContainerBlock$1;\n    const isElement$2 = isElement$6;\n    const isText$4 = isText$a;\n    const isCaretCandidate$1 = isCaretCandidate$3;\n    const isForwards = direction => direction > 0;\n    const isBackwards = direction => direction < 0;\n    const skipCaretContainers = (walk, shallow) => {\n      let node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    const findNode = (node, direction, predicateFn, rootNode, shallow) => {\n      const walker = new DomTreeWalker(node, rootNode);\n      const isCefOrCaretContainer = isContentEditableFalse$7(node) || isCaretContainerBlock(node);\n      let tempNode;\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          tempNode = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n        while (tempNode = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          tempNode = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n        while (tempNode = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      return null;\n    };\n    const getEditingHost = (node, rootNode) => {\n      const isCETrue = node => isContentEditableTrue$1(node.dom);\n      const isRoot = node => node.dom === rootNode;\n      return ancestor$4(SugarElement.fromDom(node), isCETrue, isRoot).map(elm => elm.dom).getOr(rootNode);\n    };\n    const getParentBlock$3 = (node, rootNode) => {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    const isInSameBlock = (caretPosition1, caretPosition2, rootNode) => getParentBlock$3(caretPosition1.container(), rootNode) === getParentBlock$3(caretPosition2.container(), rootNode);\n    const getChildNodeAtRelativeOffset = (relativeOffset, caretPosition) => {\n      if (!caretPosition) {\n        return Optional.none();\n      }\n      const container = caretPosition.container();\n      const offset = caretPosition.offset();\n      if (!isElement$2(container)) {\n        return Optional.none();\n      }\n      return Optional.from(container.childNodes[offset + relativeOffset]);\n    };\n    const beforeAfter = (before, node) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const range = doc.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    const isNodesInSameBlock = (root, node1, node2) => getParentBlock$3(node1, root) === getParentBlock$3(node2, root);\n    const lean = (left, root, node) => {\n      const siblingName = left ? 'previousSibling' : 'nextSibling';\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        let sibling = tempNode[siblingName];\n        if (sibling && isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$7(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, tempNode)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        tempNode = tempNode.parentNode;\n      }\n      return null;\n    };\n    const before$2 = curry(beforeAfter, true);\n    const after$2 = curry(beforeAfter, false);\n    const normalizeRange = (direction, root, range) => {\n      let node;\n      const leanLeft = curry(lean, true, root);\n      const leanRight = curry(lean, false, root);\n      const container = range.startContainer;\n      const offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        const block = isText$4(container) ? container.parentNode : container;\n        const location = block.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = block.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = block.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$a(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    const getRelativeCefElm = (forward, caretPosition) => getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition).filter(isContentEditableFalse$7);\n    const getNormalizedRangeEndPoint = (direction, root, range) => {\n      const normalizedRange = normalizeRange(direction, root, range);\n      return direction === -1 ? CaretPosition.fromRangeStart(normalizedRange) : CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    const getElementFromPosition = pos => Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    const getElementFromPrevPosition = pos => Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    const getVisualCaretPosition = (walkFn, caretPosition) => {\n      let pos = caretPosition;\n      while (pos = walkFn(pos)) {\n        if (pos.isVisible()) {\n          return pos;\n        }\n      }\n      return pos;\n    };\n    const isMoveInsideSameBlock = (from, to) => {\n      const inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$6(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    const isContentEditableFalse$6 = isContentEditableFalse$b;\n    const isText$3 = isText$a;\n    const isElement$1 = isElement$6;\n    const isBr$2 = isBr$6;\n    const isCaretCandidate = isCaretCandidate$3;\n    const isAtomic = isAtomic$1;\n    const isEditableCaretCandidate = isEditableCaretCandidate$1;\n    const getParents$3 = (node, root) => {\n      const parents = [];\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        parents.push(tempNode);\n        tempNode = tempNode.parentNode;\n      }\n      return parents;\n    };\n    const nodeAtIndex = (container, offset) => {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    const getCaretCandidatePosition = (direction, node) => {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$3(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$3(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$3(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$3(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$2(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    const moveForwardFromBr = (root, nextNode) => {\n      const nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$3(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    const findCaretPosition$1 = (direction, startPos, root) => {\n      let node;\n      let nextNode;\n      let innerNode;\n      let caretPosition;\n      if (!isElement$1(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement$1(root.lastChild)) {\n          return isBr$2(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      const container = caretPosition.container();\n      let offset = caretPosition.offset();\n      if (isText$3(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$3(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$3(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$2(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$3(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$3(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (node && (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart())) {\n        node = findNode(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = node ? findNode(node, direction, isEditableCaretCandidate, root) : node;\n      const rootContentEditableFalseElm = last$2(filter$5(getParents$3(container, root), isContentEditableFalse$6));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    const CaretWalker = root => ({\n      next: caretPosition => {\n        return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n      },\n      prev: caretPosition => {\n        return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n      }\n    });\n\n    const walkToPositionIn = (forward, root, start) => {\n      const position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    const afterElement = node => isBr$6(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    const isBeforeOrStart = position => {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    const isAfterOrEnd = position => {\n      if (CaretPosition.isTextPosition(position)) {\n        const container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    const isBeforeAfterSameElement = (from, to) => !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    const isAtBr = position => !CaretPosition.isTextPosition(position) && isBr$6(position.getNode());\n    const shouldSkipPosition = (forward, from, to) => {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    const fromPosition = (forward, root, pos) => {\n      const walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    const navigate = (forward, root, from) => fromPosition(forward, root, from).bind(to => {\n      if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n        return fromPosition(forward, root, to);\n      } else {\n        return Optional.some(to);\n      }\n    });\n    const navigateIgnore = (forward, root, from, ignoreFilter) => navigate(forward, root, from).bind(pos => ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos));\n    const positionIn = (forward, element) => {\n      const startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$a(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    const nextPosition = curry(fromPosition, true);\n    const prevPosition = curry(fromPosition, false);\n    const firstPositionIn = curry(positionIn, true);\n    const lastPositionIn = curry(positionIn, false);\n\n    const CARET_ID = '_mce_caret';\n    const isCaretNode = node => isElement$6(node) && node.id === CARET_ID;\n    const getParentCaretContainer = (body, node) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== body) {\n        if (isCaretNode(currentNode)) {\n          return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    };\n\n    const isStringPathBookmark = bookmark => isString(bookmark.start);\n    const isRangeBookmark = bookmark => has$2(bookmark, 'rng');\n    const isIdBookmark = bookmark => has$2(bookmark, 'id');\n    const isIndexBookmark = bookmark => has$2(bookmark, 'name');\n    const isPathBookmark = bookmark => Tools.isArray(bookmark.start);\n\n    const isForwardBookmark = bookmark => !isIndexBookmark(bookmark) && isBoolean(bookmark.forward) ? bookmark.forward : true;\n    const addBogus = (dom, node) => {\n      if (isElement$6(node) && dom.isBlock(node) && !node.innerHTML) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    const resolveCaretPositionBookmark = (dom, bookmark) => {\n      const startPos = Optional.from(resolve$1(dom.getRoot(), bookmark.start));\n      const endPos = Optional.from(resolve$1(dom.getRoot(), bookmark.end));\n      return lift2(startPos, endPos, (start, end) => {\n        const range = dom.createRng();\n        range.setStart(start.container(), start.offset());\n        range.setEnd(end.container(), end.offset());\n        return {\n          range,\n          forward: isForwardBookmark(bookmark)\n        };\n      });\n    };\n    const insertZwsp = (node, rng) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const textNode = doc.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    const isEmpty$1 = node => !node.hasChildNodes();\n    const tryFindRangePosition = (node, rng) => lastPositionIn(node).fold(never, pos => {\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      return true;\n    });\n    const padEmptyCaretContainer = (root, node, rng) => {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const setEndPoint = (dom, start, bookmark, rng) => {\n      const point = bookmark[start ? 'start' : 'end'];\n      const root = dom.getRoot();\n      if (point) {\n        let node = root;\n        let offset = point[0];\n        for (let i = point.length - 1; node && i >= 1; i--) {\n          const children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (isText$a(node)) {\n          offset = Math.min(point[0], node.data.length);\n        }\n        if (isElement$6(node)) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    const isValidTextNode = node => isText$a(node) && node.data.length > 0;\n    const restoreEndPoint = (dom, suffix, bookmark) => {\n      const marker = dom.get(bookmark.id + '_' + suffix);\n      const markerParent = marker === null || marker === void 0 ? void 0 : marker.parentNode;\n      const keep = bookmark.keep;\n      if (marker && markerParent) {\n        let container;\n        let offset;\n        if (suffix === 'start') {\n          if (!keep) {\n            container = markerParent;\n            offset = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              container = marker.firstChild;\n              offset = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              container = marker.nextSibling;\n              offset = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              container = marker.previousSibling;\n              offset = marker.previousSibling.data.length;\n            } else {\n              container = markerParent;\n              offset = dom.nodeIndex(marker) + 1;\n            }\n          }\n        } else {\n          if (!keep) {\n            container = markerParent;\n            offset = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              container = marker.firstChild;\n              offset = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              container = marker.previousSibling;\n              offset = marker.previousSibling.data.length;\n            } else {\n              container = markerParent;\n              offset = dom.nodeIndex(marker);\n            }\n          }\n        }\n        if (!keep) {\n          const prev = marker.previousSibling;\n          const next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), node => {\n            if (isText$a(node)) {\n              node.data = node.data.replace(/\\uFEFF/g, '');\n            }\n          });\n          let otherMarker;\n          while (otherMarker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(otherMarker, true);\n          }\n          if (isText$a(next) && isText$a(prev) && !Env.browser.isOpera()) {\n            const idx = prev.data.length;\n            prev.appendData(next.data);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    const resolvePaths = (dom, bookmark) => {\n      const range = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, range) && setEndPoint(dom, false, bookmark, range)) {\n        return Optional.some({\n          range,\n          forward: isForwardBookmark(bookmark)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const resolveId = (dom, bookmark) => {\n      const startPos = restoreEndPoint(dom, 'start', bookmark);\n      const endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), (spos, epos) => {\n        const range = dom.createRng();\n        range.setStart(addBogus(dom, spos.container()), spos.offset());\n        range.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return {\n          range,\n          forward: isForwardBookmark(bookmark)\n        };\n      });\n    };\n    const resolveIndex = (dom, bookmark) => Optional.from(dom.select(bookmark.name)[bookmark.index]).map(elm => {\n      const range = dom.createRng();\n      range.selectNode(elm);\n      return {\n        range,\n        forward: true\n      };\n    });\n    const resolve = (selection, bookmark) => {\n      const dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return resolveCaretPositionBookmark(dom, bookmark);\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some({\n            range: bookmark.rng,\n            forward: isForwardBookmark(bookmark)\n          });\n        }\n      }\n      return Optional.none();\n    };\n\n    const getBookmark$1 = (selection, type, normalized) => {\n      return getBookmark$2(selection, type, normalized);\n    };\n    const moveToBookmark = (selection, bookmark) => {\n      resolve(selection, bookmark).each(({range, forward}) => {\n        selection.setRng(range, forward);\n      });\n    };\n    const isBookmarkNode$1 = node => {\n      return isElement$6(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    const is = expected => actual => expected === actual;\n    const isNbsp = is(nbsp);\n    const isWhiteSpace = chr => chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    const isContent = chr => !isWhiteSpace(chr) && !isNbsp(chr) && !isZwsp$2(chr);\n\n    const getRanges$1 = selection => {\n      const ranges = [];\n      if (selection) {\n        for (let i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    const getSelectedNodes = ranges => {\n      return bind$3(ranges, range => {\n        const node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    const hasMultipleRanges = selection => {\n      return getRanges$1(selection).length > 1;\n    };\n\n    const getCellsFromRanges = ranges => filter$5(getSelectedNodes(ranges), isTableCell$2);\n    const getCellsFromElement = elm => descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    const getCellsFromElementOrRanges = (ranges, element) => {\n      const selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    const getCellsFromEditor = editor => getCellsFromElementOrRanges(getRanges$1(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    const getClosestTable = (cell, isRoot) => ancestor$3(cell, 'table', isRoot);\n\n    const getStartNode = rng => {\n      const sc = rng.startContainer, so = rng.startOffset;\n      if (isText$a(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    const getEndNode = rng => {\n      const ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$a(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    const getFirstChildren = node => {\n      return firstChild(node).fold(constant([node]), child => {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    const getLastChildren = node => {\n      return lastChild(node).fold(constant([node]), child => {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(sibling => {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    const hasAllContentsSelected = (elm, rng) => {\n      return lift2(getStartNode(rng), getEndNode(rng), (startNode, endNode) => {\n        const start = find$2(getFirstChildren(elm), curry(eq, startNode));\n        const end = find$2(getLastChildren(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    const moveEndPoint = (dom, rng, node, start) => {\n      const root = node;\n      const walker = new DomTreeWalker(node, root);\n      const moveCaretBeforeOnEnterElementsMap = filter$4(dom.schema.getMoveCaretBeforeOnEnterElements(), (_, name) => !contains$2([\n        'td',\n        'th',\n        'table'\n      ], name.toLowerCase()));\n      let currentNode = node;\n      do {\n        if (isText$a(currentNode) && Tools.trim(currentNode.data).length !== 0) {\n          if (start) {\n            rng.setStart(currentNode, 0);\n          } else {\n            rng.setEnd(currentNode, currentNode.data.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[currentNode.nodeName]) {\n          if (start) {\n            rng.setStartBefore(currentNode);\n          } else {\n            if (currentNode.nodeName === 'BR') {\n              rng.setEndBefore(currentNode);\n            } else {\n              rng.setEndAfter(currentNode);\n            }\n          }\n          return;\n        }\n      } while (currentNode = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    const hasAnyRanges = editor => {\n      const sel = editor.selection.getSel();\n      return isNonNullable(sel) && sel.rangeCount > 0;\n    };\n    const runOnRanges = (editor, executor) => {\n      const fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$e(fakeSelectionNodes, elem => {\n          const node = elem.dom;\n          const fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    const preserve = (selection, fillBookmark, executor) => {\n      const bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    const isNode = node => isNumber(node === null || node === void 0 ? void 0 : node.nodeType);\n    const isElementNode$1 = node => isElement$6(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    const isElementDirectlySelected = (dom, node) => {\n      if (isElementNode$1(node) && !/^(TD|TH)$/.test(node.nodeName)) {\n        const selectedAttr = dom.getAttrib(node, 'data-mce-selected');\n        const value = parseInt(selectedAttr, 10);\n        return !isNaN(value) && value > 0;\n      } else {\n        return false;\n      }\n    };\n    const preserveSelection = (editor, action, shouldMoveStart) => {\n      const {selection, dom} = editor;\n      const selectedNodeBeforeAction = selection.getNode();\n      const isSelectedBeforeNodeNoneditable = isContentEditableFalse$b(selectedNodeBeforeAction);\n      preserve(selection, true, () => {\n        action();\n      });\n      const isBeforeNodeStillNoneditable = isSelectedBeforeNodeNoneditable && isContentEditableFalse$b(selectedNodeBeforeAction);\n      if (isBeforeNodeStillNoneditable && dom.isChildOf(selectedNodeBeforeAction, editor.getBody())) {\n        editor.selection.select(selectedNodeBeforeAction);\n      } else if (shouldMoveStart(selection.getStart())) {\n        moveStartToNearestText(dom, selection);\n      }\n    };\n    const moveStartToNearestText = (dom, selection) => {\n      var _a, _b;\n      const rng = selection.getRng();\n      const {startContainer, startOffset} = rng;\n      const selectedNode = selection.getNode();\n      if (isElementDirectlySelected(dom, selectedNode)) {\n        return;\n      }\n      if (isElement$6(startContainer)) {\n        const nodes = startContainer.childNodes;\n        const root = dom.getRoot();\n        let walker;\n        if (startOffset < nodes.length) {\n          const startNode = nodes[startOffset];\n          walker = new DomTreeWalker(startNode, (_a = dom.getParent(startNode, dom.isBlock)) !== null && _a !== void 0 ? _a : root);\n        } else {\n          const startNode = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(startNode, (_b = dom.getParent(startNode, dom.isBlock)) !== null && _b !== void 0 ? _b : root);\n          walker.next(true);\n        }\n        for (let node = walker.current(); node; node = walker.next()) {\n          if (dom.getContentEditable(node) === 'false') {\n            return;\n          } else if (isText$a(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    const getNonWhiteSpaceSibling = (node, next, inc) => {\n      if (node) {\n        const nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$6(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n      return undefined;\n    };\n    const isTextBlock$1 = (schema, node) => !!schema.getTextBlockElements()[node.nodeName.toLowerCase()] || isTransparentBlock(schema, node);\n    const isValid = (ed, parent, child) => {\n      return ed.schema.isValidChild(parent, child);\n    };\n    const isWhiteSpaceNode$1 = (node, allowSpaces = false) => {\n      if (isNonNullable(node) && isText$a(node)) {\n        const data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    const isEmptyTextNode$1 = node => {\n      return isNonNullable(node) && isText$a(node) && node.length === 0;\n    };\n    const isWrapNoneditableTarget = (editor, node) => {\n      const baseDataSelector = '[data-mce-cef-wrappable]';\n      const formatNoneditableSelector = getFormatNoneditableSelector(editor);\n      const selector = isEmpty$3(formatNoneditableSelector) ? baseDataSelector : `${ baseDataSelector },${ formatNoneditableSelector }`;\n      return is$1(SugarElement.fromDom(node), selector);\n    };\n    const isWrappableNoneditable = (editor, node) => {\n      const dom = editor.dom;\n      return isElementNode$1(node) && dom.getContentEditable(node) === 'false' && isWrapNoneditableTarget(editor, node) && dom.select('[contenteditable=\"true\"]', node).length === 0;\n    };\n    const replaceVars = (value, vars) => {\n      if (isFunction(value)) {\n        return value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, (str, name) => {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    const isEq$5 = (str1, str2) => {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    const normalizeStyleValue = (value, name) => {\n      if (isNullable(value)) {\n        return null;\n      } else {\n        let strValue = String(value);\n        if (name === 'color' || name === 'backgroundColor') {\n          strValue = rgbaToHexString(strValue);\n        }\n        if (name === 'fontWeight' && value === 700) {\n          strValue = 'bold';\n        }\n        if (name === 'fontFamily') {\n          strValue = strValue.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n        }\n        return strValue;\n      }\n    };\n    const getStyle = (dom, node, name) => {\n      const style = dom.getStyle(node, name);\n      return normalizeStyleValue(style, name);\n    };\n    const getTextDecoration = (dom, node) => {\n      let decoration;\n      dom.getParent(node, n => {\n        if (isElement$6(n)) {\n          decoration = dom.getStyle(n, 'text-decoration');\n          return !!decoration && decoration !== 'none';\n        } else {\n          return false;\n        }\n      });\n      return decoration;\n    };\n    const getParents$2 = (dom, node, selector) => {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    const isFormatPredicate = (editor, formatName, predicate) => {\n      const formats = editor.formatter.get(formatName);\n      return isNonNullable(formats) && exists(formats, predicate);\n    };\n    const isVariableFormatName = (editor, formatName) => {\n      const hasVariableValues = format => {\n        const isVariableValue = val => isFunction(val) || val.length > 1 && val.charAt(0) === '%';\n        return exists([\n          'styles',\n          'attributes'\n        ], key => get$a(format, key).exists(field => {\n          const fieldValues = isArray$1(field) ? field : values(field);\n          return exists(fieldValues, isVariableValue);\n        }));\n      };\n      return isFormatPredicate(editor, formatName, hasVariableValues);\n    };\n    const areSimilarFormats = (editor, formatName, otherFormatName) => {\n      const validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      const filterObj = format => filter$4(format, (_, key) => exists(validKeys, validKey => validKey === key));\n      return isFormatPredicate(editor, formatName, fmt1 => {\n        const filteredFmt1 = filterObj(fmt1);\n        return isFormatPredicate(editor, otherFormatName, fmt2 => {\n          const filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    const isBlockFormat = format => hasNonNullableKey(format, 'block');\n    const isWrappingBlockFormat = format => isBlockFormat(format) && format.wrapper === true;\n    const isNonWrappingBlockFormat = format => isBlockFormat(format) && format.wrapper !== true;\n    const isSelectorFormat = format => hasNonNullableKey(format, 'selector');\n    const isInlineFormat = format => hasNonNullableKey(format, 'inline');\n    const isMixedFormat = format => isSelectorFormat(format) && isInlineFormat(format) && is$2(get$a(format, 'mixed'), true);\n    const shouldExpandToSelector = format => isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n    const getEmptyCaretContainers = node => {\n      const nodes = [];\n      let tempNode = node;\n      while (tempNode) {\n        if (isText$a(tempNode) && tempNode.data !== ZWSP$1 || tempNode.childNodes.length > 1) {\n          return [];\n        }\n        if (isElement$6(tempNode)) {\n          nodes.push(tempNode);\n        }\n        tempNode = tempNode.firstChild;\n      }\n      return nodes;\n    };\n    const isCaretContainerEmpty = node => {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    const isEmptyCaretFormatElement = element => {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    const isBookmarkNode = isBookmarkNode$1;\n    const getParents$1 = getParents$2;\n    const isWhiteSpaceNode = isWhiteSpaceNode$1;\n    const isTextBlock = isTextBlock$1;\n    const isBogusBr = node => {\n      return isBr$6(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    const findParentContentEditable = (dom, node) => {\n      let parent = node;\n      while (parent) {\n        if (isElement$6(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    const walkText = (start, node, offset, predicate) => {\n      const str = node.data;\n      if (start) {\n        for (let i = offset; i > 0; i--) {\n          if (predicate(str.charAt(i - 1))) {\n            return i;\n          }\n        }\n      } else {\n        for (let i = offset; i < str.length; i++) {\n          if (predicate(str.charAt(i))) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    const findSpace = (start, node, offset) => walkText(start, node, offset, c => isNbsp(c) || isWhiteSpace(c));\n    const findContent = (start, node, offset) => walkText(start, node, offset, isContent);\n    const findWordEndPoint = (dom, body, container, offset, start, includeTrailingSpaces) => {\n      let lastTextNode;\n      const rootNode = dom.getParent(container, dom.isBlock) || body;\n      const walk = (container, offset, pred) => {\n        const textSeeker = TextSeeker(dom);\n        const walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, (text, textOffset) => {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      const spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(result => includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result)).orThunk(() => lastTextNode ? Optional.some({\n        container: lastTextNode,\n        offset: start ? 0 : lastTextNode.length\n      }) : Optional.none());\n    };\n    const findSelectorEndPoint = (dom, formatList, rng, container, siblingName) => {\n      const sibling = container[siblingName];\n      if (isText$a(container) && isEmpty$3(container.data) && sibling) {\n        container = sibling;\n      }\n      const parents = getParents$1(dom, container);\n      for (let i = 0; i < parents.length; i++) {\n        for (let y = 0; y < formatList.length; y++) {\n          const curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    const findBlockEndPoint = (dom, formatList, container, siblingName) => {\n      var _a;\n      let node = container;\n      const root = dom.getRoot();\n      const format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        const scopeRoot = (_a = dom.getParent(container, 'LI,TD,TH,SUMMARY')) !== null && _a !== void 0 ? _a : root;\n        node = dom.getParent(isText$a(container) ? container.parentNode : container, node => node !== root && isTextBlock(dom.schema, node), scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node && node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    const isAtBlockBoundary$1 = (dom, root, container, siblingName) => {\n      const parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    const findParentContainer = (dom, formatList, container, offset, start) => {\n      let parent = container;\n      const siblingName = start ? 'previousSibling' : 'nextSibling';\n      const root = dom.getRoot();\n      if (isText$a(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (parent) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (let sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          const allowSpaces = isText$a(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    const isSelfOrParentBookmark = container => isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    const expandRng = (dom, rng, formatList, includeTrailingSpace = false) => {\n      let {startContainer, startOffset, endContainer, endOffset} = rng;\n      const format = formatList[0];\n      if (isElement$6(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$a(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$6(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$a(endContainer)) {\n          endOffset = endContainer.data.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$a(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$a(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        const startPoint = findWordEndPoint(dom, dom.getRoot(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(({container, offset}) => {\n          startContainer = container;\n          startOffset = offset;\n        });\n        const endPoint = findWordEndPoint(dom, dom.getRoot(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(({container, offset}) => {\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$a(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$a(endContainer) || endOffset === endContainer.data.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(dom, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(dom, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$6(startContainer) && startContainer.parentNode) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$6(endContainer) && endContainer.parentNode) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer,\n        startOffset,\n        endContainer,\n        endOffset\n      };\n    };\n\n    const walk$3 = (dom, rng, callback) => {\n      var _a;\n      const startOffset = rng.startOffset;\n      const startContainer = getNode$1(rng.startContainer, startOffset);\n      const endOffset = rng.endOffset;\n      const endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      const exclude = nodes => {\n        const firstNode = nodes[0];\n        if (isText$a(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        const lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$a(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      const collectSiblings = (node, name, endNode) => {\n        const siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      const findEndPoint = (node, root) => dom.getParent(node, node => node.parentNode === root, root);\n      const walkBoundary = (startNode, endNode, next) => {\n        const siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (let node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          const siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      const ancestor = (_a = dom.findCommonAncestor(startContainer, endContainer)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      const startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      const endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      const siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    const validBlocks = [\n      'pre[class*=language-][contenteditable=\"false\"]',\n      'figure.image',\n      'div[data-ephox-embed-iri]',\n      'div.tiny-pageembed',\n      'div.mce-toc',\n      'div[data-mce-toc]'\n    ];\n    const isZeroWidth = elem => isText$b(elem) && get$3(elem) === ZWSP$1;\n    const context = (editor, elem, wrapName, nodeName) => parent(elem).fold(() => 'skipping', parent => {\n      if (nodeName === 'br' || isZeroWidth(elem)) {\n        return 'valid';\n      } else if (isAnnotation(elem)) {\n        return 'existing';\n      } else if (isCaretNode(elem.dom)) {\n        return 'caret';\n      } else if (exists(validBlocks, selector => is$1(elem, selector))) {\n        return 'valid-block';\n      } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n        return 'invalid-child';\n      } else {\n        return 'valid';\n      }\n    });\n\n    const applyWordGrab = (editor, rng) => {\n      const r = expandRng(editor.dom, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    const applyAnnotation = (elem, masterUId, data, annotationName, decorate, directAnnotation) => {\n      const {uid = masterUId, ...otherData} = data;\n      add$2(elem, annotation());\n      set$3(elem, `${ dataAnnotationId() }`, uid);\n      set$3(elem, `${ dataAnnotation() }`, annotationName);\n      const {attributes = {}, classes = []} = decorate(uid, otherData);\n      setAll$1(elem, attributes);\n      add(elem, classes);\n      if (directAnnotation) {\n        if (classes.length > 0) {\n          set$3(elem, `${ dataAnnotationClasses() }`, classes.join(','));\n        }\n        const attributeNames = keys(attributes);\n        if (attributeNames.length > 0) {\n          set$3(elem, `${ dataAnnotationAttributes() }`, attributeNames.join(','));\n        }\n      }\n    };\n    const removeDirectAnnotation = elem => {\n      remove$7(elem, annotation());\n      remove$a(elem, `${ dataAnnotationId() }`);\n      remove$a(elem, `${ dataAnnotation() }`);\n      remove$a(elem, `${ dataAnnotationActive() }`);\n      const customAttrNames = getOpt(elem, `${ dataAnnotationAttributes() }`).map(names => names.split(',')).getOr([]);\n      const customClasses = getOpt(elem, `${ dataAnnotationClasses() }`).map(names => names.split(',')).getOr([]);\n      each$e(customAttrNames, name => remove$a(elem, name));\n      remove$4(elem, customClasses);\n      remove$a(elem, `${ dataAnnotationClasses() }`);\n      remove$a(elem, `${ dataAnnotationAttributes() }`);\n    };\n    const makeAnnotation = (eDoc, uid, data, annotationName, decorate) => {\n      const master = SugarElement.fromTag('span', eDoc);\n      applyAnnotation(master, uid, data, annotationName, decorate, false);\n      return master;\n    };\n    const annotate = (editor, rng, uid, annotationName, decorate, data) => {\n      const newWrappers = [];\n      const master = makeAnnotation(editor.getDoc(), uid, data, annotationName, decorate);\n      const wrapper = value$2();\n      const finishWrapper = () => {\n        wrapper.clear();\n      };\n      const getOrOpenWrapper = () => wrapper.get().getOrThunk(() => {\n        const nu = shallow$1(master);\n        newWrappers.push(nu);\n        wrapper.set(nu);\n        return nu;\n      });\n      const processElements = elems => {\n        each$e(elems, processElement);\n      };\n      const processElement = elem => {\n        const ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            const children = children$1(elem);\n            processElements(children);\n            finishWrapper();\n            break;\n          }\n        case 'valid-block': {\n            finishWrapper();\n            applyAnnotation(elem, uid, data, annotationName, decorate, true);\n            break;\n          }\n        case 'valid': {\n            const w = getOrOpenWrapper();\n            wrap$2(elem, w);\n            break;\n          }\n        }\n      };\n      const processNodes = nodes => {\n        const elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$3(editor.dom, rng, nodes => {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    const annotateWithBookmark = (editor, name, settings, data) => {\n      editor.undoManager.transact(() => {\n        const selection = editor.selection;\n        const initialRng = selection.getRng();\n        const hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        const masterUid = generate$1('mce-annotation');\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          const wrapper = makeAnnotation(editor.getDoc(), masterUid, data, name, settings.decorate);\n          set$1(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, () => {\n            runOnRanges(editor, selectionRng => {\n              annotate(editor, selectionRng, masterUid, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    const Annotator = editor => {\n      const registry = create$c();\n      setup$x(editor, registry);\n      const changes = setup$y(editor, registry);\n      const isSpan = isTag('span');\n      const removeAnnotations = elements => {\n        each$e(elements, element => {\n          if (isSpan(element)) {\n            unwrap(element);\n          } else {\n            removeDirectAnnotation(element);\n          }\n        });\n      };\n      return {\n        register: (name, settings) => {\n          registry.register(name, settings);\n        },\n        annotate: (name, data) => {\n          registry.lookup(name).each(settings => {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: (name, callback) => {\n          changes.addListener(name, callback);\n        },\n        remove: name => {\n          identify(editor, Optional.some(name)).each(({elements}) => {\n            const bookmark = editor.selection.getBookmark();\n            removeAnnotations(elements);\n            editor.selection.moveToBookmark(bookmark);\n          });\n        },\n        removeAll: name => {\n          const bookmark = editor.selection.getBookmark();\n          each$d(findAll(editor, name), (elements, _) => {\n            removeAnnotations(elements);\n          });\n          editor.selection.moveToBookmark(bookmark);\n        },\n        getAll: name => {\n          const directory = findAll(editor, name);\n          return map$2(directory, elems => map$3(elems, elem => elem.dom));\n        }\n      };\n    };\n\n    const BookmarkManager = selection => {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    const isXYWithinRange = (clientX, clientY, range) => {\n      if (range.collapsed) {\n        return false;\n      } else {\n        return exists(range.getClientRects(), rect => containsXY(rect, clientX, clientY));\n      }\n    };\n\n    const firePreProcess = (editor, args) => editor.dispatch('PreProcess', args);\n    const firePostProcess = (editor, args) => editor.dispatch('PostProcess', args);\n    const fireRemove = editor => {\n      editor.dispatch('remove');\n    };\n    const fireDetach = editor => {\n      editor.dispatch('detach');\n    };\n    const fireSwitchMode = (editor, mode) => {\n      editor.dispatch('SwitchMode', { mode });\n    };\n    const fireObjectResizeStart = (editor, target, width, height, origin) => {\n      editor.dispatch('ObjectResizeStart', {\n        target,\n        width,\n        height,\n        origin\n      });\n    };\n    const fireObjectResized = (editor, target, width, height, origin) => {\n      editor.dispatch('ObjectResized', {\n        target,\n        width,\n        height,\n        origin\n      });\n    };\n    const firePreInit = editor => {\n      editor.dispatch('PreInit');\n    };\n    const firePostRender = editor => {\n      editor.dispatch('PostRender');\n    };\n    const fireInit = editor => {\n      editor.dispatch('Init');\n    };\n    const firePlaceholderToggle = (editor, state) => {\n      editor.dispatch('PlaceholderToggle', { state });\n    };\n    const fireError = (editor, errorType, error) => {\n      editor.dispatch(errorType, error);\n    };\n    const fireFormatApply = (editor, format, node, vars) => {\n      editor.dispatch('FormatApply', {\n        format,\n        node,\n        vars\n      });\n    };\n    const fireFormatRemove = (editor, format, node, vars) => {\n      editor.dispatch('FormatRemove', {\n        format,\n        node,\n        vars\n      });\n    };\n    const fireBeforeSetContent = (editor, args) => editor.dispatch('BeforeSetContent', args);\n    const fireSetContent = (editor, args) => editor.dispatch('SetContent', args);\n    const fireBeforeGetContent = (editor, args) => editor.dispatch('BeforeGetContent', args);\n    const fireGetContent = (editor, args) => editor.dispatch('GetContent', args);\n    const fireAutocompleterStart = (editor, args) => {\n      editor.dispatch('AutocompleterStart', args);\n    };\n    const fireAutocompleterUpdate = (editor, args) => {\n      editor.dispatch('AutocompleterUpdate', args);\n    };\n    const fireAutocompleterEnd = editor => {\n      editor.dispatch('AutocompleterEnd');\n    };\n    const firePastePreProcess = (editor, html, internal) => editor.dispatch('PastePreProcess', {\n      content: html,\n      internal\n    });\n    const firePastePostProcess = (editor, node, internal) => editor.dispatch('PastePostProcess', {\n      node,\n      internal\n    });\n    const firePastePlainTextToggle = (editor, state) => editor.dispatch('PastePlainTextToggle', { state });\n    const fireEditableRootStateChange = (editor, state) => editor.dispatch('EditableRootStateChange', { state });\n\n    const VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: e => {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: e => {\n        return Env.os.isMacOS() || Env.os.isiOS() ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    const elementSelectionAttr = 'data-mce-selected';\n    const controlElmSelector = 'table,img,figure.image,hr,video,span.mce-preview-object,details';\n    const abs = Math.abs;\n    const round$1 = Math.round;\n    const resizeHandles = {\n      nw: [\n        0,\n        0,\n        -1,\n        -1\n      ],\n      ne: [\n        1,\n        0,\n        1,\n        -1\n      ],\n      se: [\n        1,\n        1,\n        1,\n        1\n      ],\n      sw: [\n        0,\n        1,\n        -1,\n        1\n      ]\n    };\n    const isTouchEvent = evt => evt.type === 'longpress' || evt.type.indexOf('touch') === 0;\n    const ControlSelection = (selection, editor) => {\n      const dom = editor.dom;\n      const editableDoc = editor.getDoc();\n      const rootDocument = document;\n      const rootElement = editor.getBody();\n      let selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      let startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      let width;\n      let height;\n      let startScrollWidth;\n      let startScrollHeight;\n      const isImage = elm => isNonNullable(elm) && (isImg(elm) || dom.is(elm, 'figure.image'));\n      const isMedia = elm => isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      const isEventOnImageOutsideRange = (evt, range) => {\n        if (isTouchEvent(evt)) {\n          const touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      const contextMenuSelectImage = evt => {\n        const target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      const getResizeTargets = elm => {\n        if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else {\n          return [elm];\n        }\n      };\n      const isResizable = elm => {\n        const selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return is$1(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$1(SugarElement.fromDom(elm), selector);\n        }\n      };\n      const createGhostElement = elm => {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      const setSizeProp = (element, name, value) => {\n        if (isNonNullable(value)) {\n          const targets = getResizeTargets(element);\n          each$e(targets, target => {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      const setGhostElmSize = (ghostElm, width, height) => {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      const resizeGhostElement = e => {\n        let deltaX, deltaY, proportional;\n        let resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round$1(width * ratio);\n            width = round$1(height / ratio);\n          } else {\n            width = round$1(height / ratio);\n            height = round$1(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      const endGhostResize = () => {\n        const wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      const showResizeRect = targetElm => {\n        unbindResizeHandleEvents();\n        const position = dom.getPos(targetElm, rootElement);\n        const selectedElmX = position.x;\n        const selectedElmY = position.y;\n        const rect = targetElm.getBoundingClientRect();\n        const targetWidth = rect.width || rect.right - rect.left;\n        const targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        const e = editor.dispatch('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each$d(resizeHandles, (handle, name) => {\n            const startDrag = e => {\n              const target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            let handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            dom.bind(handleElm, 'mousedown', e => {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect(false);\n        }\n      };\n      const throttledShowResizeRect = first$1(showResizeRect, 0);\n      const hideResizeRect = (removeSelected = true) => {\n        throttledShowResizeRect.cancel();\n        unbindResizeHandleEvents();\n        if (selectedElm && removeSelected) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$d(resizeHandles, (value, name) => {\n          const handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      const isChildOrEqual = (node, parent) => dom.isChildOf(node, parent);\n      const updateResizeRect = e => {\n        if (resizeStarted || editor.removed || editor.composing) {\n          return;\n        }\n        const targetElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        const controlElm = closest$3(SugarElement.fromDom(targetElm), controlElmSelector).map(e => e.dom).filter(e => dom.isEditable(e.parentElement) || e.nodeName === 'IMG' && dom.isEditable(e)).getOrUndefined();\n        const selectedValue = isNonNullable(controlElm) ? dom.getAttrib(controlElm, elementSelectionAttr, '1') : '1';\n        each$e(dom.select(`img[${ elementSelectionAttr }],hr[${ elementSelectionAttr }]`), img => {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        if (isNonNullable(controlElm) && isChildOrEqual(controlElm, rootElement) && editor.hasFocus()) {\n          disableGeckoResize();\n          const startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            dom.setAttrib(controlElm, elementSelectionAttr, selectedValue);\n            throttledShowResizeRect.throttle(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      const unbindResizeHandleEvents = () => {\n        each$d(resizeHandles, handle => {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      const disableGeckoResize = () => {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', () => {\n        disableGeckoResize();\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', updateResizeRect);\n        editor.on('keyup compositionend', e => {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      const destroy = () => {\n        throttledShowResizeRect.cancel();\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable,\n        showResizeRect,\n        hideResizeRect,\n        updateResizeRect,\n        destroy\n      };\n    };\n\n    const setStart = (rng, situ) => {\n      situ.fold(e => {\n        rng.setStartBefore(e.dom);\n      }, (e, o) => {\n        rng.setStart(e.dom, o);\n      }, e => {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    const setFinish = (rng, situ) => {\n      situ.fold(e => {\n        rng.setEndBefore(e.dom);\n      }, (e, o) => {\n        rng.setEnd(e.dom, o);\n      }, e => {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    const relativeToNative = (win, startSitu, finishSitu) => {\n      const range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    const exactToNative = (win, start, soffset, finish, foffset) => {\n      const rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n\n    const adt$3 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const fromRange = (win, type, range) => type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    const getRanges = (win, selection) => selection.match({\n      domRange: rng => {\n        return {\n          ltr: constant(rng),\n          rtl: Optional.none\n        };\n      },\n      relative: (startSitu, finishSitu) => {\n        return {\n          ltr: cached(() => relativeToNative(win, startSitu, finishSitu)),\n          rtl: cached(() => Optional.some(relativeToNative(win, finishSitu, startSitu)))\n        };\n      },\n      exact: (start, soffset, finish, foffset) => {\n        return {\n          ltr: cached(() => exactToNative(win, start, soffset, finish, foffset)),\n          rtl: cached(() => Optional.some(exactToNative(win, finish, foffset, start, soffset)))\n        };\n      }\n    });\n    const doDiagnose = (win, ranges) => {\n      const rng = ranges.ltr();\n      if (rng.collapsed) {\n        const reversed = ranges.rtl().filter(rev => rev.collapsed === false);\n        return reversed.map(rev => adt$3.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset)).getOrThunk(() => fromRange(win, adt$3.ltr, rng));\n      } else {\n        return fromRange(win, adt$3.ltr, rng);\n      }\n    };\n    const diagnose = (win, selection) => {\n      const ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    adt$3.ltr;\n    adt$3.rtl;\n\n    const create$a = (start, soffset, finish, foffset) => ({\n      start,\n      soffset,\n      finish,\n      foffset\n    });\n    const SimRange = { create: create$a };\n\n    const caretPositionFromPoint = (doc, x, y) => {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretPositionFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y)).bind(pos => {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        const r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    const caretRangeFromPoint = (doc, x, y) => {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretRangeFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y));\n    };\n    const availableSearch = (() => {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return Optional.none;\n      }\n    })();\n    const fromPoint$1 = (win, x, y) => {\n      const doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(rng => SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n    };\n\n    const adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    const cata = (subject, onBefore, onOn, onAfter) => subject.fold(onBefore, onOn, onAfter);\n    const getStart$2 = situ => situ.fold(identity, identity, identity);\n    const before$1 = adt$2.before;\n    const on = adt$2.on;\n    const after$1 = adt$2.after;\n    const Situ = {\n      before: before$1,\n      on,\n      after: after$1,\n      cata,\n      getStart: getStart$2\n    };\n\n    const adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const exactFromRange = simRange => adt$1.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    const getStart$1 = selection => selection.match({\n      domRange: rng => SugarElement.fromDom(rng.startContainer),\n      relative: (startSitu, _finishSitu) => Situ.getStart(startSitu),\n      exact: (start, _soffset, _finish, _foffset) => start\n    });\n    const domRange = adt$1.domRange;\n    const relative = adt$1.relative;\n    const exact = adt$1.exact;\n    const getWin = selection => {\n      const start = getStart$1(selection);\n      return defaultView(start);\n    };\n    const range = SimRange.create;\n    const SimSelection = {\n      domRange,\n      relative,\n      exact,\n      exactFromRange,\n      getWin,\n      range\n    };\n\n    const beforeSpecial = (element, offset) => {\n      const name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains$2([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    const preprocessRelative = (startSitu, finishSitu) => {\n      const start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      const finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    const preprocessExact = (start, soffset, finish, foffset) => {\n      const startSitu = beforeSpecial(start, soffset);\n      const finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    const preprocess = selection => selection.match({\n      domRange: rng => {\n        const start = SugarElement.fromDom(rng.startContainer);\n        const finish = SugarElement.fromDom(rng.endContainer);\n        return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n      },\n      relative: preprocessRelative,\n      exact: preprocessExact\n    });\n\n    const fromElements = (elements, scope) => {\n      const doc = scope || document;\n      const fragment = doc.createDocumentFragment();\n      each$e(elements, element => {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    const toNative = selection => {\n      const win = SimSelection.getWin(selection).dom;\n      const getDomRange = (start, soffset, finish, foffset) => exactToNative(win, start, soffset, finish, foffset);\n      const filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    const getAtPoint = (win, x, y) => fromPoint$1(win, x, y);\n\n    const fromPoint = (clientX, clientY, doc) => {\n      const win = defaultView(SugarElement.fromDom(doc));\n      return getAtPoint(win.dom, clientX, clientY).map(simRange => {\n        const rng = doc.createRange();\n        rng.setStart(simRange.start.dom, simRange.soffset);\n        rng.setEnd(simRange.finish.dom, simRange.foffset);\n        return rng;\n      }).getOrUndefined();\n    };\n\n    const isEq$4 = (rng1, rng2) => {\n      return isNonNullable(rng1) && isNonNullable(rng2) && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    const findParent = (node, rootNode, predicate) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== rootNode) {\n        if (predicate(currentNode)) {\n          return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    };\n    const hasParent$1 = (node, rootNode, predicate) => findParent(node, rootNode, predicate) !== null;\n    const hasParentWithName = (node, rootNode, name) => hasParent$1(node, rootNode, node => node.nodeName === name);\n    const isCeFalseCaretContainer = (node, rootNode) => isCaretContainer$2(node) && !hasParent$1(node, rootNode, isCaretNode);\n    const hasBrBeforeAfter = (dom, node, left) => {\n      const parentNode = node.parentNode;\n      if (parentNode) {\n        const walker = new DomTreeWalker(node, dom.getParent(parentNode, dom.isBlock) || dom.getRoot());\n        let currentNode;\n        while (currentNode = walker[left ? 'prev' : 'next']()) {\n          if (isBr$6(currentNode)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    const isPrevNode = (node, name) => {\n      var _a;\n      return ((_a = node.previousSibling) === null || _a === void 0 ? void 0 : _a.nodeName) === name;\n    };\n    const hasContentEditableFalseParent = (root, node) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== root) {\n        if (isContentEditableFalse$b(currentNode)) {\n          return true;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return false;\n    };\n    const findTextNodeRelative = (dom, isAfterNode, collapsed, left, startNode) => {\n      const body = dom.getRoot();\n      const nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      const parentNode = startNode.parentNode;\n      let lastInlineElement;\n      let node;\n      if (!parentNode) {\n        return Optional.none();\n      }\n      const parentBlockContainer = dom.getParent(parentNode, dom.isBlock) || body;\n      if (left && isBr$6(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(parentNode, dom.nodeIndex(startNode)));\n      }\n      const walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$a(node) && node.data.length > 0) {\n          if (!hasParentWithName(node, body, 'A')) {\n            return Optional.some(CaretPosition(node, left ? node.data.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (isComment(lastInlineElement)) {\n        return Optional.none();\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    const normalizeEndPoint = (dom, collapsed, start, rng) => {\n      const body = dom.getRoot();\n      let node;\n      let normalized = false;\n      let container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      const isAfterNode = isElement$6(container) && offset === container.childNodes.length;\n      const nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      let directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$6(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$2(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$a(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$2(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (isDetails(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && !isTable$2(container)) {\n            node = container;\n            const walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$b(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$a(node) && node.data.length > 0) {\n                offset = directionLeft ? 0 : node.data.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCellOrCaption(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$a(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(pos => {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$6(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$6(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(pos => {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$a(container) && offset === container.data.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(pos => {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized && container ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    const normalize$2 = (dom, rng) => {\n      const collapsed = rng.collapsed, normRng = rng.cloneRange();\n      const startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(pos => {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(pos => {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    const splitText = (node, offset) => {\n      return node.splitText(offset);\n    };\n    const split = rng => {\n      let startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$a(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.data.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            const newContainer = splitText(endContainer, endOffset).previousSibling;\n            startContainer = endContainer = newContainer;\n            endOffset = newContainer.data.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$a(startContainer) && startOffset > 0 && startOffset < startContainer.data.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$a(endContainer) && endOffset > 0 && endOffset < endContainer.data.length) {\n          const newContainer = splitText(endContainer, endOffset).previousSibling;\n          endContainer = newContainer;\n          endOffset = newContainer.data.length;\n        }\n      }\n      return {\n        startContainer,\n        startOffset,\n        endContainer,\n        endOffset\n      };\n    };\n\n    const RangeUtils = dom => {\n      const walk = (rng, callback) => {\n        return walk$3(dom, rng, callback);\n      };\n      const split$1 = split;\n      const normalize = rng => {\n        return normalize$2(dom, rng).fold(never, normalizedRng => {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      const expand = (rng, options = { type: 'word' }) => {\n        if (options.type === 'word') {\n          const rangeLike = expandRng(dom, rng, [{ inline: 'span' }]);\n          const newRange = dom.createRng();\n          newRange.setStart(rangeLike.startContainer, rangeLike.startOffset);\n          newRange.setEnd(rangeLike.endContainer, rangeLike.endOffset);\n          return newRange;\n        }\n        return rng;\n      };\n      return {\n        walk,\n        split: split$1,\n        expand,\n        normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    const Dimension = (name, getOffset) => {\n      const set = (element, h) => {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        const dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      const get = element => {\n        const r = getOffset(element);\n        if (r <= 0 || r === null) {\n          const css = get$7(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      const getOuter = get;\n      const aggregate = (element, properties) => foldl(properties, (acc, property) => {\n        const val = get$7(element, property);\n        const value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n      const max = (element, value, properties) => {\n        const cumulativeInclusions = aggregate(element, properties);\n        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set,\n        get,\n        getOuter,\n        aggregate,\n        max\n      };\n    };\n\n    const api = Dimension('height', element => {\n      const dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    const get$2 = element => api.get(element);\n\n    const getDocument = () => SugarElement.fromDom(document);\n\n    const walkUp = (navigation, doc) => {\n      const frame = navigation.view(doc);\n      return frame.fold(constant([]), f => {\n        const parent = navigation.owner(f);\n        const rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    const pathTo = (element, navigation) => {\n      const d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    const view = doc => {\n      var _a;\n      const element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    const owner = element => documentOrOwner(element);\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    const find = element => {\n      const doc = getDocument();\n      const scroll = get$5(doc);\n      const frames = pathTo(element, Navigation);\n      const offset = viewport(element);\n      const r = foldr(frames, (b, a) => {\n        const loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    const excludeFromDescend = element => name(element) === 'textarea';\n    const fireScrollIntoViewEvent = (editor, data) => {\n      const scrollEvent = editor.dispatch('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    const fireAfterScrollIntoViewEvent = (editor, data) => {\n      editor.dispatch('AfterScrollIntoView', data);\n    };\n    const descend = (element, offset) => {\n      const children = children$1(element);\n      if (children.length === 0 || excludeFromDescend(element)) {\n        return {\n          element,\n          offset\n        };\n      } else if (offset < children.length && !excludeFromDescend(children[offset])) {\n        return {\n          element: children[offset],\n          offset: 0\n        };\n      } else {\n        const last = children[children.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element,\n            offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$b(last)) {\n            return {\n              element: last,\n              offset: get$3(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children$1(last).length\n            };\n          }\n        }\n      }\n    };\n    const markerInfo = (element, cleanupFun) => {\n      const pos = absolute(element);\n      const height = get$2(element);\n      return {\n        element,\n        bottom: pos.top + height,\n        height,\n        pos,\n        cleanup: cleanupFun\n      };\n    };\n    const createMarker$1 = (element, offset) => {\n      const startPoint = descend(element, offset);\n      const span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$3(startPoint.element, span);\n      return markerInfo(span, () => remove$5(span));\n    };\n    const elementMarker = element => markerInfo(SugarElement.fromDom(element), noop);\n    const withMarker = (editor, f, rng, alignToTop) => {\n      preserveWith(editor, (_s, _e) => applyWithMarker(editor, f, rng, alignToTop), rng);\n    };\n    const withScrollEvents = (editor, doc, f, marker, alignToTop) => {\n      const data = {\n        elm: marker.element.dom,\n        alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      const scrollTop = get$5(doc).top;\n      f(editor, doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    const applyWithMarker = (editor, f, rng, alignToTop) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      const marker = createMarker$1(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    const withElement = (editor, element, f, alignToTop) => {\n      const doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    const preserveWith = (editor, f, rng) => {\n      const startElement = rng.startContainer;\n      const startOffset = rng.startOffset;\n      const endElement = rng.endContainer;\n      const endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      const newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    const scrollToMarker = (editor, marker, viewHeight, alignToTop, doc) => {\n      const pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        const y = pos.top - viewHeight + marker.height;\n        to(-editor.getBody().getBoundingClientRect().left, y, doc);\n      }\n    };\n    const intoWindowIfNeeded = (editor, doc, scrollTop, viewHeight, marker, alignToTop) => {\n      const viewportBottom = viewHeight + scrollTop;\n      const markerTop = marker.pos.top;\n      const markerBottom = marker.bottom;\n      const largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(editor, marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        const align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(editor, marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(editor, marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    const intoWindow = (editor, doc, scrollTop, marker, alignToTop) => {\n      const viewHeight = defaultView(doc).dom.innerHeight;\n      intoWindowIfNeeded(editor, doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    const intoFrame = (editor, doc, scrollTop, marker, alignToTop) => {\n      const frameViewHeight = defaultView(doc).dom.innerHeight;\n      intoWindowIfNeeded(editor, doc, scrollTop, frameViewHeight, marker, alignToTop);\n      const op = find(marker.element);\n      const viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    const rangeIntoWindow = (editor, rng, alignToTop) => withMarker(editor, intoWindow, rng, alignToTop);\n    const elementIntoWindow = (editor, element, alignToTop) => withElement(editor, element, intoWindow, alignToTop);\n    const rangeIntoFrame = (editor, rng, alignToTop) => withMarker(editor, intoFrame, rng, alignToTop);\n    const elementIntoFrame = (editor, element, alignToTop) => withElement(editor, element, intoFrame, alignToTop);\n    const scrollElementIntoView = (editor, element, alignToTop) => {\n      const scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    const scrollRangeIntoView = (editor, rng, alignToTop) => {\n      const scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    const focus$1 = (element, preventScroll = false) => element.dom.focus({ preventScroll });\n    const hasFocus$1 = element => {\n      const root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    const active$1 = (root = getDocument()) => Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    const search = element => active$1(getRootNode(element)).filter(e => element.dom.contains(e.dom));\n\n    const clamp$1 = (offset, element) => {\n      const max = isText$b(element) ? get$3(element).length : children$1(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    const normalizeRng = rng => SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    const isOrContains = (root, elm) => !isRestrictedNode(elm.dom) && (contains(root, elm) || eq(root, elm));\n    const isRngInRoot = root => rng => isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n    const shouldStore = editor => editor.inline || Env.browser.isFirefox();\n    const nativeRangeToSelectionRange = r => SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    const readRange = win => {\n      const selection = win.getSelection();\n      const rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    const getBookmark = root => {\n      const win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    const validate = (root, bookmark) => Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    const bookmarkToNativeRng = bookmark => {\n      const rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    const store = editor => {\n      const newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    const getRng = editor => {\n      const bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(x => validate(SugarElement.fromDom(editor.getBody()), x)).bind(bookmarkToNativeRng);\n    };\n    const restore = editor => {\n      getRng(editor).each(rng => editor.selection.setRng(rng));\n    };\n\n    const isEditorUIElement$1 = elm => {\n      const className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    const FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    const wrappedSetTimeout = (callback, time) => {\n      if (!isNumber(time)) {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    const wrappedSetInterval = (callback, time) => {\n      if (!isNumber(time)) {\n        time = 0;\n      }\n      return setInterval(callback, time);\n    };\n    const Delay = {\n      setEditorTimeout: (editor, callback, time) => {\n        return wrappedSetTimeout(() => {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: (editor, callback, time) => {\n        const timer = wrappedSetInterval(() => {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      }\n    };\n\n    const isManualNodeChange = e => {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    const registerPageMouseUp = (editor, throttledStore) => {\n      const mouseUpPage = () => {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', () => {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    const registerMouseUp = (editor, throttledStore) => {\n      editor.on('mouseup touchend', _e => {\n        throttledStore.throttle();\n      });\n    };\n    const registerEditorEvents = (editor, throttledStore) => {\n      registerMouseUp(editor, throttledStore);\n      editor.on('keyup NodeChange AfterSetSelectionRange', e => {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    const register$6 = editor => {\n      const throttledStore = first$1(() => {\n        store(editor);\n      }, 0);\n      editor.on('init', () => {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', () => {\n        throttledStore.cancel();\n      });\n    };\n\n    let documentFocusInHandler;\n    const DOM$9 = DOMUtils.DOM;\n    const isEditorUIElement = elm => {\n      return isElement$6(elm) && FocusManager.isEditorUIElement(elm);\n    };\n    const isEditorContentAreaElement = elm => {\n      const classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    const isUIElement = (editor, elm) => {\n      const customSelector = getCustomUiSelector(editor);\n      const parent = DOM$9.getParent(elm, elm => {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    const getActiveElement = editor => {\n      try {\n        const root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active$1(root).fold(() => document.body, x => x.dom);\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    const registerEvents$1 = (editorManager, e) => {\n      const editor = e.editor;\n      register$6(editor);\n      const toggleContentAreaOnFocus = (editor, fn) => {\n        if (shouldHighlightOnFocus(editor) && editor.inline !== true) {\n          const contentArea = SugarElement.fromDom(editor.getContainer());\n          fn(contentArea, 'tox-edit-focus');\n        }\n      };\n      editor.on('focusin', () => {\n        const focusedEditor = editorManager.focusedEditor;\n        if (isEditorContentAreaElement(getActiveElement(editor))) {\n          toggleContentAreaOnFocus(editor, add$2);\n        }\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.dispatch('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.dispatch('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', () => {\n        Delay.setEditorTimeout(editor, () => {\n          const focusedEditor = editorManager.focusedEditor;\n          if (!isEditorContentAreaElement(getActiveElement(editor)) || focusedEditor !== editor) {\n            toggleContentAreaOnFocus(editor, remove$7);\n          }\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.dispatch('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = e => {\n          const activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(target => {\n              const elem = target;\n              if (elem.ownerDocument === document) {\n                if (elem !== document.body && !isUIElement(activeEditor, elem) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.dispatch('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$9.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    const unregisterDocumentEvents = (editorManager, e) => {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor && documentFocusInHandler) {\n        DOM$9.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    const setup$w = editorManager => {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    const getContentEditableHost = (editor, node) => editor.dom.getParent(node, node => editor.dom.getContentEditable(node) === 'true');\n    const getCollapsedNode = rng => rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    const getFocusInElement = (root, rng) => getCollapsedNode(rng).bind(node => {\n      if (isTableSection(node)) {\n        return Optional.some(node);\n      } else if (!contains(root, node)) {\n        return Optional.some(root);\n      } else {\n        return Optional.none();\n      }\n    });\n    const normalizeSelection = (editor, rng) => {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(elm => {\n        return firstPositionIn(elm.dom);\n      }).fold(() => {\n        editor.selection.normalize();\n      }, caretPos => editor.selection.setRng(caretPos.toRange()));\n    };\n    const focusBody = body => {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    const hasElementFocus = elm => hasFocus$1(elm) || search(elm).isSome();\n    const hasIframeFocus = editor => isNonNullable(editor.iframeElement) && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    const hasInlineFocus = editor => {\n      const rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    const hasUiFocus = editor => {\n      const dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active$1(dos).filter(elem => !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom)).isSome();\n    };\n    const hasFocus = editor => editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    const hasEditorOrUiFocus = editor => hasFocus(editor) || hasUiFocus(editor);\n    const focusEditor = editor => {\n      const selection = editor.selection;\n      const body = editor.getBody();\n      let rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (isNonNullable(editor.bookmark) && !hasFocus(editor)) {\n        getRng(editor).each(bookmarkRng => {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      const contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (contentEditableHost && editor.dom.isChildOf(contentEditableHost, body)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.browser.isOpera()) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.browser.isFirefox() || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    const activateEditor = editor => editor.editorManager.setActive(editor);\n    const focus = (editor, skipFocus) => {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    const isEditableRange = (dom, rng) => {\n      if (rng.collapsed) {\n        return dom.isEditable(rng.startContainer);\n      } else {\n        return dom.isEditable(rng.startContainer) && dom.isEditable(rng.endContainer);\n      }\n    };\n\n    const getEndpointElement = (root, rng, start, real, resolve) => {\n      const container = start ? rng.startContainer : rng.endContainer;\n      const offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(elm => !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm).bind(elm => isElement$7(elm) ? Optional.some(elm) : parent(elm).filter(isElement$7)).map(elm => elm.dom).getOr(root);\n    };\n    const getStart = (root, rng, real = false) => getEndpointElement(root, rng, true, real, (elm, offset) => Math.min(childNodesCount(elm), offset));\n    const getEnd$1 = (root, rng, real = false) => getEndpointElement(root, rng, false, real, (elm, offset) => offset > 0 ? offset - 1 : offset);\n    const skipEmptyTextNodes = (node, forwards) => {\n      const orig = node;\n      while (node && isText$a(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    const getNode = (root, rng) => {\n      if (!rng) {\n        return root;\n      }\n      let startContainer = rng.startContainer;\n      let endContainer = rng.endContainer;\n      const startOffset = rng.startOffset;\n      const endOffset = rng.endOffset;\n      let node = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              node = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (isText$a(startContainer) && isText$a(endContainer)) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            node = startContainer;\n          }\n        }\n      }\n      const elm = isText$a(node) ? node.parentNode : node;\n      return isHTMLElement(elm) ? elm : root;\n    };\n    const getSelectedBlocks = (dom, rng, startElm, endElm) => {\n      const selectedBlocks = [];\n      const root = dom.getRoot();\n      const start = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      const end = dom.getParent(endElm || getEnd$1(root, rng, rng.collapsed), dom.isBlock);\n      if (start && start !== root) {\n        selectedBlocks.push(start);\n      }\n      if (start && end && start !== end) {\n        let node;\n        const walker = new DomTreeWalker(start, root);\n        while ((node = walker.next()) && node !== end) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (end && start !== end && end !== root) {\n        selectedBlocks.push(end);\n      }\n      return selectedBlocks;\n    };\n    const select = (dom, node, content) => Optional.from(node).bind(node => Optional.from(node.parentNode).map(parent => {\n      const idx = dom.nodeIndex(node);\n      const rng = dom.createRng();\n      rng.setStart(parent, idx);\n      rng.setEnd(parent, idx + 1);\n      if (content) {\n        moveEndPoint(dom, rng, node, true);\n        moveEndPoint(dom, rng, node, false);\n      }\n      return rng;\n    }));\n\n    const processRanges = (editor, ranges) => map$3(ranges, range => {\n      const evt = editor.dispatch('GetSelectionRange', { range });\n      return evt.range !== range ? evt.range : range;\n    });\n\n    const getEnd = element => name(element) === 'img' ? 1 : getOption(element).fold(() => children$1(element).length, v => v.length);\n    const isTextNodeWithCursorPosition = el => getOption(el).filter(text => text.trim().length !== 0 || text.indexOf(nbsp) > -1).isSome();\n    const isContentEditableFalse$5 = elem => isHTMLElement$1(elem) && get$9(elem, 'contenteditable') === 'false';\n    const elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    const isCursorPosition = elem => {\n      const hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name(elem)) || isContentEditableFalse$5(elem);\n    };\n\n    const first = element => descendant$2(element, isCursorPosition);\n    const last = element => descendantRtl(element, isCursorPosition);\n    const descendantRtl = (scope, predicate) => {\n      const descend = element => {\n        const children = children$1(element);\n        for (let i = children.length - 1; i >= 0; i--) {\n          const child = children[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    const autocompleteSelector = '[data-mce-autocompleter]';\n    const create$9 = (editor, range) => {\n      if (findIn(SugarElement.fromDom(editor.getBody())).isNone()) {\n        const wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$1(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(elm => elm.dom.normalize());\n        last(wrapper).map(last => {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n      }\n    };\n    const detect$1 = elm => closest$3(elm, autocompleteSelector);\n    const findIn = elm => descendant$1(elm, autocompleteSelector);\n    const remove$2 = (editor, elm) => findIn(elm).each(wrapper => {\n      const bookmark = editor.selection.getBookmark();\n      unwrap(wrapper);\n      editor.selection.moveToBookmark(bookmark);\n    });\n\n    const typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    const walk$2 = (node, root, prev) => {\n      const startName = prev ? 'lastChild' : 'firstChild';\n      const siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        let sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (let parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n      return undefined;\n    };\n    const isEmptyTextNode = node => {\n      var _a;\n      const text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n      if (!isWhitespaceText(text)) {\n        return false;\n      }\n      const parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(text)) {\n        return false;\n      }\n      return true;\n    };\n    const isNonEmptyElement = node => {\n      const isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    class AstNode {\n      static create(name, attrs) {\n        const node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$d(attrs, (value, attrName) => {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      }\n      constructor(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      replace(node) {\n        const self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      }\n      attr(name, value) {\n        const self = this;\n        if (!isString(name)) {\n          if (isNonNullable(name)) {\n            each$d(name, (value, key) => {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        const attrs = self.attributes;\n        if (attrs) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                let i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              let i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name,\n                value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n        return undefined;\n      }\n      clone() {\n        const self = this;\n        const clone = new AstNode(self.name, self.type);\n        const selfAttrs = self.attributes;\n        if (selfAttrs) {\n          const cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (let i = 0, l = selfAttrs.length; i < l; i++) {\n            const selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        return clone;\n      }\n      wrap(wrapper) {\n        const self = this;\n        if (self.parent) {\n          self.parent.insert(wrapper, self);\n          wrapper.append(self);\n        }\n        return self;\n      }\n      unwrap() {\n        const self = this;\n        for (let node = self.firstChild; node;) {\n          const next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      }\n      remove() {\n        const self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else if (prev) {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else if (next) {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      }\n      append(node) {\n        const self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        const last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      }\n      insert(node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        const parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else if (refNode.prev) {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else if (refNode.next) {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      }\n      getAll(name) {\n        const self = this;\n        const collection = [];\n        for (let node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      }\n      children() {\n        const self = this;\n        const collection = [];\n        for (let node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      }\n      empty() {\n        const self = this;\n        if (self.firstChild) {\n          const nodes = [];\n          for (let node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      }\n      isEmpty(elements, whitespace = {}, predicate) {\n        var _a;\n        const self = this;\n        let node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText((_a = node.value) !== null && _a !== void 0 ? _a : '')) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      }\n      walk(prev) {\n        return walk$2(this, null, prev);\n      }\n    }\n\n    const unescapedTextParents = Tools.makeMap('NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT', ' ');\n    const containsZwsp = node => isString(node.nodeValue) && node.nodeValue.includes(ZWSP$1);\n    const getTemporaryNodeSelector = tempAttrs => `${ tempAttrs.length === 0 ? '' : `${ map$3(tempAttrs, attr => `[${ attr }]`).join(',') },` }[data-mce-bogus=\"all\"]`;\n    const getTemporaryNodes = (tempAttrs, body) => body.querySelectorAll(getTemporaryNodeSelector(tempAttrs));\n    const createZwspCommentWalker = body => document.createTreeWalker(body, NodeFilter.SHOW_COMMENT, node => containsZwsp(node) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP);\n    const createUnescapedZwspTextWalker = body => document.createTreeWalker(body, NodeFilter.SHOW_TEXT, node => {\n      if (containsZwsp(node)) {\n        const parent = node.parentNode;\n        return parent && has$2(unescapedTextParents, parent.nodeName) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n      } else {\n        return NodeFilter.FILTER_SKIP;\n      }\n    });\n    const hasZwspComment = body => createZwspCommentWalker(body).nextNode() !== null;\n    const hasUnescapedZwspText = body => createUnescapedZwspTextWalker(body).nextNode() !== null;\n    const hasTemporaryNode = (tempAttrs, body) => body.querySelector(getTemporaryNodeSelector(tempAttrs)) !== null;\n    const trimTemporaryNodes = (tempAttrs, body) => {\n      each$e(getTemporaryNodes(tempAttrs, body), elm => {\n        const element = SugarElement.fromDom(elm);\n        if (get$9(element, 'data-mce-bogus') === 'all') {\n          remove$5(element);\n        } else {\n          each$e(tempAttrs, attr => {\n            if (has$1(element, attr)) {\n              remove$a(element, attr);\n            }\n          });\n        }\n      });\n    };\n    const emptyAllNodeValuesInWalker = walker => {\n      let curr = walker.nextNode();\n      while (curr !== null) {\n        curr.nodeValue = null;\n        curr = walker.nextNode();\n      }\n    };\n    const emptyZwspComments = compose(emptyAllNodeValuesInWalker, createZwspCommentWalker);\n    const emptyUnescapedZwspTexts = compose(emptyAllNodeValuesInWalker, createUnescapedZwspTextWalker);\n    const trim$1 = (body, tempAttrs) => {\n      const conditionalTrims = [\n        {\n          condition: curry(hasTemporaryNode, tempAttrs),\n          action: curry(trimTemporaryNodes, tempAttrs)\n        },\n        {\n          condition: hasZwspComment,\n          action: emptyZwspComments\n        },\n        {\n          condition: hasUnescapedZwspText,\n          action: emptyUnescapedZwspTexts\n        }\n      ];\n      let trimmed = body;\n      let cloned = false;\n      each$e(conditionalTrims, ({condition, action}) => {\n        if (condition(trimmed)) {\n          if (!cloned) {\n            trimmed = body.cloneNode(true);\n            cloned = true;\n          }\n          action(trimmed);\n        }\n      });\n      return trimmed;\n    };\n\n    const cleanupBogusElements = parent => {\n      const bogusElements = descendants(parent, '[data-mce-bogus]');\n      each$e(bogusElements, elem => {\n        const bogusValue = get$9(elem, 'data-mce-bogus');\n        if (bogusValue === 'all') {\n          remove$5(elem);\n        } else if (isBr$5(elem)) {\n          before$3(elem, SugarElement.fromText(zeroWidth));\n          remove$5(elem);\n        } else {\n          unwrap(elem);\n        }\n      });\n    };\n    const cleanupInputNames = parent => {\n      const inputs = descendants(parent, 'input');\n      each$e(inputs, input => {\n        remove$a(input, 'name');\n      });\n    };\n\n    const trimEmptyContents = (editor, html) => {\n      const blockName = getForcedRootBlock(editor);\n      const emptyRegExp = new RegExp(`^(<${ blockName }[^>]*>(&nbsp;|&#160;|\\\\s|\\u00a0|<br \\\\/>|)<\\\\/${ blockName }>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$`);\n      return html.replace(emptyRegExp, '');\n    };\n    const getPlainTextContent = (editor, body) => {\n      const doc = editor.getDoc();\n      const dos = getRootNode(SugarElement.fromDom(editor.getBody()));\n      const offscreenDiv = SugarElement.fromTag('div', doc);\n      set$3(offscreenDiv, 'data-mce-bogus', 'all');\n      setAll(offscreenDiv, {\n        position: 'fixed',\n        left: '-9999999px',\n        top: '0'\n      });\n      set$1(offscreenDiv, body.innerHTML);\n      cleanupBogusElements(offscreenDiv);\n      cleanupInputNames(offscreenDiv);\n      const root = getContentContainer(dos);\n      append$1(root, offscreenDiv);\n      const content = trim$2(offscreenDiv.dom.innerText);\n      remove$5(offscreenDiv);\n      return content;\n    };\n    const getContentFromBody = (editor, args, body) => {\n      let content;\n      if (args.format === 'raw') {\n        content = Tools.trim(trim$2(trim$1(body, editor.serializer.getTempAttrs()).innerHTML));\n      } else if (args.format === 'text') {\n        content = getPlainTextContent(editor, body);\n      } else if (args.format === 'tree') {\n        content = editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      const shouldTrim = args.format !== 'text' && !isWsPreserveElement(SugarElement.fromDom(body));\n      return shouldTrim && isString(content) ? Tools.trim(content) : content;\n    };\n    const getContentInternal = (editor, args) => Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), body => getContentFromBody(editor, args, body));\n\n    const makeMap$1 = Tools.makeMap;\n    const Writer = settings => {\n      const html = [];\n      settings = settings || {};\n      const indent = settings.indent;\n      const indentBefore = makeMap$1(settings.indent_before || '');\n      const indentAfter = makeMap$1(settings.indent_after || '');\n      const encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      const htmlOutput = settings.element_format !== 'xhtml';\n      return {\n        start: (name, attrs, empty) => {\n          if (indent && indentBefore[name] && html.length > 0) {\n            const value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (let i = 0, l = attrs.length; i < l; i++) {\n              const attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            const value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: name => {\n          let value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: (text, raw) => {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: text => {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: text => {\n          html.push('<!--', text, '-->');\n        },\n        pi: (name, text) => {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: text => {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: () => {\n          html.length = 0;\n        },\n        getContent: () => {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    const HtmlSerializer = (settings = {}, schema = Schema()) => {\n      const writer = Writer(settings);\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      const serialize = node => {\n        const validate = settings.validate;\n        const handlers = {\n          3: node => {\n            var _a;\n            writer.text((_a = node.value) !== null && _a !== void 0 ? _a : '', node.raw);\n          },\n          8: node => {\n            var _a;\n            writer.comment((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          7: node => {\n            writer.pi(node.name, node.value);\n          },\n          10: node => {\n            var _a;\n            writer.doctype((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          4: node => {\n            var _a;\n            writer.cdata((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          11: node => {\n            let tempNode = node;\n            if (tempNode = tempNode.firstChild) {\n              do {\n                walk(tempNode);\n              } while (tempNode = tempNode.next);\n            }\n          }\n        };\n        writer.reset();\n        const walk = node => {\n          var _a;\n          const handler = handlers[node.type];\n          if (!handler) {\n            const name = node.name;\n            const isEmpty = name in schema.getVoidElements();\n            let attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              const sortedAttrs = [];\n              sortedAttrs.map = {};\n              const elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (let i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  const attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    const attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (let i = 0, l = attrs.length; i < l; i++) {\n                  const attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    const attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(name, attrs, isEmpty);\n            if (isNonHtmlElementRootName(name)) {\n              if (isString(node.value)) {\n                writer.text(node.value, true);\n              }\n              writer.end(name);\n            } else {\n              if (!isEmpty) {\n                let child = node.firstChild;\n                if (child) {\n                  if ((name === 'pre' || name === 'textarea') && child.type === 3 && ((_a = child.value) === null || _a === void 0 ? void 0 : _a[0]) === '\\n') {\n                    writer.text('\\n', true);\n                  }\n                  do {\n                    walk(child);\n                  } while (child = child.next);\n                }\n                writer.end(name);\n              }\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else if (node.type === 3) {\n          handlers[3](node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize };\n    };\n\n    const nonInheritableStyles = new Set();\n    (() => {\n      const nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$e(nonInheritableStylesArr, style => {\n        nonInheritableStyles.add(style);\n      });\n    })();\n    const shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    const getStyleProps = (dom, node) => keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    const isNonInheritableStyle = style => nonInheritableStyles.has(style);\n    const hasInheritableStyles = (dom, node) => forall(getStyleProps(dom, node), style => !isNonInheritableStyle(style));\n    const getLonghandStyleProps = styles => filter$5(styles, style => exists(shorthandStyleProps, prop => startsWith(style, prop)));\n    const hasStyleConflict = (dom, node, parentNode) => {\n      const nodeStyleProps = getStyleProps(dom, node);\n      const parentNodeStyleProps = getStyleProps(dom, parentNode);\n      const valueMismatch = prop => {\n        var _a, _b;\n        const nodeValue = (_a = dom.getStyle(node, prop)) !== null && _a !== void 0 ? _a : '';\n        const parentValue = (_b = dom.getStyle(parentNode, prop)) !== null && _b !== void 0 ? _b : '';\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, nodeStyleProp => {\n        const propExists = props => exists(props, prop => prop === nodeStyleProp);\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          const longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    const isChar = (forward, predicate, pos) => Optional.from(pos.container()).filter(isText$a).exists(text => {\n      const delta = forward ? 0 : -1;\n      return predicate(text.data.charAt(pos.offset() + delta));\n    });\n    const isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    const isAfterSpace = curry(isChar, false, isWhiteSpace);\n    const isEmptyText = pos => {\n      const container = pos.container();\n      return isText$a(container) && (container.data.length === 0 || isZwsp$1(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    const matchesElementPosition = (before, predicate) => pos => getChildNodeAtRelativeOffset(before ? 0 : -1, pos).filter(predicate).isSome();\n    const isImageBlock = node => isImg(node) && get$7(SugarElement.fromDom(node), 'display') === 'block';\n    const isCefNode = node => isContentEditableFalse$b(node) && !isBogusAll$1(node);\n    const isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    const isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    const isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    const isAfterMedia = matchesElementPosition(false, isMedia$2);\n    const isBeforeTable = matchesElementPosition(true, isTable$2);\n    const isAfterTable = matchesElementPosition(false, isTable$2);\n    const isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    const isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    const dropLast = xs => xs.slice(0, -1);\n    const parentsUntil = (start, root, predicate) => {\n      if (contains(root, start)) {\n        return dropLast(parents$1(start, elm => {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    const parents = (start, root) => parentsUntil(start, root, never);\n    const parentsAndSelf = (start, root) => [start].concat(parents(start, root));\n\n    const navigateIgnoreEmptyTextNodes = (forward, root, from) => navigateIgnore(forward, root, from, isEmptyText);\n    const isBlock$1 = schema => el => schema.isBlock(name(el));\n    const getClosestBlock$1 = (root, pos, schema) => find$2(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$1(schema));\n    const isAtBeforeAfterBlockBoundary = (forward, root, pos, schema) => navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(newPos => getClosestBlock$1(root, pos, schema).fold(() => !isInSameBlock(newPos, pos, root.dom), fromBlock => !isInSameBlock(newPos, pos, root.dom) && contains(fromBlock, SugarElement.fromDom(newPos.container()))));\n    const isAtBlockBoundary = (forward, root, pos, schema) => getClosestBlock$1(root, pos, schema).fold(() => navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(newPos => !isInSameBlock(newPos, pos, root.dom)), parent => navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone());\n    const isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    const isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    const isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    const isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    const isBr$1 = pos => getElementFromPosition(pos).exists(isBr$5);\n    const findBr = (forward, root, pos, schema) => {\n      const parentBlocks = filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()), root), el => schema.isBlock(name(el)));\n      const scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr$1);\n    };\n    const isBeforeBr$1 = (root, pos, schema) => getElementFromPosition(pos).exists(isBr$5) || findBr(true, root, pos, schema).isSome();\n    const isAfterBr = (root, pos, schema) => getElementFromPrevPosition(pos).exists(isBr$5) || findBr(false, root, pos, schema).isSome();\n    const findPreviousBr = curry(findBr, false);\n    const findNextBr = curry(findBr, true);\n\n    const isInMiddleOfText = pos => CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    const getClosestBlock = (root, pos, schema) => {\n      const parentBlocks = filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()), root), el => schema.isBlock(name(el)));\n      return head(parentBlocks).getOr(root);\n    };\n    const hasSpaceBefore = (root, pos, schema) => {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos, schema).dom, pos).exists(isAfterSpace);\n      }\n    };\n    const hasSpaceAfter = (root, pos, schema) => {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos, schema).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    const isPreValue = value => contains$2([\n      'pre',\n      'pre-wrap'\n    ], value);\n    const isInPre = pos => getElementFromPosition(pos).bind(elm => closest$4(elm, isElement$7)).exists(elm => isPreValue(get$7(elm, 'white-space')));\n    const isAtBeginningOfBody = (root, pos) => prevPosition(root.dom, pos).isNone();\n    const isAtEndOfBody = (root, pos) => nextPosition(root.dom, pos).isNone();\n    const isAtLineBoundary = (root, pos, schema) => isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos, schema) || isAtEndOfBlock(root, pos, schema) || isAfterBr(root, pos, schema) || isBeforeBr$1(root, pos, schema);\n    const isCefBlock = node => isNonNullable(node) && isContentEditableFalse$b(node) && isBlockLike(node);\n    const isSiblingCefBlock = (root, direction) => container => {\n      return isCefBlock(new DomTreeWalker(container, root)[direction]());\n    };\n    const isBeforeCefBlock = (root, pos) => {\n      const nextPos = nextPosition(root.dom, pos).getOr(pos);\n      const isNextCefBlock = isSiblingCefBlock(root.dom, 'next');\n      return pos.isAtEnd() && (isNextCefBlock(pos.container()) || isNextCefBlock(nextPos.container()));\n    };\n    const isAfterCefBlock = (root, pos) => {\n      const prevPos = prevPosition(root.dom, pos).getOr(pos);\n      const isPrevCefBlock = isSiblingCefBlock(root.dom, 'prev');\n      return pos.isAtStart() && (isPrevCefBlock(pos.container()) || isPrevCefBlock(prevPos.container()));\n    };\n    const needsToHaveNbsp = (root, pos, schema) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos, schema) || hasSpaceBefore(root, pos, schema) || hasSpaceAfter(root, pos, schema);\n      }\n    };\n    const needsToBeNbspLeft = (root, pos, schema) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos, schema) || isBeforeBlock(root, pos, schema) || isAfterBr(root, pos, schema) || hasSpaceBefore(root, pos, schema) || isAfterCefBlock(root, pos);\n      }\n    };\n    const leanRight = pos => {\n      const container = pos.container();\n      const offset = pos.offset();\n      if (isText$a(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    const needsToBeNbspRight = (root, pos, schema) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos, schema) || isAfterBlock(root, pos, schema) || isBeforeBr$1(root, pos, schema) || hasSpaceAfter(root, pos, schema) || isBeforeCefBlock(root, pos);\n      }\n    };\n    const needsToBeNbsp = (root, pos, schema) => needsToBeNbspLeft(root, pos, schema) || needsToBeNbspRight(root, leanRight(pos), schema);\n    const isNbspAt = (text, offset) => isNbsp(text.charAt(offset));\n    const isWhiteSpaceAt = (text, offset) => isWhiteSpace(text.charAt(offset));\n    const hasNbsp = pos => {\n      const container = pos.container();\n      return isText$a(container) && contains$1(container.data, nbsp);\n    };\n    const normalizeNbspMiddle = text => {\n      const chars = text.split('');\n      return map$3(chars, (chr, i) => {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    const normalizeNbspAtStart = (root, node, makeNbsp, schema) => {\n      const text = node.data;\n      const firstPos = CaretPosition(node, 0);\n      if (!makeNbsp && isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos, schema)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else if (makeNbsp && isWhiteSpaceAt(text, 0) && needsToBeNbspLeft(root, firstPos, schema)) {\n        node.data = nbsp + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbspInMiddleOfTextNode = node => {\n      const text = node.data;\n      const newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbspAtEnd = (root, node, makeNbsp, schema) => {\n      const text = node.data;\n      const lastPos = CaretPosition(node, text.length - 1);\n      if (!makeNbsp && isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos, schema)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else if (makeNbsp && isWhiteSpaceAt(text, text.length - 1) && needsToBeNbspRight(root, lastPos, schema)) {\n        node.data = text.slice(0, -1) + nbsp;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbsps = (root, pos, schema) => {\n      const container = pos.container();\n      if (!isText$a(container)) {\n        return Optional.none();\n      }\n      if (hasNbsp(pos)) {\n        const normalized = normalizeNbspAtStart(root, container, false, schema) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container, false, schema);\n        return someIf(normalized, pos);\n      } else if (needsToBeNbsp(root, pos, schema)) {\n        const normalized = normalizeNbspAtStart(root, container, true, schema) || normalizeNbspAtEnd(root, container, true, schema);\n        return someIf(normalized, pos);\n      } else {\n        return Optional.none();\n      }\n    };\n    const normalizeNbspsInEditor = editor => {\n      const root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng()), editor.schema).each(pos => {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    const normalize$1 = (node, offset, count, schema) => {\n      if (count === 0) {\n        return;\n      }\n      const elm = SugarElement.fromDom(node);\n      const root = ancestor$4(elm, el => schema.isBlock(name(el))).getOr(elm);\n      const whitespace = node.data.slice(offset, offset + count);\n      const isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length), schema);\n      const isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0), schema);\n      node.replaceData(offset, count, normalize$4(whitespace, 4, isStartOfContent, isEndOfContent));\n    };\n    const normalizeWhitespaceAfter = (node, offset, schema) => {\n      const content = node.data.slice(offset);\n      const whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount, schema);\n    };\n    const normalizeWhitespaceBefore = (node, offset, schema) => {\n      const content = node.data.slice(0, offset);\n      const whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount, schema);\n    };\n    const mergeTextNodes = (prevNode, nextNode, schema, normalizeWhitespace, mergeToPrev = true) => {\n      const whitespaceOffset = rTrim(prevNode.data).length;\n      const newNode = mergeToPrev ? prevNode : nextNode;\n      const removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$5(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset, schema);\n      }\n      return newNode;\n    };\n\n    const needsReposition = (pos, elm) => {\n      const container = pos.container();\n      const offset = pos.offset();\n      return !CaretPosition.isTextPosition(pos) && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    const reposition = (elm, pos) => needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    const beforeOrStartOf = node => isText$a(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    const afterOrEndOf = node => isText$a(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    const getPreviousSiblingCaretPosition = elm => {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    const getNextSiblingCaretPosition = elm => {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    const findCaretPositionBackwardsFromElm = (rootElement, elm) => {\n      return Optional.from(elm.previousSibling ? elm.previousSibling : elm.parentNode).bind(node => prevPosition(rootElement, CaretPosition.before(node))).orThunk(() => nextPosition(rootElement, CaretPosition.after(elm)));\n    };\n    const findCaretPositionForwardsFromElm = (rootElement, elm) => nextPosition(rootElement, CaretPosition.after(elm)).orThunk(() => prevPosition(rootElement, CaretPosition.before(elm)));\n    const findCaretPositionBackwards = (rootElement, elm) => getPreviousSiblingCaretPosition(elm).orThunk(() => getNextSiblingCaretPosition(elm)).orThunk(() => findCaretPositionBackwardsFromElm(rootElement, elm));\n    const findCaretPositionForward = (rootElement, elm) => getNextSiblingCaretPosition(elm).orThunk(() => getPreviousSiblingCaretPosition(elm)).orThunk(() => findCaretPositionForwardsFromElm(rootElement, elm));\n    const findCaretPosition = (forward, rootElement, elm) => forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    const findCaretPosOutsideElmAfterDelete = (forward, rootElement, elm) => findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    const setSelection$1 = (editor, forward, pos) => {\n      pos.fold(() => {\n        editor.focus();\n      }, pos => {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    const eqRawNode = rawNode => elm => elm.dom === rawNode;\n    const isBlock = (editor, elm) => elm && has$2(editor.schema.getBlockElements(), name(elm));\n    const paddEmptyBlock = (elm, preserveEmptyCaret) => {\n      if (isEmpty$2(elm)) {\n        const br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        if (preserveEmptyCaret) {\n          each$e(children$1(elm), node => {\n            if (!isEmptyCaretFormatElement(node)) {\n              remove$5(node);\n            }\n          });\n        } else {\n          empty(elm);\n        }\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    const deleteNormalized = (elm, afterDeletePosOpt, schema, normalizeWhitespace) => {\n      const prevTextOpt = prevSibling(elm).filter(isText$b);\n      const nextTextOpt = nextSibling(elm).filter(isText$b);\n      remove$5(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, (prev, next, pos) => {\n        const prevNode = prev.dom, nextNode = next.dom;\n        const offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, schema, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(() => {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(elm => normalizeWhitespaceBefore(elm.dom, elm.dom.length, schema));\n          nextTextOpt.each(elm => normalizeWhitespaceAfter(elm.dom, 0, schema));\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    const isInlineElement = (editor, element) => has$2(editor.schema.getTextInlineElements(), name(element));\n    const deleteElement$2 = (editor, forward, elm, moveCaret = true, preserveEmptyCaret = false) => {\n      const afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      const parentBlock = ancestor$4(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      const normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, editor.schema, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(elm => paddEmptyBlock(elm, preserveEmptyCaret)).fold(() => {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, paddPos => {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    const strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    const hasStrongRtl = text => strongRtl.test(text);\n\n    const isInlineTarget = (editor, elm) => is$1(SugarElement.fromDom(elm), getInlineBoundarySelector(editor)) && !isTransparentBlock(editor.schema, elm) && editor.dom.isEditable(elm);\n    const isRtl = element => {\n      var _a;\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl((_a = element.textContent) !== null && _a !== void 0 ? _a : '');\n    };\n    const findInlineParents = (isInlineTarget, rootNode, pos) => filter$5(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    const findRootInline = (isInlineTarget, rootNode, pos) => {\n      const parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    const hasSameParentBlock = (rootNode, node1, node2) => {\n      const block1 = getParentBlock$3(node1, rootNode);\n      const block2 = getParentBlock$3(node2, rootNode);\n      return isNonNullable(block1) && block1 === block2;\n    };\n    const isAtZwsp = pos => isBeforeInline(pos) || isAfterInline(pos);\n    const normalizePosition = (forward, pos) => {\n      const container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$a(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$a(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    const normalizeForwards = curry(normalizePosition, true);\n    const normalizeBackwards = curry(normalizePosition, false);\n\n    const execCommandIgnoreInputEvents = (editor, command) => {\n      const inputBlocker = e => e.stopImmediatePropagation();\n      editor.on('beforeinput input', inputBlocker, true);\n      editor.getDoc().execCommand(command);\n      editor.off('beforeinput input', inputBlocker);\n    };\n    const execEditorDeleteCommand = editor => {\n      editor.execCommand('delete');\n    };\n    const execNativeDeleteCommand = editor => execCommandIgnoreInputEvents(editor, 'Delete');\n    const execNativeForwardDeleteCommand = editor => execCommandIgnoreInputEvents(editor, 'ForwardDelete');\n    const isBeforeRoot = rootNode => elm => is$2(parent(elm), rootNode, eq);\n    const isTextBlockOrListItem = element => isTextBlock$2(element) || isListItem$1(element);\n    const getParentBlock$2 = (rootNode, elm) => {\n      if (contains(rootNode, elm)) {\n        return closest$4(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    const paddEmptyBody = (editor, moveSelection = true) => {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('', { no_selection: !moveSelection });\n      }\n    };\n    const willDeleteLastPositionInElement = (forward, fromPos, elm) => lift2(firstPositionIn(elm), lastPositionIn(elm), (firstPos, lastPos) => {\n      const normalizedFirstPos = normalizePosition(true, firstPos);\n      const normalizedLastPos = normalizePosition(false, lastPos);\n      const normalizedFromPos = normalizePosition(false, fromPos);\n      if (forward) {\n        return nextPosition(elm, normalizedFromPos).exists(nextPos => nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos));\n      } else {\n        return prevPosition(elm, normalizedFromPos).exists(prevPos => prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos));\n      }\n    }).getOr(true);\n    const freefallRtl = root => {\n      const child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(() => Optional.some(root));\n    };\n    const deleteRangeContents = (editor, rng, root, moveSelection = true) => {\n      var _a;\n      rng.deleteContents();\n      const lastNode = freefallRtl(root).getOr(root);\n      const lastBlock = SugarElement.fromDom((_a = editor.dom.getParent(lastNode.dom, editor.dom.isBlock)) !== null && _a !== void 0 ? _a : root.dom);\n      if (lastBlock.dom === editor.getBody()) {\n        paddEmptyBody(editor, moveSelection);\n      } else if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(root, lastBlock)) {\n        const additionalCleanupNodes = is$2(parent(lastBlock), root) ? [] : siblings(lastBlock);\n        each$e(additionalCleanupNodes.concat(children$1(root)), node => {\n          if (!eq(node, lastBlock) && !contains(node, lastBlock) && isEmpty$2(node)) {\n            remove$5(node);\n          }\n        });\n      }\n    };\n\n    const ancestor$1 = (scope, predicate, isRoot) => ancestor$4(scope, predicate, isRoot).isSome();\n    const sibling = (scope, predicate) => sibling$1(scope, predicate).isSome();\n    const descendant = (scope, predicate) => descendant$2(scope, predicate).isSome();\n\n    const isRootFromElement = root => cur => eq(root, cur);\n    const getTableCells = table => descendants(table, 'td,th');\n    const getTable$1 = (node, isRoot) => getClosestTable(SugarElement.fromDom(node), isRoot);\n    const selectionInTableWithNestedTable = details => {\n      return lift2(details.startTable, details.endTable, (startTable, endTable) => {\n        const isStartTableParentOfEndTable = descendant(startTable, t => eq(t, endTable));\n        const isEndTableParentOfStartTable = descendant(endTable, t => eq(t, startTable));\n        return !isStartTableParentOfEndTable && !isEndTableParentOfStartTable ? details : {\n          ...details,\n          startTable: isStartTableParentOfEndTable ? Optional.none() : details.startTable,\n          endTable: isEndTableParentOfStartTable ? Optional.none() : details.endTable,\n          isSameTable: false,\n          isMultiTable: false\n        };\n      }).getOr(details);\n    };\n    const adjustQuirksInDetails = details => {\n      return selectionInTableWithNestedTable(details);\n    };\n    const getTableDetailsFromRange = (rng, isRoot) => {\n      const startTable = getTable$1(rng.startContainer, isRoot);\n      const endTable = getTable$1(rng.endContainer, isRoot);\n      const isStartInTable = startTable.isSome();\n      const isEndInTable = endTable.isSome();\n      const isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      const isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return adjustQuirksInDetails({\n        startTable,\n        endTable,\n        isStartInTable,\n        isEndInTable,\n        isSameTable,\n        isMultiTable\n      });\n    };\n\n    const tableCellRng = (start, end) => ({\n      start,\n      end\n    });\n    const tableSelection = (rng, table, cells) => ({\n      rng,\n      table,\n      cells\n    });\n    const deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    const getClosestCell$1 = (container, isRoot) => closest$3(SugarElement.fromDom(container), 'td,th', isRoot);\n    const isExpandedCellRng = cellRng => !eq(cellRng.start, cellRng.end);\n    const getTableFromCellRng = (cellRng, isRoot) => getClosestTable(cellRng.start, isRoot).bind(startParentTable => getClosestTable(cellRng.end, isRoot).bind(endParentTable => someIf(eq(startParentTable, endParentTable), startParentTable)));\n    const isSingleCellTable = (cellRng, isRoot) => !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(table => {\n      const rows = table.dom.rows;\n      return rows.length === 1 && rows[0].cells.length === 1;\n    });\n    const getCellRng = (rng, isRoot) => {\n      const startCell = getClosestCell$1(rng.startContainer, isRoot);\n      const endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    const getCellRangeFromStartTable = isRoot => startCell => getClosestTable(startCell, isRoot).bind(table => last$3(getTableCells(table)).map(endCell => tableCellRng(startCell, endCell)));\n    const getCellRangeFromEndTable = isRoot => endCell => getClosestTable(endCell, isRoot).bind(table => head(getTableCells(table)).map(startCell => tableCellRng(startCell, endCell)));\n    const getTableSelectionFromCellRng = isRoot => cellRng => getTableFromCellRng(cellRng, isRoot).map(table => tableSelection(cellRng, table, getTableCells(table)));\n    const getTableSelections = (cellRng, selectionDetails, rng, isRoot) => {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        const sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        const startCell = getClosestCell$1(rng.startContainer, isRoot);\n        const endCell = getClosestCell$1(rng.endContainer, isRoot);\n        const startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        const endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    const getCellIndex = (cells, cell) => findIndex$2(cells, x => eq(x, cell));\n    const getSelectedCells = tableSelection => lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), (startIndex, endIndex) => tableSelection.cells.slice(startIndex, endIndex + 1));\n    const isSingleCellTableContentSelected = (optCellRng, rng, isRoot) => optCellRng.exists(cellRng => isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng));\n    const unselectCells = (rng, selectionDetails) => {\n      const {startTable, endTable} = selectionDetails;\n      const otherContentRng = rng.cloneRange();\n      startTable.each(table => otherContentRng.setStartAfter(table.dom));\n      endTable.each(table => otherContentRng.setEndBefore(table.dom));\n      return otherContentRng;\n    };\n    const handleSingleTable = (cellRng, selectionDetails, rng, isRoot) => getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(({start, end}) => start.or(end)).bind(tableSelection => {\n      const {isSameTable} = selectionDetails;\n      const selectedCells = getSelectedCells(tableSelection).getOr([]);\n      if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n        return Optional.some(deleteAction.fullTable(tableSelection.table));\n      } else if (selectedCells.length > 0) {\n        if (isSameTable) {\n          return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n        } else {\n          const otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.partialTable(selectedCells, Optional.some({\n            ...selectionDetails,\n            rng: otherContentRng\n          })));\n        }\n      } else {\n        return Optional.none();\n      }\n    });\n    const handleMultiTable = (cellRng, selectionDetails, rng, isRoot) => getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(({start, end}) => {\n      const startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n      const endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n      if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n        const otherContentRng = unselectCells(rng, selectionDetails);\n        return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n      } else {\n        return Optional.none();\n      }\n    });\n    const getActionFromRange = (root, rng) => {\n      const isRoot = isRootFromElement(root);\n      const optCellRng = getCellRng(rng, isRoot);\n      const selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(cellRng => deleteAction.singleCellTable(rng, cellRng.start));\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    const cleanCells = cells => each$e(cells, cell => {\n      remove$a(cell, 'contenteditable');\n      fillWithPaddingBr(cell);\n    });\n    const getOutsideBlock = (editor, container) => Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    const handleEmptyBlock = (editor, startInTable, emptyBlock) => {\n      emptyBlock.each(block => {\n        if (startInTable) {\n          remove$5(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    const deleteContentInsideCell = (editor, cell, rng, isFirstCellInSelection) => {\n      const insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false).each(action => action());\n    };\n    const collapseAndRestoreCellSelection = editor => {\n      const selectedCells = getCellsFromEditor(editor);\n      const selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$3(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, cell => eq(cell, selectedNode))) {\n        set$3(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    const emptySingleTableCells = (editor, cells, outsideDetails) => Optional.some(() => {\n      const editorRng = editor.selection.getRng();\n      const cellsToClean = outsideDetails.bind(({rng, isStartInTable}) => {\n        const outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        const endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n    });\n    const emptyMultiTableCells = (editor, startTableCells, endTableCells, betweenRng) => Optional.some(() => {\n      const rng = editor.selection.getRng();\n      const startCell = startTableCells[0];\n      const endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      const startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      const endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n    });\n    const deleteCellContents = (editor, rng, cell, moveSelection = true) => Optional.some(() => {\n      deleteRangeContents(editor, rng, cell, moveSelection);\n    });\n    const deleteTableElement = (editor, table) => Optional.some(() => deleteElement$2(editor, false, table));\n    const deleteCellRange = (editor, rootElm, rng) => getActionFromRange(rootElm, rng).bind(action => action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor)));\n    const deleteCaptionRange = (editor, caption) => emptyElement(editor, caption);\n    const deleteTableRange = (editor, rootElm, rng, startElm) => getParentCaption(rootElm, startElm).fold(() => deleteCellRange(editor, rootElm, rng), caption => deleteCaptionRange(editor, caption));\n    const deleteRange$3 = (editor, startElm, selectedCells) => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    const getParentCell = (rootElm, elm) => find$2(parentsAndSelf(elm, rootElm), isTableCell$2);\n    const getParentCaption = (rootElm, elm) => find$2(parentsAndSelf(elm, rootElm), isTag('caption'));\n    const deleteBetweenCells = (editor, rootElm, forward, fromCell, from) => navigate(forward, editor.getBody(), from).bind(to => getParentCell(rootElm, SugarElement.fromDom(to.getNode())).bind(toCell => eq(toCell, fromCell) ? Optional.none() : Optional.some(noop)));\n    const emptyElement = (editor, elm) => Optional.some(() => {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n    });\n    const isDeleteOfLastCharPos = (fromCaption, forward, from, to) => firstPositionIn(fromCaption.dom).bind(first => lastPositionIn(fromCaption.dom).map(last => forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first))).getOr(true);\n    const emptyCaretCaption = (editor, elm) => emptyElement(editor, elm);\n    const validateCaretCaption = (rootElm, fromCaption, to) => getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).fold(() => Optional.some(noop), toCaption => someIf(!eq(toCaption, fromCaption), noop));\n    const deleteCaretInsideCaption = (editor, rootElm, forward, fromCaption, from) => navigate(forward, editor.getBody(), from).fold(() => Optional.some(noop), to => isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to));\n    const deleteCaretCells = (editor, forward, rootElm, startElm) => {\n      const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(fromCell => isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from));\n    };\n    const deleteCaretCaption = (editor, forward, rootElm, fromCaption) => {\n      const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    const isNearTable = (forward, pos) => forward ? isBeforeTable(pos) : isAfterTable(pos);\n    const isBeforeOrAfterTable = (editor, forward) => {\n      const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(pos => isNearTable(forward, pos));\n    };\n    const deleteCaret$3 = (editor, forward, startElm) => {\n      const rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(() => deleteCaretCells(editor, forward, rootElm, startElm).orThunk(() => someIf(isBeforeOrAfterTable(editor, forward), noop)), fromCaption => deleteCaretCaption(editor, forward, rootElm, fromCaption));\n    };\n    const backspaceDelete$a = (editor, forward) => {\n      const startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      const cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$3(editor, startElm, cells);\n    };\n\n    const getContentEditableRoot$1 = (root, node) => {\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        if (isContentEditableTrue$3(tempNode) || isContentEditableFalse$b(tempNode)) {\n          return tempNode;\n        }\n        tempNode = tempNode.parentNode;\n      }\n      return null;\n    };\n\n    const internalAttributesPrefixes = [\n      'data-ephox-',\n      'data-mce-',\n      'data-alloy-',\n      'data-snooker-',\n      '_'\n    ];\n    const each$9 = Tools.each;\n    const ElementUtils = editor => {\n      const dom = editor.dom;\n      const internalAttributes = new Set(editor.serializer.getTempAttrs());\n      const compare = (node1, node2) => {\n        if (node1.nodeName !== node2.nodeName || node1.nodeType !== node2.nodeType) {\n          return false;\n        }\n        const getAttribs = node => {\n          const attribs = {};\n          each$9(dom.getAttribs(node), attr => {\n            const name = attr.nodeName.toLowerCase();\n            if (name !== 'style' && !isAttributeInternal(name)) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        const compareObjects = (obj1, obj2) => {\n          for (const name in obj1) {\n            if (has$2(obj1, name)) {\n              const value = obj2[name];\n              if (isUndefined(value)) {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (const name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (isElement$6(node1) && isElement$6(node2)) {\n          if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n            return false;\n          }\n          if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n            return false;\n          }\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      const isAttributeInternal = attributeName => exists(internalAttributesPrefixes, value => startsWith(attributeName, value)) || internalAttributes.has(attributeName);\n      return {\n        compare,\n        isAttributeInternal\n      };\n    };\n\n    const isHeading = node => [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ].includes(node.name);\n    const isSummary = node => node.name === 'summary';\n\n    const traverse = (root, fn) => {\n      let node = root;\n      while (node = node.walk()) {\n        fn(node);\n      }\n    };\n    const matchNode$1 = (nodeFilters, attributeFilters, node, matches) => {\n      const name = node.name;\n      for (let ni = 0, nl = nodeFilters.length; ni < nl; ni++) {\n        const filter = nodeFilters[ni];\n        if (filter.name === name) {\n          const match = matches.nodes[name];\n          if (match) {\n            match.nodes.push(node);\n          } else {\n            matches.nodes[name] = {\n              filter,\n              nodes: [node]\n            };\n          }\n        }\n      }\n      if (node.attributes) {\n        for (let ai = 0, al = attributeFilters.length; ai < al; ai++) {\n          const filter = attributeFilters[ai];\n          const attrName = filter.name;\n          if (attrName in node.attributes.map) {\n            const match = matches.attributes[attrName];\n            if (match) {\n              match.nodes.push(node);\n            } else {\n              matches.attributes[attrName] = {\n                filter,\n                nodes: [node]\n              };\n            }\n          }\n        }\n      }\n    };\n    const findMatchingNodes = (nodeFilters, attributeFilters, node) => {\n      const matches = {\n        nodes: {},\n        attributes: {}\n      };\n      if (node.firstChild) {\n        traverse(node, childNode => {\n          matchNode$1(nodeFilters, attributeFilters, childNode, matches);\n        });\n      }\n      return matches;\n    };\n    const runFilters = (matches, args) => {\n      const run = (matchRecord, filteringAttributes) => {\n        each$d(matchRecord, match => {\n          const nodes = from(match.nodes);\n          each$e(match.filter.callbacks, callback => {\n            for (let i = nodes.length - 1; i >= 0; i--) {\n              const node = nodes[i];\n              const valueMatches = filteringAttributes ? node.attr(match.filter.name) !== undefined : node.name === match.filter.name;\n              if (!valueMatches || isNullable(node.parent)) {\n                nodes.splice(i, 1);\n              }\n            }\n            if (nodes.length > 0) {\n              callback(nodes, match.filter.name, args);\n            }\n          });\n        });\n      };\n      run(matches.nodes, false);\n      run(matches.attributes, true);\n    };\n    const filter$2 = (nodeFilters, attributeFilters, node, args = {}) => {\n      const matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      runFilters(matches, args);\n    };\n\n    const paddEmptyNode = (settings, args, isBlock, node) => {\n      const brPreferred = settings.pad_empty_with_br || args.insert;\n      if (brPreferred && isBlock(node)) {\n        const astNode = new AstNode('br', 1);\n        if (args.insert) {\n          astNode.attr('data-mce-bogus', '1');\n        }\n        node.empty().append(astNode);\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    const isPaddedWithNbsp = node => {\n      var _a;\n      return hasOnlyChild(node, '#text') && ((_a = node === null || node === void 0 ? void 0 : node.firstChild) === null || _a === void 0 ? void 0 : _a.value) === nbsp;\n    };\n    const hasOnlyChild = (node, name) => {\n      const firstChild = node === null || node === void 0 ? void 0 : node.firstChild;\n      return isNonNullable(firstChild) && firstChild === node.lastChild && firstChild.name === name;\n    };\n    const isPadded = (schema, node) => {\n      const rule = schema.getElementRule(node.name);\n      return (rule === null || rule === void 0 ? void 0 : rule.paddEmpty) === true;\n    };\n    const isEmpty = (schema, nonEmptyElements, whitespaceElements, node) => node.isEmpty(nonEmptyElements, whitespaceElements, node => isPadded(schema, node));\n    const isLineBreakNode = (node, isBlock) => isNonNullable(node) && (isBlock(node) || node.name === 'br');\n    const findClosestEditingHost = scope => {\n      let editableNode;\n      for (let node = scope; node; node = node.parent) {\n        const contentEditable = node.attr('contenteditable');\n        if (contentEditable === 'false') {\n          break;\n        } else if (contentEditable === 'true') {\n          editableNode = node;\n        }\n      }\n      return Optional.from(editableNode);\n    };\n\n    const removeOrUnwrapInvalidNode = (node, schema, originalNodeParent = node.parent) => {\n      if (schema.getSpecialElements()[node.name]) {\n        node.empty().remove();\n      } else {\n        const children = node.children();\n        for (const childNode of children) {\n          if (originalNodeParent && !schema.isValidChild(originalNodeParent.name, childNode.name)) {\n            removeOrUnwrapInvalidNode(childNode, schema, originalNodeParent);\n          }\n        }\n        node.unwrap();\n      }\n    };\n    const cleanInvalidNodes = (nodes, schema, rootNode, onCreate = noop) => {\n      const textBlockElements = schema.getTextBlockElements();\n      const nonEmptyElements = schema.getNonEmptyElements();\n      const whitespaceElements = schema.getWhitespaceElements();\n      const nonSplittableElements = Tools.makeMap('tr,td,th,tbody,thead,tfoot,table,summary');\n      const fixed = new Set();\n      const isSplittableElement = node => node !== rootNode && !nonSplittableElements[node.name];\n      for (let ni = 0; ni < nodes.length; ni++) {\n        const node = nodes[ni];\n        let parent;\n        let newParent;\n        let tempNode;\n        if (!node.parent || fixed.has(node)) {\n          continue;\n        }\n        if (textBlockElements[node.name] && node.parent.name === 'li') {\n          let sibling = node.next;\n          while (sibling) {\n            if (textBlockElements[sibling.name]) {\n              sibling.name = 'li';\n              fixed.add(sibling);\n              node.parent.insert(sibling, node.parent);\n            } else {\n              break;\n            }\n            sibling = sibling.next;\n          }\n          node.unwrap();\n          continue;\n        }\n        const parents = [node];\n        for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && isSplittableElement(parent); parent = parent.parent) {\n          parents.push(parent);\n        }\n        if (parent && parents.length > 1) {\n          if (!isInvalid(schema, node, parent)) {\n            parents.reverse();\n            newParent = parents[0].clone();\n            onCreate(newParent);\n            let currentNode = newParent;\n            for (let i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name) && i > 0) {\n                tempNode = parents[i].clone();\n                onCreate(tempNode);\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (let childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                const nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else {\n            removeOrUnwrapInvalidNode(node, schema);\n          }\n        } else if (node.parent) {\n          if (node.name === 'li') {\n            let sibling = node.prev;\n            if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n              sibling.append(node);\n              continue;\n            }\n            sibling = node.next;\n            if (sibling && (sibling.name === 'ul' || sibling.name === 'ol') && sibling.firstChild) {\n              sibling.insert(node, sibling.firstChild, true);\n              continue;\n            }\n            const wrapper = new AstNode('ul', 1);\n            onCreate(wrapper);\n            node.wrap(wrapper);\n            continue;\n          }\n          if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n            const wrapper = new AstNode('div', 1);\n            onCreate(wrapper);\n            node.wrap(wrapper);\n          } else {\n            removeOrUnwrapInvalidNode(node, schema);\n          }\n        }\n      }\n    };\n    const hasClosest = (node, parentName) => {\n      let tempNode = node;\n      while (tempNode) {\n        if (tempNode.name === parentName) {\n          return true;\n        }\n        tempNode = tempNode.parent;\n      }\n      return false;\n    };\n    const isInvalid = (schema, node, parent = node.parent) => {\n      if (!parent) {\n        return false;\n      }\n      if (schema.children[node.name] && !schema.isValidChild(parent.name, node.name)) {\n        return true;\n      }\n      if (node.name === 'a' && hasClosest(parent, 'a')) {\n        return true;\n      }\n      if (isSummary(parent) && isHeading(node)) {\n        return !((parent === null || parent === void 0 ? void 0 : parent.firstChild) === node && (parent === null || parent === void 0 ? void 0 : parent.lastChild) === node);\n      }\n      return false;\n    };\n\n    const createRange = (sc, so, ec, eo) => {\n      const rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    const normalizeBlockSelectionRange = rng => {\n      const startPos = CaretPosition.fromRangeStart(rng);\n      const endPos = CaretPosition.fromRangeEnd(rng);\n      const rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(newEndPos => {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    const normalize = rng => rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n\n    const hasOnlyOneChild$1 = node => {\n      return isNonNullable(node.firstChild) && node.firstChild === node.lastChild;\n    };\n    const isPaddingNode = node => {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    const isPaddedEmptyBlock = (schema, node) => {\n      const blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    const isEmptyFragmentElement = (schema, node) => {\n      const nonEmptyElements = schema.getNonEmptyElements();\n      return isNonNullable(node) && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    const isListFragment = (schema, fragment) => {\n      let firstChild = fragment.firstChild;\n      let lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild === null || lastChild === void 0 ? void 0 : lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    const cleanupDomFragment = domFragment => {\n      var _a, _b;\n      const firstChild = domFragment.firstChild;\n      const lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        (_a = firstChild.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        (_b = lastChild.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    const toDomFragment = (dom, serializer, fragment) => {\n      const html = serializer.serialize(fragment);\n      const domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    const listItems = elm => {\n      var _a;\n      return filter$5((_a = elm === null || elm === void 0 ? void 0 : elm.childNodes) !== null && _a !== void 0 ? _a : [], child => {\n        return child.nodeName === 'LI';\n      });\n    };\n    const isPadding = node => {\n      return node.data === nbsp || isBr$6(node);\n    };\n    const isListItemPadded = node => {\n      return isNonNullable(node === null || node === void 0 ? void 0 : node.firstChild) && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    const isEmptyOrPadded = elm => {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    const trimListItems = elms => {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    const getParentLi = (dom, node) => {\n      const parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    const isParentBlockLi = (dom, node) => {\n      return !!getParentLi(dom, node);\n    };\n    const getSplit = (parentNode, rng) => {\n      const beforeRng = rng.cloneRange();\n      const afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    const findFirstIn = (node, rootNode) => {\n      const caretPos = CaretPosition.before(node);\n      const caretWalker = CaretWalker(rootNode);\n      const newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    const findLastOf = (node, rootNode) => {\n      const caretPos = CaretPosition.after(node);\n      const caretWalker = CaretWalker(rootNode);\n      const newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    const insertMiddle = (target, elms, rootNode, rng) => {\n      const parts = getSplit(target, rng);\n      const parentElm = target.parentNode;\n      if (parentElm) {\n        parentElm.insertBefore(parts[0], target);\n        Tools.each(elms, li => {\n          parentElm.insertBefore(li, target);\n        });\n        parentElm.insertBefore(parts[1], target);\n        parentElm.removeChild(target);\n      }\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    const insertBefore$2 = (target, elms, rootNode) => {\n      const parentElm = target.parentNode;\n      if (parentElm) {\n        Tools.each(elms, elm => {\n          parentElm.insertBefore(elm, target);\n        });\n      }\n      return findFirstIn(target, rootNode);\n    };\n    const insertAfter$2 = (target, elms, rootNode, dom) => {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    const insertAtCaret$1 = (serializer, dom, rng, fragment) => {\n      const domFragment = toDomFragment(dom, serializer, fragment);\n      const liTarget = getParentLi(dom, rng.startContainer);\n      const liElms = trimListItems(listItems(domFragment.firstChild));\n      const BEGINNING = 1, END = 2;\n      const rootNode = dom.getRoot();\n      const isAt = location => {\n        const caretPos = CaretPosition.fromRangeStart(rng);\n        const caretWalker = CaretWalker(dom.getRoot());\n        const newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        const newPosNode = newPos === null || newPos === void 0 ? void 0 : newPos.getNode();\n        return newPosNode ? getParentLi(dom, newPosNode) !== liTarget : true;\n      };\n      if (!liTarget) {\n        return null;\n      } else if (isAt(BEGINNING)) {\n        return insertBefore$2(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$2(liTarget, liElms, rootNode, dom);\n      } else {\n        return insertMiddle(liTarget, liElms, rootNode, rng);\n      }\n    };\n\n    const mergeableWrappedElements = ['pre'];\n    const shouldPasteContentOnly = (dom, fragment, parentNode, root) => {\n      var _a;\n      const firstNode = fragment.firstChild;\n      const lastNode = fragment.lastChild;\n      const last = lastNode.attr('data-mce-type') === 'bookmark' ? lastNode.prev : lastNode;\n      const isPastingSingleElement = firstNode === last;\n      const isWrappedElement = contains$2(mergeableWrappedElements, firstNode.name);\n      if (isPastingSingleElement && isWrappedElement) {\n        const isContentEditable = firstNode.attr('contenteditable') !== 'false';\n        const isPastingInTheSameBlockTag = ((_a = dom.getParent(parentNode, dom.isBlock)) === null || _a === void 0 ? void 0 : _a.nodeName.toLowerCase()) === firstNode.name;\n        const isPastingInContentEditable = Optional.from(getContentEditableRoot$1(root, parentNode)).forall(isContentEditableTrue$3);\n        return isContentEditable && isPastingInTheSameBlockTag && isPastingInContentEditable;\n      } else {\n        return false;\n      }\n    };\n    const isTableCell = isTableCell$3;\n    const isTableCellContentSelected = (dom, rng, cell) => {\n      if (isNonNullable(cell)) {\n        const endCell = dom.getParent(rng.endContainer, isTableCell);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    const validInsertion = (editor, value, parentNode) => {\n      var _a;\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        (_a = parentNode.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        const node = parentNode.firstChild;\n        const node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value, { no_events: true });\n        }\n      }\n    };\n    const trimBrsFromTableCell = (dom, elm, schema) => {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(el => trimBlockTrailingBr(el, schema));\n    };\n    const reduceInlineTextElements = (editor, merge) => {\n      const textInlineElements = editor.schema.getTextInlineElements();\n      const dom = editor.dom;\n      if (merge) {\n        const root = editor.getBody();\n        const elementUtils = ElementUtils(editor);\n        Tools.each(dom.select('*[data-mce-fragment]'), node => {\n          const isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (let parentNode = node.parentElement; isNonNullable(parentNode) && parentNode !== root; parentNode = parentNode.parentElement) {\n              const styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    const markFragmentElements = fragment => {\n      let node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    const unmarkFragmentElements = elm => {\n      Tools.each(elm.getElementsByTagName('*'), elm => {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    const isPartOfFragment = node => {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    const canHaveChildren = (editor, node) => {\n      return isNonNullable(node) && !editor.schema.getVoidElements()[node.nodeName];\n    };\n    const moveSelectionToMarker = (editor, marker) => {\n      var _a, _b, _c;\n      let nextRng;\n      const dom = editor.dom;\n      const selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      const parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (parentEditableElm && dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      let rng = dom.createRng();\n      const node = marker.previousSibling;\n      if (isText$a(node)) {\n        rng.setStart(node, (_b = (_a = node.nodeValue) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n        const node2 = marker.nextSibling;\n        if (isText$a(node2)) {\n          node.appendData(node2.data);\n          (_c = node2.parentNode) === null || _c === void 0 ? void 0 : _c.removeChild(node2);\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      const findNextCaretRng = rng => {\n        let caretPos = CaretPosition.fromRangeStart(rng);\n        const caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        return caretPos === null || caretPos === void 0 ? void 0 : caretPos.toRange();\n      };\n      const parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        const isCell = isTableCell(parentBlock);\n        empty(SugarElement.fromDom(parentBlock));\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isCell && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', isCell ? {} : { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    const deleteSelectedContent = editor => {\n      const dom = editor.dom;\n      const rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      const startCell = dom.getParent(rng.startContainer, isTableCell);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else if (rng.startContainer === rng.endContainer && rng.endOffset - rng.startOffset === 1 && isText$a(rng.startContainer.childNodes[rng.startOffset])) {\n        rng.deleteContents();\n      } else {\n        editor.getDoc().execCommand('Delete', false);\n      }\n    };\n    const findMarkerNode = scope => {\n      for (let markerNode = scope; markerNode; markerNode = markerNode.walk()) {\n        if (markerNode.attr('id') === 'mce_marker') {\n          return Optional.some(markerNode);\n        }\n      }\n      return Optional.none();\n    };\n    const notHeadingsInSummary = (dom, node, fragment) => {\n      var _a;\n      return exists(fragment.children(), isHeading) && ((_a = dom.getParent(node, dom.isBlock)) === null || _a === void 0 ? void 0 : _a.nodeName) === 'SUMMARY';\n    };\n    const insertHtmlAtCaret = (editor, value, details) => {\n      var _a, _b;\n      const selection = editor.selection;\n      const dom = editor.dom;\n      const parser = editor.parser;\n      const merge = details.merge;\n      const serializer = HtmlSerializer({ validate: true }, editor.schema);\n      const bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      if (!details.preserve_zwsp) {\n        value = trim$2(value);\n      }\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      let rng = selection.getRng();\n      const caretElement = rng.startContainer;\n      const body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      const parentNode = selection.getNode();\n      const parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      const fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        if (rng) {\n          selection.setRng(rng);\n        }\n        return value;\n      }\n      if (details.paste === true && shouldPasteContentOnly(dom, fragment, parentNode, editor.getBody())) {\n        (_a = fragment.firstChild) === null || _a === void 0 ? void 0 : _a.unwrap();\n      }\n      markFragmentElements(fragment);\n      let node = fragment.lastChild;\n      if (node && node.attr('id') === 'mce_marker') {\n        const marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (node.parent && editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid && !notHeadingsInSummary(dom, parentNode, fragment)) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        let parentNode = selection.getNode();\n        let tempNode;\n        const rootNode = editor.getBody();\n        if (isDocument$1(parentNode)) {\n          parentNode = tempNode = rootNode;\n        } else {\n          tempNode = parentNode;\n        }\n        while (tempNode && tempNode !== rootNode) {\n          parentNode = tempNode;\n          tempNode = tempNode.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        const root = parser.parse(value);\n        const markerNode = findMarkerNode(root);\n        const editingHost = markerNode.bind(findClosestEditingHost).getOr(root);\n        markerNode.each(marker => marker.replace(fragment));\n        const toExtract = fragment.children();\n        const parent = (_b = fragment.parent) !== null && _b !== void 0 ? _b : root;\n        fragment.unwrap();\n        const invalidChildren = filter$5(toExtract, node => isInvalid(editor.schema, node, parent));\n        cleanInvalidNodes(invalidChildren, editor.schema, editingHost);\n        filter$2(parser.getNodeFilters(), parser.getAttributeFilters(), root);\n        value = serializer.serialize(root);\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart(), editor.schema);\n      updateCaret(editor.schema, editor.getBody(), selection.getStart());\n      return value;\n    };\n\n    const isTreeNode = content => content instanceof AstNode;\n\n    const moveSelection = editor => {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(pos => {\n          const node = pos.getNode();\n          const caretPos = isTable$2(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    const setEditorHtml = (editor, html, noSelection) => {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    const setContentString = (editor, body, content, args) => {\n      content = trim$2(content);\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        const padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        const forcedRootBlockName = getForcedRootBlock(editor);\n        if (editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = padd;\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        return {\n          content,\n          html: content\n        };\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: false }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        const trimmedHtml = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, trimmedHtml, args.no_selection);\n        return {\n          content: trimmedHtml,\n          html: trimmedHtml\n        };\n      }\n    };\n    const setContentTree = (editor, body, content, args) => {\n      filter$2(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      const html = HtmlSerializer({ validate: false }, editor.schema).serialize(content);\n      const trimmedHtml = trim$2(isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html));\n      setEditorHtml(editor, trimmedHtml, args.no_selection);\n      return {\n        content,\n        html: trimmedHtml\n      };\n    };\n    const setContentInternal = (editor, content, args) => {\n      return Optional.from(editor.getBody()).map(body => {\n        if (isTreeNode(content)) {\n          return setContentTree(editor, body, content, args);\n        } else {\n          return setContentString(editor, body, content, args);\n        }\n      }).getOr({\n        content,\n        html: isTreeNode(args.content) ? '' : args.content\n      });\n    };\n\n    const ensureIsRoot = isRoot => isFunction(isRoot) ? isRoot : never;\n    const ancestor = (scope, transform, isRoot) => {\n      let element = scope.dom;\n      const stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        const transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$1 = (scope, transform, isRoot) => {\n      const current = transform(scope);\n      const stop = ensureIsRoot(isRoot);\n      return current.orThunk(() => stop(scope) ? Optional.none() : ancestor(scope, transform, stop));\n    };\n\n    const isEq$3 = isEq$5;\n    const matchesUnInheritedFormatSelector = (ed, node, name) => {\n      const formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (let i = 0; i < formatList.length; i++) {\n          const format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    const matchParents = (editor, node, name, vars, similar) => {\n      const root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      const matchedNode = editor.dom.getParent(node, elm => {\n        if (matchesUnInheritedFormatSelector(editor, elm, name)) {\n          return true;\n        }\n        return elm.parentNode === root || !!matchNode(editor, elm, name, vars, true);\n      });\n      return !!matchNode(editor, matchedNode, name, vars, similar);\n    };\n    const matchName = (dom, node, format) => {\n      if (isInlineFormat(format) && isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$3(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$6(node) && dom.is(node, format.selector);\n      }\n      return false;\n    };\n    const matchItems = (dom, node, format, itemName, similar, vars) => {\n      const items = format[itemName];\n      const matchAttributes = itemName === 'attributes';\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (!isArrayLike(items)) {\n          for (const key in items) {\n            if (has$2(items, key)) {\n              const value = matchAttributes ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              const expectedValue = replaceVars(items[key], vars);\n              const isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (let i = 0; i < items.length; i++) {\n            if (matchAttributes ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    const matchNode = (ed, node, name, vars, similar) => {\n      const formatList = ed.formatter.get(name);\n      const dom = ed.dom;\n      if (formatList && isElement$6(node)) {\n        for (let i = 0; i < formatList.length; i++) {\n          const format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            const classes = format.classes;\n            if (classes) {\n              for (let x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n      return undefined;\n    };\n    const match$2 = (editor, name, vars, node, similar) => {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      const startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const matchAll = (editor, names, vars) => {\n      const matchedFormatNames = [];\n      const checkedMap = {};\n      const startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, node => {\n        for (let i = 0; i < names.length; i++) {\n          const name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    const closest = (editor, names) => {\n      const isRoot = elm => eq(elm, SugarElement.fromDom(editor.getBody()));\n      const match = (elm, name) => matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      return Optional.from(editor.selection.getStart(true)).bind(rawElm => closest$1(SugarElement.fromDom(rawElm), elm => findMap(names, name => match(elm, name)), isRoot)).getOrNull();\n    };\n    const canApply = (editor, name) => {\n      const formatList = editor.formatter.get(name);\n      const dom = editor.dom;\n      if (formatList && editor.selection.isEditable()) {\n        const startNode = editor.selection.getStart();\n        const parents = getParents$2(dom, startNode);\n        for (let x = formatList.length - 1; x >= 0; x--) {\n          const format = formatList[x];\n          if (!isSelectorFormat(format)) {\n            return true;\n          }\n          for (let i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    const matchAllOnNode = (editor, node, formatNames) => foldl(formatNames, (acc, name) => {\n      const matchSimilar = isVariableFormatName(editor, name);\n      if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n        return acc.concat([name]);\n      } else {\n        return acc;\n      }\n    }, []);\n\n    const ZWSP = ZWSP$1;\n    const importNode = (ownerDocument, node) => {\n      return ownerDocument.importNode(node, true);\n    };\n    const findFirstTextNode = node => {\n      if (node) {\n        const walker = new DomTreeWalker(node, node);\n        for (let tempNode = walker.current(); tempNode; tempNode = walker.next()) {\n          if (isText$a(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      return null;\n    };\n    const createCaretContainer = fill => {\n      const caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    const trimZwspFromCaretContainer = caretContainerNode => {\n      const textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.data.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    const removeCaretContainerNode = (editor, node, moveCaret) => {\n      const dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret, true);\n      } else {\n        const rng = selection.getRng();\n        const block = dom.getParent(node, dom.isBlock);\n        const startContainer = rng.startContainer;\n        const startOffset = rng.startOffset;\n        const endContainer = rng.endContainer;\n        const endOffset = rng.endOffset;\n        const textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    const removeCaretContainer = (editor, node, moveCaret) => {\n      const dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, moveCaret);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    const insertCaretContainerNode = (editor, caretContainer, formatNode) => {\n      var _a, _b;\n      const dom = editor.dom;\n      const block = dom.getParent(formatNode, curry(isTextBlock$1, editor.schema));\n      if (block && dom.isEmpty(block)) {\n        (_a = formatNode.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          (_b = formatNode.parentNode) === null || _b === void 0 ? void 0 : _b.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    const appendNode = (parentNode, node) => {\n      parentNode.appendChild(node);\n      return node;\n    };\n    const insertFormatNodesIntoCaretContainer = (formatNodes, caretContainer) => {\n      var _a;\n      const innerMostFormatNode = foldr(formatNodes, (parentNode, formatNode) => {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      const doc = (_a = innerMostFormatNode.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      return appendNode(innerMostFormatNode, doc.createTextNode(ZWSP));\n    };\n    const cleanFormatNode = (editor, caretContainer, formatNode, name, vars, similar) => {\n      const formatter = editor.formatter;\n      const dom = editor.dom;\n      const validFormats = filter$5(keys(formatter.get()), formatName => formatName !== name && !contains$1(formatName, 'removeformat'));\n      const matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      const uniqueFormats = filter$5(matchedFormats, fmtName => !areSimilarFormats(editor, fmtName, name));\n      if (uniqueFormats.length > 0) {\n        const clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    const applyCaretFormat = (editor, name, vars) => {\n      let caretContainer;\n      const selection = editor.selection;\n      const formatList = editor.formatter.get(name);\n      if (!formatList) {\n        return;\n      }\n      const selectionRng = selection.getRng();\n      let offset = selectionRng.startOffset;\n      const container = selectionRng.startContainer;\n      const text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      const wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        const bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        let rng = expandRng(editor.dom, selectionRng, formatList);\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        let textNode = caretContainer ? findFirstTextNode(caretContainer) : null;\n        if (!caretContainer || (textNode === null || textNode === void 0 ? void 0 : textNode.data) !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    const removeCaretFormat = (editor, name, vars, similar) => {\n      const dom = editor.dom;\n      const selection = editor.selection;\n      let hasContentAfter = false;\n      const formatList = editor.formatter.get(name);\n      if (!formatList) {\n        return;\n      }\n      const rng = selection.getRng();\n      const container = rng.startContainer;\n      const offset = rng.startOffset;\n      let node = container;\n      if (isText$a(container)) {\n        if (offset !== container.data.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      const parents = [];\n      let formatNode;\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        const bookmark = selection.getBookmark();\n        rng.collapse(true);\n        let expandedRng = expandRng(dom, rng, formatList, true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        const caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        const parentsAfter = isNonNullable(caretContainer) ? dom.getParents(formatNode.parentNode, always, caretContainer) : [];\n        const newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null && caretContainer !== void 0 ? caretContainer : formatNode);\n        const cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        const caretTextNode = insertFormatNodesIntoCaretContainer([\n          ...parents,\n          ...cleanedFormatNode.toArray(),\n          ...parentsAfter\n        ], newCaretContainer);\n        if (caretContainer) {\n          removeCaretContainerNode(editor, caretContainer, isNonNullable(caretContainer));\n        }\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    const disableCaretContainer = (editor, keyCode, moveCaret) => {\n      const selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, moveCaret);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()), true);\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()), true);\n      }\n    };\n    const endsWithNbsp = element => isText$a(element) && endsWith(element.data, nbsp);\n    const setup$v = editor => {\n      editor.on('mouseup keydown', e => {\n        disableCaretContainer(editor, e.keyCode, endsWithNbsp(editor.selection.getRng().endContainer));\n      });\n    };\n    const createCaretFormat = formatNodes => {\n      const caretContainer = createCaretContainer(false);\n      const innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      return {\n        caretContainer,\n        caretPosition: CaretPosition(innerMost, 0)\n      };\n    };\n    const replaceWithCaretFormat = (targetNode, formatNodes) => {\n      const {caretContainer, caretPosition} = createCaretFormat(formatNodes);\n      before$3(SugarElement.fromDom(targetNode), caretContainer);\n      remove$5(SugarElement.fromDom(targetNode));\n      return caretPosition;\n    };\n    const createCaretFormatAtStart$1 = (rng, formatNodes) => {\n      const {caretContainer, caretPosition} = createCaretFormat(formatNodes);\n      rng.insertNode(caretContainer.dom);\n      return caretPosition;\n    };\n    const isFormatElement = (editor, element) => {\n      if (isCaretNode(element.dom)) {\n        return false;\n      }\n      const inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n\n    const postProcessHooks = {};\n    const isPre = matchNodeNames(['pre']);\n    const addPostProcessHook = (name, hook) => {\n      const hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    const postProcess$1 = (name, editor) => {\n      if (has$2(postProcessHooks, name)) {\n        each$e(postProcessHooks[name], hook => {\n          hook(editor);\n        });\n      }\n    };\n    addPostProcessHook('pre', editor => {\n      const rng = editor.selection.getRng();\n      const hasPreSibling = blocks => pre => {\n        const prev = pre.previousSibling;\n        return isPre(prev) && contains$2(blocks, prev);\n      };\n      const joinPre = (pre1, pre2) => {\n        const sPre2 = SugarElement.fromDom(pre2);\n        const doc = documentOrOwner(sPre2).dom;\n        remove$5(sPre2);\n        append(SugarElement.fromDom(pre1), [\n          SugarElement.fromTag('br', doc),\n          SugarElement.fromTag('br', doc),\n          ...children$1(sPre2)\n        ]);\n      };\n      if (!rng.collapsed) {\n        const blocks = editor.selection.getSelectedBlocks();\n        const preBlocks = filter$5(filter$5(blocks, isPre), hasPreSibling(blocks));\n        each$e(preBlocks, pre => {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    const listItemStyles = [\n      'fontWeight',\n      'fontStyle',\n      'color',\n      'fontSize',\n      'fontFamily'\n    ];\n    const hasListStyles = fmt => isObject(fmt.styles) && exists(keys(fmt.styles), name => contains$2(listItemStyles, name));\n    const findExpandedListItemFormat = formats => find$2(formats, fmt => isInlineFormat(fmt) && fmt.inline === 'span' && hasListStyles(fmt));\n    const getExpandedListItemFormat = (formatter, format) => {\n      const formatList = formatter.get(format);\n      return isArray$1(formatList) ? findExpandedListItemFormat(formatList) : Optional.none();\n    };\n    const isRngStartAtStartOfElement = (rng, elm) => prevPosition(elm, CaretPosition.fromRangeStart(rng)).isNone();\n    const isRngEndAtEndOfElement = (rng, elm) => {\n      return nextPosition(elm, CaretPosition.fromRangeEnd(rng)).exists(pos => !isBr$6(pos.getNode()) || nextPosition(elm, pos).isSome()) === false;\n    };\n    const isEditableListItem = dom => elm => isListItem$2(elm) && dom.isEditable(elm);\n    const getFullySelectedBlocks = selection => {\n      const blocks = selection.getSelectedBlocks();\n      const rng = selection.getRng();\n      if (selection.isCollapsed()) {\n        return [];\n      }\n      if (blocks.length === 1) {\n        return isRngStartAtStartOfElement(rng, blocks[0]) && isRngEndAtEndOfElement(rng, blocks[0]) ? blocks : [];\n      } else {\n        const first = head(blocks).filter(elm => isRngStartAtStartOfElement(rng, elm)).toArray();\n        const last = last$3(blocks).filter(elm => isRngEndAtEndOfElement(rng, elm)).toArray();\n        const middle = blocks.slice(1, -1);\n        return first.concat(middle).concat(last);\n      }\n    };\n    const getFullySelectedListItems = selection => filter$5(getFullySelectedBlocks(selection), isEditableListItem(selection.dom));\n    const getPartiallySelectedListItems = selection => filter$5(selection.getSelectedBlocks(), isEditableListItem(selection.dom));\n\n    const each$8 = Tools.each;\n    const isElementNode = node => isElement$6(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    const findElementSibling = (node, siblingName) => {\n      for (let sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$a(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$6(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    const mergeSiblingsNodes = (editor, prev, next) => {\n      const elementUtils = ElementUtils(editor);\n      const isPrevEditable = isHTMLElement(prev) && editor.dom.isEditable(prev);\n      const isNextEditable = isHTMLElement(next) && editor.dom.isEditable(next);\n      if (isPrevEditable && isNextEditable) {\n        const prevSibling = findElementSibling(prev, 'previousSibling');\n        const nextSibling = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prevSibling, nextSibling)) {\n          for (let sibling = prevSibling.nextSibling; sibling && sibling !== nextSibling;) {\n            const tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prevSibling.appendChild(tmpSibling);\n          }\n          editor.dom.remove(nextSibling);\n          Tools.each(Tools.grep(nextSibling.childNodes), node => {\n            prevSibling.appendChild(node);\n          });\n          return prevSibling;\n        }\n      }\n      return next;\n    };\n    const mergeSiblings = (editor, format, vars, node) => {\n      var _a;\n      if (node && format.merge_siblings !== false) {\n        const newNode = (_a = mergeSiblingsNodes(editor, getNonWhiteSpaceSibling(node), node)) !== null && _a !== void 0 ? _a : node;\n        mergeSiblingsNodes(editor, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    const clearChildStyles = (dom, format, node) => {\n      if (format.clear_child_styles) {\n        const selector = format.links ? '*:not(a)' : '*';\n        each$8(dom.select(selector, node), childNode => {\n          if (isElementNode(childNode) && dom.isEditable(childNode)) {\n            each$8(format.styles, (_value, name) => {\n              dom.setStyle(childNode, name, '');\n            });\n          }\n        });\n      }\n    };\n    const processChildElements = (node, filter, process) => {\n      each$8(node.childNodes, node => {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    const unwrapEmptySpan = (dom, node) => {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    const hasStyle = (dom, name) => node => !!(node && getStyle(dom, node, name));\n    const applyStyle = (dom, name, value) => node => {\n      dom.setStyle(node, name, value);\n      if (node.getAttribute('style') === '') {\n        node.removeAttribute('style');\n      }\n      unwrapEmptySpan(dom, node);\n    };\n\n    const removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    const MCE_ATTR_RE = /^(src|href|style)$/;\n    const each$7 = Tools.each;\n    const isEq$2 = isEq$5;\n    const isTableCellOrRow = node => /^(TR|TH|TD)$/.test(node.nodeName);\n    const isChildOfInlineParent = (dom, node, parent) => dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    const getContainer = (ed, rng, start) => {\n      let container = rng[start ? 'startContainer' : 'endContainer'];\n      let offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$6(container)) {\n        const lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$a(container) && start && offset >= container.data.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$a(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    const normalizeTableSelection = (node, start) => {\n      const prop = start ? 'firstChild' : 'lastChild';\n      const childNode = node[prop];\n      if (isTableCellOrRow(node) && childNode) {\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    const wrap$1 = (dom, node, name, attrs) => {\n      var _a;\n      const wrapper = dom.create(name, attrs);\n      (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    const wrapWithSiblings = (dom, node, next, name, attrs) => {\n      const start = SugarElement.fromDom(node);\n      const wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      const siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$3(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$4(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    const isColorFormatAndAnchor = (node, format) => format.links && node.nodeName === 'A';\n    const removeNode = (ed, node, format) => {\n      const parentNode = node.parentNode;\n      let rootBlockElm;\n      const dom = ed.dom;\n      const forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (parentNode === dom.getRoot()) {\n          if (!format.list_block || !isEq$2(node, format.list_block)) {\n            each$e(from(node.childNodes), node => {\n              if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                if (!rootBlockElm) {\n                  rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                  dom.setAttribs(rootBlockElm, getForcedRootBlockAttrs(ed));\n                } else {\n                  rootBlockElm.appendChild(node);\n                }\n              } else {\n                rootBlockElm = null;\n              }\n            });\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    const processFormatAttrOrStyle = (name, value, vars) => {\n      if (isNumber(name)) {\n        return {\n          name: value,\n          value: null\n        };\n      } else {\n        return {\n          name,\n          value: replaceVars(value, vars)\n        };\n      }\n    };\n    const removeEmptyStyleAttributeIfNeeded = (dom, elm) => {\n      if (dom.getAttrib(elm, 'style') === '') {\n        elm.removeAttribute('style');\n        elm.removeAttribute('data-mce-style');\n      }\n    };\n    const removeStyles = (dom, elm, format, vars, compareNode) => {\n      let stylesModified = false;\n      each$7(format.styles, (value, name) => {\n        const {\n          name: styleName,\n          value: styleValue\n        } = processFormatAttrOrStyle(name, value, vars);\n        const normalizedStyleValue = normalizeStyleValue(styleValue, styleName);\n        if (format.remove_similar || isNull(styleValue) || !isElement$6(compareNode) || isEq$2(getStyle(dom, compareNode, styleName), normalizedStyleValue)) {\n          dom.setStyle(elm, styleName, '');\n        }\n        stylesModified = true;\n      });\n      if (stylesModified) {\n        removeEmptyStyleAttributeIfNeeded(dom, elm);\n      }\n    };\n    const removeListStyleFormats = (editor, name, vars) => {\n      if (name === 'removeformat') {\n        each$e(getPartiallySelectedListItems(editor.selection), li => {\n          each$e(listItemStyles, name => editor.dom.setStyle(li, name, ''));\n          removeEmptyStyleAttributeIfNeeded(editor.dom, li);\n        });\n      } else {\n        getExpandedListItemFormat(editor.formatter, name).each(liFmt => {\n          each$e(getPartiallySelectedListItems(editor.selection), li => removeStyles(editor.dom, li, liFmt, vars, null));\n        });\n      }\n    };\n    const removeNodeFormatInternal = (ed, format, vars, node, compareNode) => {\n      const dom = ed.dom;\n      const elementUtils = ElementUtils(ed);\n      const schema = ed.schema;\n      if (isInlineFormat(format) && isTransparentElementName(schema, format.inline) && isTransparentBlock(schema, node) && node.parentElement === ed.getBody()) {\n        removeNode(ed, node, format);\n        return removeResult.removed();\n      }\n      if (!format.ceFalseOverride && node && dom.getContentEditableParent(node) === 'false') {\n        return removeResult.keep();\n      }\n      if (node && !matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      const elm = node;\n      const preserveAttributes = format.preserve_attributes;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(preserveAttributes)) {\n        const attrsToPreserve = filter$5(dom.getAttribs(elm), attr => contains$2(preserveAttributes, attr.name.toLowerCase()));\n        dom.removeAllAttribs(elm);\n        each$e(attrsToPreserve, attr => dom.setAttrib(elm, attr.name, attr.value));\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        removeStyles(dom, elm, format, vars, compareNode);\n        each$7(format.attributes, (value, name) => {\n          const {\n            name: attrName,\n            value: attrValue\n          } = processFormatAttrOrStyle(name, value, vars);\n          if (format.remove_similar || isNull(attrValue) || !isElement$6(compareNode) || isEq$2(dom.getAttrib(compareNode, attrName), attrValue)) {\n            if (attrName === 'class') {\n              const currentValue = dom.getAttrib(elm, attrName);\n              if (currentValue) {\n                let valueOut = '';\n                each$e(currentValue.split(/\\s+/), cls => {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, attrName, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(attrName)) {\n              elm.removeAttribute('data-mce-' + attrName);\n            }\n            if (attrName === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(attrName);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (attrName === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(attrName);\n          }\n        });\n        each$7(format.classes, value => {\n          value = replaceVars(value, vars);\n          if (!isElement$6(compareNode) || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        const attrs = dom.getAttribs(elm);\n        for (let i = 0; i < attrs.length; i++) {\n          const attrName = attrs[i].nodeName;\n          if (!elementUtils.isAttributeInternal(attrName)) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    const findFormatRoot = (editor, container, name, vars, similar) => {\n      let formatRoot;\n      if (container.parentNode) {\n        each$e(getParents$2(editor.dom, container.parentNode).reverse(), parent => {\n          if (!formatRoot && isElement$6(parent) && parent.id !== '_start' && parent.id !== '_end') {\n            const format = matchNode(editor, parent, name, vars, similar);\n            if (format && format.split !== false) {\n              formatRoot = parent;\n            }\n          }\n        });\n      }\n      return formatRoot;\n    };\n    const removeNodeFormatFromClone = (editor, format, vars, clone) => removeNodeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), newName => {\n      const fragment = editor.dom.createFragment();\n      fragment.appendChild(clone);\n      return editor.dom.rename(clone, newName);\n    }, constant(null));\n    const wrapAndSplit = (editor, formatList, formatRoot, container, target, split, format, vars) => {\n      var _a, _b;\n      let lastClone;\n      let firstClone;\n      const dom = editor.dom;\n      if (formatRoot) {\n        const formatRootParent = formatRoot.parentNode;\n        for (let parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          let clone = dom.clone(parent, false);\n          for (let i = 0; i < formatList.length; i++) {\n            clone = removeNodeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = (_a = dom.split(formatRoot, container)) !== null && _a !== void 0 ? _a : container;\n        }\n        if (lastClone && firstClone) {\n          (_b = target.parentNode) === null || _b === void 0 ? void 0 : _b.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(editor, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    const removeFormatInternal = (ed, name, vars, node, similar) => {\n      const formatList = ed.formatter.get(name);\n      const format = formatList[0];\n      const dom = ed.dom;\n      const selection = ed.selection;\n      const splitToFormatRoot = container => {\n        const formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      const isRemoveBookmarkNode = node => isBookmarkNode$1(node) && isElement$6(node) && (node.id === '_start' || node.id === '_end');\n      const removeFormatOnNode = node => exists(formatList, fmt => removeNodeFormat(ed, fmt, vars, node, node));\n      const process = node => {\n        const children = from(node.childNodes);\n        const removed = removeFormatOnNode(node);\n        const currentNodeMatches = removed || exists(formatList, f => matchName(dom, node, f));\n        const parentNode = node.parentNode;\n        if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n          removeFormatOnNode(parentNode);\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (let i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n          }\n        }\n        const textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$e(textDecorations, decoration => {\n          if (isElement$6(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeNodeFormat(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, undefined, node);\n          }\n        });\n      };\n      const unwrap = start => {\n        const node = dom.get(start ? '_start' : '_end');\n        if (node) {\n          let out = node[start ? 'firstChild' : 'lastChild'];\n          if (isRemoveBookmarkNode(out)) {\n            out = out[start ? 'firstChild' : 'lastChild'];\n          }\n          if (isText$a(out) && out.data.length === 0) {\n            out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n          }\n          dom.remove(node, true);\n          return out;\n        } else {\n          return null;\n        }\n      };\n      const removeRngStyle = rng => {\n        let startContainer;\n        let endContainer;\n        let expandedRng = expandRng(dom, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              const marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              const marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            const newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$3(dom, newRng, nodes => {\n              each$e(nodes, n => {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$3(dom, expandedRng, nodes => {\n          each$e(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          const rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserveSelection(ed, () => runOnRanges(ed, removeRngStyle), startNode => isInlineFormat(format) && match$2(ed, name, vars, startNode));\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      removeListStyleFormats(ed, name, vars);\n      fireFormatRemove(ed, name, node, vars);\n    };\n    const removeFormat$1 = (ed, name, vars, node, similar) => {\n      if (node || ed.selection.isEditable()) {\n        removeFormatInternal(ed, name, vars, node, similar);\n      }\n    };\n    const removeNodeFormat = (editor, format, vars, node, compareNode) => {\n      return removeNodeFormatInternal(editor, format, vars, node, compareNode).fold(never, newName => {\n        editor.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n\n    const each$6 = Tools.each;\n    const mergeTextDecorationsAndColor = (dom, format, vars, node) => {\n      const processTextDecorationsAndColor = n => {\n        if (isHTMLElement(n) && isElement$6(n.parentNode) && dom.isEditable(n)) {\n          const parentTextDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && parentTextDecoration) {\n            dom.setStyle(n, 'text-decoration', parentTextDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === parentTextDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    const mergeBackgroundColorAndFontSize = (dom, format, vars, node) => {\n      if (format.styles && format.styles.backgroundColor) {\n        const hasFontSize = hasStyle(dom, 'fontSize');\n        processChildElements(node, elm => hasFontSize(elm) && dom.isEditable(elm), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    const mergeSubSup = (dom, format, vars, node) => {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        const hasFontSize = hasStyle(dom, 'fontSize');\n        processChildElements(node, elm => hasFontSize(elm) && dom.isEditable(elm), applyStyle(dom, 'fontSize', ''));\n        const inverseTagDescendants = filter$5(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), dom.isEditable);\n        dom.remove(inverseTagDescendants, true);\n      }\n    };\n    const mergeWithChildren = (editor, formatList, vars, node) => {\n      each$6(formatList, format => {\n        if (isInlineFormat(format)) {\n          each$6(editor.dom.select(format.inline, node), child => {\n            if (isElementNode(child)) {\n              removeNodeFormat(editor, format, vars, child, format.exact ? child : null);\n            }\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    const mergeWithParents = (editor, format, name, vars, node) => {\n      const parentNode = node.parentNode;\n      if (matchNode(editor, parentNode, name, vars)) {\n        if (removeNodeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents && parentNode) {\n        editor.dom.getParent(parentNode, parent => {\n          if (matchNode(editor, parent, name, vars)) {\n            removeNodeFormat(editor, format, vars, node);\n            return true;\n          } else {\n            return false;\n          }\n        });\n      }\n    };\n\n    const each$5 = Tools.each;\n    const canFormatBR = (editor, format, node, parentName) => {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format) && node.parentNode) {\n        const validBRParentElements = getTextRootBlockElements(editor.schema);\n        const hasCaretNodeSibling = sibling(SugarElement.fromDom(node), sibling => isCaretNode(sibling.dom));\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    const applyStyles = (dom, elm, format, vars) => {\n      each$5(format.styles, (value, name) => {\n        dom.setStyle(elm, name, replaceVars(value, vars));\n      });\n      if (format.styles) {\n        const styleVal = dom.getAttrib(elm, 'style');\n        if (styleVal) {\n          dom.setAttrib(elm, 'data-mce-style', styleVal);\n        }\n      }\n    };\n    const applyFormatAction = (ed, name, vars, node) => {\n      const formatList = ed.formatter.get(name);\n      const format = formatList[0];\n      const isCollapsed = !node && ed.selection.isCollapsed();\n      const dom = ed.dom;\n      const selection = ed.selection;\n      const setElementFormat = (elm, fmt = format) => {\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        applyStyles(dom, elm, fmt, vars);\n        each$5(fmt.attributes, (value, name) => {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$5(fmt.classes, value => {\n          const newValue = replaceVars(value, vars);\n          if (!dom.hasClass(elm, newValue)) {\n            dom.addClass(elm, newValue);\n          }\n        });\n      };\n      const applyNodeStyle = (formatList, node) => {\n        let found = false;\n        each$5(formatList, format => {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (dom.getContentEditable(node) === 'false' && !format.ceFalseOverride) {\n            return true;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return true;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n          return true;\n        });\n        return found;\n      };\n      const createWrapElement = wrapName => {\n        if (isString(wrapName)) {\n          const wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      const applyRngStyle = (dom, rng, nodeSpecific) => {\n        const newWrappers = [];\n        let contentEditable = true;\n        const wrapName = format.inline || format.block;\n        const wrapElm = createWrapElement(wrapName);\n        const isMatchingWrappingBlock = node => isWrappingBlockFormat(format) && matchNode(ed, node, name, vars);\n        const canRenameBlock = (node, parentName, isEditableDescendant) => {\n          const isValidBlockFormatForNode = isNonWrappingBlockFormat(format) && isTextBlock$1(ed.schema, node) && isValid(ed, parentName, wrapName);\n          return isEditableDescendant && isValidBlockFormatForNode;\n        };\n        const canWrapNode = (node, parentName, isEditableDescendant, isWrappableNoneditableElm) => {\n          const nodeName = node.nodeName.toLowerCase();\n          const isValidWrapNode = isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName);\n          const isZwsp = !nodeSpecific && isText$a(node) && isZwsp$1(node.data);\n          const isCaret = isCaretNode(node);\n          const isCorrectFormatForNode = !isInlineFormat(format) || !dom.isBlock(node);\n          return (isEditableDescendant || isWrappableNoneditableElm) && isValidWrapNode && !isZwsp && !isCaret && isCorrectFormatForNode;\n        };\n        walk$3(dom, rng, nodes => {\n          let currentWrapElm;\n          const process = node => {\n            let hasContentEditableState = false;\n            let lastContentEditable = contentEditable;\n            let isWrappableNoneditableElm = false;\n            const parentNode = node.parentNode;\n            const parentName = parentNode.nodeName.toLowerCase();\n            const contentEditableValue = dom.getContentEditable(node);\n            if (isNonNullable(contentEditableValue)) {\n              lastContentEditable = contentEditable;\n              contentEditable = contentEditableValue === 'true';\n              hasContentEditableState = true;\n              isWrappableNoneditableElm = isWrappableNoneditable(ed, node);\n            }\n            const isEditableDescendant = contentEditable && !hasContentEditableState;\n            if (isBr$6(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isMatchingWrappingBlock(node)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (canRenameBlock(node, parentName, isEditableDescendant)) {\n              const elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              let found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (isNonNullable(wrapElm) && canWrapNode(node, parentName, isEditableDescendant, isWrappableNoneditableElm)) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              if (isWrappableNoneditableElm && hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$e(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$e(nodes, process);\n        });\n        if (format.links === true) {\n          each$e(newWrappers, node => {\n            const process = node => {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$e(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$e(newWrappers, node => {\n          const getChildCount = node => {\n            let count = 0;\n            each$e(node.childNodes, node => {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          const mergeStyles = node => {\n            const childElement = find$2(node.childNodes, isElementNode$1).filter(child => dom.getContentEditable(child) !== 'false' && matchName(dom, child, format));\n            return childElement.map(child => {\n              const clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          const childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(ed, format, vars, node);\n          }\n        });\n      };\n      const targetNode = isNode(node) ? node : selection.getNode();\n      if (dom.getContentEditable(targetNode) === 'false' && !isWrappableNoneditable(ed, targetNode)) {\n        node = targetNode;\n        applyNodeStyle(formatList, node);\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              const rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(dom, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            selection.setRng(normalize(selection.getRng()));\n            preserveSelection(ed, () => {\n              runOnRanges(ed, (selectionRng, fake) => {\n                const expandedRng = fake ? selectionRng : expandRng(dom, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            }, always);\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n          getExpandedListItemFormat(ed.formatter, name).each(liFmt => {\n            each$e(getFullySelectedListItems(ed.selection), li => applyStyles(dom, li, liFmt, vars));\n          });\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n    const applyFormat$1 = (editor, name, vars, node) => {\n      if (node || editor.selection.isEditable()) {\n        applyFormatAction(editor, name, vars, node);\n      }\n    };\n\n    const hasVars = value => has$2(value, 'vars');\n    const setup$u = (registeredFormatListeners, editor) => {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', e => {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', e => {\n        const element = Optional.from(e.node).map(nodeOrRange => isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer).bind(node => isElement$6(node) ? Optional.some(node) : Optional.from(node.parentElement)).getOrThunk(() => fallbackElement(editor));\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    const fallbackElement = editor => editor.selection.getStart();\n    const matchingNode = (editor, parents, format, similar, vars) => {\n      const isMatchingNode = node => {\n        const matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      const isUnableToMatch = node => {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    const getParents = (editor, elm) => {\n      const element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$5(getParents$2(editor.dom, element), node => isElement$6(node) && !isBogus$2(node));\n    };\n    const updateAndFireChangeCallbacks = (editor, elm, registeredCallbacks) => {\n      const parents = getParents(editor, elm);\n      each$d(registeredCallbacks, (data, format) => {\n        const runIfChanged = spec => {\n          const match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          const isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            const node = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node,\n                format,\n                parents\n              });\n            } else {\n              each$e(spec.callbacks, callback => callback(isSet, {\n                node,\n                format,\n                parents\n              }));\n            }\n          }\n        };\n        each$e([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$e(data.withVars, runIfChanged);\n      });\n    };\n    const addListeners = (editor, registeredFormatListeners, formats, callback, similar, vars) => {\n      const formatChangeItems = registeredFormatListeners.get();\n      each$e(formats.split(','), format => {\n        const group = get$a(formatChangeItems, format).getOrThunk(() => {\n          const base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        const getCurrent = () => {\n          const parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          const toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar,\n            vars,\n            callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    const removeListeners = (registeredFormatListeners, formats, callback) => {\n      const formatChangeItems = registeredFormatListeners.get();\n      each$e(formats.split(','), format => get$a(formatChangeItems, format).each(group => {\n        formatChangeItems[format] = {\n          withSimilar: {\n            ...group.withSimilar,\n            callbacks: filter$5(group.withSimilar.callbacks, cb => cb !== callback)\n          },\n          withoutSimilar: {\n            ...group.withoutSimilar,\n            callbacks: filter$5(group.withoutSimilar.callbacks, cb => cb !== callback)\n          },\n          withVars: filter$5(group.withVars, item => item.callback !== callback)\n        };\n      }));\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    const formatChangedInternal = (editor, registeredFormatListeners, formats, callback, similar, vars) => {\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return { unbind: () => removeListeners(registeredFormatListeners, formats, callback) };\n    };\n\n    const toggle = (editor, name, vars, node) => {\n      const fmt = editor.formatter.get(name);\n      if (fmt) {\n        if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n          removeFormat$1(editor, name, vars, node);\n        } else {\n          applyFormat$1(editor, name, vars, node);\n        }\n      }\n    };\n\n    const explode$1 = Tools.explode;\n    const create$8 = () => {\n      const filters = {};\n      const addFilter = (name, callback) => {\n        each$e(explode$1(name), name => {\n          if (!has$2(filters, name)) {\n            filters[name] = {\n              name,\n              callbacks: []\n            };\n          }\n          filters[name].callbacks.push(callback);\n        });\n      };\n      const getFilters = () => values(filters);\n      const removeFilter = (name, callback) => {\n        each$e(explode$1(name), name => {\n          if (has$2(filters, name)) {\n            if (isNonNullable(callback)) {\n              const filter = filters[name];\n              const newCallbacks = filter$5(filter.callbacks, c => c !== callback);\n              if (newCallbacks.length > 0) {\n                filter.callbacks = newCallbacks;\n              } else {\n                delete filters[name];\n              }\n            } else {\n              delete filters[name];\n            }\n          }\n        });\n      };\n      return {\n        addFilter,\n        getFilters,\n        removeFilter\n      };\n    };\n\n    const removeAttrs = (node, names) => {\n      each$e(names, name => {\n        node.attr(name, null);\n      });\n    };\n    const addFontToSpansFilter = (domParser, styles, fontSizes) => {\n      domParser.addNodeFilter('font', nodes => {\n        each$e(nodes, node => {\n          const props = styles.parse(node.attr('style'));\n          const color = node.attr('color');\n          const face = node.attr('face');\n          const size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            toInt(size).each(num => {\n              props['font-size'] = fontSizes[num - 1];\n            });\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    const addStrikeFilter = (domParser, schema, styles) => {\n      domParser.addNodeFilter('strike', nodes => {\n        const convertToSTag = schema.type !== 'html4';\n        each$e(nodes, node => {\n          if (convertToSTag) {\n            node.name = 's';\n          } else {\n            const props = styles.parse(node.attr('style'));\n            props['text-decoration'] = 'line-through';\n            node.name = 'span';\n            node.attr('style', styles.serialize(props));\n          }\n        });\n      });\n    };\n    const addFilters = (domParser, settings, schema) => {\n      var _a;\n      const styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode((_a = settings.font_size_legacy_values) !== null && _a !== void 0 ? _a : ''));\n      }\n      addStrikeFilter(domParser, schema, styles);\n    };\n    const register$5 = (domParser, settings, schema) => {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings, schema);\n      }\n    };\n\n    const addNodeFilter = (settings, htmlParser, schema) => {\n      htmlParser.addNodeFilter('br', (nodes, _, args) => {\n        const blockElements = Tools.extend({}, schema.getBlockElements());\n        const nonEmptyElements = schema.getNonEmptyElements();\n        const whitespaceElements = schema.getWhitespaceElements();\n        blockElements.body = 1;\n        const isBlock = node => node.name in blockElements || isTransparentAstBlock(schema, node);\n        for (let i = 0, l = nodes.length; i < l; i++) {\n          let node = nodes[i];\n          let parent = node.parent;\n          if (parent && isBlock(parent) && node === parent.lastChild) {\n            let prev = node.prev;\n            while (prev) {\n              const prevName = prev.name;\n              if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                if (prevName === 'br') {\n                  node = null;\n                }\n                break;\n              }\n              prev = prev.prev;\n            }\n            if (node) {\n              node.remove();\n              if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent)) {\n                const elementRule = schema.getElementRule(parent.name);\n                if (elementRule) {\n                  if (elementRule.removeEmpty) {\n                    parent.remove();\n                  } else if (elementRule.paddEmpty) {\n                    paddEmptyNode(settings, args, isBlock, parent);\n                  }\n                }\n              }\n            }\n          } else {\n            let lastParent = node;\n            while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n              lastParent = parent;\n              if (blockElements[parent.name]) {\n                break;\n              }\n              parent = parent.parent;\n            }\n            if (lastParent === parent) {\n              const textNode = new AstNode('#text', 3);\n              textNode.value = nbsp;\n              node.replace(textNode);\n            }\n          }\n        }\n      });\n    };\n\n    const blobUriToBlob = url => fetch(url).then(res => res.ok ? res.blob() : Promise.reject()).catch(() => Promise.reject({\n      message: `Cannot convert ${ url } to Blob. Resource might not exist or is inaccessible.`,\n      uriType: 'blob'\n    }));\n    const extractBase64Data = data => {\n      const matches = /([a-z0-9+\\/=\\s]+)/i.exec(data);\n      return matches ? matches[1] : '';\n    };\n    const parseDataUri = uri => {\n      const [type, ...rest] = uri.split(',');\n      const data = rest.join(',');\n      const matches = /data:([^/]+\\/[^;]+)(;.+)?/.exec(type);\n      if (matches) {\n        const base64Encoded = matches[2] === ';base64';\n        const extractedData = base64Encoded ? extractBase64Data(data) : decodeURIComponent(data);\n        return Optional.some({\n          type: matches[1],\n          data: extractedData,\n          base64Encoded\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const buildBlob = (type, data, base64Encoded = true) => {\n      let str = data;\n      if (base64Encoded) {\n        try {\n          str = atob(data);\n        } catch (e) {\n          return Optional.none();\n        }\n      }\n      const arr = new Uint8Array(str.length);\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type }));\n    };\n    const dataUriToBlob = uri => {\n      return new Promise((resolve, reject) => {\n        parseDataUri(uri).bind(({type, data, base64Encoded}) => buildBlob(type, data, base64Encoded)).fold(() => reject('Invalid data URI'), resolve);\n      });\n    };\n    const uriToBlob = url => {\n      if (startsWith(url, 'blob:')) {\n        return blobUriToBlob(url);\n      } else if (startsWith(url, 'data:')) {\n        return dataUriToBlob(url);\n      } else {\n        return Promise.reject('Unknown URI format');\n      }\n    };\n    const blobToDataUri = blob => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = () => {\n          var _a;\n          reject((_a = reader.error) === null || _a === void 0 ? void 0 : _a.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    let count$1 = 0;\n    const uniqueId$1 = prefix => {\n      return (prefix || 'blobid') + count$1++;\n    };\n    const processDataUri = (dataUri, base64Only, generateBlobInfo) => {\n      return parseDataUri(dataUri).bind(({data, type, base64Encoded}) => {\n        if (base64Only && !base64Encoded) {\n          return Optional.none();\n        } else {\n          const base64 = base64Encoded ? data : btoa(data);\n          return generateBlobInfo(base64, type);\n        }\n      });\n    };\n    const createBlobInfo$1 = (blobCache, blob, base64) => {\n      const blobInfo = blobCache.create(uniqueId$1(), blob, base64);\n      blobCache.add(blobInfo);\n      return blobInfo;\n    };\n    const dataUriToBlobInfo = (blobCache, dataUri, base64Only = false) => {\n      return processDataUri(dataUri, base64Only, (base64, type) => Optional.from(blobCache.getByData(base64, type)).orThunk(() => buildBlob(type, base64).map(blob => createBlobInfo$1(blobCache, blob, base64))));\n    };\n    const imageToBlobInfo = (blobCache, imageSrc) => {\n      const invalidDataUri = () => Promise.reject('Invalid data URI');\n      if (startsWith(imageSrc, 'blob:')) {\n        const blobInfo = blobCache.getByUri(imageSrc);\n        if (isNonNullable(blobInfo)) {\n          return Promise.resolve(blobInfo);\n        } else {\n          return uriToBlob(imageSrc).then(blob => {\n            return blobToDataUri(blob).then(dataUri => {\n              return processDataUri(dataUri, false, base64 => {\n                return Optional.some(createBlobInfo$1(blobCache, blob, base64));\n              }).getOrThunk(invalidDataUri);\n            });\n          });\n        }\n      } else if (startsWith(imageSrc, 'data:')) {\n        return dataUriToBlobInfo(blobCache, imageSrc).fold(invalidDataUri, blobInfo => Promise.resolve(blobInfo));\n      } else {\n        return Promise.reject('Unknown image data format');\n      }\n    };\n\n    const isBogusImage = img => isNonNullable(img.attr('data-mce-bogus'));\n    const isInternalImageSource = img => img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    const registerBase64ImageFilter = (parser, settings) => {\n      const {blob_cache: blobCache} = settings;\n      if (blobCache) {\n        const processImage = img => {\n          const inputSrc = img.attr('src');\n          if (isInternalImageSource(img) || isBogusImage(img) || isNullable(inputSrc)) {\n            return;\n          }\n          dataUriToBlobInfo(blobCache, inputSrc, true).each(blobInfo => {\n            img.attr('src', blobInfo.blobUri());\n          });\n        };\n        parser.addAttributeFilter('src', nodes => each$e(nodes, processImage));\n      }\n    };\n    const isMimeType = (mime, type) => startsWith(mime, `${ type }/`);\n    const createSafeEmbed = (mime, src, width, height, sandboxIframes) => {\n      let name;\n      if (isUndefined(mime)) {\n        name = 'iframe';\n      } else if (isMimeType(mime, 'image')) {\n        name = 'img';\n      } else if (isMimeType(mime, 'video')) {\n        name = 'video';\n      } else if (isMimeType(mime, 'audio')) {\n        name = 'audio';\n      } else {\n        name = 'iframe';\n      }\n      const embed = new AstNode(name, 1);\n      embed.attr(name === 'audio' ? { src } : {\n        src,\n        width,\n        height\n      });\n      if (name === 'audio' || name === 'video') {\n        embed.attr('controls', '');\n      }\n      if (name === 'iframe' && sandboxIframes) {\n        embed.attr('sandbox', '');\n      }\n      return embed;\n    };\n    const register$4 = (parser, settings) => {\n      const schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        addNodeFilter(settings, parser, schema);\n      }\n      parser.addAttributeFilter('href', nodes => {\n        let i = nodes.length;\n        const appendRel = rel => {\n          const parts = rel.split(' ').filter(p => p.length > 0);\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        const addNoOpener = rel => {\n          const newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            const node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', nodes => {\n          let i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              while (sibling && parent) {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              }\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', nodes => {\n          let i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode && (parentNode.name === 'ul' || parentNode.name === 'ol')) {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                const li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      const validClasses = schema.getValidClasses();\n      if (settings.validate && validClasses) {\n        parser.addAttributeFilter('class', nodes => {\n          var _a;\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            const clazz = (_a = node.attr('class')) !== null && _a !== void 0 ? _a : '';\n            const classList = Tools.explode(clazz, ' ');\n            let classValue = '';\n            for (let ci = 0; ci < classList.length; ci++) {\n              const className = classList[ci];\n              let valid = false;\n              let validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n      if (settings.convert_unsafe_embeds) {\n        parser.addNodeFilter('object,embed', nodes => each$e(nodes, node => {\n          node.replace(createSafeEmbed(node.attr('type'), node.name === 'object' ? node.attr('data') : node.attr('src'), node.attr('width'), node.attr('height'), settings.sandbox_iframes));\n        }));\n      }\n      if (settings.sandbox_iframes) {\n        parser.addNodeFilter('iframe', nodes => each$e(nodes, node => node.attr('sandbox', '')));\n      }\n    };\n\n    /*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */\n\n    const {\n      entries,\n      setPrototypeOf,\n      isFrozen,\n      getPrototypeOf,\n      getOwnPropertyDescriptor\n    } = Object;\n    let {\n      freeze,\n      seal,\n      create: create$7\n    } = Object; // eslint-disable-line import/no-mutable-exports\n    let {\n      apply,\n      construct\n    } = typeof Reflect !== 'undefined' && Reflect;\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!apply) {\n      apply = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return new Func(...args);\n      };\n    }\n    const arrayForEach = unapply(Array.prototype.forEach);\n    const arrayPop = unapply(Array.prototype.pop);\n    const arrayPush = unapply(Array.prototype.push);\n    const stringToLowerCase = unapply(String.prototype.toLowerCase);\n    const stringToString = unapply(String.prototype.toString);\n    const stringMatch = unapply(String.prototype.match);\n    const stringReplace = unapply(String.prototype.replace);\n    const stringIndexOf = unapply(String.prototype.indexOf);\n    const stringTrim = unapply(String.prototype.trim);\n    const objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n    const regExpTest = unapply(RegExp.prototype.test);\n    const typeErrorCreate = unconstruct(TypeError);\n\n    /**\n     * Creates a new function that calls the given function with a specified thisArg and arguments.\n     *\n     * @param {Function} func - The function to be wrapped and called.\n     * @returns {Function} A new function that calls the given function with a specified thisArg and arguments.\n     */\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply(func, thisArg, args);\n      };\n    }\n\n    /**\n     * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n     *\n     * @param {Function} func - The constructor function to be wrapped and called.\n     * @returns {Function} A new function that constructs an instance of the given constructor function with the provided arguments.\n     */\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n\n    /**\n     * Add properties to a lookup table\n     *\n     * @param {Object} set - The set to which elements will be added.\n     * @param {Array} array - The array containing elements to be added to the set.\n     * @param {Function} transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n     * @returns {Object} The modified set with added elements.\n     */\n    function addToSet(set, array) {\n      let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n      if (setPrototypeOf) {\n        // Make 'in' and truthy checks like Boolean(set.constructor)\n        // independent of any properties defined on Object.prototype.\n        // Prevent prototype setters from intercepting set as a this value.\n        setPrototypeOf(set, null);\n      }\n      let l = array.length;\n      while (l--) {\n        let element = array[l];\n        if (typeof element === 'string') {\n          const lcElement = transformCaseFunc(element);\n          if (lcElement !== element) {\n            // Config presets (e.g. tags.js, attrs.js) are immutable.\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n\n    /**\n     * Clean up an array to harden against CSPP\n     *\n     * @param {Array} array - The array to be cleaned.\n     * @returns {Array} The cleaned version of the array\n     */\n    function cleanArray(array) {\n      for (let index = 0; index < array.length; index++) {\n        const isPropertyExist = objectHasOwnProperty(array, index);\n        if (!isPropertyExist) {\n          array[index] = null;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Shallow clone an object\n     *\n     * @param {Object} object - The object to be cloned.\n     * @returns {Object} A new object that copies the original.\n     */\n    function clone(object) {\n      const newObject = create$7(null);\n      for (const [property, value] of entries(object)) {\n        const isPropertyExist = objectHasOwnProperty(object, property);\n        if (isPropertyExist) {\n          if (Array.isArray(value)) {\n            newObject[property] = cleanArray(value);\n          } else if (value && typeof value === 'object' && value.constructor === Object) {\n            newObject[property] = clone(value);\n          } else {\n            newObject[property] = value;\n          }\n        }\n      }\n      return newObject;\n    }\n\n    /**\n     * This method automatically checks if the prop is function or getter and behaves accordingly.\n     *\n     * @param {Object} object - The object to look up the getter function in its prototype chain.\n     * @param {String} prop - The property name for which to find the getter function.\n     * @returns {Function} The getter function found in the prototype chain or a fallback function.\n     */\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        const desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue() {\n        return null;\n      }\n      return fallbackValue;\n    }\n\n    const html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\n\n    // SVG\n    const svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\n    const svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n\n    // List of SVG elements that are disallowed by default.\n    // We still need to know them so that we can do namespace\n    // checks properly in case one wants to add them to\n    // allow-list.\n    const svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\n    const mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n\n    // Similarly to SVG, we want to know all MathML elements,\n    // even those that we disallow by default.\n    const mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\n    const text = freeze(['#text']);\n\n    const html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\n    const svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\n    const mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\n    const xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n    // eslint-disable-next-line unicorn/better-regex\n    const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\n    const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    const TMPLIT_EXPR = seal(/\\${[\\w\\W]*}/gm);\n    const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/); // eslint-disable-line no-useless-escape\n    const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\n    const IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n    );\n    const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    const ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n    );\n    const DOCTYPE_NAME = seal(/^html$/i);\n    const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\n    var EXPRESSIONS = /*#__PURE__*/Object.freeze({\n      __proto__: null,\n      MUSTACHE_EXPR: MUSTACHE_EXPR,\n      ERB_EXPR: ERB_EXPR,\n      TMPLIT_EXPR: TMPLIT_EXPR,\n      DATA_ATTR: DATA_ATTR,\n      ARIA_ATTR: ARIA_ATTR,\n      IS_ALLOWED_URI: IS_ALLOWED_URI,\n      IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n      ATTR_WHITESPACE: ATTR_WHITESPACE,\n      DOCTYPE_NAME: DOCTYPE_NAME,\n      CUSTOM_ELEMENT: CUSTOM_ELEMENT\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n    const NODE_TYPE = {\n      element: 1,\n      attribute: 2,\n      text: 3,\n      cdataSection: 4,\n      entityReference: 5,\n      // Deprecated\n      entityNode: 6,\n      // Deprecated\n      progressingInstruction: 7,\n      comment: 8,\n      document: 9,\n      documentType: 10,\n      documentFragment: 11,\n      notation: 12 // Deprecated\n    };\n    const getGlobal = function getGlobal() {\n      return typeof window === 'undefined' ? null : window;\n    };\n\n    /**\n     * Creates a no-op policy for internal use only.\n     * Don't export this function outside this module!\n     * @param {TrustedTypePolicyFactory} trustedTypes The policy factory.\n     * @param {HTMLScriptElement} purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n     * @return {TrustedTypePolicy} The policy created (or null, if Trusted Types\n     * are not supported or creating the policy failed).\n     */\n    const _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n      if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n\n      // Allow the callers to control the unique policy name\n      // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n      // Policy creation with duplicate names throws in Trusted Types.\n      let suffix = null;\n      const ATTR_NAME = 'data-tt-policy-suffix';\n      if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n        suffix = purifyHostElement.getAttribute(ATTR_NAME);\n      }\n      const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML(html) {\n            return html;\n          },\n          createScriptURL(scriptUrl) {\n            return scriptUrl;\n          }\n        });\n      } catch (_) {\n        // Policy creation failed (most likely another DOMPurify script has\n        // already run). Skip creating the policy, as this will only cause errors\n        // if TT are enforced.\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      const DOMPurify = root => createDOMPurify(root);\n\n      /**\n       * Version label, exposed for easier checks\n       * if DOMPurify is up to date or not\n       */\n      DOMPurify.version = '3.1.7';\n\n      /**\n       * Array of elements that DOMPurify removed during sanitation.\n       * Empty if nothing was removed.\n       */\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document) {\n        // Not running in a browser, provide a factory function\n        // so that you can pass your own Window\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      let {\n        document\n      } = window;\n      const originalDocument = document;\n      const currentScript = originalDocument.currentScript;\n      const {\n        DocumentFragment,\n        HTMLTemplateElement,\n        Node,\n        Element,\n        NodeFilter,\n        NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n        HTMLFormElement,\n        DOMParser,\n        trustedTypes\n      } = window;\n      const ElementPrototype = Element.prototype;\n      const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      const remove = lookupGetter(ElementPrototype, 'remove');\n      const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n      // As per issue #47, the web-components registry is inherited by a\n      // new document created via createHTMLDocument. As per the spec\n      // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n      // a new empty registry is used when creating a template contents owner\n      // document, so we use that as our parent document to ensure nothing\n      // is inherited.\n      if (typeof HTMLTemplateElement === 'function') {\n        const template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      let trustedTypesPolicy;\n      let emptyHTML = '';\n      const {\n        implementation,\n        createNodeIterator,\n        createDocumentFragment,\n        getElementsByTagName\n      } = document;\n      const {\n        importNode\n      } = originalDocument;\n      let hooks = {};\n\n      /**\n       * Expose whether this browser supports running the full DOMPurify.\n       */\n      DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n      const {\n        MUSTACHE_EXPR,\n        ERB_EXPR,\n        TMPLIT_EXPR,\n        DATA_ATTR,\n        ARIA_ATTR,\n        IS_SCRIPT_OR_DATA,\n        ATTR_WHITESPACE,\n        CUSTOM_ELEMENT\n      } = EXPRESSIONS;\n      let {\n        IS_ALLOWED_URI: IS_ALLOWED_URI$1\n      } = EXPRESSIONS;\n\n      /**\n       * We consider the elements and attributes below to be safe. Ideally\n       * don't add any new ones but feel free to remove unwanted ones.\n       */\n\n      /* allowed element names */\n      let ALLOWED_TAGS = null;\n      const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n\n      /* Allowed attribute names */\n      let ALLOWED_ATTR = null;\n      const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n\n      /*\n       * Configure how DOMPUrify should handle custom elements and their attributes as well as customized built-in elements.\n       * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n       * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n       * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n       */\n      let CUSTOM_ELEMENT_HANDLING = Object.seal(create$7(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n\n      /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n      let FORBID_TAGS = null;\n\n      /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n      let FORBID_ATTR = null;\n\n      /* Decide if ARIA attributes are okay */\n      let ALLOW_ARIA_ATTR = true;\n\n      /* Decide if custom data attributes are okay */\n      let ALLOW_DATA_ATTR = true;\n\n      /* Decide if unknown protocols are okay */\n      let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n      /* Decide if self-closing tags in attributes are allowed.\n       * Usually removed due to a mXSS issue in jQuery 3.0 */\n      let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n      /* Output should be safe for common template engines.\n       * This means, DOMPurify removes data attributes, mustaches and ERB\n       */\n      let SAFE_FOR_TEMPLATES = false;\n\n      /* Output should be safe even for XML used within HTML and alike.\n       * This means, DOMPurify removes comments when containing risky content.\n       */\n      let SAFE_FOR_XML = true;\n\n      /* Decide if document with <html>... should be returned */\n      let WHOLE_DOCUMENT = false;\n\n      /* Track whether config is already set on this instance of DOMPurify. */\n      let SET_CONFIG = false;\n\n      /* Decide if all elements (e.g. style, script) must be children of\n       * document.body. By default, browsers might move them to document.head */\n      let FORCE_BODY = false;\n\n      /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n       * string (or a TrustedHTML object if Trusted Types are supported).\n       * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n       */\n      let RETURN_DOM = false;\n\n      /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n       * string  (or a TrustedHTML object if Trusted Types are supported) */\n      let RETURN_DOM_FRAGMENT = false;\n\n      /* Try to return a Trusted Type object instead of a string, return a string in\n       * case Trusted Types are not supported  */\n      let RETURN_TRUSTED_TYPE = false;\n\n      /* Output should be free from DOM clobbering attacks?\n       * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n       */\n      let SANITIZE_DOM = true;\n\n      /* Achieve full DOM Clobbering protection by isolating the namespace of named\n       * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n       *\n       * HTML/DOM spec rules that enable DOM Clobbering:\n       *   - Named Access on Window (§7.3.3)\n       *   - DOM Tree Accessors (§3.1.5)\n       *   - Form Element Parent-Child Relations (§4.10.3)\n       *   - Iframe srcdoc / Nested WindowProxies (§4.8.5)\n       *   - HTMLCollection (§4.2.10.2)\n       *\n       * Namespace isolation is implemented by prefixing `id` and `name` attributes\n       * with a constant string, i.e., `user-content-`\n       */\n      let SANITIZE_NAMED_PROPS = false;\n      const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n      /* Keep element content when removing element? */\n      let KEEP_CONTENT = true;\n\n      /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n       * of importing it into a new Document and returning a sanitized copy */\n      let IN_PLACE = false;\n\n      /* Allow usage of profiles like html, svg and mathMl */\n      let USE_PROFILES = {};\n\n      /* Tags to ignore content of when KEEP_CONTENT is true */\n      let FORBID_CONTENTS = null;\n      const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n\n      /* Tags that are safe for data: URIs */\n      let DATA_URI_TAGS = null;\n      const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n\n      /* Attributes safe for values like \"javascript:\" */\n      let URI_SAFE_ATTRIBUTES = null;\n      const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n      const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      /* Document namespace */\n      let NAMESPACE = HTML_NAMESPACE;\n      let IS_EMPTY_INPUT = false;\n\n      /* Allowed XHTML+XML namespaces */\n      let ALLOWED_NAMESPACES = null;\n      const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n\n      /* Parsing of strict XHTML documents */\n      let PARSER_MEDIA_TYPE = null;\n      const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n      const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      let transformCaseFunc = null;\n\n      /* Keep a reference to config to pass to hooks */\n      let CONFIG = null;\n\n      /* Ideally, do not touch anything below this line */\n      /* ______________________________________________ */\n\n      const formElement = document.createElement('form');\n      const isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n\n      /**\n       * _parseConfig\n       *\n       * @param  {Object} cfg optional config literal\n       */\n      // eslint-disable-next-line complexity\n      const _parseConfig = function _parseConfig() {\n        let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n\n        /* Shield configuration object from tampering */\n        if (!cfg || typeof cfg !== 'object') {\n          cfg = {};\n        }\n\n        /* Shield configuration object from prototype pollution */\n        cfg = clone(cfg);\n        PARSER_MEDIA_TYPE =\n        // eslint-disable-next-line unicorn/prefer-includes\n        SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n\n        // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n\n        /* Set configuration parameters */\n        ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n        ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n        URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n        // eslint-disable-line indent\n        cfg.ADD_URI_SAFE_ATTR,\n        // eslint-disable-line indent\n        transformCaseFunc // eslint-disable-line indent\n        ) // eslint-disable-line indent\n        : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS),\n        // eslint-disable-line indent\n        cfg.ADD_DATA_URI_TAGS,\n        // eslint-disable-line indent\n        transformCaseFunc // eslint-disable-line indent\n        ) // eslint-disable-line indent\n        : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : {};\n        FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : {};\n        USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n        ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n        SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n        RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n        FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n        SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n        IN_PLACE = cfg.IN_PLACE || false; // Default false\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n\n        /* Parse profile info */\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, text);\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n\n        /* Merge configuration parameters */\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n        }\n\n        /* Add #text in case KEEP_CONTENT is set to true */\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n\n        /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n        }\n\n        /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (cfg.TRUSTED_TYPES_POLICY) {\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n          }\n          if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n            throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n          }\n\n          // Overwrite existing TrustedTypes policy.\n          trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n          // Sign local variables required by `sanitize`.\n          emptyHTML = trustedTypesPolicy.createHTML('');\n        } else {\n          // Uninitialized policy, attempt to initialize the internal dompurify policy.\n          if (trustedTypesPolicy === undefined) {\n            trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n          }\n\n          // If creating the internal policy succeeded sign internal variables.\n          if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n            emptyHTML = trustedTypesPolicy.createHTML('');\n          }\n        }\n\n        // Prevent further manipulation of configuration.\n        // Not available in IE8, Safari 5, etc.\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      const MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n      const HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n      // Certain elements are allowed in both SVG and HTML\n      // namespace. We need to specify them explicitly\n      // so that they don't get erroneously deleted from\n      // HTML namespace.\n      const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n\n      /* Keep track of all possible SVG and MathML tags\n       * so that we can perform the namespace checks\n       * correctly. */\n      const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n      const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n\n      /**\n       * @param  {Element} element a DOM element whose namespace is being checked\n       * @returns {boolean} Return false if the element has a\n       *  namespace that a spec-compliant parser would never\n       *  return. Return true otherwise.\n       */\n      const _checkValidNamespace = function _checkValidNamespace(element) {\n        let parent = getParentNode(element);\n\n        // In JSDOM, if we're inside shadow DOM, then parentNode\n        // can be null. We just simulate parent in this case.\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        const tagName = stringToLowerCase(element.tagName);\n        const parentTagName = stringToLowerCase(parent.tagName);\n        if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return false;\n        }\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          // The only way to switch from HTML namespace to SVG\n          // is via <svg>. If it happens via any other tag, then\n          // it should be killed.\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n\n          // The only way to switch from MathML to SVG is via`\n          // svg if parent is either <annotation-xml> or MathML\n          // text integration points.\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n\n          // We only allow elements that are defined in SVG\n          // spec. All others are disallowed in SVG namespace.\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          // The only way to switch from HTML namespace to MathML\n          // is via <math>. If it happens via any other tag, then\n          // it should be killed.\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n\n          // The only way to switch from SVG to MathML is via\n          // <math> and HTML integration points\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n\n          // We only allow elements that are defined in MathML\n          // spec. All others are disallowed in MathML namespace.\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          // The only way to switch from SVG to HTML is via\n          // HTML integration points, and from MathML to HTML\n          // is via MathML text integration points\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n\n          // We disallow tags that are specific for MathML\n          // or SVG and should never appear in HTML namespace\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n\n        // For XHTML and XML documents that support custom namespaces\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n          return true;\n        }\n\n        // The code should never reach this place (this means\n        // that the element somehow got namespace that is not\n        // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n        // Return false just in case.\n        return false;\n      };\n\n      /**\n       * _forceRemove\n       *\n       * @param  {Node} node a DOM node\n       */\n      const _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, {\n          element: node\n        });\n        try {\n          // eslint-disable-next-line unicorn/prefer-dom-node-remove\n          getParentNode(node).removeChild(node);\n        } catch (_) {\n          remove(node);\n        }\n      };\n\n      /**\n       * _removeAttribute\n       *\n       * @param  {String} name an Attribute name\n       * @param  {Node} node a DOM node\n       */\n      const _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n\n        // We void attribute values for unremovable \"is\"\" attributes\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {}\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {}\n          }\n        }\n      };\n\n      /**\n       * _initDocument\n       *\n       * @param  {String} dirty a string of dirty markup\n       * @return {Document} a DOM, filled with the dirty markup\n       */\n      const _initDocument = function _initDocument(dirty) {\n        /* Create a HTML document */\n        let doc = null;\n        let leadingWhitespace = null;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n          const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n          // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        /*\n         * Use the DOMParser API by default, fallback later if needs be\n         * DOMParser not work for svg when has multiple root element.\n         */\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {}\n        }\n\n        /* Use createHTMLDocument in case DOMParser is not available */\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n          } catch (_) {\n            // Syntax error if dirtyPayload is invalid xml\n          }\n        }\n        const body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n\n        /* Work on whole document or just its body */\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n\n      /**\n       * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n       *\n       * @param  {Node} root The root element or node to start traversing on.\n       * @return {NodeIterator} The created NodeIterator\n       */\n      const _createNodeIterator = function _createNodeIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root,\n        // eslint-disable-next-line no-bitwise\n        NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n      };\n\n      /**\n       * _isClobbered\n       *\n       * @param  {Node} elm element to check for clobbering attacks\n       * @return {Boolean} true if clobbered, false if safe\n       */\n      const _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function' || typeof elm.hasChildNodes !== 'function');\n      };\n\n      /**\n       * Checks whether the given object is a DOM node.\n       *\n       * @param  {Node} object object to check whether it's a DOM node\n       * @return {Boolean} true is object is a DOM node\n       */\n      const _isNode = function _isNode(object) {\n        return typeof Node === 'function' && object instanceof Node;\n      };\n\n      /**\n       * _executeHook\n       * Execute user configurable hooks\n       *\n       * @param  {String} entryPoint  Name of the hook's entry point\n       * @param  {Node} currentNode node to work on with the hook\n       * @param  {Object} data additional hook parameters\n       */\n      const _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], hook => {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n\n      /**\n       * _sanitizeElements\n       *\n       * @protect nodeName\n       * @protect textContent\n       * @protect removeChild\n       *\n       * @param   {Node} currentNode to check for permission to exist\n       * @return  {Boolean} true if node was killed, false if left alive\n       */\n      const _sanitizeElements = function _sanitizeElements(currentNode) {\n        let content = null;\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeElements', currentNode, null);\n\n        /* Check if element is clobbered or can clobber */\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Now let's check the element's type and name */\n        const tagName = transformCaseFunc(currentNode.nodeName);\n\n        /* Execute a hook if present */\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n\n        /* Detect mXSS attempts abusing namespace confusion */\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Remove any occurrence of processing instructions */\n        if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Remove any kind of possibly harmful comments */\n        if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Remove element if anything forbids its presence */\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          /* Check if we have a custom element to handle */\n          if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n              return false;\n            }\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n              return false;\n            }\n          }\n\n          /* Keep content except for bad-listed elements */\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              const childCount = childNodes.length;\n              for (let i = childCount - 1; i >= 0; --i) {\n                const childClone = cloneNode(childNodes[i], true);\n                childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n                parentNode.insertBefore(childClone, getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Check whether element has a valid namespace */\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Make sure that older browsers don't get fallback-tag mXSS */\n        if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n\n        /* Sanitize element content to be template-safe */\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n          /* Get the element's text content */\n          content = currentNode.textContent;\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            content = stringReplace(content, expr, ' ');\n          });\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, {\n              element: currentNode.cloneNode()\n            });\n            currentNode.textContent = content;\n          }\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n\n      /**\n       * _isValidAttribute\n       *\n       * @param  {string} lcTag Lowercase tag name of containing element.\n       * @param  {string} lcName Lowercase attribute name.\n       * @param  {string} value Attribute value.\n       * @return {Boolean} Returns true if `value` is valid, otherwise false.\n       */\n      // eslint-disable-next-line complexity\n      const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        /* Make sure attribute cannot clobber */\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n\n        /* Allow valid data-* attributes: At least one character after \"-\"\n            (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n            XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n            We don't need to check the value; it's always URI safe. */\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (\n          // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n          // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n          // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n          _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n          // Alternative, second condition checks if it's an `is`-attribute, AND\n          // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n          lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n            return false;\n          }\n          /* Check value is safe. First, is attr inert? If so, is safe */\n        } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n          return false;\n        } else ;\n        return true;\n      };\n\n      /**\n       * _isBasicCustomElement\n       * checks if at least one dash is included in tagName, and it's not the first char\n       * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n       *\n       * @param {string} tagName name of the tag of the node to sanitize\n       * @returns {boolean} Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n       */\n      const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n        return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n      };\n\n      /**\n       * _sanitizeAttributes\n       *\n       * @protect attributes\n       * @protect nodeName\n       * @protect removeAttribute\n       * @protect setAttribute\n       *\n       * @param  {Node} currentNode to sanitize\n       */\n      const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        const {\n          attributes\n        } = currentNode;\n\n        /* Check if we have attributes; if not we might have a text node */\n        if (!attributes) {\n          return;\n        }\n        const hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        let l = attributes.length;\n\n        /* Go backwards over all attributes; safely remove bad ones */\n        while (l--) {\n          const attr = attributes[l];\n          const {\n            name,\n            namespaceURI,\n            value: attrValue\n          } = attr;\n          const lcName = transformCaseFunc(name);\n          let value = name === 'value' ? attrValue : stringTrim(attrValue);\n          const initValue = value;\n\n          /* Execute a hook if present */\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n\n          /* Did the hooks approve of the attribute? */\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n\n          /* Did the hooks approve of the attribute? */\n          if (!hookEvent.keepAttr) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Work around a security issue in jQuery 3.0 */\n          if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Sanitize attribute content to be template-safe */\n          if (SAFE_FOR_TEMPLATES) {\n            arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n              value = stringReplace(value, expr, ' ');\n            });\n          }\n\n          /* Is `value` valid for this attribute? */\n          const lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Full DOM Clobbering protection via namespace isolation,\n           * Prefix id and name attributes with `user-content-`\n           */\n          if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n            // Remove the attribute with this value\n            _removeAttribute(name, currentNode);\n\n            // Prefix the value and later re-create the attribute with the sanitized value\n            value = SANITIZE_NAMED_PROPS_PREFIX + value;\n          }\n\n          /* Work around a security issue with comments inside attributes */\n          if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n\n          /* Handle attributes that require Trusted Types */\n          if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n            if (namespaceURI) ; else {\n              switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n                case 'TrustedHTML':\n                  {\n                    value = trustedTypesPolicy.createHTML(value);\n                    break;\n                  }\n                case 'TrustedScriptURL':\n                  {\n                    value = trustedTypesPolicy.createScriptURL(value);\n                    break;\n                  }\n              }\n            }\n          }\n\n          /* Handle invalid data-* attribute set by try-catching it */\n          if (value !== initValue) {\n            try {\n              if (namespaceURI) {\n                currentNode.setAttributeNS(namespaceURI, name, value);\n              } else {\n                /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n                currentNode.setAttribute(name, value);\n              }\n              if (_isClobbered(currentNode)) {\n                _forceRemove(currentNode);\n              } else {\n                arrayPop(DOMPurify.removed);\n              }\n            } catch (_) {}\n          }\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n\n      /**\n       * _sanitizeShadowDOM\n       *\n       * @param  {DocumentFragment} fragment to iterate over recursively\n       */\n      const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        let shadowNode = null;\n        const shadowIterator = _createNodeIterator(fragment);\n\n        /* Execute a hook if present */\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          /* Execute a hook if present */\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n\n          /* Sanitize tags and elements */\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n\n          /* Deep shadow DOM detected */\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n\n          /* Check attributes, sanitize if necessary */\n          _sanitizeAttributes(shadowNode);\n        }\n\n        /* Execute a hook if present */\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n\n      /**\n       * Sanitize\n       * Public method providing core sanitation functionality\n       *\n       * @param {String|Node} dirty string or DOM node\n       * @param {Object} cfg object\n       */\n      // eslint-disable-next-line complexity\n      DOMPurify.sanitize = function (dirty) {\n        let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        let body = null;\n        let importedNode = null;\n        let currentNode = null;\n        let returnNode = null;\n        /* Make sure we have a string to sanitize.\n          DO NOT return early, as this will return the wrong type if\n          the user has requested a DOM object rather than a string */\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n\n        /* Stringify, in case dirty is an object */\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString === 'function') {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          } else {\n            throw typeErrorCreate('toString is not a function');\n          }\n        }\n\n        /* Return dirty HTML if DOMPurify cannot run */\n        if (!DOMPurify.isSupported) {\n          return dirty;\n        }\n\n        /* Assign config vars */\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n\n        /* Clean up removed elements */\n        DOMPurify.removed = [];\n\n        /* Check if dirty is correctly typed for IN_PLACE */\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          /* Do some early pre-sanitization to avoid unsafe root nodes */\n          if (dirty.nodeName) {\n            const tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          /* If dirty is a DOM element, append to an empty document to avoid\n             elements being stripped by the parser */\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n            /* Node is already a body, use as is */\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            // eslint-disable-next-line unicorn/prefer-dom-node-append\n            body.appendChild(importedNode);\n          }\n        } else {\n          /* Exit directly if we have nothing to do */\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n          // eslint-disable-next-line unicorn/prefer-includes\n          dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n\n          /* Initialize the document to work on */\n          body = _initDocument(dirty);\n\n          /* Check we have a DOM node from the data */\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n\n        /* Remove first element node (ours) if FORCE_BODY is set */\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n\n        /* Get node iterator */\n        const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n        /* Now start iterating over the created document */\n        while (currentNode = nodeIterator.nextNode()) {\n          /* Sanitize tags and elements */\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n\n          /* Shadow DOM detected, sanitize it */\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n\n          /* Check attributes, sanitize if necessary */\n          _sanitizeAttributes(currentNode);\n        }\n\n        /* If we sanitized `dirty` in-place, return it. */\n        if (IN_PLACE) {\n          return dirty;\n        }\n\n        /* Return sanitized string or DOM */\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              // eslint-disable-next-line unicorn/prefer-dom-node-append\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n            /*\n              AdoptNode() is not used because internal state is not reset\n              (e.g. the past names map of a HTMLFormElement), this is safe\n              in theory but we would rather not risk another attack vector.\n              The state that is cloned by importNode() is explicitly defined\n              by the specs.\n            */\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n        /* Serialize doctype if allowed */\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n\n        /* Sanitize final string template-safe */\n        if (SAFE_FOR_TEMPLATES) {\n          arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n            serializedHTML = stringReplace(serializedHTML, expr, ' ');\n          });\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n\n      /**\n       * Public method to set the configuration once\n       * setConfig\n       *\n       * @param {Object} cfg configuration object\n       */\n      DOMPurify.setConfig = function () {\n        let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n\n      /**\n       * Public method to remove the configuration\n       * clearConfig\n       *\n       */\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n\n      /**\n       * Public method to check if an attribute value is valid.\n       * Uses last set config, if any. Otherwise, uses config defaults.\n       * isValidAttribute\n       *\n       * @param  {String} tag Tag name of containing element.\n       * @param  {String} attr Attribute name.\n       * @param  {String} value Attribute value.\n       * @return {Boolean} Returns true if `value` is valid. Otherwise, returns false.\n       */\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        /* Initialize shared config vars if necessary. */\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        const lcTag = transformCaseFunc(tag);\n        const lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n\n      /**\n       * AddHook\n       * Public method to add DOMPurify hooks\n       *\n       * @param {String} entryPoint entry point for the hook to add\n       * @param {Function} hookFunction function to execute\n       */\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n\n      /**\n       * RemoveHook\n       * Public method to remove a DOMPurify hook at a given entryPoint\n       * (pops it from the stack of hooks if more are present)\n       *\n       * @param {String} entryPoint entry point for the hook to remove\n       * @return {Function} removed(popped) hook\n       */\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n\n      /**\n       * RemoveHooks\n       * Public method to remove all DOMPurify hooks at a given entryPoint\n       *\n       * @param  {String} entryPoint entry point for the hooks to remove\n       */\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n\n      /**\n       * RemoveAllHooks\n       * Public method to remove all DOMPurify hooks\n       */\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    const each$4 = Tools.each, trim = Tools.trim;\n    const queryParts = [\n      'source',\n      'protocol',\n      'authority',\n      'userInfo',\n      'user',\n      'password',\n      'host',\n      'port',\n      'relative',\n      'path',\n      'directory',\n      'file',\n      'query',\n      'anchor'\n    ];\n    const DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    const safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    const blockSvgDataUris = (allowSvgDataUrls, tagName) => {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$2(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    const decodeUri = encodedUri => {\n      try {\n        return decodeURIComponent(encodedUri);\n      } catch (ex) {\n        return unescape(encodedUri);\n      }\n    };\n    const isInvalidUri = (settings, uri, tagName) => {\n      const decodedUri = decodeUri(uri).replace(/\\s/g, '');\n      if (settings.allow_script_urls) {\n        return false;\n      } else if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n        return true;\n      } else if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(decodedUri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(decodedUri);\n      } else {\n        return /^data:/i.test(decodedUri);\n      }\n    };\n    class URI {\n      static parseDataUri(uri) {\n        let type;\n        const uriComponents = decodeURIComponent(uri).split(',');\n        const matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type,\n          data: uriComponents[1]\n        };\n      }\n      static isDomSafe(uri, context, options = {}) {\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          const decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      }\n      static getDocumentBaseUrl(loc) {\n        var _a;\n        let baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = (_a = loc.href) !== null && _a !== void 0 ? _a : '';\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      }\n      constructor(url, settings = {}) {\n        this.path = '';\n        this.directory = '';\n        url = trim(url);\n        this.settings = settings;\n        const baseUri = settings.base_uri;\n        const self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        const isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          const baseUrl = baseUri ? baseUri.path : new URI(document.location.href).directory;\n          if ((baseUri === null || baseUri === void 0 ? void 0 : baseUri.protocol) === '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            const match = /([^#?]*)([#?]?.*)/.exec(url);\n            if (match) {\n              url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n            }\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        const urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        if (urlMatch) {\n          each$4(queryParts, (v, i) => {\n            let part = urlMatch[i];\n            if (part) {\n              part = part.replace(/\\(mce_at\\)/g, '@@');\n            }\n            self[v] = part;\n          });\n        }\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      setPath(path) {\n        const pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        if (pathMatch) {\n          this.path = pathMatch[0];\n          this.directory = pathMatch[1];\n          this.file = pathMatch[2];\n        }\n        this.source = '';\n        this.getURI();\n      }\n      toRelative(uri) {\n        if (uri === './') {\n          return uri;\n        }\n        const relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        const tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        let output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      }\n      toAbsolute(uri, noHost) {\n        const absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      }\n      isSameOrigin(uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          const defaultPort = this.protocol ? DEFAULT_PORTS[this.protocol] : null;\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      }\n      toRelPath(base, path) {\n        let breakPoint = 0, out = '', i, l;\n        const normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        const items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      }\n      toAbsPath(base, path) {\n        let nb = 0;\n        const tr = /\\/$/.test(path) ? '/' : '';\n        const normalizedBase = base.split('/');\n        const normalizedPath = path.split('/');\n        const baseParts = [];\n        each$4(normalizedBase, k => {\n          if (k) {\n            baseParts.push(k);\n          }\n        });\n        const pathParts = [];\n        for (let i = normalizedPath.length - 1; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          pathParts.push(normalizedPath[i]);\n        }\n        const i = baseParts.length - nb;\n        let outPath;\n        if (i <= 0) {\n          outPath = reverse(pathParts).join('/');\n        } else {\n          outPath = baseParts.slice(0, i).join('/') + '/' + reverse(pathParts).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      }\n      getURI(noProtoHost = false) {\n        let s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      }\n    }\n\n    const filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n    const internalElementAttr = 'data-mce-type';\n    let uid = 0;\n    const processNode = (node, settings, schema, scope, evt) => {\n      var _a, _b, _c, _d;\n      const validate = settings.validate;\n      const specialElements = schema.getSpecialElements();\n      if (node.nodeType === COMMENT && !settings.allow_conditional_comments && /^\\[if/i.test((_a = node.nodeValue) !== null && _a !== void 0 ? _a : '')) {\n        node.nodeValue = ' ' + node.nodeValue;\n      }\n      const lcTagName = (_b = evt === null || evt === void 0 ? void 0 : evt.tagName) !== null && _b !== void 0 ? _b : node.nodeName.toLowerCase();\n      if (scope !== 'html' && schema.isValid(scope)) {\n        if (isNonNullable(evt)) {\n          evt.allowedTags[lcTagName] = true;\n        }\n        return;\n      }\n      if (node.nodeType !== ELEMENT || lcTagName === 'body') {\n        return;\n      }\n      const element = SugarElement.fromDom(node);\n      const isInternalElement = has$1(element, internalElementAttr);\n      const bogus = get$9(element, 'data-mce-bogus');\n      if (!isInternalElement && isString(bogus)) {\n        if (bogus === 'all') {\n          remove$5(element);\n        } else {\n          unwrap(element);\n        }\n        return;\n      }\n      const rule = schema.getElementRule(lcTagName);\n      if (validate && !rule) {\n        if (has$2(specialElements, lcTagName)) {\n          remove$5(element);\n        } else {\n          unwrap(element);\n        }\n        return;\n      } else {\n        if (isNonNullable(evt)) {\n          evt.allowedTags[lcTagName] = true;\n        }\n      }\n      if (validate && rule && !isInternalElement) {\n        each$e((_c = rule.attributesForced) !== null && _c !== void 0 ? _c : [], attr => {\n          set$3(element, attr.name, attr.value === '{$uid}' ? `mce_${ uid++ }` : attr.value);\n        });\n        each$e((_d = rule.attributesDefault) !== null && _d !== void 0 ? _d : [], attr => {\n          if (!has$1(element, attr.name)) {\n            set$3(element, attr.name, attr.value === '{$uid}' ? `mce_${ uid++ }` : attr.value);\n          }\n        });\n        if (rule.attributesRequired && !exists(rule.attributesRequired, attr => has$1(element, attr))) {\n          unwrap(element);\n          return;\n        }\n        if (rule.removeEmptyAttrs && hasNone(element)) {\n          unwrap(element);\n          return;\n        }\n        if (rule.outputName && rule.outputName !== lcTagName) {\n          mutate(element, rule.outputName);\n        }\n      }\n    };\n    const processAttr = (ele, settings, schema, scope, evt) => {\n      const tagName = ele.tagName.toLowerCase();\n      const {attrName, attrValue} = evt;\n      evt.keepAttr = shouldKeepAttribute(settings, schema, scope, tagName, attrName, attrValue);\n      if (evt.keepAttr) {\n        evt.allowedAttributes[attrName] = true;\n        if (isBooleanAttribute(attrName, schema)) {\n          evt.attrValue = attrName;\n        }\n        if (settings.allow_svg_data_urls && startsWith(attrValue, 'data:image/svg+xml')) {\n          evt.forceKeepAttr = true;\n        }\n      } else if (isRequiredAttributeOfInternalElement(ele, attrName)) {\n        evt.forceKeepAttr = true;\n      }\n    };\n    const shouldKeepAttribute = (settings, schema, scope, tagName, attrName, attrValue) => {\n      if (scope !== 'html' && !isNonHtmlElementRootName(tagName)) {\n        return true;\n      }\n      return !(attrName in filteredUrlAttrs && isInvalidUri(settings, attrValue, tagName)) && (!settings.validate || schema.isValid(tagName, attrName) || startsWith(attrName, 'data-') || startsWith(attrName, 'aria-'));\n    };\n    const isRequiredAttributeOfInternalElement = (ele, attrName) => ele.hasAttribute(internalElementAttr) && (attrName === 'id' || attrName === 'class' || attrName === 'style');\n    const isBooleanAttribute = (attrName, schema) => attrName in schema.getBoolAttrs();\n    const filterAttributes = (ele, settings, schema, scope) => {\n      const {attributes} = ele;\n      for (let i = attributes.length - 1; i >= 0; i--) {\n        const attr = attributes[i];\n        const attrName = attr.name;\n        const attrValue = attr.value;\n        if (!shouldKeepAttribute(settings, schema, scope, ele.tagName.toLowerCase(), attrName, attrValue) && !isRequiredAttributeOfInternalElement(ele, attrName)) {\n          ele.removeAttribute(attrName);\n        } else if (isBooleanAttribute(attrName, schema)) {\n          ele.setAttribute(attrName, attrName);\n        }\n      }\n    };\n    const setupPurify = (settings, schema, namespaceTracker) => {\n      const purify$1 = purify();\n      purify$1.addHook('uponSanitizeElement', (ele, evt) => {\n        processNode(ele, settings, schema, namespaceTracker.track(ele), evt);\n      });\n      purify$1.addHook('uponSanitizeAttribute', (ele, evt) => {\n        processAttr(ele, settings, schema, namespaceTracker.current(), evt);\n      });\n      return purify$1;\n    };\n    const getPurifyConfig = (settings, mimeType) => {\n      const basePurifyConfig = {\n        IN_PLACE: true,\n        ALLOW_UNKNOWN_PROTOCOLS: true,\n        ALLOWED_TAGS: [\n          '#comment',\n          '#cdata-section',\n          'body'\n        ],\n        ALLOWED_ATTR: [],\n        SAFE_FOR_XML: false\n      };\n      const config = { ...basePurifyConfig };\n      config.PARSER_MEDIA_TYPE = mimeType;\n      if (settings.allow_script_urls) {\n        config.ALLOWED_URI_REGEXP = /.*/;\n      } else if (settings.allow_html_data_urls) {\n        config.ALLOWED_URI_REGEXP = /^(?!(\\w+script|mhtml):)/i;\n      }\n      return config;\n    };\n    const sanitizeNamespaceElement = ele => {\n      const xlinkAttrs = [\n        'type',\n        'href',\n        'role',\n        'arcrole',\n        'title',\n        'show',\n        'actuate',\n        'label',\n        'from',\n        'to'\n      ].map(name => `xlink:${ name }`);\n      const config = {\n        IN_PLACE: true,\n        USE_PROFILES: {\n          html: true,\n          svg: true,\n          svgFilters: true\n        },\n        ALLOWED_ATTR: xlinkAttrs\n      };\n      purify().sanitize(ele, config);\n      return ele.innerHTML;\n    };\n    const getSanitizer = (settings, schema) => {\n      const namespaceTracker = createNamespaceTracker();\n      if (settings.sanitize) {\n        const purify = setupPurify(settings, schema, namespaceTracker);\n        const sanitizeHtmlElement = (body, mimeType) => {\n          purify.sanitize(body, getPurifyConfig(settings, mimeType));\n          purify.removed = [];\n          namespaceTracker.reset();\n        };\n        return {\n          sanitizeHtmlElement,\n          sanitizeNamespaceElement\n        };\n      } else {\n        const sanitizeHtmlElement = (body, _mimeType) => {\n          const nodeIterator = document.createNodeIterator(body, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT);\n          let node;\n          while (node = nodeIterator.nextNode()) {\n            const currentScope = namespaceTracker.track(node);\n            processNode(node, settings, schema, currentScope);\n            if (isElement$6(node)) {\n              filterAttributes(node, settings, schema, currentScope);\n            }\n          }\n          namespaceTracker.reset();\n        };\n        const sanitizeNamespaceElement = noop;\n        return {\n          sanitizeHtmlElement,\n          sanitizeNamespaceElement\n        };\n      }\n    };\n\n    const makeMap = Tools.makeMap, extend$1 = Tools.extend;\n    const transferChildren = (parent, nativeParent, specialElements, nsSanitizer) => {\n      const parentName = parent.name;\n      const isSpecial = parentName in specialElements && parentName !== 'title' && parentName !== 'textarea' && parentName !== 'noscript';\n      const childNodes = nativeParent.childNodes;\n      for (let ni = 0, nl = childNodes.length; ni < nl; ni++) {\n        const nativeChild = childNodes[ni];\n        const child = new AstNode(nativeChild.nodeName.toLowerCase(), nativeChild.nodeType);\n        if (isElement$6(nativeChild)) {\n          const attributes = nativeChild.attributes;\n          for (let ai = 0, al = attributes.length; ai < al; ai++) {\n            const attr = attributes[ai];\n            child.attr(attr.name, attr.value);\n          }\n          if (isNonHtmlElementRootName(child.name)) {\n            nsSanitizer(nativeChild);\n            child.value = nativeChild.innerHTML;\n          }\n        } else if (isText$a(nativeChild)) {\n          child.value = nativeChild.data;\n          if (isSpecial) {\n            child.raw = true;\n          }\n        } else if (isComment(nativeChild) || isCData(nativeChild) || isPi(nativeChild)) {\n          child.value = nativeChild.data;\n        }\n        if (!isNonHtmlElementRootName(child.name)) {\n          transferChildren(child, nativeChild, specialElements, nsSanitizer);\n        }\n        parent.append(child);\n      }\n    };\n    const walkTree = (root, preprocessors, postprocessors) => {\n      const traverseOrder = [];\n      for (let node = root, lastNode = node; node; lastNode = node, node = node.walk()) {\n        const tempNode = node;\n        each$e(preprocessors, preprocess => preprocess(tempNode));\n        if (isNullable(tempNode.parent) && tempNode !== root) {\n          node = lastNode;\n        } else {\n          traverseOrder.push(tempNode);\n        }\n      }\n      for (let i = traverseOrder.length - 1; i >= 0; i--) {\n        const node = traverseOrder[i];\n        each$e(postprocessors, postprocess => postprocess(node));\n      }\n    };\n    const whitespaceCleaner = (root, schema, settings, args) => {\n      const validate = settings.validate;\n      const nonEmptyElements = schema.getNonEmptyElements();\n      const whitespaceElements = schema.getWhitespaceElements();\n      const blockElements = extend$1(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n      const textRootBlockElements = getTextRootBlockElements(schema);\n      const allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n      const startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n      const endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n      const hasWhitespaceParent = node => {\n        let tempNode = node.parent;\n        while (isNonNullable(tempNode)) {\n          if (tempNode.name in whitespaceElements) {\n            return true;\n          } else {\n            tempNode = tempNode.parent;\n          }\n        }\n        return false;\n      };\n      const isTextRootBlockEmpty = node => {\n        let tempNode = node;\n        while (isNonNullable(tempNode)) {\n          if (tempNode.name in textRootBlockElements) {\n            return isEmpty(schema, nonEmptyElements, whitespaceElements, tempNode);\n          } else {\n            tempNode = tempNode.parent;\n          }\n        }\n        return false;\n      };\n      const isBlock = node => node.name in blockElements || isTransparentAstBlock(schema, node) || isNonHtmlElementRootName(node.name) && node.parent === root;\n      const isAtEdgeOfBlock = (node, start) => {\n        const neighbour = start ? node.prev : node.next;\n        if (isNonNullable(neighbour) || isNullable(node.parent)) {\n          return false;\n        }\n        return isBlock(node.parent) && (node.parent !== root || args.isRootContent === true);\n      };\n      const preprocess = node => {\n        var _a;\n        if (node.type === 3) {\n          if (!hasWhitespaceParent(node)) {\n            let text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n            text = text.replace(allWhiteSpaceRegExp, ' ');\n            if (isLineBreakNode(node.prev, isBlock) || isAtEdgeOfBlock(node, true)) {\n              text = text.replace(startWhiteSpaceRegExp, '');\n            }\n            if (text.length === 0) {\n              node.remove();\n            } else {\n              node.value = text;\n            }\n          }\n        }\n      };\n      const postprocess = node => {\n        var _a;\n        if (node.type === 1) {\n          const elementRule = schema.getElementRule(node.name);\n          if (validate && elementRule) {\n            const isNodeEmpty = isEmpty(schema, nonEmptyElements, whitespaceElements, node);\n            if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n              paddEmptyNode(settings, args, isBlock, node);\n            } else if (elementRule.removeEmpty && isNodeEmpty) {\n              if (isBlock(node)) {\n                node.remove();\n              } else {\n                node.unwrap();\n              }\n            } else if (elementRule.paddEmpty && (isNodeEmpty || isPaddedWithNbsp(node))) {\n              paddEmptyNode(settings, args, isBlock, node);\n            }\n          }\n        } else if (node.type === 3) {\n          if (!hasWhitespaceParent(node)) {\n            let text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n            if (node.next && isBlock(node.next) || isAtEdgeOfBlock(node, false)) {\n              text = text.replace(endWhiteSpaceRegExp, '');\n            }\n            if (text.length === 0) {\n              node.remove();\n            } else {\n              node.value = text;\n            }\n          }\n        }\n      };\n      return [\n        preprocess,\n        postprocess\n      ];\n    };\n    const getRootBlockName = (settings, args) => {\n      var _a;\n      const name = (_a = args.forced_root_block) !== null && _a !== void 0 ? _a : settings.forced_root_block;\n      if (name === false) {\n        return '';\n      } else if (name === true) {\n        return 'p';\n      } else {\n        return name;\n      }\n    };\n    const DomParser = (settings = {}, schema = Schema()) => {\n      const nodeFilterRegistry = create$8();\n      const attributeFilterRegistry = create$8();\n      const defaultedSettings = {\n        validate: true,\n        root_name: 'body',\n        sanitize: true,\n        ...settings\n      };\n      const parser = new DOMParser();\n      const sanitizer = getSanitizer(defaultedSettings, schema);\n      const parseAndSanitizeWithContext = (html, rootName, format = 'html') => {\n        const mimeType = format === 'xhtml' ? 'application/xhtml+xml' : 'text/html';\n        const isSpecialRoot = has$2(schema.getSpecialElements(), rootName.toLowerCase());\n        const content = isSpecialRoot ? `<${ rootName }>${ html }</${ rootName }>` : html;\n        const wrappedHtml = format === 'xhtml' ? `<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>${ content }</body></html>` : `<body>${ content }</body>`;\n        const body = parser.parseFromString(wrappedHtml, mimeType).body;\n        sanitizer.sanitizeHtmlElement(body, mimeType);\n        return isSpecialRoot ? body.firstChild : body;\n      };\n      const addNodeFilter = nodeFilterRegistry.addFilter;\n      const getNodeFilters = nodeFilterRegistry.getFilters;\n      const removeNodeFilter = nodeFilterRegistry.removeFilter;\n      const addAttributeFilter = attributeFilterRegistry.addFilter;\n      const getAttributeFilters = attributeFilterRegistry.getFilters;\n      const removeAttributeFilter = attributeFilterRegistry.removeFilter;\n      const findInvalidChildren = (node, invalidChildren) => {\n        if (isInvalid(schema, node)) {\n          invalidChildren.push(node);\n        }\n      };\n      const isWrappableNode = (blockElements, node) => {\n        const isInternalElement = isString(node.attr(internalElementAttr));\n        const isInlineElement = node.type === 1 && (!has$2(blockElements, node.name) && !isTransparentAstBlock(schema, node)) && !isNonHtmlElementRootName(node.name);\n        return node.type === 3 || isInlineElement && !isInternalElement;\n      };\n      const addRootBlocks = (rootNode, rootBlockName) => {\n        const blockElements = extend$1(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        const startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        const endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        let node = rootNode.firstChild, rootBlockNode = null;\n        const trim = rootBlock => {\n          var _a, _b;\n          if (rootBlock) {\n            node = rootBlock.firstChild;\n            if (node && node.type === 3) {\n              node.value = (_a = node.value) === null || _a === void 0 ? void 0 : _a.replace(startWhiteSpaceRegExp, '');\n            }\n            node = rootBlock.lastChild;\n            if (node && node.type === 3) {\n              node.value = (_b = node.value) === null || _b === void 0 ? void 0 : _b.replace(endWhiteSpaceRegExp, '');\n            }\n          }\n        };\n        if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n          return;\n        }\n        while (node) {\n          const next = node.next;\n          if (isWrappableNode(blockElements, node)) {\n            if (!rootBlockNode) {\n              rootBlockNode = new AstNode(rootBlockName, 1);\n              rootBlockNode.attr(defaultedSettings.forced_root_block_attrs);\n              rootNode.insert(rootBlockNode, node);\n              rootBlockNode.append(node);\n            } else {\n              rootBlockNode.append(node);\n            }\n          } else {\n            trim(rootBlockNode);\n            rootBlockNode = null;\n          }\n          node = next;\n        }\n        trim(rootBlockNode);\n      };\n      const parse = (html, args = {}) => {\n        var _a;\n        const validate = defaultedSettings.validate;\n        const rootName = (_a = args.context) !== null && _a !== void 0 ? _a : defaultedSettings.root_name;\n        const element = parseAndSanitizeWithContext(html, rootName, args.format);\n        updateChildren(schema, element);\n        const rootNode = new AstNode(rootName, 11);\n        transferChildren(rootNode, element, schema.getSpecialElements(), sanitizer.sanitizeNamespaceElement);\n        element.innerHTML = '';\n        const [whitespacePre, whitespacePost] = whitespaceCleaner(rootNode, schema, defaultedSettings, args);\n        const invalidChildren = [];\n        const invalidFinder = validate ? node => findInvalidChildren(node, invalidChildren) : noop;\n        const matches = {\n          nodes: {},\n          attributes: {}\n        };\n        const matchFinder = node => matchNode$1(getNodeFilters(), getAttributeFilters(), node, matches);\n        walkTree(rootNode, [\n          whitespacePre,\n          matchFinder\n        ], [\n          whitespacePost,\n          invalidFinder\n        ]);\n        invalidChildren.reverse();\n        if (validate && invalidChildren.length > 0) {\n          if (args.context) {\n            const {\n              pass: topLevelChildren,\n              fail: otherChildren\n            } = partition$2(invalidChildren, child => child.parent === rootNode);\n            cleanInvalidNodes(otherChildren, schema, rootNode, matchFinder);\n            args.invalid = topLevelChildren.length > 0;\n          } else {\n            cleanInvalidNodes(invalidChildren, schema, rootNode, matchFinder);\n          }\n        }\n        const rootBlockName = getRootBlockName(defaultedSettings, args);\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks(rootNode, rootBlockName);\n        }\n        if (!args.invalid) {\n          runFilters(matches, args);\n        }\n        return rootNode;\n      };\n      const exports = {\n        schema,\n        addAttributeFilter,\n        getAttributeFilters,\n        removeAttributeFilter,\n        addNodeFilter,\n        getNodeFilters,\n        removeNodeFilter,\n        parse\n      };\n      register$4(exports, defaultedSettings);\n      register$5(exports, defaultedSettings, schema);\n      return exports;\n    };\n\n    const serializeContent = content => isTreeNode(content) ? HtmlSerializer({ validate: false }).serialize(content) : content;\n    const withSerializedContent = (content, fireEvent, parserSettings) => {\n      const serializedContent = serializeContent(content);\n      const eventArgs = fireEvent(serializedContent);\n      if (eventArgs.isDefaultPrevented()) {\n        return eventArgs;\n      } else if (isTreeNode(content)) {\n        if (eventArgs.content !== serializedContent) {\n          const rootNode = DomParser({\n            validate: false,\n            forced_root_block: false,\n            ...parserSettings\n          }).parse(eventArgs.content, { context: content.name });\n          return {\n            ...eventArgs,\n            content: rootNode\n          };\n        } else {\n          return {\n            ...eventArgs,\n            content\n          };\n        }\n      } else {\n        return eventArgs;\n      }\n    };\n    const preProcessGetContent = (editor, args) => {\n      if (args.no_events) {\n        return Result.value(args);\n      } else {\n        const eventArgs = fireBeforeGetContent(editor, args);\n        if (eventArgs.isDefaultPrevented()) {\n          return Result.error(fireGetContent(editor, {\n            content: '',\n            ...eventArgs\n          }).content);\n        } else {\n          return Result.value(eventArgs);\n        }\n      }\n    };\n    const postProcessGetContent = (editor, content, args) => {\n      if (args.no_events) {\n        return content;\n      } else {\n        const processedEventArgs = withSerializedContent(content, content => fireGetContent(editor, {\n          ...args,\n          content\n        }), {\n          sanitize: shouldSanitizeXss(editor),\n          sandbox_iframes: shouldSandboxIframes(editor)\n        });\n        return processedEventArgs.content;\n      }\n    };\n    const preProcessSetContent = (editor, args) => {\n      if (args.no_events) {\n        return Result.value(args);\n      } else {\n        const processedEventArgs = withSerializedContent(args.content, content => fireBeforeSetContent(editor, {\n          ...args,\n          content\n        }), {\n          sanitize: shouldSanitizeXss(editor),\n          sandbox_iframes: shouldSandboxIframes(editor)\n        });\n        if (processedEventArgs.isDefaultPrevented()) {\n          fireSetContent(editor, processedEventArgs);\n          return Result.error(undefined);\n        } else {\n          return Result.value(processedEventArgs);\n        }\n      }\n    };\n    const postProcessSetContent = (editor, content, args) => {\n      if (!args.no_events) {\n        fireSetContent(editor, {\n          ...args,\n          content\n        });\n      }\n    };\n\n    const tableModel = (element, width, rows) => ({\n      element,\n      width,\n      rows\n    });\n    const tableRow = (element, cells) => ({\n      element,\n      cells\n    });\n    const cellPosition = (x, y) => ({\n      x,\n      y\n    });\n    const getSpan = (td, key) => {\n      return getOpt(td, key).bind(toInt).getOr(1);\n    };\n    const fillout = (table, x, y, tr, td) => {\n      const rowspan = getSpan(td, 'rowspan');\n      const colspan = getSpan(td, 'colspan');\n      const rows = table.rows;\n      for (let y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (let x2 = x; x2 < x + colspan; x2++) {\n          const cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow$1(td);\n        }\n      }\n    };\n    const cellExists = (table, x, y) => {\n      const rows = table.rows;\n      const cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    const skipCellsX = (table, x, y) => {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    const getWidth = rows => {\n      return foldl(rows, (acc, row) => {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    const findElementPos = (table, element) => {\n      const rows = table.rows;\n      for (let y = 0; y < rows.length; y++) {\n        const cells = rows[y].cells;\n        for (let x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    const extractRows = (table, sx, sy, ex, ey) => {\n      const newRows = [];\n      const rows = table.rows;\n      for (let y = sy; y <= ey; y++) {\n        const cells = rows[y].cells;\n        const slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    const subTable = (table, startPos, endPos) => {\n      const sx = startPos.x, sy = startPos.y;\n      const ex = endPos.x, ey = endPos.y;\n      const newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    const createDomTable = (table, rows) => {\n      const tableElement = shallow$1(table.element);\n      const tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    const modelRowsToDomRows = table => {\n      return map$3(table.rows, row => {\n        const cells = map$3(row.cells, cell => {\n          const td = deep$1(cell);\n          remove$a(td, 'colspan');\n          remove$a(td, 'rowspan');\n          return td;\n        });\n        const tr = shallow$1(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    const fromDom = tableElm => {\n      const table = tableModel(shallow$1(tableElm), 0, []);\n      each$e(descendants(tableElm, 'tr'), (tr, y) => {\n        each$e(descendants(tr, 'td,th'), (td, x) => {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    const toDom = table => {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    const subsection = (table, startElement, endElement) => {\n      return findElementPos(table, startElement).bind(startPos => {\n        return findElementPos(table, endElement).map(endPos => {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    const findParentListContainer = parents => find$2(parents, elm => name(elm) === 'ul' || name(elm) === 'ol');\n    const getFullySelectedListWrappers = (parents, rng) => find$2(parents, elm => name(elm) === 'li' && hasAllContentsSelected(elm, rng)).fold(constant([]), _li => findParentListContainer(parents).map(listCont => {\n      const listElm = SugarElement.fromTag(name(listCont));\n      const listStyles = filter$4(getAllRaw(listCont), (_style, name) => startsWith(name, 'list-style'));\n      setAll(listElm, listStyles);\n      return [\n        SugarElement.fromTag('li'),\n        listElm\n      ];\n    }).getOr([]));\n    const wrap = (innerElm, elms) => {\n      const wrapped = foldl(elms, (acc, elm) => {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    const directListWrappers = commonAnchorContainer => {\n      if (isListItem$1(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), listElm => [\n          commonAnchorContainer,\n          listElm\n        ]);\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    const getWrapElements = (rootNode, rng, schema) => {\n      const commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      const parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      const wrapElements = filter$5(parents, el => schema.isWrapper(name(el)));\n      const listWrappers = getFullySelectedListWrappers(parents, rng);\n      const allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow$1);\n    };\n    const emptyFragment = () => fromElements([]);\n    const getFragmentFromRange = (rootNode, rng, schema) => wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng, schema));\n    const getParentTable = (rootElm, cell) => ancestor$3(cell, 'table', curry(eq, rootElm));\n    const getTableFragment = (rootNode, selectedTableCells) => getParentTable(rootNode, selectedTableCells[0]).bind(tableElm => {\n      const firstCell = selectedTableCells[0];\n      const lastCell = selectedTableCells[selectedTableCells.length - 1];\n      const fullTableModel = fromDom(tableElm);\n      return subsection(fullTableModel, firstCell, lastCell).map(sectionedTableModel => fromElements([toDom(sectionedTableModel)]));\n    }).getOrThunk(emptyFragment);\n    const getSelectionFragment = (rootNode, ranges, schema) => ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0], schema);\n    const read$3 = (rootNode, ranges, schema) => {\n      const selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges, schema);\n    };\n\n    const isCollapsibleWhitespace = (text, index) => index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    const getInnerText = bin => {\n      return trim$2(bin.innerText);\n    };\n    const getContextNodeName = parentBlockOpt => parentBlockOpt.map(block => block.nodeName).getOr('div').toLowerCase();\n    const getTextContent = editor => Optional.from(editor.selection.getRng()).map(rng => {\n      var _a;\n      const parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n      const body = editor.getBody();\n      const contextNodeName = getContextNodeName(parentBlockOpt);\n      const rangeContentClone = SugarElement.fromDom(rng.cloneContents());\n      cleanupBogusElements(rangeContentClone);\n      cleanupInputNames(rangeContentClone);\n      const bin = editor.dom.add(body, contextNodeName, {\n        'data-mce-bogus': 'all',\n        'style': 'overflow: hidden; opacity: 0;'\n      }, rangeContentClone.dom);\n      const text = getInnerText(bin);\n      const nonRenderedText = trim$2((_a = bin.textContent) !== null && _a !== void 0 ? _a : '');\n      editor.dom.remove(bin);\n      if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n        const parentBlock = parentBlockOpt.getOr(body);\n        const parentBlockText = getInnerText(parentBlock);\n        const textIndex = parentBlockText.indexOf(text);\n        if (textIndex === -1) {\n          return text;\n        } else {\n          const hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n          const hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n          return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n        }\n      } else {\n        return text;\n      }\n    }).getOr('');\n    const getSerializedContent = (editor, args) => {\n      const rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      const sel = editor.selection.getSel();\n      const ranges = processRanges(editor, getRanges$1(sel));\n      const fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges, editor.schema).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    const extractSelectedContent = (editor, args) => {\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        const content = getSerializedContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          return editor.selection.isCollapsed() ? '' : content;\n        }\n      }\n    };\n    const setupArgs$3 = (args, format) => ({\n      ...args,\n      format,\n      get: true,\n      selection: true,\n      getInner: true\n    });\n    const getSelectedContentInternal = (editor, format, args = {}) => {\n      const defaultedArgs = setupArgs$3(args, format);\n      return preProcessGetContent(editor, defaultedArgs).fold(identity, updatedArgs => {\n        const content = extractSelectedContent(editor, updatedArgs);\n        return postProcessGetContent(editor, content, updatedArgs);\n      });\n    };\n\n    const KEEP = 0, INSERT = 1, DELETE = 2;\n    const diff = (left, right) => {\n      const size = left.length + right.length + 2;\n      const vDown = new Array(size);\n      const vUp = new Array(size);\n      const snake = (start, end, diag) => {\n        return {\n          start,\n          end,\n          diag\n        };\n      };\n      const buildScript = (start1, end1, start2, end2, script) => {\n        const middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          let i = start1;\n          let j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (let i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      const buildSnake = (start, diag, end1, end2) => {\n        let end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      const getMiddleSnake = (start1, end1, start2, end2) => {\n        const m = end1 - start1;\n        const n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        const delta = m - n;\n        const sum = n + m;\n        const offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        let d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n        return null;\n      };\n      const script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    const getOuterHtml = elm => {\n      if (isElement$6(elm)) {\n        return elm.outerHTML;\n      } else if (isText$a(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    const createFragment = html => {\n      let node;\n      const container = document.createElement('div');\n      const frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    const insertAt = (elm, html, index) => {\n      const fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        const target = elm.childNodes[index];\n        elm.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    const removeAt = (elm, index) => {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        const target = elm.childNodes[index];\n        elm.removeChild(target);\n      }\n    };\n    const applyDiff = (diff, elm) => {\n      let index = 0;\n      each$e(diff, action => {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    const read$2 = (elm, trimZwsp) => filter$5(map$3(from(elm.childNodes), trimZwsp ? compose(trim$2, getOuterHtml) : getOuterHtml), item => {\n      return item.length > 0;\n    });\n    const write = (fragments, elm) => {\n      const currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    const lazyTempDocument = cached(() => document.implementation.createHTMLDocument('undo'));\n    const hasIframes = body => body.querySelector('iframe') !== null;\n    const createFragmentedLevel = fragments => {\n      return {\n        type: 'fragmented',\n        fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    const createCompleteLevel = content => {\n      return {\n        type: 'complete',\n        fragments: null,\n        content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    const createFromEditor = editor => {\n      const tempAttrs = editor.serializer.getTempAttrs();\n      const body = trim$1(editor.getBody(), tempAttrs);\n      return hasIframes(body) ? createFragmentedLevel(read$2(body, true)) : createCompleteLevel(trim$2(body.innerHTML));\n    };\n    const applyToEditor = (editor, level, before) => {\n      const bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      if (bookmark) {\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.scrollIntoView();\n      }\n    };\n    const getLevelContent = level => {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    const getCleanLevelContent = level => {\n      const elm = SugarElement.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each$e(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$6(elm);\n    };\n    const hasEqualContent = (level1, level2) => getLevelContent(level1) === getLevelContent(level2);\n    const hasEqualCleanedContent = (level1, level2) => getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    const isEq$1 = (level1, level2) => {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    const isUnlocked = locks => locks.get() === 0;\n\n    const setTyping = (undoManager, typing, locks) => {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    const endTyping = (undoManager, locks) => {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    const endTypingLevelIgnoreLocks = undoManager => {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    const beforeChange$1 = (editor, locks, beforeBookmark) => {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    const addUndoLevel$1 = (editor, undoManager, index, locks, beforeBookmark, level, event) => {\n      const currentLevel = createFromEditor(editor);\n      const newLevel = Tools.extend(level || {}, currentLevel);\n      if (!isUnlocked(locks) || editor.removed) {\n        return null;\n      }\n      const lastLevel = undoManager.data[index.get()];\n      if (editor.dispatch('BeforeAddUndo', {\n          level: newLevel,\n          lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, newLevel)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(bm => {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      const customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (let i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      newLevel.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(newLevel);\n      index.set(undoManager.data.length - 1);\n      const args = {\n        level: newLevel,\n        lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.dispatch('AddUndo', args);\n        editor.dispatch('change', args);\n      } else {\n        editor.dispatch('AddUndo', args);\n      }\n      return newLevel;\n    };\n    const clear$1 = (editor, undoManager, index) => {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.dispatch('ClearUndos');\n    };\n    const extra$1 = (editor, undoManager, index, callback1, callback2) => {\n      if (undoManager.transact(callback1)) {\n        const bookmark = undoManager.data[index.get()].bookmark;\n        const lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    const redo$1 = (editor, index, data) => {\n      let level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.dispatch('Redo', { level });\n      }\n      return level;\n    };\n    const undo$1 = (editor, undoManager, locks, index) => {\n      let level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.dispatch('Undo', { level });\n      }\n      return level;\n    };\n    const reset$1 = undoManager => {\n      undoManager.clear();\n      undoManager.add();\n    };\n    const hasUndo$1 = (editor, undoManager, index) => index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    const hasRedo$1 = (undoManager, index) => index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    const transact$1 = (undoManager, locks, callback) => {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    const ignore$1 = (locks, callback) => {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    const addVisualInternal = (editor, elm) => {\n      const dom = editor.dom;\n      const scope = isNonNullable(elm) ? elm : editor.getBody();\n      each$e(dom.select('table,a', scope), matchedElm => {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          const cls = getVisualAidsTableClass(editor);\n          const value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            const value = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            const cls = getVisualAidsAnchorClass(editor);\n            if (value && editor.hasVisual) {\n              dom.addClass(matchedElm, cls);\n            } else {\n              dom.removeClass(matchedElm, cls);\n            }\n          }\n          break;\n        }\n      });\n      editor.dispatch('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    const makePlainAdaptor = editor => ({\n      init: { bindEvents: noop },\n      undoManager: {\n        beforeChange: (locks, beforeBookmark) => beforeChange$1(editor, locks, beforeBookmark),\n        add: (undoManager, index, locks, beforeBookmark, level, event) => addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event),\n        undo: (undoManager, locks, index) => undo$1(editor, undoManager, locks, index),\n        redo: (index, data) => redo$1(editor, index, data),\n        clear: (undoManager, index) => clear$1(editor, undoManager, index),\n        reset: undoManager => reset$1(undoManager),\n        hasUndo: (undoManager, index) => hasUndo$1(editor, undoManager, index),\n        hasRedo: (undoManager, index) => hasRedo$1(undoManager, index),\n        transact: (undoManager, locks, callback) => transact$1(undoManager, locks, callback),\n        ignore: (locks, callback) => ignore$1(locks, callback),\n        extra: (undoManager, index, callback1, callback2) => extra$1(editor, undoManager, index, callback1, callback2)\n      },\n      formatter: {\n        match: (name, vars, node, similar) => match$2(editor, name, vars, node, similar),\n        matchAll: (names, vars) => matchAll(editor, names, vars),\n        matchNode: (node, name, vars, similar) => matchNode(editor, node, name, vars, similar),\n        canApply: name => canApply(editor, name),\n        closest: names => closest(editor, names),\n        apply: (name, vars, node) => applyFormat$1(editor, name, vars, node),\n        remove: (name, vars, node, similar) => removeFormat$1(editor, name, vars, node, similar),\n        toggle: (name, vars, node) => toggle(editor, name, vars, node),\n        formatChanged: (registeredFormatListeners, formats, callback, similar, vars) => formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars)\n      },\n      editor: {\n        getContent: args => getContentInternal(editor, args),\n        setContent: (content, args) => setContentInternal(editor, content, args),\n        insertContent: (value, details) => insertHtmlAtCaret(editor, value, details),\n        addVisual: elm => addVisualInternal(editor, elm)\n      },\n      selection: { getContent: (format, args) => getSelectedContentInternal(editor, format, args) },\n      autocompleter: {\n        addDecoration: range => create$9(editor, range),\n        removeDecoration: () => remove$2(editor, SugarElement.fromDom(editor.getBody()))\n      },\n      raw: { getModel: () => Optional.none() }\n    });\n    const makeRtcAdaptor = rtcEditor => {\n      const defaultVars = vars => isObject(vars) ? vars : {};\n      const {init, undoManager, formatter, editor, selection, autocompleter, raw} = rtcEditor;\n      return {\n        init: { bindEvents: init.bindEvents },\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: (_undoManager, _locks, fn) => undoManager.transact(fn),\n          ignore: (_locks, callback) => undoManager.ignore(callback),\n          extra: (_undoManager, _index, callback1, callback2) => undoManager.extra(callback1, callback2)\n        },\n        formatter: {\n          match: (name, vars, _node, similar) => formatter.match(name, defaultVars(vars), similar),\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: name => formatter.canApply(name),\n          closest: names => formatter.closest(names),\n          apply: (name, vars, _node) => formatter.apply(name, defaultVars(vars)),\n          remove: (name, vars, _node, _similar) => formatter.remove(name, defaultVars(vars)),\n          toggle: (name, vars, _node) => formatter.toggle(name, defaultVars(vars)),\n          formatChanged: (_rfl, formats, callback, similar, vars) => formatter.formatChanged(formats, callback, similar, vars)\n        },\n        editor: {\n          getContent: args => editor.getContent(args),\n          setContent: (content, args) => {\n            return {\n              content: editor.setContent(content, args),\n              html: ''\n            };\n          },\n          insertContent: (content, _details) => {\n            editor.insertContent(content);\n            return '';\n          },\n          addVisual: editor.addVisual\n        },\n        selection: { getContent: (_format, args) => selection.getContent(args) },\n        autocompleter: {\n          addDecoration: autocompleter.addDecoration,\n          removeDecoration: autocompleter.removeDecoration\n        },\n        raw: { getModel: () => Optional.some(raw.getRawModel()) }\n      };\n    };\n    const makeNoopAdaptor = () => {\n      const nul = constant(null);\n      const empty = constant('');\n      return {\n        init: { bindEvents: noop },\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: constant({\n            content: '',\n            html: ''\n          }),\n          insertContent: constant(''),\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        autocompleter: {\n          addDecoration: noop,\n          removeDecoration: noop\n        },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    const isRtc = editor => has$2(editor.plugins, 'rtc');\n    const getRtcSetup = editor => get$a(editor.plugins, 'rtc').bind(rtcPlugin => Optional.from(rtcPlugin.setup));\n    const setup$t = editor => {\n      const editorCast = editor;\n      return getRtcSetup(editor).fold(() => {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, setup => {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(() => setup().then(rtcEditor => {\n          editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n          return rtcEditor.rtc.isRemote;\n        }));\n      });\n    };\n    const getRtcInstanceWithFallback = editor => editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    const getRtcInstanceWithError = editor => {\n      const rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    const beforeChange = (editor, locks, beforeBookmark) => {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    const addUndoLevel = (editor, undoManager, index, locks, beforeBookmark, level, event) => getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    const undo = (editor, undoManager, locks, index) => getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    const redo = (editor, index, data) => getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    const clear = (editor, undoManager, index) => {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    const reset = (editor, undoManager) => {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    const hasUndo = (editor, undoManager, index) => getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    const hasRedo = (editor, undoManager, index) => getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    const transact = (editor, undoManager, locks, callback) => getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    const ignore = (editor, locks, callback) => {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    const extra = (editor, undoManager, index, callback1, callback2) => {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    const matchFormat = (editor, name, vars, node, similar) => getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    const matchAllFormats = (editor, names, vars) => getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    const matchNodeFormat = (editor, node, name, vars, similar) => getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    const canApplyFormat = (editor, name) => getRtcInstanceWithError(editor).formatter.canApply(name);\n    const closestFormat = (editor, names) => getRtcInstanceWithError(editor).formatter.closest(names);\n    const applyFormat = (editor, name, vars, node) => {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    const removeFormat = (editor, name, vars, node, similar) => {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    const toggleFormat = (editor, name, vars, node) => {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    const formatChanged = (editor, registeredFormatListeners, formats, callback, similar, vars) => getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    const getContent$2 = (editor, args) => getRtcInstanceWithFallback(editor).editor.getContent(args);\n    const setContent$2 = (editor, content, args) => getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    const insertContent$1 = (editor, value, details) => getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    const getSelectedContent = (editor, format, args) => getRtcInstanceWithError(editor).selection.getContent(format, args);\n    const addVisual$1 = (editor, elm) => getRtcInstanceWithError(editor).editor.addVisual(elm);\n    const bindEvents = editor => getRtcInstanceWithError(editor).init.bindEvents();\n    const addAutocompleterDecoration = (editor, range) => getRtcInstanceWithError(editor).autocompleter.addDecoration(range);\n    const removeAutocompleterDecoration = editor => getRtcInstanceWithError(editor).autocompleter.removeDecoration();\n\n    const getContent$1 = (editor, args = {}) => {\n      const format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    const removeEmpty = text => {\n      if (text.dom.length === 0) {\n        remove$5(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    const walkPastBookmark = (node, start) => node.filter(elm => BookmarkManager.isBookmarkNode(elm.dom)).bind(start ? nextSibling : prevSibling);\n    const merge$1 = (outer, inner, rng, start, schema) => {\n      const outerElm = outer.dom;\n      const innerElm = inner.dom;\n      const oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, schema, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, schema, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    const normalizeTextIfRequired = (inner, start, schema) => {\n      parent(inner).each(root => {\n        const text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0), schema)) {\n          normalizeWhitespaceAfter(text, 0, schema);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length), schema)) {\n          normalizeWhitespaceBefore(text, text.length, schema);\n        }\n      });\n    };\n    const mergeAndNormalizeText = (outerNode, innerNode, rng, start, schema) => {\n      outerNode.bind(outer => {\n        const normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0, schema);\n        return innerNode.filter(isText$b).map(inner => merge$1(outer, inner, rng, start, schema));\n      }).orThunk(() => {\n        const innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$b);\n        return innerTextNode.map(inner => normalizeTextIfRequired(inner, start, schema));\n      });\n    };\n    const rngSetContent = (rng, fragment, schema) => {\n      const firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      const lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      const prevText = firstChild.bind(prevSibling).filter(isText$b).bind(removeEmpty);\n      const nextText = lastChild.bind(nextSibling).filter(isText$b).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true, schema);\n      mergeAndNormalizeText(nextText, lastChild, rng, false, schema);\n      rng.collapse(false);\n    };\n    const setupArgs$2 = (args, content) => ({\n      format: 'html',\n      ...args,\n      set: true,\n      selection: true,\n      content\n    });\n    const cleanContent = (editor, args) => {\n      if (args.format !== 'raw') {\n        const rng = editor.selection.getRng();\n        const contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        const contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        const node = editor.parser.parse(args.content, {\n          forced_root_block: false,\n          ...contextArgs,\n          ...args\n        });\n        return HtmlSerializer({ validate: false }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    const setContent$1 = (editor, content, args = {}) => {\n      const defaultedArgs = setupArgs$2(args, content);\n      preProcessSetContent(editor, defaultedArgs).each(updatedArgs => {\n        const cleanedContent = cleanContent(editor, updatedArgs);\n        const rng = editor.selection.getRng();\n        rngSetContent(rng, rng.createContextualFragment(cleanedContent), editor.schema);\n        editor.selection.setRng(rng);\n        scrollRangeIntoView(editor, rng);\n        postProcessSetContent(editor, cleanedContent, updatedArgs);\n      });\n    };\n\n    const deleteFromCallbackMap = (callbackMap, selector, callback) => {\n      if (has$2(callbackMap, selector)) {\n        const newCallbacks = filter$5(callbackMap[selector], cb => cb !== callback);\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    var SelectorChanged = (dom, editor) => {\n      let selectorChangedData;\n      let currentSelectors;\n      const findMatchingNode = (selector, nodes) => find$2(nodes, node => dom.is(node, selector));\n      const getParents = elem => dom.getParents(elem, undefined, dom.getRoot());\n      const setup = () => {\n        selectorChangedData = {};\n        currentSelectors = {};\n        editor.on('NodeChange', e => {\n          const node = e.element;\n          const parents = getParents(node);\n          const matchedSelectors = {};\n          each$d(selectorChangedData, (callbacks, selector) => {\n            findMatchingNode(selector, parents).each(node => {\n              if (!currentSelectors[selector]) {\n                each$e(callbacks, callback => {\n                  callback(true, {\n                    node,\n                    selector,\n                    parents\n                  });\n                });\n                currentSelectors[selector] = callbacks;\n              }\n              matchedSelectors[selector] = callbacks;\n            });\n          });\n          each$d(currentSelectors, (callbacks, selector) => {\n            if (!matchedSelectors[selector]) {\n              delete currentSelectors[selector];\n              each$e(callbacks, callback => {\n                callback(false, {\n                  node,\n                  selector,\n                  parents\n                });\n              });\n            }\n          });\n        });\n      };\n      return {\n        selectorChangedWithUnbind: (selector, callback) => {\n          if (!selectorChangedData) {\n            setup();\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(() => {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: () => {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    };\n\n    const isAttachedToDom = node => {\n      return !!(node && node.ownerDocument) && contains(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    const isValidRange = rng => {\n      if (!rng) {\n        return false;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    const EditorSelection = (dom, win, serializer, editor) => {\n      let selectedRange;\n      let explicitRange;\n      const {selectorChangedWithUnbind} = SelectorChanged(dom, editor);\n      const setCursorLocation = (node, offset) => {\n        const rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      const getContent = args => getContent$1(editor, args);\n      const setContent = (content, args) => setContent$1(editor, content, args);\n      const getStart$1 = real => getStart(editor.getBody(), getRng$1(), real);\n      const getEnd = real => getEnd$1(editor.getBody(), getRng$1(), real);\n      const getBookmark = (type, normalized) => bookmarkManager.getBookmark(type, normalized);\n      const moveToBookmark = bookmark => bookmarkManager.moveToBookmark(bookmark);\n      const select$1 = (node, content) => {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      const isCollapsed = () => {\n        const rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      const isEditable = () => {\n        const rng = getRng$1();\n        const fakeSelectedElements = editor.getBody().querySelectorAll('[data-mce-selected=\"1\"]');\n        if (fakeSelectedElements.length > 0) {\n          return forall(fakeSelectedElements, el => dom.isEditable(el.parentElement));\n        } else {\n          return isEditableRange(dom, rng);\n        }\n      };\n      const collapse = toStart => {\n        const rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      const getSel = () => win.getSelection ? win.getSelection() : win.document.selection;\n      const getRng$1 = () => {\n        let rng;\n        const tryCompareBoundaryPoints = (how, sourceRange, destinationRange) => {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        const doc = win.document;\n        if (isNonNullable(editor.bookmark) && !hasFocus(editor)) {\n          const bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(r => processRanges(editor, [r])[0]).getOr(doc.createRange());\n          }\n        }\n        try {\n          const selection = getSel();\n          if (selection && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange();\n        }\n        if (isDocument$1(rng.startContainer) && rng.collapsed) {\n          const elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      const setRng = (rng, forward) => {\n        if (!isValidRange(rng)) {\n          return;\n        }\n        const sel = getSel();\n        const evt = editor.dispatch('SetSelectionRange', {\n          range: rng,\n          forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && (sel === null || sel === void 0 ? void 0 : sel.setBaseAndExtent)) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              const node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.nodeName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.dispatch('AfterSetSelectionRange', {\n          range: rng,\n          forward\n        });\n      };\n      const setNode = elm => {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      const getNode$1 = () => getNode(editor.getBody(), getRng$1());\n      const getSelectedBlocks$1 = (startElm, endElm) => getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      const isForward = () => {\n        const sel = getSel();\n        const anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        const focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        const anchorRange = dom.createRng();\n        const focusRange = dom.createRng();\n        try {\n          anchorRange.setStart(anchorNode, sel.anchorOffset);\n          anchorRange.collapse(true);\n          focusRange.setStart(focusNode, sel.focusOffset);\n          focusRange.collapse(true);\n        } catch (e) {\n          return true;\n        }\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      const normalize = () => {\n        const rng = getRng$1();\n        const sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          const normRng = normalize$2(dom, rng);\n          normRng.each(normRng => {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      const selectorChanged = (selector, callback) => {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      const getScrollContainer = () => {\n        let scrollContainer;\n        let node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      const scrollIntoView = (elm, alignToTop) => {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      const placeCaretAt = (clientX, clientY) => setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      const getBoundingClientRect = () => {\n        const rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      const destroy = () => {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      const expand = (options = { type: 'word' }) => setRng(RangeUtils(dom).expand(getRng$1(), options));\n      const exports = {\n        dom,\n        win,\n        serializer,\n        editor,\n        expand,\n        collapse,\n        setCursorLocation,\n        getContent,\n        setContent,\n        getBookmark,\n        moveToBookmark,\n        select: select$1,\n        isCollapsed,\n        isEditable,\n        isForward,\n        setNode,\n        getNode: getNode$1,\n        getSel,\n        setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize,\n        selectorChanged,\n        selectorChangedWithUnbind,\n        getScrollContainer,\n        scrollIntoView,\n        placeCaretAt,\n        getBoundingClientRect,\n        destroy\n      };\n      const bookmarkManager = BookmarkManager(exports);\n      const controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    const register$3 = (htmlParser, settings, dom) => {\n      htmlParser.addAttributeFilter('data-mce-tabindex', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', (nodes, name) => {\n        const internalName = 'data-mce-' + name;\n        const urlConverter = settings.url_converter;\n        const urlConverterScope = settings.url_converter_scope;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr('class');\n          if (value) {\n            value = value.replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', (nodes, name, args) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            const hasChildren = Optional.from(node.firstChild).exists(firstChild => {\n              var _a;\n              return !isZwsp$1((_a = firstChild.value) !== null && _a !== void 0 ? _a : '');\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', (nodes, name) => {\n        var _a;\n        const trim = value => {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const firstChild = node.firstChild;\n          const value = (_a = firstChild === null || firstChild === void 0 ? void 0 : firstChild.value) !== null && _a !== void 0 ? _a : '';\n          if (name === 'script') {\n            const type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && firstChild && value.length > 0) {\n              firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && firstChild && value.length > 0) {\n              firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const value = node.value;\n          if (settings.preserve_cdata && (value === null || value === void 0 ? void 0 : value.indexOf('[CDATA[')) === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if ((value === null || value === void 0 ? void 0 : value.indexOf('mce:protected ')) === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', nodes => {\n        each$e(nodes, node => {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,data-mce-block,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n      if (settings.remove_trailing_brs) {\n        addNodeFilter(settings, htmlParser, htmlParser.schema);\n      }\n    };\n    const trimTrailingBr = rootNode => {\n      const isBr = node => {\n        return (node === null || node === void 0 ? void 0 : node.name) === 'br';\n      };\n      const brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        const brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    const preProcess$1 = (editor, node, args) => {\n      let oldDoc;\n      const dom = editor.dom;\n      let clonedNode = node.cloneNode(true);\n      const impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        const doc = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], node => {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc.body.firstChild;\n        } else {\n          clonedNode = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      firePreProcess(editor, {\n        ...args,\n        node: clonedNode\n      });\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    const shouldFireEvent = (editor, args) => {\n      return isNonNullable(editor) && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    const process$1 = (editor, node, args) => {\n      return shouldFireEvent(editor, args) ? preProcess$1(editor, node, args) : node;\n    };\n\n    const addTempAttr = (htmlParser, tempAttrs, name) => {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, (nodes, name) => {\n          let i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    const postProcess = (editor, args, content) => {\n      if (!args.no_events && editor) {\n        const outArgs = firePostProcess(editor, {\n          ...args,\n          content\n        });\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    const getHtmlFromNode = (dom, node, args) => {\n      const html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    const parseHtml = (htmlParser, html, args) => {\n      const parserArgs = args.selection ? {\n        forced_root_block: false,\n        ...args\n      } : args;\n      const rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    const serializeNode = (settings, schema, node) => {\n      const htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    const toHtml = (editor, settings, schema, rootNode, args) => {\n      const content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    const DomSerializerImpl = (settings, editor) => {\n      const tempAttrs = ['data-mce-selected'];\n      const defaultedSettings = {\n        entity_encoding: 'named',\n        remove_trailing_brs: true,\n        pad_empty_with_br: false,\n        ...settings\n      };\n      const dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      const schema = editor && editor.schema ? editor.schema : Schema(defaultedSettings);\n      const htmlParser = DomParser(defaultedSettings, schema);\n      register$3(htmlParser, defaultedSettings, dom);\n      const serialize = (node, parserArgs = {}) => {\n        const args = {\n          format: 'html',\n          ...parserArgs\n        };\n        const targetNode = process$1(editor, node, args);\n        const html = getHtmlFromNode(dom, targetNode, args);\n        const rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, defaultedSettings, schema, rootNode, args);\n      };\n      return {\n        schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters,\n        removeNodeFilter: htmlParser.removeNodeFilter,\n        removeAttributeFilter: htmlParser.removeAttributeFilter\n      };\n    };\n\n    const DomSerializer = (settings, editor) => {\n      const domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters,\n        removeNodeFilter: domSerializer.removeNodeFilter,\n        removeAttributeFilter: domSerializer.removeAttributeFilter\n      };\n    };\n\n    const defaultFormat$1 = 'html';\n    const setupArgs$1 = (args, format) => ({\n      ...args,\n      format,\n      get: true,\n      getInner: true\n    });\n    const getContent = (editor, args = {}) => {\n      const format = args.format ? args.format : defaultFormat$1;\n      const defaultedArgs = setupArgs$1(args, format);\n      return preProcessGetContent(editor, defaultedArgs).fold(identity, updatedArgs => {\n        const content = getContent$2(editor, updatedArgs);\n        return postProcessGetContent(editor, content, updatedArgs);\n      });\n    };\n\n    const defaultFormat = 'html';\n    const setupArgs = (args, content) => ({\n      format: defaultFormat,\n      ...args,\n      set: true,\n      content\n    });\n    const setContent = (editor, content, args = {}) => {\n      const defaultedArgs = setupArgs(args, content);\n      return preProcessSetContent(editor, defaultedArgs).map(updatedArgs => {\n        const result = setContent$2(editor, updatedArgs.content, updatedArgs);\n        postProcessSetContent(editor, result.html, updatedArgs);\n        return result.content;\n      }).getOr(content);\n    };\n\n    const removedOptions = ('autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    const deprecatedOptions = 'template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format'.split(',');\n    const removedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    const deprecatedPlugins = [\n      {\n        name: 'template',\n        replacedWith: 'Advanced Template'\n      },\n      { name: 'rtc' }\n    ];\n    const getMatchingOptions = (options, searchingFor) => {\n      const settingNames = filter$5(searchingFor, setting => has$2(options, setting));\n      return sort(settingNames);\n    };\n    const getRemovedOptions = options => {\n      const settingNames = getMatchingOptions(options, removedOptions);\n      const forcedRootBlock = options.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    const getDeprecatedOptions = options => getMatchingOptions(options, deprecatedOptions);\n    const getMatchingPlugins = (options, searchingFor) => {\n      const plugins = Tools.makeMap(options.plugins, ' ');\n      const hasPlugin = plugin => has$2(plugins, plugin);\n      const pluginNames = filter$5(searchingFor, hasPlugin);\n      return sort(pluginNames);\n    };\n    const getRemovedPlugins = options => getMatchingPlugins(options, removedPlugins);\n    const getDeprecatedPlugins = options => getMatchingPlugins(options, deprecatedPlugins.map(entry => entry.name));\n    const logRemovedWarnings = (rawOptions, normalizedOptions) => {\n      const removedOptions = getRemovedOptions(rawOptions);\n      const removedPlugins = getRemovedPlugins(normalizedOptions);\n      const hasRemovedPlugins = removedPlugins.length > 0;\n      const hasRemovedOptions = removedOptions.length > 0;\n      const isLegacyMobileTheme = normalizedOptions.theme === 'mobile';\n      if (hasRemovedPlugins || hasRemovedOptions || isLegacyMobileTheme) {\n        const listJoiner = '\\n- ';\n        const themesMessage = isLegacyMobileTheme ? `\\n\\nThemes:${ listJoiner }mobile` : '';\n        const pluginsMessage = hasRemovedPlugins ? `\\n\\nPlugins:${ listJoiner }${ removedPlugins.join(listJoiner) }` : '';\n        const optionsMessage = hasRemovedOptions ? `\\n\\nOptions:${ listJoiner }${ removedOptions.join(listJoiner) }` : '';\n        console.warn('The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. ' + 'See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information.' + themesMessage + pluginsMessage + optionsMessage);\n      }\n    };\n    const getPluginDescription = name => find$2(deprecatedPlugins, entry => entry.name === name).fold(() => name, entry => {\n      if (entry.replacedWith) {\n        return `${ name }, replaced by ${ entry.replacedWith }`;\n      } else {\n        return name;\n      }\n    });\n    const logDeprecatedWarnings = (rawOptions, normalizedOptions) => {\n      const deprecatedOptions = getDeprecatedOptions(rawOptions);\n      const deprecatedPlugins = getDeprecatedPlugins(normalizedOptions);\n      const hasDeprecatedPlugins = deprecatedPlugins.length > 0;\n      const hasDeprecatedOptions = deprecatedOptions.length > 0;\n      if (hasDeprecatedPlugins || hasDeprecatedOptions) {\n        const listJoiner = '\\n- ';\n        const pluginsMessage = hasDeprecatedPlugins ? `\\n\\nPlugins:${ listJoiner }${ deprecatedPlugins.map(getPluginDescription).join(listJoiner) }` : '';\n        const optionsMessage = hasDeprecatedOptions ? `\\n\\nOptions:${ listJoiner }${ deprecatedOptions.join(listJoiner) }` : '';\n        console.warn('The following deprecated features are currently enabled but will be removed soon.' + pluginsMessage + optionsMessage);\n      }\n    };\n    const logWarnings = (rawOptions, normalizedOptions) => {\n      logRemovedWarnings(rawOptions, normalizedOptions);\n      logDeprecatedWarnings(rawOptions, normalizedOptions);\n    };\n\n    const DOM$8 = DOMUtils.DOM;\n    const restoreOriginalStyles = editor => {\n      DOM$8.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    const safeDestroy = x => Optional.from(x).each(x => x.destroy());\n    const clearDomReferences = editor => {\n      const ed = editor;\n      ed.contentAreaContainer = ed.formElement = ed.container = ed.editorContainer = null;\n      ed.bodyElement = ed.contentDocument = ed.contentWindow = null;\n      ed.iframeElement = ed.targetElm = null;\n      const selection = editor.selection;\n      if (selection) {\n        const dom = selection.dom;\n        ed.selection = selection.win = selection.dom = dom.doc = null;\n      }\n    };\n    const restoreForm = editor => {\n      const form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          delete form._mceOldSubmit;\n        }\n        DOM$8.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    const remove$1 = editor => {\n      if (!editor.removed) {\n        const {_selectionOverrides, editorUpload} = editor;\n        const body = editor.getBody();\n        const element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && isNonNullable(element === null || element === void 0 ? void 0 : element.nextSibling)) {\n          DOM$8.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$8.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    const destroy = (editor, automatic) => {\n      const {selection, dom} = editor;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    const CreateIconManager = () => {\n      const lookup = {};\n      const add = (id, iconPack) => {\n        lookup[id] = iconPack;\n      };\n      const get = id => {\n        if (lookup[id]) {\n          return lookup[id];\n        } else {\n          return { icons: {} };\n        }\n      };\n      const has = id => has$2(lookup, id);\n      return {\n        add,\n        get,\n        has\n      };\n    };\n    const IconManager = CreateIconManager();\n\n    const ModelManager = AddOnManager.ModelManager;\n\n    const getProp = (propName, elm) => {\n      const rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    const getComputedSizeProp = (propName, elm) => parseInt(get$7(elm, propName), 10);\n    const getClientWidth = curry(getProp, 'clientWidth');\n    const getClientHeight = curry(getProp, 'clientHeight');\n    const getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    const getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    const getBoundingClientRect = elm => elm.dom.getBoundingClientRect();\n    const isInsideElementContentArea = (bodyElm, clientX, clientY) => {\n      const clientWidth = getClientWidth(bodyElm);\n      const clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    const transpose = (inline, elm, clientX, clientY) => {\n      const clientRect = getBoundingClientRect(elm);\n      const deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      const deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      const x = clientX - deltaX;\n      const y = clientY - deltaY;\n      return {\n        x,\n        y\n      };\n    };\n    const isXYInContentArea = (editor, clientX, clientY) => {\n      const bodyElm = SugarElement.fromDom(editor.getBody());\n      const targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      const transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    const fromDomSafe = node => Optional.from(node).map(SugarElement.fromDom);\n    const isEditorAttachedToDom = editor => {\n      const rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = () => {\n      const unimplemented = () => {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    const NotificationManager = editor => {\n      const notifications = [];\n      const getImplementation = () => {\n        const theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      const getTopNotification = () => {\n        return Optional.from(notifications[0]);\n      };\n      const isEqual = (a, b) => {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      const reposition = () => {\n        each$e(notifications, notification => {\n          notification.reposition();\n        });\n      };\n      const addNotification = notification => {\n        notifications.push(notification);\n      };\n      const closeNotification = notification => {\n        findIndex$2(notifications, otherNotification => {\n          return otherNotification === notification;\n        }).each(index => {\n          notifications.splice(index, 1);\n        });\n      };\n      const open = (spec, fireEvent = true) => {\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return {};\n        }\n        if (fireEvent) {\n          editor.dispatch('BeforeOpenNotification', { notification: spec });\n        }\n        return find$2(notifications, notification => {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(() => {\n          editor.editorManager.setActive(editor);\n          const notification = getImplementation().open(spec, () => {\n            closeNotification(notification);\n            reposition();\n            if (hasEditorOrUiFocus(editor)) {\n              getTopNotification().fold(() => editor.focus(), top => focus$1(SugarElement.fromDom(top.getEl())));\n            }\n          });\n          addNotification(notification);\n          reposition();\n          editor.dispatch('OpenNotification', { notification: { ...notification } });\n          return notification;\n        });\n      };\n      const close = () => {\n        getTopNotification().each(notification => {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      const getNotifications = constant(notifications);\n      const registerEvents = editor => {\n        editor.on('SkinLoaded', () => {\n          const serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', () => {\n          requestAnimationFrame(reposition);\n        });\n        editor.on('remove', () => {\n          each$e(notifications.slice(), notification => {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open,\n        close,\n        getNotifications\n      };\n    };\n\n    const PluginManager = AddOnManager.PluginManager;\n\n    const ThemeManager = AddOnManager.ThemeManager;\n\n    var WindowManagerImpl = () => {\n      const unimplemented = () => {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented\n      };\n    };\n\n    const WindowManager = editor => {\n      let dialogs = [];\n      const getImplementation = () => {\n        const theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      const funcBind = (scope, f) => {\n        return (...args) => {\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      const fireOpenEvent = dialog => {\n        editor.dispatch('OpenWindow', { dialog });\n      };\n      const fireCloseEvent = dialog => {\n        editor.dispatch('CloseWindow', { dialog });\n      };\n      const addDialog = dialog => {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      const closeDialog = dialog => {\n        fireCloseEvent(dialog);\n        dialogs = filter$5(dialogs, otherDialog => {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      const getTopDialog = () => {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      const storeSelectionAndOpenDialog = openDialog => {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        editor.ui.show();\n        const dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      const open = (args, params) => {\n        return storeSelectionAndOpenDialog(() => getImplementation().open(args, params, closeDialog));\n      };\n      const openUrl = args => {\n        return storeSelectionAndOpenDialog(() => getImplementation().openUrl(args, closeDialog));\n      };\n      const alert = (message, callback, scope) => {\n        const windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      const confirm = (message, callback, scope) => {\n        const windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      const close = () => {\n        getTopDialog().each(dialog => {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', () => {\n        each$e(dialogs, dialog => {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open,\n        openUrl,\n        alert,\n        confirm,\n        close\n      };\n    };\n\n    const displayNotification = (editor, message) => {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    const displayError = (editor, message) => {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', () => {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    const uploadError = (editor, message) => {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    const logError = (editor, errorType, msg) => {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    const createLoadError = (type, url, name) => name ? `Failed to load ${ type }: ${ name } from url ${ url }` : `Failed to load ${ type } url: ${ url }`;\n    const pluginLoadError = (editor, url, name) => {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    const iconsLoadError = (editor, url, name) => {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    const languageLoadError = (editor, url, name) => {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    const themeLoadError = (editor, url, name) => {\n      logError(editor, 'ThemeLoadError', createLoadError('theme', url, name));\n    };\n    const modelLoadError = (editor, url, name) => {\n      logError(editor, 'ModelLoadError', createLoadError('model', url, name));\n    };\n    const pluginInitError = (editor, name, err) => {\n      const message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    const initError = (message, ...x) => {\n      const console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error(message, ...x);\n        } else {\n          console.log(message, ...x);\n        }\n      }\n    };\n\n    const isContentCssSkinName = url => /^[a-z0-9\\-]+$/i.test(url);\n    const toContentSkinResourceName = url => 'content/' + url + '/content.css';\n    const isBundledCssSkinName = url => tinymce.Resource.has(toContentSkinResourceName(url));\n    const getContentCssUrls = editor => {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    const getFontCssUrls = editor => {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    const transformToUrls = (editor, cssLinks) => {\n      const skinUrl = editor.editorManager.baseURL + '/skins/content';\n      const suffix = editor.editorManager.suffix;\n      const contentCssFile = `content${ suffix }.css`;\n      return map$3(cssLinks, url => {\n        if (isBundledCssSkinName(url)) {\n          return url;\n        } else if (isContentCssSkinName(url) && !editor.inline) {\n          return `${ skinUrl }/${ url }/${ contentCssFile }`;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    const appendContentCssFromSettings = editor => {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    const getAllImages = elm => {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    const ImageScanner = (uploadStatus, blobCache) => {\n      const cachedPromises = {};\n      const findAll = (elm, predicate = always) => {\n        const images = filter$5(getAllImages(elm), img => {\n          const src = img.src;\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (startsWith(src, 'blob:')) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (startsWith(src, 'data:')) {\n            return predicate(img);\n          }\n          return false;\n        });\n        const promises = map$3(images, img => {\n          const imageSrc = img.src;\n          if (has$2(cachedPromises, imageSrc)) {\n            return cachedPromises[imageSrc].then(imageInfo => {\n              if (isString(imageInfo)) {\n                return imageInfo;\n              } else {\n                return {\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                };\n              }\n            });\n          } else {\n            const newPromise = imageToBlobInfo(blobCache, imageSrc).then(blobInfo => {\n              delete cachedPromises[imageSrc];\n              return {\n                image: img,\n                blobInfo\n              };\n            }).catch(error => {\n              delete cachedPromises[imageSrc];\n              return error;\n            });\n            cachedPromises[imageSrc] = newPromise;\n            return newPromise;\n          }\n        });\n        return Promise.all(promises);\n      };\n      return { findAll };\n    };\n\n    const UploadStatus = () => {\n      const PENDING = 1, UPLOADED = 2;\n      let blobUriStatuses = {};\n      const createStatus = (status, resultUri) => {\n        return {\n          status,\n          resultUri\n        };\n      };\n      const hasBlobUri = blobUri => {\n        return blobUri in blobUriStatuses;\n      };\n      const getResultUri = blobUri => {\n        const result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      const isPending = blobUri => {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      const isUploaded = blobUri => {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      const markPending = blobUri => {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      const markUploaded = (blobUri, resultUri) => {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      const removeFailed = blobUri => {\n        delete blobUriStatuses[blobUri];\n      };\n      const destroy = () => {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri,\n        getResultUri,\n        isPending,\n        isUploaded,\n        markPending,\n        markUploaded,\n        removeFailed,\n        destroy\n      };\n    };\n\n    let count = 0;\n    const seed = () => {\n      const rnd = () => {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      const now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    const uuid = prefix => {\n      return prefix + count++ + seed();\n    };\n\n    const BlobCache = () => {\n      let cache = [];\n      const mimeToExt = mime => {\n        const mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      const create = (o, blob, base64, name, filename) => {\n        if (isString(o)) {\n          const id = o;\n          return toBlobInfo({\n            id,\n            name,\n            filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      const toBlobInfo = o => {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        const id = o.id || uuid('blobid');\n        const name = o.name || id;\n        const blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      const add = blobInfo => {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      const findFirst = predicate => find$2(cache, predicate).getOrUndefined();\n      const get = id => findFirst(cachedBlobInfo => cachedBlobInfo.id() === id);\n      const getByUri = blobUri => findFirst(blobInfo => blobInfo.blobUri() === blobUri);\n      const getByData = (base64, type) => findFirst(blobInfo => blobInfo.base64() === base64 && blobInfo.blob().type === type);\n      const removeByUri = blobUri => {\n        cache = filter$5(cache, blobInfo => {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      const destroy = () => {\n        each$e(cache, cachedBlobInfo => {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create,\n        add,\n        get,\n        getByUri,\n        getByData,\n        findFirst,\n        removeByUri,\n        destroy\n      };\n    };\n\n    const Uploader = (uploadStatus, settings) => {\n      const pendingPromises = {};\n      const pathJoin = (path1, path2) => {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      const defaultHandler = (blobInfo, progress) => new Promise((success, failure) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = e => {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = () => {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = () => {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          const json = JSON.parse(xhr.responseText);\n          if (!json || !isString(json.location)) {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        const formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      });\n      const uploadHandler = isFunction(settings.handler) ? settings.handler : defaultHandler;\n      const noUpload = () => new Promise(resolve => {\n        resolve([]);\n      });\n      const handlerSuccess = (blobInfo, url) => ({\n        url,\n        blobInfo,\n        status: true\n      });\n      const handlerFailure = (blobInfo, error) => ({\n        url: '',\n        blobInfo,\n        status: false,\n        error\n      });\n      const resolvePending = (blobUri, result) => {\n        Tools.each(pendingPromises[blobUri], resolve => {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      const uploadBlobInfo = (blobInfo, handler, openNotification) => {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new Promise(resolve => {\n          let notification;\n          let progress;\n          try {\n            const closeNotification = () => {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            const success = url => {\n              closeNotification();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            const failure = error => {\n              closeNotification();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = percent => {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(() => Optional.from(openNotification).map(apply$1)).each(n => {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, progress).then(success, err => {\n              failure(isString(err) ? { message: err } : err);\n            });\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex));\n          }\n        });\n      };\n      const isDefaultHandler = handler => handler === defaultHandler;\n      const pendingUploadBlobInfo = blobInfo => {\n        const blobUri = blobInfo.blobUri();\n        return new Promise(resolve => {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      const uploadBlobs = (blobInfos, openNotification) => {\n        blobInfos = Tools.grep(blobInfos, blobInfo => !uploadStatus.isUploaded(blobInfo.blobUri()));\n        return Promise.all(Tools.map(blobInfos, blobInfo => uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, uploadHandler, openNotification)));\n      };\n      const upload = (blobInfos, openNotification) => !settings.url && isDefaultHandler(uploadHandler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      return { upload };\n    };\n\n    const openNotification = editor => () => editor.notificationManager.open({\n      text: editor.translate('Image uploading...'),\n      type: 'info',\n      timeout: -1,\n      progressBar: true\n    });\n    const createUploader = (editor, uploadStatus) => Uploader(uploadStatus, {\n      url: getImageUploadUrl(editor),\n      basePath: getImageUploadBasePath(editor),\n      credentials: getImagesUploadCredentials(editor),\n      handler: getImagesUploadHandler(editor)\n    });\n    const ImageUploader = editor => {\n      const uploadStatus = UploadStatus();\n      const uploader = createUploader(editor, uploadStatus);\n      return { upload: (blobInfos, showNotification = true) => uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined) };\n    };\n\n    const isEmptyForPadding = (editor, element) => editor.dom.isEmpty(element.dom) && isNonNullable(editor.schema.getTextBlockElements()[name(element)]);\n    const addPaddingToEmpty = editor => element => {\n      if (isEmptyForPadding(editor, element)) {\n        append$1(element, SugarElement.fromHtml('<br data-mce-bogus=\"1\" />'));\n      }\n    };\n    const EditorUpload = editor => {\n      const blobCache = BlobCache();\n      let uploader, imageScanner;\n      const uploadStatus = UploadStatus();\n      const urlFilters = [];\n      const aliveGuard = callback => {\n        return result => {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      const cacheInvalidator = url => url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      const replaceString = (content, search, replace) => {\n        let index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      const replaceImageUrl = (content, targetUrl, replacementUrl) => {\n        const replacementString = `src=\"${ replacementUrl }\"${ replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '' }`;\n        content = replaceString(content, `src=\"${ targetUrl }\"`, replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      const replaceUrlInUndoStack = (targetUrl, replacementUrl) => {\n        each$e(editor.undoManager.data, level => {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, fragment => replaceImageUrl(fragment, targetUrl, replacementUrl));\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      const replaceImageUriInView = (image, resultUri) => {\n        const src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        setAll$1(SugarElement.fromDom(image), {\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      const uploadImages = () => {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(imageInfos => {\n          const blobInfos = map$3(imageInfos, imageInfo => imageInfo.blobInfo);\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(result => {\n            const imagesToRemove = [];\n            let shouldDispatchChange = false;\n            const filteredResult = map$3(result, (uploadInfo, index) => {\n              const {blobInfo, image} = imageInfos[index];\n              let removed = false;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                if (uploadInfo.url && !contains$1(image.src, uploadInfo.url)) {\n                  shouldDispatchChange = true;\n                }\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.remove) {\n                  replaceUrlInUndoStack(image.src, Env.transparentSrc);\n                  imagesToRemove.push(image);\n                  removed = true;\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo,\n                removed\n              };\n            });\n            if (imagesToRemove.length > 0 && !isRtc(editor)) {\n              editor.undoManager.transact(() => {\n                each$e(fromDom$1(imagesToRemove), sugarElement => {\n                  const parentOpt = parent(sugarElement);\n                  remove$5(sugarElement);\n                  parentOpt.each(addPaddingToEmpty(editor));\n                  blobCache.removeByUri(sugarElement.dom.src);\n                });\n              });\n            } else if (shouldDispatchChange) {\n              editor.undoManager.dispatchChange();\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      const uploadImagesAuto = () => isAutomaticUploadsEnabled(editor) ? uploadImages() : Promise.resolve([]);\n      const isValidDataUriImage = imgElm => forall(urlFilters, filter => filter(imgElm));\n      const addFilter = filter => {\n        urlFilters.push(filter);\n      };\n      const scanForImages = () => {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(result => {\n          const filteredResult = filter$5(result, resultItem => {\n            if (isString(resultItem)) {\n              displayError(editor, resultItem);\n              return false;\n            } else if (resultItem.uriType === 'blob') {\n              return false;\n            } else {\n              return true;\n            }\n          });\n          if (isRtc(editor)) ; else {\n            each$e(filteredResult, resultItem => {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return filteredResult;\n        }));\n      };\n      const destroy = () => {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      const replaceBlobUris = content => {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, (match, blobUri) => {\n          const resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          let blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), (result, editor) => {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, undefined);\n          }\n          if (blobInfo) {\n            const blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', () => {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', e => {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', e => {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', () => {\n        editor.parser.addNodeFilter('img', images => {\n          each$e(images, img => {\n            const src = img.attr('src');\n            if (!src || blobCache.getByUri(src)) {\n              return;\n            }\n            const resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache,\n        addFilter,\n        uploadImages,\n        uploadImagesAuto,\n        scanForImages,\n        destroy\n      };\n    };\n\n    const get$1 = editor => {\n      const dom = editor.dom;\n      const schemaType = editor.schema.type;\n      const formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: '0px',\n              marginRight: 'auto'\n            },\n            onformat: table => {\n              dom.setStyle(table, 'float', null);\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object,[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: { float: 'left' }\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object',\n            ceFalseOverride: true,\n            styles: {\n              display: 'table',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: '[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginRight: '0px',\n              marginLeft: 'auto'\n            },\n            onformat: table => {\n              dom.setStyle(table, 'float', null);\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object,[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: { float: 'right' },\n            preview: false\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: (() => {\n          const span = {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          };\n          const strike = {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          };\n          const s = {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          };\n          return schemaType !== 'html4' ? [\n            s,\n            span,\n            strike\n          ] : [\n            span,\n            s,\n            strike\n          ];\n        })(),\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: (node, _fmt, _itemName) => {\n            return isElement$6(node) && node.hasAttribute('href');\n          },\n          onformat: (elm, _fmt, vars) => {\n            Tools.each(vars, (value, key) => {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': vars => {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), name => {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    const genericBase = {\n      remove_similar: true,\n      inherit: false\n    };\n    const cellBase = {\n      selector: 'td,th',\n      ...genericBase\n    };\n    const cellFormats = {\n      tablecellbackgroundcolor: {\n        styles: { backgroundColor: '%value' },\n        ...cellBase\n      },\n      tablecellverticalalign: {\n        styles: { 'vertical-align': '%value' },\n        ...cellBase\n      },\n      tablecellbordercolor: {\n        styles: { borderColor: '%value' },\n        ...cellBase\n      },\n      tablecellclass: {\n        classes: ['%value'],\n        ...cellBase\n      },\n      tableclass: {\n        selector: 'table',\n        classes: ['%value'],\n        ...genericBase\n      },\n      tablecellborderstyle: {\n        styles: { borderStyle: '%value' },\n        ...cellBase\n      },\n      tablecellborderwidth: {\n        styles: { borderWidth: '%value' },\n        ...cellBase\n      }\n    };\n    const get = constant(cellFormats);\n\n    const FormatRegistry = editor => {\n      const formats = {};\n      const get$2 = name => isNonNullable(name) ? formats[name] : formats;\n      const has = name => has$2(formats, name);\n      const register = (name, format) => {\n        if (name) {\n          if (!isString(name)) {\n            each$d(name, (format, name) => {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$e(format, format => {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      const unregister = name => {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get$1(editor));\n      register(get());\n      register(getFormats(editor));\n      return {\n        get: get$2,\n        has,\n        register,\n        unregister\n      };\n    };\n\n    const each$3 = Tools.each;\n    const dom = DOMUtils.DOM;\n    const isPreviewItem = item => isNonNullable(item) && isObject(item);\n    const parsedSelectorToHtml = (ancestry, editor) => {\n      const schema = editor && editor.schema || Schema({});\n      const decorate = (elm, item) => {\n        if (item.classes.length > 0) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      const createElement = sItem => {\n        const item = isString(sItem) ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        const elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      const getRequiredParent = (elm, candidate) => {\n        const elmRule = schema.getElementRule(elm.nodeName.toLowerCase());\n        const parentsRequired = elmRule === null || elmRule === void 0 ? void 0 : elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && contains$2(parentsRequired, candidate) ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      const wrapInHtml = (elm, ancestors, siblings) => {\n        let parentCandidate;\n        const ancestor = ancestors[0];\n        const ancestorName = isPreviewItem(ancestor) ? ancestor.name : undefined;\n        const parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestor;\n            ancestors = ancestors.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestor;\n          ancestors = ancestors.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        const parent = parentCandidate ? createElement(parentCandidate) : dom.create('div');\n        parent.appendChild(elm);\n        if (siblings) {\n          Tools.each(siblings, sibling => {\n            const siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        const parentSiblings = isPreviewItem(parentCandidate) ? parentCandidate.siblings : undefined;\n        return wrapInHtml(parent, ancestors, parentSiblings);\n      };\n      const fragment = dom.create('div');\n      if (ancestry.length > 0) {\n        const item = ancestry[0];\n        const elm = createElement(item);\n        const siblings = isPreviewItem(item) ? item.siblings : undefined;\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), siblings));\n      }\n      return fragment;\n    };\n    const parseSelectorItem = item => {\n      item = Tools.trim(item);\n      let tagName = 'div';\n      const obj = {\n        name: tagName,\n        classes: [],\n        attrs: {},\n        selector: item\n      };\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, ($0, $1, $2, $3, $4) => {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            const m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    const parseSelector = selector => {\n      if (!isString(selector)) {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), item => {\n        const siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        const obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    const getCssText = (editor, format) => {\n      let previewCss = '';\n      let previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      const removeVars = val => {\n        return isString(val) ? val.replace(/%(\\w+)/g, '') : '';\n      };\n      const getComputedStyle = (name, elm) => {\n        return dom.getStyle(elm !== null && elm !== void 0 ? elm : editor.getBody(), name, true);\n      };\n      if (isString(format)) {\n        const formats = editor.formatter.get(format);\n        if (!formats) {\n          return '';\n        }\n        format = formats[0];\n      }\n      if ('preview' in format) {\n        const preview = format.preview;\n        if (preview === false) {\n          return '';\n        } else {\n          previewStyles = preview || previewStyles;\n        }\n      }\n      let name = format.block || format.inline || 'span';\n      let previewFrag;\n      const items = parseSelector(format.selector);\n      if (items.length > 0) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      const previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$3(format.styles, (value, name) => {\n        const newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$3(format.attributes, (value, name) => {\n        const newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$3(format.classes, value => {\n        const newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.dispatch('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      const rawParentFontSize = getComputedStyle('fontSize');\n      const parentFontSize = /px$/.test(rawParentFontSize) ? parseInt(rawParentFontSize, 10) : 0;\n      each$3(previewStyles.split(' '), name => {\n        let value = getComputedStyle(name, previewElm);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = getComputedStyle(name);\n          if (rgbaToHexString(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (rgbaToHexString(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            const numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.dispatch('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    const setup$s = editor => {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (let i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    const Formatter = editor => {\n      const formats = FormatRegistry(editor);\n      const formatChangeState = Cell({});\n      setup$s(editor);\n      setup$v(editor);\n      if (!isRtc(editor)) {\n        setup$u(formatChangeState, editor);\n      }\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: (name, vars, node) => {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: (name, vars, node, similar) => {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: (name, vars, node) => {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: (name, vars, node, similar) => matchFormat(editor, name, vars, node, similar),\n        closest: names => closestFormat(editor, names),\n        matchAll: (names, vars) => matchAllFormats(editor, names, vars),\n        matchNode: (node, name, vars, similar) => matchNodeFormat(editor, node, name, vars, similar),\n        canApply: name => canApplyFormat(editor, name),\n        formatChanged: (formats, callback, similar, vars) => formatChanged(editor, formatChangeState, formats, callback, similar, vars),\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    const shouldIgnoreCommand = cmd => {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    const registerEvents = (editor, undoManager, locks) => {\n      const isFirstTypedCharacter = Cell(false);\n      const addNonTypingUndoLevel = e => {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', () => {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', e => {\n        const cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', e => {\n        const cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', () => {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', e => {\n        const keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        const isMeta = Env.os.isMacOS() && e.key === 'Meta';\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey || isMeta) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && !isEq$1(createFromEditor(editor), undoManager.data[0])) {\n          if (!editor.isDirty()) {\n            editor.setDirty(true);\n          }\n          editor.dispatch('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', e => {\n        const keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        const modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n          return;\n        }\n        const hasOnlyMetaOrCtrlModifier = Env.os.isMacOS() ? e.metaKey : e.ctrlKey && !e.altKey;\n        if (hasOnlyMetaOrCtrlModifier) {\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('mousedown', e => {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      const isInsertReplacementText = event => event.inputType === 'insertReplacementText';\n      const isInsertTextDataNull = event => event.inputType === 'insertText' && event.data === null;\n      const isInsertFromPasteOrDrop = event => event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      editor.on('input', e => {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', e => {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    const addKeyboardShortcuts = editor => {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    const UndoManager = editor => {\n      const beforeBookmark = value$2();\n      const locks = Cell(0);\n      const index = Cell(0);\n      const undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: () => {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: (level, event) => {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        dispatchChange: () => {\n          editor.setDirty(true);\n          const level = createFromEditor(editor);\n          level.bookmark = getUndoBookmark(editor.selection);\n          editor.dispatch('change', {\n            level,\n            lastLevel: get$b(undoManager.data, index.get()).getOrUndefined()\n          });\n        },\n        undo: () => {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: () => {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: () => {\n          clear(editor, undoManager, index);\n        },\n        reset: () => {\n          reset(editor, undoManager);\n        },\n        hasUndo: () => {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: () => {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: callback => {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: callback => {\n          ignore(editor, locks, callback);\n        },\n        extra: (callback1, callback2) => {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    const nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    const placeholderAttr = 'data-mce-placeholder';\n    const isKeyboardEvent = e => e.type === 'keydown' || e.type === 'keyup';\n    const isDeleteEvent = e => {\n      const keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    const isNonTypingKeyboardEvent = e => {\n      if (isKeyboardEvent(e)) {\n        const keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$2(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    const isTypingKeyboardEvent = e => isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    const isVisuallyEmpty = (dom, rootElm, forcedRootBlock) => {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        const firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    const setup$r = editor => {\n      var _a;\n      const dom = editor.dom;\n      const rootBlock = getForcedRootBlock(editor);\n      const placeholder = (_a = getPlaceholder(editor)) !== null && _a !== void 0 ? _a : '';\n      const updatePlaceholder = (e, initial) => {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        const body = editor.getBody();\n        const showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        const isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (isNotEmpty(placeholder)) {\n        editor.on('init', e => {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', e => Delay.setEditorTimeout(editor, () => updatePlaceholder(e)));\n        });\n      }\n    };\n\n    const blockPosition = (block, position) => ({\n      block,\n      position\n    });\n    const blockBoundary = (from, to) => ({\n      from,\n      to\n    });\n    const getBlockPosition = (rootNode, pos) => {\n      const rootElm = SugarElement.fromDom(rootNode);\n      const containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$2(rootElm, containerElm).map(block => blockPosition(block, pos));\n    };\n    const isDifferentBlocks = blockBoundary => !eq(blockBoundary.from.block, blockBoundary.to.block);\n    const getClosestHost = (root, scope) => {\n      const isRoot = node => eq(node, root);\n      const isHost = node => isTableCell$2(node) || isContentEditableTrue$3(node.dom);\n      return closest$4(scope, isHost, isRoot).filter(isElement$7).getOr(root);\n    };\n    const hasSameHost = (rootNode, blockBoundary) => {\n      const root = SugarElement.fromDom(rootNode);\n      return eq(getClosestHost(root, blockBoundary.from.block), getClosestHost(root, blockBoundary.to.block));\n    };\n    const isEditable$1 = blockBoundary => isContentEditableFalse$b(blockBoundary.from.block.dom) === false && isContentEditableFalse$b(blockBoundary.to.block.dom) === false;\n    const hasValidBlocks = blockBoundary => {\n      const isValidBlock = block => isTextBlock$2(block) || hasBlockAttr(block.dom);\n      return isValidBlock(blockBoundary.from.block) && isValidBlock(blockBoundary.to.block);\n    };\n    const skipLastBr = (rootNode, forward, blockPosition) => {\n      if (isBr$6(blockPosition.position.getNode()) && !isEmpty$2(blockPosition.block)) {\n        return positionIn(false, blockPosition.block.dom).bind(lastPositionInBlock => {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(to => getBlockPosition(rootNode, to));\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    const readFromRange = (rootNode, forward, rng) => {\n      const fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      const toBlockPos = fromBlockPos.bind(blockPos => fromPosition(forward, rootNode, blockPos.position).bind(to => getBlockPosition(rootNode, to).map(blockPos => skipLastBr(rootNode, forward, blockPos))));\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(blockBoundary => isDifferentBlocks(blockBoundary) && hasSameHost(rootNode, blockBoundary) && isEditable$1(blockBoundary) && hasValidBlocks(blockBoundary));\n    };\n    const read$1 = (rootNode, forward, rng) => rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n\n    const getChildrenUntilBlockBoundary = (block, schema) => {\n      const children = children$1(block);\n      return findIndex$2(children, el => schema.isBlock(name(el))).fold(constant(children), index => children.slice(0, index));\n    };\n    const extractChildren = (block, schema) => {\n      const children = getChildrenUntilBlockBoundary(block, schema);\n      each$e(children, remove$5);\n      return children;\n    };\n    const removeEmptyRoot = (rootNode, block) => {\n      const parents = parentsAndSelf(block, rootNode);\n      return find$2(parents.reverse(), element => isEmpty$2(element)).each(remove$5);\n    };\n    const isEmptyBefore = el => filter$5(prevSiblings(el), el => !isEmpty$2(el)).length === 0;\n    const nestedBlockMerge = (rootNode, fromBlock, toBlock, schema, insertionPoint) => {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$3(insertionPoint, SugarElement.fromTag('br'));\n      }\n      const position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$e(extractChildren(fromBlock, schema), child => {\n        before$3(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    const isInline = (schema, node) => schema.isInline(name(node));\n    const sidelongBlockMerge = (rootNode, fromBlock, toBlock, schema) => {\n      if (isEmpty$2(toBlock)) {\n        if (isEmpty$2(fromBlock)) {\n          const getInlineToBlockDescendants = el => {\n            const helper = (node, elements) => firstChild(node).fold(() => elements, child => isInline(schema, child) ? helper(child, elements.concat(shallow$1(child))) : elements);\n            return helper(el, []);\n          };\n          const newFromBlockDescendants = foldr(getInlineToBlockDescendants(toBlock), (element, descendant) => {\n            wrap$2(element, descendant);\n            return descendant;\n          }, createPaddingBr());\n          empty(fromBlock);\n          append$1(fromBlock, newFromBlockDescendants);\n        }\n        remove$5(toBlock);\n        return firstPositionIn(fromBlock.dom);\n      }\n      const position = lastPositionIn(toBlock.dom);\n      each$e(extractChildren(fromBlock, schema), child => {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    const findInsertionPoint = (toBlock, block) => {\n      const parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    const getInsertionPoint = (fromBlock, toBlock) => contains(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    const trimBr = (first, block) => {\n      positionIn(first, block.dom).bind(position => Optional.from(position.getNode())).map(SugarElement.fromDom).filter(isBr$5).each(remove$5);\n    };\n    const mergeBlockInto = (rootNode, fromBlock, toBlock, schema) => {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock, schema), curry(nestedBlockMerge, rootNode, fromBlock, toBlock, schema));\n    };\n    const mergeBlocks = (rootNode, forward, block1, block2, schema) => forward ? mergeBlockInto(rootNode, block2, block1, schema) : mergeBlockInto(rootNode, block1, block2, schema);\n\n    const backspaceDelete$9 = (editor, forward) => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const position = read$1(rootNode.dom, forward, editor.selection.getRng()).map(blockBoundary => () => {\n        mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block, editor.schema).each(pos => {\n          editor.selection.setRng(pos.toRange());\n        });\n      });\n      return position;\n    };\n\n    const deleteRangeMergeBlocks = (rootNode, selection, schema) => {\n      const rng = selection.getRng();\n      return lift2(getParentBlock$2(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$2(rootNode, SugarElement.fromDom(rng.endContainer)), (block1, block2) => {\n        if (!eq(block1, block2)) {\n          return Optional.some(() => {\n            rng.deleteContents();\n            mergeBlocks(rootNode, true, block1, block2, schema).each(pos => {\n              selection.setRng(pos.toRange());\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      }).getOr(Optional.none());\n    };\n    const isRawNodeInTable = (root, rawNode) => {\n      const node = SugarElement.fromDom(rawNode);\n      const isRoot = curry(eq, root);\n      return ancestor$4(node, isTableCell$2, isRoot).isSome();\n    };\n    const isSelectionInTable = (root, rng) => isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    const isEverythingSelected = (root, rng) => {\n      const noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      const noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    const emptyEditor = editor => {\n      return Optional.some(() => {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      });\n    };\n    const deleteRange$2 = editor => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection, editor.schema);\n    };\n    const backspaceDelete$8 = (editor, _forward) => editor.selection.isCollapsed() ? Optional.none() : deleteRange$2(editor);\n\n    const showCaret = (direction, editor, node, before, scrollIntoView) => Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    const getNodeRange = node => {\n      const rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    const selectNode = (editor, node) => {\n      const e = editor.dispatch('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    const renderCaretAtRange = (editor, range, scrollIntoView) => {\n      const normalizedRange = normalizeRange(1, editor.getBody(), range);\n      const caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      const caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      const caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      const ceRoot = getContentEditableRoot$1(editor.dom.getRoot(), caretPosition.getNode());\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    const renderRangeCaret = (editor, range, scrollIntoView) => range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n\n    const isBeforeBoundary = pos => isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    const isAfterBoundary = pos => isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    const trimEmptyTextNode = (dom, node) => {\n      if (isText$a(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    const deleteContentAndShowCaret = (editor, range, node, direction, forward, peekCaretPosition) => {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(caretRange => {\n        if (range.collapsed) {\n          const deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n    };\n    const deleteBoundaryText = (editor, forward) => {\n      const range = editor.selection.getRng();\n      if (!isText$a(range.commonAncestorContainer)) {\n        return Optional.none();\n      }\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const caretWalker = CaretWalker(editor.getBody());\n      const getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      const isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      const nextCaretPosition = getNextPosFn(caretPosition);\n      const normalizedNextCaretPosition = nextCaretPosition ? normalizePosition(forward, nextCaretPosition) : nextCaretPosition;\n      if (!normalizedNextCaretPosition || !isMoveInsideSameBlock(caretPosition, normalizedNextCaretPosition)) {\n        return Optional.none();\n      } else if (isBeforeFn(normalizedNextCaretPosition)) {\n        return Optional.some(() => deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, normalizedNextCaretPosition));\n      }\n      const peekCaretPosition = getNextPosFn(normalizedNextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(normalizedNextCaretPosition, peekCaretPosition)) {\n          return Optional.some(() => deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition));\n        }\n      }\n      return Optional.none();\n    };\n    const backspaceDelete$7 = (editor, forward) => deleteBoundaryText(editor, forward);\n\n    const getEdgeCefPosition = (editor, atStart) => {\n      const root = editor.getBody();\n      return atStart ? firstPositionIn(root).filter(isBeforeContentEditableFalse) : lastPositionIn(root).filter(isAfterContentEditableFalse);\n    };\n    const isCefAtEdgeSelected = editor => {\n      const rng = editor.selection.getRng();\n      return !rng.collapsed && (getEdgeCefPosition(editor, true).exists(pos => pos.isEqual(CaretPosition.fromRangeStart(rng))) || getEdgeCefPosition(editor, false).exists(pos => pos.isEqual(CaretPosition.fromRangeEnd(rng))));\n    };\n\n    const isCompoundElement = node => isNonNullable(node) && (isTableCell$2(SugarElement.fromDom(node)) || isListItem$1(SugarElement.fromDom(node)));\n    const DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    const isAtContentEditableBlockCaret = (forward, from) => {\n      const elm = from.getNode(!forward);\n      const caretLocation = forward ? 'after' : 'before';\n      return isElement$6(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    const isDeleteFromCefDifferentBlocks = (root, forward, from, to, schema) => {\n      const inSameBlock = elm => schema.isInline(elm.nodeName.toLowerCase()) && !isInSameBlock(from, to, root);\n      return getRelativeCefElm(!forward, from).fold(() => getRelativeCefElm(forward, to).fold(never, inSameBlock), inSameBlock);\n    };\n    const deleteEmptyBlockOrMoveToCef = (root, forward, from, to) => {\n      const toCefElm = to.getNode(!forward);\n      return getParentBlock$2(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(blockElm => isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm)).orThunk(() => Optional.some(DeleteAction.moveToElement(toCefElm)));\n    };\n    const findCefPosition = (root, forward, from, schema) => fromPosition(forward, root, from).bind(to => {\n      if (isCompoundElement(to.getNode())) {\n        return Optional.none();\n      } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to, schema)) {\n        return Optional.none();\n      } else if (forward && isContentEditableFalse$b(to.getNode())) {\n        return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n      } else if (!forward && isContentEditableFalse$b(to.getNode(true))) {\n        return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n      } else if (forward && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      } else if (!forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      } else {\n        return Optional.none();\n      }\n    });\n    const getContentEditableBlockAction = (forward, elm) => {\n      if (isNullable(elm)) {\n        return Optional.none();\n      } else if (forward && isContentEditableFalse$b(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (!forward && isContentEditableFalse$b(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    const skipMoveToActionFromInlineCefToContent = (root, from, deleteAction) => deleteAction.fold(elm => Optional.some(DeleteAction.remove(elm)), elm => Optional.some(DeleteAction.moveToElement(elm)), to => {\n      if (isInSameBlock(from, to, root)) {\n        return Optional.none();\n      } else {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      }\n    });\n    const getContentEditableAction = (root, forward, from, schema) => {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(!forward)).orThunk(() => findCefPosition(root, forward, from, schema));\n      } else {\n        return findCefPosition(root, forward, from, schema).bind(deleteAction => skipMoveToActionFromInlineCefToContent(root, from, deleteAction));\n      }\n    };\n    const read = (root, forward, rng, schema) => {\n      const normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      const from = CaretPosition.fromRangeStart(normalizedRange);\n      const rootElement = SugarElement.fromDom(root);\n      if (!forward && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (!forward && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from, schema)) {\n        return findPreviousBr(rootElement, from, schema).map(br => DeleteAction.remove(br.getNode()));\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from, schema)) {\n        return findNextBr(rootElement, from, schema).map(br => DeleteAction.remove(br.getNode()));\n      } else {\n        return getContentEditableAction(root, forward, from, schema);\n      }\n    };\n\n    const deleteElement$1 = (editor, forward) => element => {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    const moveToElement = (editor, forward) => element => {\n      const pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n      editor.selection.setRng(pos.toRange());\n      return true;\n    };\n    const moveToPosition = editor => pos => {\n      editor.selection.setRng(pos.toRange());\n      return true;\n    };\n    const getAncestorCe = (editor, node) => Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    const backspaceDeleteCaret = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$b).fold(() => read(editor.getBody(), forward, editor.selection.getRng(), editor.schema).map(deleteAction => () => deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor))), () => Optional.some(noop));\n    };\n    const deleteOffscreenSelection = rootElement => {\n      each$e(descendants(rootElement, '.mce-offscreen-selection'), remove$5);\n    };\n    const backspaceDeleteRange = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$b(selectedNode) && !isTableCell$3(selectedNode)) {\n        const hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$b);\n        return hasCefAncestor.fold(() => Optional.some(() => {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n        }), () => Optional.some(noop));\n      }\n      if (isCefAtEdgeSelected(editor)) {\n        return Optional.some(() => {\n          deleteRangeContents(editor, editor.selection.getRng(), SugarElement.fromDom(editor.getBody()));\n        });\n      }\n      return Optional.none();\n    };\n    const paddEmptyElement = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$3(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        const br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    const backspaceDelete$6 = (editor, forward) => {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    const deleteCaret$2 = (editor, forward) => {\n      const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(pos => forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos)).bind(pos => getChildNodeAtRelativeOffset(forward ? 0 : -1, pos)).map(elm => () => editor.selection.select(elm));\n    };\n    const backspaceDelete$5 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : Optional.none();\n\n    const isText$2 = isText$a;\n    const startsWithCaretContainer = node => isText$2(node) && node.data[0] === ZWSP$1;\n    const endsWithCaretContainer = node => isText$2(node) && node.data[node.data.length - 1] === ZWSP$1;\n    const createZwsp = node => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      return doc.createTextNode(ZWSP$1);\n    };\n    const insertBefore$1 = node => {\n      var _a;\n      if (isText$2(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText$2(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        const newNode = createZwsp(node);\n        (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    const insertAfter$1 = node => {\n      var _a, _b;\n      if (isText$2(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText$2(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        const newNode = createZwsp(node);\n        if (node.nextSibling) {\n          (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(newNode, node.nextSibling);\n        } else {\n          (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    const insertInline = (before, node) => before ? insertBefore$1(node) : insertAfter$1(node);\n    const insertInlineBefore = curry(insertInline, true);\n    const insertInlineAfter = curry(insertInline, false);\n\n    const insertInlinePos = (pos, before) => {\n      if (isText$a(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    const isPosCaretContainer = (pos, caret) => {\n      const caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    const renderCaret = (caret, location) => location.fold(element => {\n      remove$3(caret.get());\n      const text = insertInlineBefore(element);\n      caret.set(text);\n      return Optional.some(CaretPosition(text, text.length - 1));\n    }, element => firstPositionIn(element).map(pos => {\n      if (!isPosCaretContainer(pos, caret)) {\n        remove$3(caret.get());\n        const text = insertInlinePos(pos, true);\n        caret.set(text);\n        return CaretPosition(text, 1);\n      } else {\n        const node = caret.get();\n        return CaretPosition(node, 1);\n      }\n    }), element => lastPositionIn(element).map(pos => {\n      if (!isPosCaretContainer(pos, caret)) {\n        remove$3(caret.get());\n        const text = insertInlinePos(pos, false);\n        caret.set(text);\n        return CaretPosition(text, text.length - 1);\n      } else {\n        const node = caret.get();\n        return CaretPosition(node, node.length - 1);\n      }\n    }), element => {\n      remove$3(caret.get());\n      const text = insertInlineAfter(element);\n      caret.set(text);\n      return Optional.some(CaretPosition(text, 1));\n    });\n\n    const evaluateUntil = (fns, args) => {\n      for (let i = 0; i < fns.length; i++) {\n        const result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    const Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    const rescope$1 = (rootNode, node) => {\n      const parentBlock = getParentBlock$3(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    const before = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeForwards(pos);\n      const scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(() => nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(inline => Location.before(inline)), Optional.none);\n    };\n    const isNotInsideFormatCaretContainer = (rootNode, elm) => getParentCaretContainer(rootNode, elm) === null;\n    const findInsideRootInline = (isInlineTarget, rootNode, pos) => findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    const start$1 = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(inline => {\n        const prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    const end = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(inline => {\n        const nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    const after = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeBackwards(pos);\n      const scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(() => prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(inline => Location.after(inline)), Optional.none);\n    };\n    const isValidLocation = location => !isRtl(getElement(location));\n    const readLocation = (isInlineTarget, rootNode, pos) => {\n      const location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    const getElement = location => location.fold(identity, identity, identity, identity);\n    const getName = location => location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    const outside = location => location.fold(Location.before, Location.before, Location.after, Location.after);\n    const inside = location => location.fold(Location.start, Location.start, Location.end, Location.end);\n    const isEq = (location1, location2) => getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    const betweenInlines = (forward, isInlineTarget, rootNode, from, to, location) => lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), (fromInline, toInline) => {\n      if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n        return Location.after(forward ? fromInline : toInline);\n      } else {\n        return location;\n      }\n    }).getOr(location);\n    const skipNoMovement = (fromLocation, toLocation) => fromLocation.fold(always, fromLocation => !isEq(fromLocation, toLocation));\n    const findLocationTraverse = (forward, isInlineTarget, rootNode, fromLocation, pos) => {\n      const from = normalizePosition(forward, pos);\n      const to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      const location = to.fold(() => fromLocation.map(outside), to => readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation)));\n      return location.filter(isValidLocation);\n    };\n    const findLocationSimple = (forward, location) => {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    const findLocation$1 = (forward, isInlineTarget, rootNode, pos) => {\n      const from = normalizePosition(forward, pos);\n      const fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(() => findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos));\n    };\n\n    const hasSelectionModifyApi = editor => {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    const moveRel = (forward, selection, pos) => {\n      const delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    const moveByWord = (forward, editor) => {\n      const rng = editor.selection.getRng();\n      const pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    const flip = (direction, positions) => direction === HDirection.Backwards ? reverse(positions) : positions;\n    const walk$1 = (direction, caretWalker, pos) => direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    const getBreakType = (scope, direction, currentPos, nextPos) => {\n      if (isBr$6(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    const getPositionsUntil = (predicate, direction, scope, start) => {\n      const caretWalker = CaretWalker(scope);\n      let currentPos = start;\n      const positions = [];\n      while (currentPos) {\n        const nextPos = walk$1(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$6(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          const breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    const getAdjacentLinePositions = (direction, getPositionsUntilBreak, scope, start) => getPositionsUntilBreak(scope, start).breakAt.map(pos => {\n      const positions = getPositionsUntilBreak(scope, pos).positions;\n      return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n    }).getOr([]);\n    const findClosestHorizontalPositionFromPoint = (positions, x) => foldl(positions, (acc, newPos) => acc.fold(() => Optional.some(newPos), lastPos => lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), (lastRect, newRect) => {\n      const lastDist = Math.abs(x - lastRect.left);\n      const newDist = Math.abs(x - newRect.left);\n      return newDist <= lastDist ? newPos : lastPos;\n    }).or(acc)), Optional.none());\n    const findClosestHorizontalPosition = (positions, pos) => head(pos.getClientRects()).bind(targetRect => findClosestHorizontalPositionFromPoint(positions, targetRect.left));\n    const getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    const getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    const getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    const getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    const isAtFirstLine = (scope, pos) => getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    const isAtLastLine = (scope, pos) => getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    const getFirstLinePositions = scope => firstPositionIn(scope).map(pos => [pos].concat(getPositionsUntilNextLine(scope, pos).positions)).getOr([]);\n    const getLastLinePositions = scope => lastPositionIn(scope).map(pos => getPositionsUntilPreviousLine(scope, pos).positions.concat(pos)).getOr([]);\n    const getClosestPositionAbove = (scope, pos) => findClosestHorizontalPosition(getPositionsAbove(scope, pos), pos);\n    const getClosestPositionBelow = (scope, pos) => findClosestHorizontalPosition(getPositionsBelow(scope, pos), pos);\n\n    const isContentEditableFalse$4 = isContentEditableFalse$b;\n    const distanceToRectLeft$1 = (clientRect, clientX) => Math.abs(clientRect.left - clientX);\n    const distanceToRectRight$1 = (clientRect, clientX) => Math.abs(clientRect.right - clientX);\n    const isNodeClientRect = rect => hasNonNullableKey(rect, 'node');\n    const findClosestClientRect = (clientRects, clientX) => reduce(clientRects, (oldClientRect, clientRect) => {\n      const oldDistance = Math.min(distanceToRectLeft$1(oldClientRect, clientX), distanceToRectRight$1(oldClientRect, clientX));\n      const newDistance = Math.min(distanceToRectLeft$1(clientRect, clientX), distanceToRectRight$1(clientRect, clientX));\n      if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$4(clientRect.node)) {\n        return clientRect;\n      }\n      if (newDistance < oldDistance) {\n        return clientRect;\n      }\n      return oldClientRect;\n    });\n\n    const getNodeClientRects = node => {\n      const toArrayWithNode = clientRects => {\n        return map$3(clientRects, rect => {\n          const clientRect = clone$1(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$6(node)) {\n        return toArrayWithNode(node.getClientRects());\n      } else if (isText$a(node)) {\n        const rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      } else {\n        return [];\n      }\n    };\n    const getClientRects = nodes => bind$3(nodes, getNodeClientRects);\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    const findUntil = (direction, root, predicateFn, node) => {\n      let currentNode = node;\n      while (currentNode = findNode(currentNode, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(currentNode)) {\n          return;\n        }\n      }\n    };\n    const walkUntil = (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) => {\n      let line = 0;\n      const result = [];\n      const add = node => {\n        let clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (let i = 0; i < clientRects.length; i++) {\n          const clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$2(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n        return false;\n      };\n      const targetClientRect = last$2(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      const node = caretPosition.getNode();\n      if (node) {\n        add(node);\n        findUntil(direction, root, add, node);\n      }\n      return result;\n    };\n    const aboveLineNumber = (lineNumber, clientRect) => clientRect.line > lineNumber;\n    const isLineNumber = (lineNumber, clientRect) => clientRect.line === lineNumber;\n    const upUntil = curry(walkUntil, VDirection.Up, isAbove$1, isBelow$1);\n    const downUntil = curry(walkUntil, VDirection.Down, isBelow$1, isAbove$1);\n    const getLastClientRect = caretPosition => {\n      return last$2(caretPosition.getClientRects());\n    };\n    const positionsUntil = (direction, root, predicateFn, node) => {\n      const caretWalker = CaretWalker(root);\n      let walkFn;\n      let isBelowFn;\n      let isAboveFn;\n      let caretPosition;\n      const result = [];\n      let line = 0;\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      const targetClientRect = getLastClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        const rect = getLastClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$2(result))) {\n          line++;\n        }\n        const clientRect = clone$1(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    const isAboveLine = lineNumber => clientRect => aboveLineNumber(lineNumber, clientRect);\n    const isLine = lineNumber => clientRect => isLineNumber(lineNumber, clientRect);\n\n    const moveToRange = (editor, rng) => {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    const renderRangeCaretOpt = (editor, range, scrollIntoView) => Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    const moveHorizontally = (editor, direction, range, isBefore, isAfter, isElement) => {\n      const forwards = direction === HDirection.Forwards;\n      const caretWalker = CaretWalker(editor.getBody());\n      const getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      const isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        const node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        } else if (isCefAtEdgeSelected(editor)) {\n          const newRange = range.cloneRange();\n          newRange.collapse(direction === HDirection.Backwards);\n          return Optional.from(newRange);\n        }\n      }\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      let nextCaretPosition = getNextPosFn(caretPosition);\n      const rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      } else {\n        nextCaretPosition = normalizePosition(forwards, nextCaretPosition);\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      const peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    const moveVertically = (editor, direction, range, isBefore, isAfter, isElement) => {\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      const caretClientRect = last$2(caretPosition.getClientRects());\n      const forwards = direction === VDirection.Down;\n      const root = editor.getBody();\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      if (isCefAtEdgeSelected(editor)) {\n        const caretPosition = forwards ? CaretPosition.fromRangeEnd(range) : CaretPosition.fromRangeStart(range);\n        const getClosestFn = !forwards ? getClosestPositionAbove : getClosestPositionBelow;\n        return getClosestFn(root, caretPosition).orThunk(() => Optional.from(caretPosition)).map(pos => pos.toRange());\n      }\n      const walkerFn = forwards ? downUntil : upUntil;\n      const linePositions = walkerFn(root, isAboveLine(1), caretPosition);\n      const nextLinePositions = filter$5(linePositions, isLine(1));\n      const clientX = caretClientRect.left;\n      const nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        const dist1 = Math.abs(clientX - nextLineRect.left);\n        const dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      let currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        const caretPositions = positionsUntil(direction, root, isAboveLine(1), currentNode);\n        let closestNextLineRect = findClosestClientRect(filter$5(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$2(filter$5(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(pos => renderRangeCaret(editor, pos.toRange(), false));\n      }\n      return Optional.none();\n    };\n    const getLineEndPoint = (editor, forward) => {\n      const rng = editor.selection.getRng();\n      const from = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      const host = getEditingHost(from.container(), editor.getBody());\n      if (forward) {\n        const lineInfo = getPositionsUntilNextLine(host, from);\n        return last$3(lineInfo.positions);\n      } else {\n        const lineInfo = getPositionsUntilPreviousLine(host, from);\n        return head(lineInfo.positions);\n      }\n    };\n    const moveToLineEndPoint$3 = (editor, forward, isElementPosition) => getLineEndPoint(editor, forward).filter(isElementPosition).exists(pos => {\n      editor.selection.setRng(pos.toRange());\n      return true;\n    });\n\n    const setCaretPosition = (editor, pos) => {\n      const rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    const setSelected = (state, elm) => {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    const renderCaretLocation = (editor, caret, location) => renderCaret(caret, location).map(pos => {\n      setCaretPosition(editor, pos);\n      return location;\n    });\n    const getPositionFromRange = (range, root, forward) => {\n      const start = CaretPosition.fromRangeStart(range);\n      if (range.collapsed) {\n        return start;\n      } else {\n        const end = CaretPosition.fromRangeEnd(range);\n        return forward ? prevPosition(root, end).getOr(end) : nextPosition(root, start).getOr(start);\n      }\n    };\n    const findLocation = (editor, caret, forward) => {\n      const rootNode = editor.getBody();\n      const from = getPositionFromRange(editor.selection.getRng(), rootNode, forward);\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(location => renderCaretLocation(editor, caret, location));\n    };\n    const toggleInlines = (isInlineTarget, dom, elms) => {\n      const inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), e => e.dom);\n      const selectedInlines = filter$5(inlineBoundaries, isInlineTarget);\n      const targetInlines = filter$5(elms, isInlineTarget);\n      each$e(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$e(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    const safeRemoveCaretContainer = (editor, caret) => {\n      const caretValue = caret.get();\n      if (editor.selection.isCollapsed() && !editor.composing && caretValue) {\n        const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && !isAtZwsp(pos)) {\n          setCaretPosition(editor, removeAndReposition(caretValue, pos));\n          caret.set(null);\n        }\n      }\n    };\n    const renderInsideInlineCaret = (isInlineTarget, editor, caret, elms) => {\n      if (editor.selection.isCollapsed()) {\n        const inlines = filter$5(elms, isInlineTarget);\n        each$e(inlines, _inline => {\n          const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(location => renderCaretLocation(editor, caret, location));\n        });\n      }\n    };\n    const move$3 = (editor, caret, forward) => isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    const moveWord = (forward, editor, _caret) => isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    const setupSelectedState = editor => {\n      const caret = Cell(null);\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', e => {\n        if (isInlineBoundariesEnabled(editor)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    const moveNextWord = curry(moveWord, true);\n    const movePrevWord = curry(moveWord, false);\n    const moveToLineEndPoint$2 = (editor, forward, caret) => {\n      if (isInlineBoundariesEnabled(editor)) {\n        const linePoint = getLineEndPoint(editor, forward).getOrThunk(() => {\n          const rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(loc => {\n          const outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(pos => {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    const rangeFromPositions = (from, to) => {\n      const range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    const hasOnlyTwoOrLessPositionsLeft = elm => lift2(firstPositionIn(elm), lastPositionIn(elm), (firstPos, lastPos) => {\n      const normalizedFirstPos = normalizePosition(true, firstPos);\n      const normalizedLastPos = normalizePosition(false, lastPos);\n      return nextPosition(elm, normalizedFirstPos).forall(pos => pos.isEqual(normalizedLastPos));\n    }).getOr(true);\n    const setCaretLocation = (editor, caret) => location => renderCaret(caret, location).map(pos => () => setCaretPosition(editor, pos));\n    const deleteFromTo = (editor, caret, from, to) => {\n      const rootNode = editor.getBody();\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(() => {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        execNativeDeleteCommand(editor);\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).bind(setCaretLocation(editor, caret)).each(call);\n      });\n      editor.nodeChanged();\n    };\n    const rescope = (rootNode, node) => {\n      const parentBlock = getParentBlock$3(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    const backspaceDeleteCollapsed = (editor, caret, forward, from) => {\n      const rootNode = rescope(editor.getBody(), from.container());\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      const location = fromLocation.bind(location => {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      });\n      return location.map(setCaretLocation(editor, caret)).getOrThunk(() => {\n        const toPosition = navigate(forward, rootNode, from);\n        const toLocation = toPosition.bind(pos => readLocation(isInlineTarget$1, rootNode, pos));\n        return lift2(fromLocation, toLocation, () => findRootInline(isInlineTarget$1, rootNode, from).bind(elm => {\n          if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n            return Optional.some(() => {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n            });\n          } else {\n            return Optional.none();\n          }\n        })).getOrThunk(() => toLocation.bind(() => toPosition.map(to => {\n          return () => {\n            if (forward) {\n              deleteFromTo(editor, caret, from, to);\n            } else {\n              deleteFromTo(editor, caret, to, from);\n            }\n          };\n        })));\n      });\n    };\n    const backspaceDelete$4 = (editor, caret, forward) => {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return Optional.none();\n    };\n\n    const hasMultipleChildren = elm => childNodesCount(elm) > 1;\n    const getParentsUntil = (editor, pred) => {\n      const rootElm = SugarElement.fromDom(editor.getBody());\n      const startElm = SugarElement.fromDom(editor.selection.getStart());\n      const parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, pred).fold(constant(parents), index => parents.slice(0, index));\n    };\n    const hasOnlyOneChild = elm => childNodesCount(elm) === 1;\n    const getParentInlinesUntilMultichildInline = editor => getParentsUntil(editor, elm => editor.schema.isBlock(name(elm)) || hasMultipleChildren(elm));\n    const getParentInlines = editor => getParentsUntil(editor, el => editor.schema.isBlock(name(el)));\n    const getFormatNodes = (editor, parentInlines) => {\n      const isFormatElement$1 = curry(isFormatElement, editor);\n      return bind$3(parentInlines, elm => isFormatElement$1(elm) ? [elm.dom] : []);\n    };\n    const getFormatNodesAtStart = editor => {\n      const parentInlines = getParentInlines(editor);\n      return getFormatNodes(editor, parentInlines);\n    };\n    const deleteLastPosition = (forward, editor, target, parentInlines) => {\n      const formatNodes = getFormatNodes(editor, parentInlines);\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        const pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    const deleteCaret$1 = (editor, forward) => {\n      const parentInlines = filter$5(getParentInlinesUntilMultichildInline(editor), hasOnlyOneChild);\n      return last$3(parentInlines).bind(target => {\n        const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          return Optional.some(() => deleteLastPosition(forward, editor, target, parentInlines));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const isBrInEmptyElement = (editor, elm) => {\n      const parentElm = elm.parentElement;\n      return isBr$6(elm) && !isNull(parentElm) && editor.dom.isEmpty(parentElm);\n    };\n    const isEmptyCaret = elm => isEmptyCaretFormatElement(SugarElement.fromDom(elm));\n    const createCaretFormatAtStart = (editor, formatNodes) => {\n      const startElm = editor.selection.getStart();\n      const pos = isBrInEmptyElement(editor, startElm) || isEmptyCaret(startElm) ? replaceWithCaretFormat(startElm, formatNodes) : createCaretFormatAtStart$1(editor.selection.getRng(), formatNodes);\n      editor.selection.setRng(pos.toRange());\n    };\n    const updateCaretFormat = (editor, updateFormats) => {\n      const missingFormats = difference(updateFormats, getFormatNodesAtStart(editor));\n      if (missingFormats.length > 0) {\n        createCaretFormatAtStart(editor, missingFormats);\n      }\n    };\n    const rangeStartsAtTextContainer = rng => isText$a(rng.startContainer);\n    const rangeStartsAtStartOfTextContainer = rng => rng.startOffset === 0 && rangeStartsAtTextContainer(rng);\n    const rangeStartParentIsFormatElement = (editor, rng) => {\n      const startParent = rng.startContainer.parentElement;\n      return !isNull(startParent) && isFormatElement(editor, SugarElement.fromDom(startParent));\n    };\n    const rangeStartAndEndHaveSameParent = rng => {\n      const startParent = rng.startContainer.parentNode;\n      const endParent = rng.endContainer.parentNode;\n      return !isNull(startParent) && !isNull(endParent) && startParent.isEqualNode(endParent);\n    };\n    const rangeEndsAtEndOfEndContainer = rng => {\n      const endContainer = rng.endContainer;\n      return rng.endOffset === (isText$a(endContainer) ? endContainer.length : endContainer.childNodes.length);\n    };\n    const rangeEndsAtEndOfStartContainer = rng => rangeStartAndEndHaveSameParent(rng) && rangeEndsAtEndOfEndContainer(rng);\n    const rangeEndsAfterEndOfStartContainer = rng => !rng.endContainer.isEqualNode(rng.commonAncestorContainer);\n    const rangeEndsAtOrAfterEndOfStartContainer = rng => rangeEndsAtEndOfStartContainer(rng) || rangeEndsAfterEndOfStartContainer(rng);\n    const requiresDeleteRangeOverride = editor => {\n      const rng = editor.selection.getRng();\n      return rangeStartsAtStartOfTextContainer(rng) && rangeStartParentIsFormatElement(editor, rng) && rangeEndsAtOrAfterEndOfStartContainer(rng);\n    };\n    const deleteRange$1 = editor => {\n      if (requiresDeleteRangeOverride(editor)) {\n        const formatNodes = getFormatNodesAtStart(editor);\n        return Optional.some(() => {\n          execNativeDeleteCommand(editor);\n          updateCaretFormat(editor, formatNodes);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const backspaceDelete$3 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : deleteRange$1(editor);\n    const hasAncestorInlineCaret = (elm, schema) => ancestor$1(elm, node => isCaretNode(node.dom), el => schema.isBlock(name(el)));\n    const hasAncestorInlineCaretAtStart = editor => hasAncestorInlineCaret(SugarElement.fromDom(editor.selection.getStart()), editor.schema);\n    const requiresRefreshCaretOverride = editor => {\n      const rng = editor.selection.getRng();\n      return rng.collapsed && (rangeStartsAtTextContainer(rng) || editor.dom.isEmpty(rng.startContainer)) && !hasAncestorInlineCaretAtStart(editor);\n    };\n    const refreshCaret = editor => {\n      if (requiresRefreshCaretOverride(editor)) {\n        createCaretFormatAtStart(editor, []);\n      }\n      return true;\n    };\n\n    const deleteElement = (editor, forward, element) => {\n      if (isNonNullable(element)) {\n        return Optional.some(() => {\n          editor._selectionOverrides.hideFakeCaret();\n          deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const deleteCaret = (editor, forward) => {\n      const isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(pos => isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos)).bind(pos => deleteElement(editor, forward, pos.getNode(!forward)));\n      }\n    };\n    const deleteRange = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : Optional.none();\n    };\n    const backspaceDelete$2 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n\n    const isEditable = target => closest$4(target, elm => isContentEditableTrue$3(elm.dom) || isContentEditableFalse$b(elm.dom)).exists(elm => isContentEditableTrue$3(elm.dom));\n    const parseIndentValue = value => toInt(value !== null && value !== void 0 ? value : '').getOr(0);\n    const getIndentStyleName = (useMargin, element) => {\n      const indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      const suffix = get$7(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    const indentElement = (dom, command, useMargin, value, unit, element) => {\n      const indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      const parsedValue = parseIndentValue(dom.getStyle(element, indentStyleName));\n      if (command === 'outdent') {\n        const styleValue = Math.max(0, parsedValue - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        const styleValue = parsedValue + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    const validateBlocks = (editor, blocks) => forall(blocks, block => {\n      const indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n      const intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n      const contentEditable = editor.dom.getContentEditable(block.dom);\n      return contentEditable !== 'false' && intentValue > 0;\n    });\n    const canOutdent = editor => {\n      const blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    const isListComponent = el => isList(el) || isListItem$1(el);\n    const parentIsListComponent = el => parent(el).exists(isListComponent);\n    const getBlocksToIndent = editor => filter$5(fromDom$1(editor.selection.getSelectedBlocks()), el => !isListComponent(el) && !parentIsListComponent(el) && isEditable(el));\n    const handle = (editor, command) => {\n      var _a, _b;\n      const {dom} = editor;\n      const indentation = getIndentation(editor);\n      const indentUnit = (_b = (_a = /[a-z%]+$/i.exec(indentation)) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : 'px';\n      const indentValue = parseIndentValue(indentation);\n      const useMargin = shouldIndentUseMargin(editor);\n      each$e(getBlocksToIndent(editor), block => {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n    const indent = editor => handle(editor, 'indent');\n    const outdent = editor => handle(editor, 'outdent');\n\n    const backspaceDelete$1 = editor => {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        const dom = editor.dom;\n        const rng = editor.selection.getRng();\n        const pos = CaretPosition.fromRangeStart(rng);\n        const block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos, editor.schema)) {\n          return Optional.some(() => outdent(editor));\n        }\n      }\n      return Optional.none();\n    };\n\n    const findAction = (editor, caret, forward) => findMap([\n      backspaceDelete$1,\n      backspaceDelete$6,\n      backspaceDelete$7,\n      (editor, forward) => backspaceDelete$4(editor, caret, forward),\n      backspaceDelete$9,\n      backspaceDelete$a,\n      backspaceDelete$5,\n      backspaceDelete$2,\n      backspaceDelete$8,\n      backspaceDelete$3\n    ], item => item(editor, forward)).filter(_ => editor.selection.isEditable());\n    const deleteCommand = (editor, caret) => {\n      const result = findAction(editor, caret, false);\n      result.fold(() => {\n        if (editor.selection.isEditable()) {\n          execNativeDeleteCommand(editor);\n          paddEmptyBody(editor);\n        }\n      }, call);\n    };\n    const forwardDeleteCommand = (editor, caret) => {\n      const result = findAction(editor, caret, true);\n      result.fold(() => {\n        if (editor.selection.isEditable()) {\n          execNativeForwardDeleteCommand(editor);\n        }\n      }, call);\n    };\n    const setup$q = (editor, caret) => {\n      editor.addCommand('delete', () => {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', () => {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    const SIGNIFICANT_MOVE = 5;\n    const LONGPRESS_DELAY = 400;\n    const getTouch = event => {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    const isFarEnough = (touch, data) => {\n      const distX = Math.abs(touch.clientX - data.x);\n      const distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    const setup$p = editor => {\n      const startData = value$2();\n      const longpressFired = Cell(false);\n      const debounceLongpress = last$1(e => {\n        editor.dispatch('longpress', {\n          ...e,\n          type: 'longpress'\n        });\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', e => {\n        getTouch(e).each(touch => {\n          debounceLongpress.cancel();\n          const data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', e => {\n        debounceLongpress.cancel();\n        getTouch(e).each(touch => {\n          startData.on(data => {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.dispatch('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', e => {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(data => data.target.isEqualNode(e.target)).each(() => {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.dispatch('tap', {\n              ...e,\n              type: 'tap'\n            });\n          }\n        });\n      }, true);\n    };\n\n    const isBlockElement = (blockElements, node) => has$2(blockElements, node.nodeName);\n    const isValidTarget = (schema, node) => {\n      if (isText$a(node)) {\n        return true;\n      } else if (isElement$6(node)) {\n        return !isBlockElement(schema.getBlockElements(), node) && !isBookmarkNode$1(node) && !isTransparentBlock(schema, node) && !isNonHtmlElementRoot(node);\n      } else {\n        return false;\n      }\n    };\n    const hasBlockParent = (blockElements, root, node) => {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), elm => {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    const shouldRemoveTextNode = (blockElements, node) => {\n      if (isText$a(node)) {\n        if (node.data.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.data)) {\n          return !node.nextSibling || isBlockElement(blockElements, node.nextSibling) || isNonHtmlElementRoot(node.nextSibling);\n        }\n      }\n      return false;\n    };\n    const createRootBlock = editor => editor.dom.create(getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n    const addRootBlocks = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const schema = editor.schema;\n      const blockElements = schema.getBlockElements();\n      const startNode = selection.getStart();\n      const rootNode = editor.getBody();\n      let rootBlockNode;\n      let tempNode;\n      let wrapped = false;\n      const forcedRootBlock = getForcedRootBlock(editor);\n      if (!startNode || !isElement$6(startNode)) {\n        return;\n      }\n      const rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, startNode)) {\n        return;\n      }\n      const rng = selection.getRng();\n      const {startContainer, startOffset, endContainer, endOffset} = rng;\n      const restoreSelection = hasFocus(editor);\n      let node = rootNode.firstChild;\n      while (node) {\n        if (isElement$6(node)) {\n          updateElement(schema, node);\n        }\n        if (isValidTarget(schema, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = createRootBlock(editor);\n            rootNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    const insertEmptyLine = (editor, root, insertBlock) => {\n      const block = SugarElement.fromDom(createRootBlock(editor));\n      const br = createPaddingBr();\n      append$1(block, br);\n      insertBlock(root, block);\n      const rng = document.createRange();\n      rng.setStartBefore(br.dom);\n      rng.setEndBefore(br.dom);\n      return rng;\n    };\n    const setup$o = editor => {\n      editor.on('NodeChange', curry(addRootBlocks, editor));\n    };\n\n    const hasClass = checkClassName => node => (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n    const replaceMatchWithSpan = (editor, content, cls) => {\n      return function (match) {\n        const args = arguments, index = args[args.length - 2];\n        const prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          const findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            const tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    const convertRegExpsToNonEditable = (editor, nonEditableRegExps, e) => {\n      let i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    const isValidContent = (nonEditableRegExps, content) => {\n      return forall(nonEditableRegExps, re => {\n        const matches = content.match(re);\n        return matches !== null && matches[0].length === content.length;\n      });\n    };\n    const setup$n = editor => {\n      const contentEditableAttrName = 'contenteditable';\n      const editClass = ' ' + Tools.trim(getEditableClass(editor)) + ' ';\n      const nonEditClass = ' ' + Tools.trim(getNonEditableClass(editor)) + ' ';\n      const hasEditClass = hasClass(editClass);\n      const hasNonEditClass = hasClass(nonEditClass);\n      const nonEditableRegExps = getNonEditableRegExps(editor);\n      if (nonEditableRegExps.length > 0) {\n        editor.on('BeforeSetContent', e => {\n          convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n        });\n      }\n      editor.parser.addAttributeFilter('class', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (hasEditClass(node)) {\n            node.attr(contentEditableAttrName, 'true');\n          } else if (hasNonEditClass(node)) {\n            node.attr(contentEditableAttrName, 'false');\n          }\n        }\n      });\n      editor.serializer.addAttributeFilter(contentEditableAttrName, nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (!hasEditClass(node) && !hasNonEditClass(node)) {\n            continue;\n          }\n          const content = node.attr('data-mce-content');\n          if (nonEditableRegExps.length > 0 && content) {\n            if (isValidContent(nonEditableRegExps, content)) {\n              node.name = '#text';\n              node.type = 3;\n              node.raw = true;\n              node.value = content;\n            } else {\n              node.remove();\n            }\n          } else {\n            node.attr(contentEditableAttrName, null);\n          }\n        }\n      });\n    };\n\n    const findBlockCaretContainer = editor => descendant$1(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(elm => elm.dom).getOrNull();\n    const showBlockCaretContainer = (editor, blockCaretContainer) => {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        editor.selection.setRng(editor.selection.getRng());\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    const handleBlockContainer = (editor, e) => {\n      const blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    const setup$m = editor => {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    const isContentEditableFalse$3 = isContentEditableFalse$b;\n    const moveToCeFalseHorizontally = (direction, editor, range) => moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$3);\n    const moveToCeFalseVertically = (direction, editor, range) => {\n      const isBefore = caretPosition => isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      const isAfter = caretPosition => isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$3);\n    };\n    const createTextBlock = editor => {\n      const textBlock = editor.dom.create(getForcedRootBlock(editor));\n      textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      return textBlock;\n    };\n    const exitPreBlock = (editor, direction, range) => {\n      const caretWalker = CaretWalker(editor.getBody());\n      const getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed) {\n        const pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        const caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          const newBlock = SugarElement.fromDom(createTextBlock(editor));\n          if (direction === 1) {\n            after$4(SugarElement.fromDom(pre), newBlock);\n          } else {\n            before$3(SugarElement.fromDom(pre), newBlock);\n          }\n          editor.selection.select(newBlock.dom, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    const getHorizontalRange = (editor, forward) => {\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(() => {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    const getVerticalRange = (editor, down) => {\n      const direction = down ? 1 : -1;\n      const range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(() => {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    const flipDirection = (selection, forward) => {\n      const elm = forward ? selection.getEnd(true) : selection.getStart(true);\n      return isRtl(elm) ? !forward : forward;\n    };\n    const moveH$2 = (editor, forward) => getHorizontalRange(editor, flipDirection(editor.selection, forward)).exists(newRange => {\n      moveToRange(editor, newRange);\n      return true;\n    });\n    const moveV$4 = (editor, down) => getVerticalRange(editor, down).exists(newRange => {\n      moveToRange(editor, newRange);\n      return true;\n    });\n    const moveToLineEndPoint$1 = (editor, forward) => {\n      const isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n    const selectToEndPoint = (editor, forward) => getEdgeCefPosition(editor, !forward).map(pos => {\n      const rng = pos.toRange();\n      const curRng = editor.selection.getRng();\n      if (forward) {\n        rng.setStart(curRng.startContainer, curRng.startOffset);\n      } else {\n        rng.setEnd(curRng.endContainer, curRng.endOffset);\n      }\n      return rng;\n    }).exists(rng => {\n      moveToRange(editor, rng);\n      return true;\n    });\n\n    const isTarget = node => contains$2(['figcaption'], name(node));\n    const getClosestTargetBlock = (pos, root, schema) => {\n      const isRoot = curry(eq, root);\n      return closest$4(SugarElement.fromDom(pos.container()), el => schema.isBlock(name(el)), isRoot).filter(isTarget);\n    };\n    const isAtFirstOrLastLine = (root, forward, pos) => forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    const moveCaretToNewEmptyLine = (editor, forward) => {\n      const root = SugarElement.fromDom(editor.getBody());\n      const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getClosestTargetBlock(pos, root, editor.schema).exists(() => {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          const insertFn = forward ? append$1 : prepend;\n          const rng = insertEmptyLine(editor, root, insertFn);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    const moveV$3 = (editor, forward) => {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    const moveUp = (editor, details, summary) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (root.firstChild === details && isAtFirstLine(summary, pos)) {\n        editor.execCommand('InsertNewBlockBefore');\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const moveDown = (editor, details) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (root.lastChild === details && isAtLastLine(details, pos)) {\n        editor.execCommand('InsertNewBlockAfter');\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const move$2 = (editor, forward) => {\n      if (forward) {\n        return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'details')).map(details => moveDown(editor, details)).getOr(false);\n      } else {\n        return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'summary')).bind(summary => Optional.from(editor.dom.getParent(summary, 'details')).map(details => moveUp(editor, details, summary))).getOr(false);\n      }\n    };\n    const moveV$2 = (editor, forward) => move$2(editor, forward);\n\n    const baseKeyPattern = {\n      shiftKey: false,\n      altKey: false,\n      ctrlKey: false,\n      metaKey: false,\n      keyCode: 0\n    };\n    const defaultPatterns = patterns => map$3(patterns, pattern => ({\n      ...baseKeyPattern,\n      ...pattern\n    }));\n    const defaultDelayedPatterns = patterns => map$3(patterns, pattern => ({\n      ...baseKeyPattern,\n      ...pattern\n    }));\n    const matchesEvent = (pattern, evt) => evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    const match$1 = (patterns, evt) => bind$3(defaultPatterns(patterns), pattern => matchesEvent(pattern, evt) ? [pattern] : []);\n    const matchDelayed = (patterns, evt) => bind$3(defaultDelayedPatterns(patterns), pattern => matchesEvent(pattern, evt) ? [pattern] : []);\n    const action = (f, ...x) => () => f.apply(null, x);\n    const execute = (patterns, evt) => find$2(match$1(patterns, evt), pattern => pattern.action());\n    const executeWithDelayedAction = (patterns, evt) => findMap(matchDelayed(patterns, evt), pattern => pattern.action());\n\n    const moveH$1 = (editor, forward) => {\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(newRange => {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    const moveV$1 = (editor, down) => {\n      const direction = down ? 1 : -1;\n      const range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(newRange => {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    const moveToLineEndPoint = (editor, forward) => {\n      const isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    const adt = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    const none = current => adt.none(current);\n    const CellLocation = {\n      ...adt,\n      none\n    };\n\n    const firstLayer = (scope, selector) => {\n      return filterFirstLayer(scope, selector, always);\n    };\n    const filterFirstLayer = (scope, selector, predicate) => {\n      return bind$3(children$1(scope), x => {\n        if (is$1(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    const lookup$1 = (tags, element, isRoot = never) => {\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains$2(tags, name(element))) {\n        return Optional.some(element);\n      }\n      const isRootOrUpperTable = elm => is$1(elm, 'table') || isRoot(elm);\n      return ancestor$3(element, tags.join(','), isRootOrUpperTable);\n    };\n    const cell = (element, isRoot) => lookup$1([\n      'td',\n      'th'\n    ], element, isRoot);\n    const cells = ancestor => firstLayer(ancestor, 'th,td');\n    const table = (element, isRoot) => closest$3(element, 'table', isRoot);\n\n    const walk = (all, current, index, direction, isEligible = always) => {\n      const forwards = direction === 1;\n      if (!forwards && index <= 0) {\n        return CellLocation.first(all[0]);\n      } else if (forwards && index >= all.length - 1) {\n        return CellLocation.last(all[all.length - 1]);\n      } else {\n        const newIndex = index + direction;\n        const elem = all[newIndex];\n        return isEligible(elem) ? CellLocation.middle(current, elem) : walk(all, current, newIndex, direction, isEligible);\n      }\n    };\n    const detect = (current, isRoot) => {\n      return table(current, isRoot).bind(table => {\n        const all = cells(table);\n        const index = findIndex$2(all, x => eq(current, x));\n        return index.map(index => ({\n          index,\n          all\n        }));\n      });\n    };\n    const next = (current, isEligible, isRoot) => {\n      const detection = detect(current, isRoot);\n      return detection.fold(() => {\n        return CellLocation.none(current);\n      }, info => {\n        return walk(info.all, current, info.index, 1, isEligible);\n      });\n    };\n    const prev = (current, isEligible, isRoot) => {\n      const detection = detect(current, isRoot);\n      return detection.fold(() => {\n        return CellLocation.none();\n      }, info => {\n        return walk(info.all, current, info.index, -1, isEligible);\n      });\n    };\n\n    const deflate = (rect, delta) => ({\n      left: rect.left - delta,\n      top: rect.top - delta,\n      right: rect.right + delta * 2,\n      bottom: rect.bottom + delta * 2,\n      width: rect.width + delta,\n      height: rect.height + delta\n    });\n    const getCorners = (getYAxisValue, tds) => bind$3(tds, td => {\n      const rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n      return [\n        {\n          x: rect.left,\n          y: getYAxisValue(rect),\n          cell: td\n        },\n        {\n          x: rect.right,\n          y: getYAxisValue(rect),\n          cell: td\n        }\n      ];\n    });\n    const findClosestCorner = (corners, x, y) => foldl(corners, (acc, newCorner) => acc.fold(() => Optional.some(newCorner), oldCorner => {\n      const oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n      const newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n      return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n    }), Optional.none());\n    const getClosestCell = (getYAxisValue, isTargetCorner, table, x, y) => {\n      const cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(e => e.dom);\n      const corners = filter$5(getCorners(getYAxisValue, cells), corner => isTargetCorner(corner, y));\n      return findClosestCorner(corners, x, y).map(corner => corner.cell);\n    };\n    const getBottomValue = rect => rect.bottom;\n    const getTopValue = rect => rect.top;\n    const isAbove = (corner, y) => corner.y < y;\n    const isBelow = (corner, y) => corner.y > y;\n    const getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    const getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    const findClosestPositionInAboveCell = (table, pos) => head(pos.getClientRects()).bind(rect => getClosestCellAbove(table, rect.left, rect.top)).bind(cell => findClosestHorizontalPosition(getLastLinePositions(cell), pos));\n    const findClosestPositionInBelowCell = (table, pos) => last$3(pos.getClientRects()).bind(rect => getClosestCellBelow(table, rect.left, rect.top)).bind(cell => findClosestHorizontalPosition(getFirstLinePositions(cell), pos));\n\n    const hasNextBreak = (getPositionsUntil, scope, lineInfo) => lineInfo.breakAt.exists(breakPos => getPositionsUntil(scope, breakPos).breakAt.isSome());\n    const startsWithWrapBreak = lineInfo => lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    const startsWithBrBreak = lineInfo => lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    const isAtTableCellLine = (getPositionsUntil, scope, pos) => {\n      const lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$6(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    const isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    const isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    const isCaretAtStartOrEndOfTable = (forward, rng, table) => {\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(pos => pos.isEqual(caretPos));\n    };\n    const navigateHorizontally = (editor, forward, table, _td) => {\n      const rng = editor.selection.getRng();\n      const direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(newRng => {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    const getClosestAbovePosition = (root, table, start) => findClosestPositionInAboveCell(table, start).orThunk(() => head(start.getClientRects()).bind(rect => findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left))).getOr(CaretPosition.before(table));\n    const getClosestBelowPosition = (root, table, start) => findClosestPositionInBelowCell(table, start).orThunk(() => head(start.getClientRects()).bind(rect => findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left))).getOr(CaretPosition.after(table));\n    const getTable = (previous, pos) => {\n      const node = pos.getNode(previous);\n      return isTable$2(node) ? Optional.some(node) : Optional.none();\n    };\n    const renderBlock = (down, editor, table) => {\n      editor.undoManager.transact(() => {\n        const insertFn = down ? after$4 : before$3;\n        const rng = insertEmptyLine(editor, SugarElement.fromDom(table), insertFn);\n        moveToRange(editor, rng);\n      });\n    };\n    const moveCaret = (editor, down, pos) => {\n      const table = down ? getTable(true, pos) : getTable(false, pos);\n      const last = down === false;\n      table.fold(() => moveToRange(editor, pos.toRange()), table => positionIn(last, editor.getBody()).filter(lastPos => lastPos.isEqual(pos)).fold(() => moveToRange(editor, pos.toRange()), _ => renderBlock(down, editor, table)));\n    };\n    const navigateVertically = (editor, down, table, td) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        const newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        const newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const move$1 = (editor, forward, mover) => Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(td => Optional.from(editor.dom.getParent(td, 'table')).map(table => mover(editor, forward, table, td))).getOr(false);\n    const moveH = (editor, forward) => move$1(editor, forward, navigateHorizontally);\n    const moveV = (editor, forward) => move$1(editor, forward, navigateVertically);\n    const getCellFirstCursorPosition = cell => {\n      const selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    const tabGo = (editor, isRoot, cell) => {\n      return cell.fold(Optional.none, Optional.none, (_current, next) => {\n        return first(next).map(cell => {\n          return getCellFirstCursorPosition(cell);\n        });\n      }, current => {\n        editor.execCommand('mceTableInsertRowAfter');\n        return tabForward(editor, isRoot, current);\n      });\n    };\n    const tabForward = (editor, isRoot, cell) => tabGo(editor, isRoot, next(cell, isEditable$2));\n    const tabBackward = (editor, isRoot, cell) => tabGo(editor, isRoot, prev(cell, isEditable$2));\n    const handleTab = (editor, forward) => {\n      const rootElements = [\n        'table',\n        'li',\n        'dl'\n      ];\n      const body = SugarElement.fromDom(editor.getBody());\n      const isRoot = element => {\n        const name$1 = name(element);\n        return eq(element, body) || contains$2(rootElements, name$1);\n      };\n      const rng = editor.selection.getRng();\n      const container = SugarElement.fromDom(!forward ? rng.startContainer : rng.endContainer);\n      return cell(container, isRoot).map(cell => {\n        table(cell, isRoot).each(table => {\n          editor.model.table.clearSelectedCells(table.dom);\n        });\n        editor.selection.collapse(!forward);\n        const navigation = !forward ? tabBackward : tabForward;\n        const rng = navigation(editor, isRoot, cell);\n        rng.each(range => {\n          editor.selection.setRng(range);\n        });\n        return true;\n      }).getOr(false);\n    };\n\n    const executeKeydownOverride$4 = (editor, caret, evt) => {\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$4, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$4, editor, true)\n        },\n        ...isMac ? [\n          {\n            keyCode: VK.UP,\n            action: action(selectToEndPoint, editor, false),\n            metaKey: true,\n            shiftKey: true\n          },\n          {\n            keyCode: VK.DOWN,\n            action: action(selectToEndPoint, editor, true),\n            metaKey: true,\n            shiftKey: true\n          }\n        ] : [],\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !isMac,\n          altKey: isMac,\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !isMac,\n          altKey: isMac,\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        }\n      ], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$l = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$4(editor, caret, evt);\n        }\n      });\n    };\n\n    const point = (container, offset) => ({\n      container,\n      offset\n    });\n\n    const DOM$7 = DOMUtils.DOM;\n    const alwaysNext = startNode => node => startNode === node ? -1 : 0;\n    const isBoundary = dom => node => dom.isBlock(node) || contains$2([\n      'BR',\n      'IMG',\n      'HR',\n      'INPUT'\n    ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    const textBefore = (node, offset, rootNode) => {\n      if (isText$a(node) && offset >= 0) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.backwards(node, offset, alwaysNext(node), rootNode)).map(prev => point(prev.container, prev.container.data.length));\n      }\n    };\n    const textAfter = (node, offset, rootNode) => {\n      if (isText$a(node) && offset >= node.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.forwards(node, offset, alwaysNext(node), rootNode)).map(prev => point(prev.container, 0));\n      }\n    };\n    const scanLeft = (node, offset, rootNode) => {\n      if (!isText$a(node)) {\n        return Optional.none();\n      }\n      const text = node.data;\n      if (offset >= 0 && offset <= text.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.backwards(node, offset, alwaysNext(node), rootNode)).bind(prev => {\n          const prevText = prev.container.data;\n          return scanLeft(prev.container, offset + prevText.length, rootNode);\n        });\n      }\n    };\n    const scanRight = (node, offset, rootNode) => {\n      if (!isText$a(node)) {\n        return Optional.none();\n      }\n      const text = node.data;\n      if (offset <= text.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.forwards(node, offset, alwaysNext(node), rootNode)).bind(next => scanRight(next.container, offset - text.length, rootNode));\n      }\n    };\n    const repeatLeft = (dom, node, offset, process, rootNode) => {\n      const search = TextSeeker(dom, isBoundary(dom));\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    const isValidTextRange = rng => rng.collapsed && isText$a(rng.startContainer);\n    const getText = rng => trim$2(rng.toString().replace(/\\u00A0/g, ' '));\n    const isWhitespace = chr => chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n\n    const stripTrigger = (text, trigger) => text.substring(trigger.length);\n    const findTrigger = (text, index, trigger) => {\n      let i;\n      const firstChar = trigger.charAt(0);\n      for (i = index - 1; i >= 0; i--) {\n        const char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (firstChar === char && contains$1(text, trigger, i, index)) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    const findStart = (dom, initRange, trigger, minChars = 0) => {\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      const buffer = {\n        text: '',\n        offset: 0\n      };\n      const findTriggerIndex = (element, offset, text) => {\n        buffer.text = text + buffer.text;\n        buffer.offset += offset;\n        return findTrigger(buffer.text, buffer.offset, trigger).getOr(offset);\n      };\n      const root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerIndex, root).bind(spot => {\n        const range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        const text = getText(range);\n        const triggerIndex = text.lastIndexOf(trigger);\n        if (triggerIndex !== 0 || stripTrigger(text, trigger).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTrigger(text, trigger),\n            range,\n            trigger\n          });\n        }\n      });\n    };\n    const getContext = (dom, initRange, trigger, minChars = 0) => detect$1(SugarElement.fromDom(initRange.startContainer)).fold(() => findStart(dom, initRange, trigger, minChars), elm => {\n      const range = dom.createRng();\n      range.selectNode(elm.dom);\n      const text = getText(range);\n      return Optional.some({\n        range,\n        text: stripTrigger(text, trigger),\n        trigger\n      });\n    });\n\n    const isText$1 = node => node.nodeType === TEXT;\n    const isElement = node => node.nodeType === ELEMENT;\n    const toLast = node => {\n      if (isText$1(node)) {\n        return point(node, node.data.length);\n      } else {\n        const children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    const toLeaf = (node, offset) => {\n      const children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    const isPreviousCharContent = (dom, leaf) => {\n      var _a;\n      const root = (_a = dom.getParent(leaf.container, dom.isBlock)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      return repeatLeft(dom, leaf.container, leaf.offset, (_element, offset) => offset === 0 ? -1 : offset, root).filter(spot => {\n        const char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    const isStartOfWord = dom => rng => {\n      const leaf = toLeaf(rng.startContainer, rng.startOffset);\n      return !isPreviousCharContent(dom, leaf);\n    };\n    const getTriggerContext = (dom, initRange, database) => findMap(database.triggers, trigger => getContext(dom, initRange, trigger));\n    const lookup = (editor, getDatabase) => {\n      const database = getDatabase();\n      const rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(context => lookupWithContext(editor, getDatabase, context));\n    };\n    const lookupWithContext = (editor, getDatabase, context, fetchOptions = {}) => {\n      var _a;\n      const database = getDatabase();\n      const rng = editor.selection.getRng();\n      const startText = (_a = rng.startContainer.nodeValue) !== null && _a !== void 0 ? _a : '';\n      const autocompleters = filter$5(database.lookupByTrigger(context.trigger), autocompleter => context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(() => isStartOfWord(editor.dom))(context.range, startText, context.text));\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      const lookupData = Promise.all(map$3(autocompleters, ac => {\n        const fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(results => ({\n          matchText: context.text,\n          items: results,\n          columns: ac.columns,\n          onAction: ac.onAction,\n          highlightOn: ac.highlightOn\n        }));\n      }));\n      return Optional.some({\n        lookupData,\n        context\n      });\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    const fold$1 = (res, onError, onValue) => res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    const partition = results => {\n      const values = [];\n      const errors = [];\n      each$e(results, obj => {\n        fold$1(obj, err => errors.push(err), val => values.push(val));\n      });\n      return {\n        values,\n        errors\n      };\n    };\n    const mapError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    const map = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    const bind$1 = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    const bindError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    const svalue = v => ({\n      stype: SimpleResultType.Value,\n      svalue: v\n    });\n    const serror = e => ({\n      stype: SimpleResultType.Error,\n      serror: e\n    });\n    const toResult = res => fold$1(res, Result.error, Result.value);\n    const fromResult = res => res.fold(serror, svalue);\n    const SimpleResult = {\n      fromResult,\n      toResult,\n      svalue,\n      partition,\n      serror,\n      bind: bind$1,\n      bindError,\n      map,\n      mapError,\n      fold: fold$1\n    };\n\n    const formatObj = input => {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    const formatErrors = errors => {\n      const es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant('... (only showing first ten failures)')\n        }]) : errors;\n      return map$3(es, e => {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    const nu = (path, getErrorInfo) => {\n      return SimpleResult.serror([{\n          path,\n          getErrorInfo\n        }]);\n    };\n    const missingRequired = (path, key, obj) => nu(path, () => 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj));\n    const missingKey = (path, key) => nu(path, () => 'Choice schema did not contain choice key: \"' + key + '\"');\n    const missingBranch = (path, branches, branch) => nu(path, () => 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches));\n    const custom = (path, err) => nu(path, constant(err));\n\n    const chooseFrom = (path, input, branches, ch) => {\n      const fields = get$a(branches, ch);\n      return fields.fold(() => missingBranch(path, branches, ch), vp => vp.extract(path.concat(['branch: ' + ch]), input));\n    };\n    const choose$1 = (key, branches) => {\n      const extract = (path, input) => {\n        const choice = get$a(input, key);\n        return choice.fold(() => missingKey(path, key), chosen => chooseFrom(path, input, branches, chosen));\n      };\n      const toString = () => 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const shallow = (old, nu) => {\n      return nu;\n    };\n    const deep = (old, nu) => {\n      const bothObjects = isPlainObject(old) && isPlainObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    const baseMerge = merger => {\n      return (...objects) => {\n        if (objects.length === 0) {\n          throw new Error(`Can't merge zero objects`);\n        }\n        const ret = {};\n        for (let j = 0; j < objects.length; j++) {\n          const curObject = objects[j];\n          for (const key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    const deepMerge = baseMerge(deep);\n    const merge = baseMerge(shallow);\n\n    const required = () => ({\n      tag: 'required',\n      process: {}\n    });\n    const defaultedThunk = fallbackThunk => ({\n      tag: 'defaultedThunk',\n      process: fallbackThunk\n    });\n    const defaulted$1 = fallback => defaultedThunk(constant(fallback));\n    const asOption = () => ({\n      tag: 'option',\n      process: {}\n    });\n\n    const mergeValues = (values, base) => values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    const mergeErrors = errors => compose(SimpleResult.serror, flatten)(errors);\n    const consolidateObj = (objects, base) => {\n      const partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors(partition.errors) : mergeValues(partition.values, base);\n    };\n    const consolidateArr = objects => {\n      const partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    const ResultCombine = {\n      consolidateObj,\n      consolidateArr\n    };\n\n    const field$1 = (key, newKey, presence, prop) => ({\n      tag: 'field',\n      key,\n      newKey,\n      presence,\n      prop\n    });\n    const customField$1 = (newKey, instantiator) => ({\n      tag: 'custom',\n      newKey,\n      instantiator\n    });\n    const fold = (value, ifField, ifCustom) => {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    const value = validator => {\n      const extract = (path, val) => {\n        return SimpleResult.bindError(validator(val), err => custom(path, err));\n      };\n      const toString = constant('val');\n      return {\n        extract,\n        toString\n      };\n    };\n    const anyValue$1 = value(SimpleResult.svalue);\n\n    const requiredAccess = (path, obj, key, bundle) => get$a(obj, key).fold(() => missingRequired(path, key, obj), bundle);\n    const fallbackAccess = (obj, key, fallback, bundle) => {\n      const v = get$a(obj, key).getOrThunk(() => fallback(obj));\n      return bundle(v);\n    };\n    const optionAccess = (obj, key, bundle) => bundle(get$a(obj, key));\n    const optionDefaultedAccess = (obj, key, fallback, bundle) => {\n      const opt = get$a(obj, key).map(val => val === true ? fallback(obj) : val);\n      return bundle(opt);\n    };\n    const extractField = (field, path, obj, key, prop) => {\n      const bundle = av => prop.extract(path.concat([key]), av);\n      const bundleAsOption = optValue => optValue.fold(() => SimpleResult.svalue(Optional.none()), ov => {\n        const result = prop.extract(path.concat([key]), ov);\n        return SimpleResult.map(result, Optional.some);\n      });\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant({}), v => {\n            const result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    const extractFields = (path, obj, fields) => {\n      const success = {};\n      const errors = [];\n      for (const field of fields) {\n        fold(field, (key, newKey, presence, prop) => {\n          const result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, err => {\n            errors.push(...err);\n          }, res => {\n            success[newKey] = res;\n          });\n        }, (newKey, instantiator) => {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    const objOf = values => {\n      const extract = (path, o) => extractFields(path, o, values);\n      const toString = () => {\n        const fieldStrings = map$3(values, value => fold(value, (key, _okey, _presence, prop) => key + ' -> ' + prop.toString(), (newKey, _instantiator) => 'state(' + newKey + ')'));\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOf = prop => {\n      const extract = (path, array) => {\n        const results = map$3(array, (a, i) => prop.extract(path.concat(['[' + i + ']']), a));\n        return ResultCombine.consolidateArr(results);\n      };\n      const toString = () => 'array(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const valueOf = validator => value(v => validator(v).fold(SimpleResult.serror, SimpleResult.svalue));\n    const extractValue = (label, prop, obj) => {\n      const res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, errs => ({\n        input: obj,\n        errors: errs\n      }));\n    };\n    const asRaw = (label, prop, obj) => SimpleResult.toResult(extractValue(label, prop, obj));\n    const formatError = errInfo => {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    const choose = (key, branches) => choose$1(key, map$2(branches, objOf));\n\n    const anyValue = constant(anyValue$1);\n    const typedValue = (validator, expectedType) => value(a => {\n      const actualType = typeof a;\n      return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror(`Expected type: ${ expectedType } but got: ${ actualType }`);\n    });\n    const number = typedValue(isNumber, 'number');\n    const string = typedValue(isString, 'string');\n    const boolean = typedValue(isBoolean, 'boolean');\n    const functionProcessor = typedValue(isFunction, 'function');\n\n    const field = field$1;\n    const customField = customField$1;\n    const validateEnum = values => valueOf(value => contains$2(values, value) ? Result.value(value) : Result.error(`Unsupported value: \"${ value }\", choose one of \"${ values.join(', ') }\".`));\n    const requiredOf = (key, schema) => field(key, key, required(), schema);\n    const requiredString = key => requiredOf(key, string);\n    const requiredFunction = key => requiredOf(key, functionProcessor);\n    const requiredArrayOf = (key, schema) => field(key, key, required(), arrOf(schema));\n    const optionOf = (key, schema) => field(key, key, asOption(), schema);\n    const optionString = key => optionOf(key, string);\n    const optionFunction = key => optionOf(key, functionProcessor);\n    const defaulted = (key, fallback) => field(key, key, defaulted$1(fallback), anyValue());\n    const defaultedOf = (key, fallback, schema) => field(key, key, defaulted$1(fallback), schema);\n    const defaultedNumber = (key, fallback) => defaultedOf(key, fallback, number);\n    const defaultedString = (key, fallback) => defaultedOf(key, fallback, string);\n    const defaultedStringEnum = (key, fallback, values) => defaultedOf(key, fallback, validateEnum(values));\n    const defaultedBoolean = (key, fallback) => defaultedOf(key, fallback, boolean);\n    const defaultedFunction = (key, fallback) => defaultedOf(key, fallback, functionProcessor);\n    const defaultedArrayOf = (key, fallback, schema) => defaultedOf(key, fallback, arrOf(schema));\n\n    const type = requiredString('type');\n    const fetch$1 = requiredFunction('fetch');\n    const onAction = requiredFunction('onAction');\n    const onSetup = defaultedFunction('onSetup', () => noop);\n    const optionalText = optionString('text');\n    const optionalIcon = optionString('icon');\n    const optionalTooltip = optionString('tooltip');\n    const optionalLabel = optionString('label');\n    const active = defaultedBoolean('active', false);\n    const enabled = defaultedBoolean('enabled', true);\n    const primary = defaultedBoolean('primary', false);\n    const defaultedColumns = num => defaulted('columns', num);\n    const defaultedType = type => defaultedString('type', type);\n\n    const autocompleterSchema = objOf([\n      type,\n      requiredString('trigger'),\n      defaultedNumber('minChars', 1),\n      defaultedColumns(1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      fetch$1,\n      onAction,\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    const createAutocompleter = spec => asRaw('Autocompleter', autocompleterSchema, {\n      trigger: spec.ch,\n      ...spec\n    });\n\n    const baseToolbarButtonFields = [\n      enabled,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      onSetup\n    ];\n\n    const baseToolbarToggleButtonFields = [active].concat(baseToolbarButtonFields);\n\n    const contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    const contextButtonFields = baseToolbarButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const launchButtonFields = baseToolbarButtonFields.concat([defaultedType('contextformbutton')]);\n    const launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaultedType('contextformtogglebutton')]);\n    const toggleOrNormal = choose('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    objOf([\n      defaultedType('contextform'),\n      defaultedFunction('initValue', constant('')),\n      optionalLabel,\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n\n    const register$2 = editor => {\n      const popups = editor.ui.registry.getAll().popups;\n      const dataset = map$2(popups, popup => createAutocompleter(popup).fold(err => {\n        throw new Error(formatError(err));\n      }, identity));\n      const triggers = stringArray(mapToArray(dataset, v => v.trigger));\n      const datasetValues = values(dataset);\n      const lookupByTrigger = trigger => filter$5(datasetValues, dv => dv.trigger === trigger);\n      return {\n        dataset,\n        triggers,\n        lookupByTrigger\n      };\n    };\n\n    const setupEditorInput = (editor, api) => {\n      const update = last$1(api.load, 50);\n      editor.on('keypress compositionend', e => {\n        if (e.which === 27) {\n          return;\n        }\n        update.throttle();\n      });\n      editor.on('keydown', e => {\n        const keyCode = e.which;\n        if (keyCode === 8) {\n          update.throttle();\n        } else if (keyCode === 27) {\n          api.cancelIfNecessary();\n        }\n      });\n      editor.on('remove', update.cancel);\n    };\n    const setup$k = editor => {\n      const activeAutocompleter = value$2();\n      const uiActive = Cell(false);\n      const isActive = activeAutocompleter.isSet;\n      const cancelIfNecessary = () => {\n        if (isActive()) {\n          removeAutocompleterDecoration(editor);\n          fireAutocompleterEnd(editor);\n          uiActive.set(false);\n          activeAutocompleter.clear();\n        }\n      };\n      const commenceIfNecessary = context => {\n        if (!isActive()) {\n          addAutocompleterDecoration(editor, context.range);\n          activeAutocompleter.set({\n            trigger: context.trigger,\n            matchLength: context.text.length\n          });\n        }\n      };\n      const getAutocompleters = cached(() => register$2(editor));\n      const doLookup = fetchOptions => activeAutocompleter.get().map(ac => getContext(editor.dom, editor.selection.getRng(), ac.trigger).bind(newContext => lookupWithContext(editor, getAutocompleters, newContext, fetchOptions))).getOrThunk(() => lookup(editor, getAutocompleters));\n      const load = fetchOptions => {\n        doLookup(fetchOptions).fold(cancelIfNecessary, lookupInfo => {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(lookupData => {\n            activeAutocompleter.get().map(ac => {\n              const context = lookupInfo.context;\n              if (ac.trigger === context.trigger) {\n                if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  activeAutocompleter.set({\n                    ...ac,\n                    matchLength: context.text.length\n                  });\n                  if (uiActive.get()) {\n                    fireAutocompleterUpdate(editor, { lookupData });\n                  } else {\n                    uiActive.set(true);\n                    fireAutocompleterStart(editor, { lookupData });\n                  }\n                }\n              }\n            });\n          });\n        });\n      };\n      editor.addCommand('mceAutocompleterReload', (_ui, value) => {\n        const fetchOptions = isObject(value) ? value.fetchOptions : {};\n        load(fetchOptions);\n      });\n      editor.addCommand('mceAutocompleterClose', cancelIfNecessary);\n      setupEditorInput(editor, {\n        cancelIfNecessary,\n        load\n      });\n    };\n\n    const browser$1 = detect$2().browser;\n    const isSafari = browser$1.isSafari();\n    const emptyNodeContents = node => fillWithPaddingBr(SugarElement.fromDom(node));\n    const isEntireNodeSelected = (rng, node) => {\n      var _a;\n      return rng.startOffset === 0 && rng.endOffset === ((_a = node.textContent) === null || _a === void 0 ? void 0 : _a.length);\n    };\n    const getParentDetailsElementAtPos = (dom, pos) => Optional.from(dom.getParent(pos.container(), 'details'));\n    const isInDetailsElement = (dom, pos) => getParentDetailsElementAtPos(dom, pos).isSome();\n    const getDetailsElements = (dom, rng) => {\n      const startDetails = Optional.from(dom.getParent(rng.startContainer, 'details'));\n      const endDetails = Optional.from(dom.getParent(rng.endContainer, 'details'));\n      if (startDetails.isSome() || endDetails.isSome()) {\n        const startSummary = startDetails.bind(details => Optional.from(dom.select('summary', details)[0]));\n        return Optional.some({\n          startSummary,\n          startDetails,\n          endDetails\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const isCaretInTheBeginningOf = (caretPos, element) => firstPositionIn(element).exists(pos => pos.isEqual(caretPos));\n    const isCaretInTheEndOf = (caretPos, element) => {\n      return lastPositionIn(element).exists(pos => {\n        if (isBr$6(pos.getNode())) {\n          return prevPosition(element, pos).exists(pos2 => pos2.isEqual(caretPos)) || pos.isEqual(caretPos);\n        } else {\n          return pos.isEqual(caretPos);\n        }\n      });\n    };\n    const isCaretAtStartOfSummary = (caretPos, detailsElements) => detailsElements.startSummary.exists(summary => isCaretInTheBeginningOf(caretPos, summary));\n    const isCaretAtEndOfSummary = (caretPos, detailsElements) => detailsElements.startSummary.exists(summary => isCaretInTheEndOf(caretPos, summary));\n    const isCaretInFirstPositionInBody = (caretPos, detailsElements) => detailsElements.startDetails.exists(details => prevPosition(details, caretPos).forall(pos => detailsElements.startSummary.exists(summary => !summary.contains(caretPos.container()) && summary.contains(pos.container()))));\n    const isCaretInLastPositionInBody = (root, caretPos, detailsElements) => detailsElements.startDetails.exists(details => nextPosition(root, caretPos).forall(pos => !details.contains(pos.container())));\n    const setCaretToPosition = (editor, position) => {\n      const node = position.getNode();\n      if (!isUndefined(node)) {\n        editor.selection.setCursorLocation(node, position.offset());\n      }\n    };\n    const moveCaretToDetailsPos = (editor, pos, forward) => {\n      const details = editor.dom.getParent(pos.container(), 'details');\n      if (details && !details.open) {\n        const summary = editor.dom.select('summary', details)[0];\n        if (summary) {\n          const newPos = forward ? firstPositionIn(summary) : lastPositionIn(summary);\n          newPos.each(pos => setCaretToPosition(editor, pos));\n        }\n      } else {\n        setCaretToPosition(editor, pos);\n      }\n    };\n    const isPartialDelete = (rng, detailsElements) => {\n      const containsStart = element => element.contains(rng.startContainer);\n      const containsEnd = element => element.contains(rng.endContainer);\n      const startInSummary = detailsElements.startSummary.exists(containsStart);\n      const endInSummary = detailsElements.startSummary.exists(containsEnd);\n      const isPartiallySelectedDetailsElements = detailsElements.startDetails.forall(startDetails => detailsElements.endDetails.forall(endDetails => startDetails !== endDetails));\n      const isInPartiallySelectedSummary = (startInSummary || endInSummary) && !(startInSummary && endInSummary);\n      return isInPartiallySelectedSummary || isPartiallySelectedDetailsElements;\n    };\n    const shouldPreventDeleteIntoDetails = (editor, forward, granularity) => {\n      const {dom, selection} = editor;\n      const root = editor.getBody();\n      if (granularity === 'character') {\n        const caretPos = CaretPosition.fromRangeStart(selection.getRng());\n        const parentBlock = dom.getParent(caretPos.container(), dom.isBlock);\n        const parentDetailsAtCaret = getParentDetailsElementAtPos(dom, caretPos);\n        const inEmptyParentBlock = parentBlock && dom.isEmpty(parentBlock);\n        const isFirstBlock = isNull(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.previousSibling);\n        const isLastBlock = isNull(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.nextSibling);\n        if (inEmptyParentBlock) {\n          const firstOrLast = forward ? isLastBlock : isFirstBlock;\n          if (firstOrLast) {\n            const isBeforeAfterDetails = navigate(!forward, root, caretPos).exists(pos => {\n              return isInDetailsElement(dom, pos) && !equals(parentDetailsAtCaret, getParentDetailsElementAtPos(dom, pos));\n            });\n            if (isBeforeAfterDetails) {\n              return true;\n            }\n          }\n        }\n        return navigate(forward, root, caretPos).fold(never, pos => {\n          const parentDetailsAtNewPos = getParentDetailsElementAtPos(dom, pos);\n          if (isInDetailsElement(dom, pos) && !equals(parentDetailsAtCaret, parentDetailsAtNewPos)) {\n            if (!forward) {\n              moveCaretToDetailsPos(editor, pos, false);\n            }\n            if (parentBlock && inEmptyParentBlock) {\n              if (forward && isFirstBlock) {\n                return true;\n              } else if (!forward && isLastBlock) {\n                return true;\n              }\n              moveCaretToDetailsPos(editor, pos, forward);\n              editor.dom.remove(parentBlock);\n            }\n            return true;\n          } else {\n            return false;\n          }\n        });\n      } else {\n        return false;\n      }\n    };\n    const shouldPreventDeleteSummaryAction = (editor, detailElements, forward, granularity) => {\n      const selection = editor.selection;\n      const rng = selection.getRng();\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (granularity === 'selection') {\n        return isPartialDelete(rng, detailElements);\n      } else if (forward) {\n        return isCaretAtEndOfSummary(caretPos, detailElements) || isCaretInLastPositionInBody(root, caretPos, detailElements);\n      } else {\n        return isCaretAtStartOfSummary(caretPos, detailElements) || isCaretInFirstPositionInBody(caretPos, detailElements);\n      }\n    };\n    const shouldPreventDeleteAction = (editor, forward, granularity) => getDetailsElements(editor.dom, editor.selection.getRng()).fold(() => shouldPreventDeleteIntoDetails(editor, forward, granularity), detailsElements => shouldPreventDeleteSummaryAction(editor, detailsElements, forward, granularity) || shouldPreventDeleteIntoDetails(editor, forward, granularity));\n    const handleDeleteActionSafari = (editor, forward, granularity) => {\n      const selection = editor.selection;\n      const node = selection.getNode();\n      const rng = selection.getRng();\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      if (isSummary$1(node)) {\n        if (granularity === 'selection' && isEntireNodeSelected(rng, node) || willDeleteLastPositionInElement(forward, caretPos, node)) {\n          emptyNodeContents(node);\n        } else {\n          editor.undoManager.transact(() => {\n            const sel = selection.getSel();\n            let {anchorNode, anchorOffset, focusNode, focusOffset} = sel !== null && sel !== void 0 ? sel : {};\n            const applySelection = () => {\n              if (isNonNullable(anchorNode) && isNonNullable(anchorOffset) && isNonNullable(focusNode) && isNonNullable(focusOffset)) {\n                sel === null || sel === void 0 ? void 0 : sel.setBaseAndExtent(anchorNode, anchorOffset, focusNode, focusOffset);\n              }\n            };\n            const updateSelection = () => {\n              anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n              anchorOffset = sel === null || sel === void 0 ? void 0 : sel.anchorOffset;\n              focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n              focusOffset = sel === null || sel === void 0 ? void 0 : sel.focusOffset;\n            };\n            const appendAllChildNodes = (from, to) => {\n              each$e(from.childNodes, child => {\n                if (isNode(child)) {\n                  to.appendChild(child);\n                }\n              });\n            };\n            const container = editor.dom.create('span', { 'data-mce-bogus': '1' });\n            appendAllChildNodes(node, container);\n            node.appendChild(container);\n            applySelection();\n            if (granularity === 'word' || granularity === 'line') {\n              sel === null || sel === void 0 ? void 0 : sel.modify('extend', forward ? 'right' : 'left', granularity);\n            }\n            if (!selection.isCollapsed() && isEntireNodeSelected(selection.getRng(), container)) {\n              emptyNodeContents(node);\n            } else {\n              editor.execCommand(forward ? 'ForwardDelete' : 'Delete');\n              updateSelection();\n              appendAllChildNodes(container, node);\n              applySelection();\n            }\n            editor.dom.remove(container);\n          });\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const backspaceDelete = (editor, forward, granularity) => shouldPreventDeleteAction(editor, forward, granularity) || isSafari && handleDeleteActionSafari(editor, forward, granularity) ? Optional.some(noop) : Optional.none();\n\n    const createAndFireInputEvent = eventType => (editor, inputType, specifics = {}) => {\n      const target = editor.getBody();\n      const overrides = {\n        bubbles: true,\n        composed: true,\n        data: null,\n        isComposing: false,\n        detail: 0,\n        view: null,\n        target,\n        currentTarget: target,\n        eventPhase: Event.AT_TARGET,\n        originalTarget: target,\n        explicitOriginalTarget: target,\n        isTrusted: false,\n        srcElement: target,\n        cancelable: false,\n        preventDefault: noop,\n        inputType\n      };\n      const input = clone$3(new InputEvent(eventType));\n      return editor.dispatch(eventType, {\n        ...input,\n        ...overrides,\n        ...specifics\n      });\n    };\n    const fireInputEvent = createAndFireInputEvent('input');\n    const fireBeforeInputEvent = createAndFireInputEvent('beforeinput');\n\n    const platform$2 = detect$2();\n    const os = platform$2.os;\n    const isMacOSOriOS = os.isMacOS() || os.isiOS();\n    const browser = platform$2.browser;\n    const isFirefox = browser.isFirefox();\n    const executeKeydownOverride$3 = (editor, caret, evt) => {\n      const inputType = evt.keyCode === VK.BACKSPACE ? 'deleteContentBackward' : 'deleteContentForward';\n      const isCollapsed = editor.selection.isCollapsed();\n      const unmodifiedGranularity = isCollapsed ? 'character' : 'selection';\n      const getModifiedGranularity = isWord => {\n        if (isCollapsed) {\n          return isWord ? 'word' : 'line';\n        } else {\n          return 'selection';\n        }\n      };\n      executeWithDelayedAction([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$a, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$a, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false, unmodifiedGranularity)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete, editor, true, unmodifiedGranularity)\n        },\n        ...isMacOSOriOS ? [\n          {\n            keyCode: VK.BACKSPACE,\n            altKey: true,\n            action: action(backspaceDelete, editor, false, getModifiedGranularity(true))\n          },\n          {\n            keyCode: VK.DELETE,\n            altKey: true,\n            action: action(backspaceDelete, editor, true, getModifiedGranularity(true))\n          },\n          {\n            keyCode: VK.BACKSPACE,\n            metaKey: true,\n            action: action(backspaceDelete, editor, false, getModifiedGranularity(false))\n          }\n        ] : [\n          {\n            keyCode: VK.BACKSPACE,\n            ctrlKey: true,\n            action: action(backspaceDelete, editor, false, getModifiedGranularity(true))\n          },\n          {\n            keyCode: VK.DELETE,\n            ctrlKey: true,\n            action: action(backspaceDelete, editor, true, getModifiedGranularity(true))\n          }\n        ],\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, true)\n        }\n      ], evt).filter(_ => editor.selection.isEditable()).each(applyAction => {\n        evt.preventDefault();\n        const beforeInput = fireBeforeInputEvent(editor, inputType);\n        if (!beforeInput.isDefaultPrevented()) {\n          applyAction();\n          fireInputEvent(editor, inputType);\n        }\n      });\n    };\n    const executeKeyupOverride = (editor, evt, isBackspaceKeydown) => execute([\n      {\n        keyCode: VK.BACKSPACE,\n        action: action(paddEmptyElement, editor)\n      },\n      {\n        keyCode: VK.DELETE,\n        action: action(paddEmptyElement, editor)\n      },\n      ...isMacOSOriOS ? [\n        {\n          keyCode: VK.BACKSPACE,\n          altKey: true,\n          action: action(refreshCaret, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          altKey: true,\n          action: action(refreshCaret, editor)\n        },\n        ...isBackspaceKeydown ? [{\n            keyCode: isFirefox ? 224 : 91,\n            action: action(refreshCaret, editor)\n          }] : []\n      ] : [\n        {\n          keyCode: VK.BACKSPACE,\n          ctrlKey: true,\n          action: action(refreshCaret, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          ctrlKey: true,\n          action: action(refreshCaret, editor)\n        }\n      ]\n    ], evt);\n    const setup$j = (editor, caret) => {\n      let isBackspaceKeydown = false;\n      editor.on('keydown', evt => {\n        isBackspaceKeydown = evt.keyCode === VK.BACKSPACE;\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeyupOverride(editor, evt, isBackspaceKeydown);\n        }\n        isBackspaceKeydown = false;\n      });\n    };\n\n    const firstNonWhiteSpaceNodeSibling = node => {\n      while (node) {\n        if (isElement$6(node) || isText$a(node) && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n      return null;\n    };\n    const moveToCaretPosition = (editor, root) => {\n      const dom = editor.dom;\n      const moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        const firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      const rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        const walker = new DomTreeWalker(root, root);\n        let lastNode = root;\n        let node;\n        while (node = walker.current()) {\n          if (isText$a(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$6(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    const getEditableRoot = (dom, node) => {\n      const root = dom.getRoot();\n      let editableRoot;\n      let parent = node;\n      while (parent !== root && parent && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    const getParentBlock$1 = editor => {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    const getParentBlockName = editor => {\n      return getParentBlock$1(editor).fold(constant(''), parentBlock => {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    const isListItemParentBlock = editor => {\n      return getParentBlock$1(editor).filter(elm => {\n        return isListItem$1(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n    const emptyBlock = elm => {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    const applyAttributes = (editor, node, forcedRootBlockAttrs) => {\n      const dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(attrStyles => {\n        const currentStyles = getAllRaw(SugarElement.fromDom(node));\n        const newStyles = {\n          ...currentStyles,\n          ...attrStyles\n        };\n        dom.setStyles(node, newStyles);\n      });\n      const attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(attrClasses => attrClasses.split(/\\s+/));\n      const currentClassesOpt = Optional.from(node.className).map(currentClasses => filter$5(currentClasses.split(/\\s+/), clazz => clazz !== ''));\n      lift2(attrClassesOpt, currentClassesOpt, (attrClasses, currentClasses) => {\n        const filteredClasses = filter$5(currentClasses, clazz => !contains$2(attrClasses, clazz));\n        const newClasses = [\n          ...attrClasses,\n          ...filteredClasses\n        ];\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      const appliedAttrs = [\n        'style',\n        'class'\n      ];\n      const remainingAttrs = filter$4(forcedRootBlockAttrs, (_, attrs) => !contains$2(appliedAttrs, attrs));\n      dom.setAttribs(node, remainingAttrs);\n    };\n    const setForcedBlockAttrs = (editor, node) => {\n      const forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        const forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    const createNewBlock = (editor, container, parentBlock, editableRoot, keepStyles = true, name, styles) => {\n      const dom = editor.dom;\n      const schema = editor.schema;\n      const newBlockName = getForcedRootBlock(editor);\n      const parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      let node = container;\n      const textInlineElements = schema.getTextInlineElements();\n      let block;\n      if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n        block = dom.create(name || newBlockName, styles || {});\n      } else {\n        block = parentBlock.cloneNode(false);\n      }\n      let caretNode = block;\n      if (!keepStyles) {\n        dom.setAttrib(block, 'style', null);\n        dom.setAttrib(block, 'class', null);\n      } else {\n        do {\n          if (textInlineElements[node.nodeName]) {\n            if (isCaretNode(node) || isBookmarkNode$1(node)) {\n              continue;\n            }\n            const clonedNode = node.cloneNode(false);\n            dom.setAttrib(clonedNode, 'id', '');\n            if (block.hasChildNodes()) {\n              clonedNode.appendChild(block.firstChild);\n              block.appendChild(clonedNode);\n            } else {\n              caretNode = clonedNode;\n              block.appendChild(clonedNode);\n            }\n          }\n        } while ((node = node.parentNode) && node !== editableRoot);\n      }\n      setForcedBlockAttrs(editor, block);\n      emptyBlock(caretNode);\n      return block;\n    };\n\n    const getDetailsRoot = (editor, element) => editor.dom.getParent(element, isDetails);\n    const isAtDetailsEdge = (root, element, isTextBlock) => {\n      let node = element;\n      while (node && node !== root && isNull(node.nextSibling)) {\n        const parent = node.parentElement;\n        if (!parent || !isTextBlock(parent)) {\n          return isDetails(parent);\n        }\n        node = parent;\n      }\n      return false;\n    };\n    const isLastEmptyBlockInDetails = (editor, shiftKey, element) => !shiftKey && element.nodeName.toLowerCase() === getForcedRootBlock(editor) && editor.dom.isEmpty(element) && isAtDetailsEdge(editor.getBody(), element, el => has$2(editor.schema.getTextBlockElements(), el.nodeName.toLowerCase()));\n    const insertNewLine = (editor, createNewBlock, parentBlock) => {\n      var _a, _b, _c;\n      const newBlock = createNewBlock(getForcedRootBlock(editor));\n      const root = getDetailsRoot(editor, parentBlock);\n      if (!root) {\n        return;\n      }\n      editor.dom.insertAfter(newBlock, root);\n      moveToCaretPosition(editor, newBlock);\n      if (((_c = (_b = (_a = parentBlock.parentElement) === null || _a === void 0 ? void 0 : _a.childNodes) === null || _b === void 0 ? void 0 : _b.length) !== null && _c !== void 0 ? _c : 0) > 1) {\n        editor.dom.remove(parentBlock);\n      }\n    };\n\n    const hasFirstChild = (elm, name) => {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    const isFirstChild = elm => {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    const hasParent = (elm, parentName) => {\n      const parentNode = elm === null || elm === void 0 ? void 0 : elm.parentNode;\n      return isNonNullable(parentNode) && parentNode.nodeName === parentName;\n    };\n    const isListBlock = elm => {\n      return isNonNullable(elm) && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    const isListItem = elm => {\n      return isNonNullable(elm) && /^(LI|DT|DD)$/.test(elm.nodeName);\n    };\n    const isNestedList = elm => {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    const getContainerBlock = containerBlock => {\n      const containerBlockParent = containerBlock.parentNode;\n      return isListItem(containerBlockParent) ? containerBlockParent : containerBlock;\n    };\n    const isFirstOrLastLi = (containerBlock, parentBlock, first) => {\n      let node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$6(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    const getStyles = elm => foldl(mapToArray(getAllRaw(SugarElement.fromDom(elm)), (style, styleName) => `${ styleName }: ${ style };`), (acc, s) => acc + s, '');\n    const insert$4 = (editor, createNewBlock, containerBlock, parentBlock, newBlockName) => {\n      const dom = editor.dom;\n      const rng = editor.selection.getRng();\n      const containerParent = containerBlock.parentNode;\n      if (containerBlock === editor.getBody() || !containerParent) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      const parentBlockStyles = isListItem(parentBlock) ? getStyles(parentBlock) : undefined;\n      let newBlock = isListItem(parentBlock) && parentBlockStyles ? createNewBlock(newBlockName, { style: getStyles(parentBlock) }) : createNewBlock(newBlockName);\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          const containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerParent.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        const tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        const fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          const previousChildren = filter$5(map$3(newBlock.children, SugarElement.fromDom), not(isTag('br')));\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n          each$e(previousChildren, child => prepend(SugarElement.fromDom(newBlock), child));\n          if (parentBlockStyles) {\n            newBlock.setAttribute('style', parentBlockStyles);\n          }\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    const trimZwsp = fragment => {\n      each$e(descendants$1(SugarElement.fromDom(fragment), isText$b), text => {\n        const rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.data);\n      });\n    };\n    const isWithinNonEditableList = (editor, node) => {\n      const parentList = editor.dom.getParent(node, 'ol,ul,dl');\n      return parentList !== null && editor.dom.getContentEditableParent(parentList) === 'false';\n    };\n    const isEmptyAnchor = (dom, elm) => {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    const containerAndSiblingName = (container, nodeName) => {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    const canSplitBlock = (dom, node) => {\n      return isNonNullable(node) && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.isEditable(node.parentNode) && dom.getContentEditable(node) !== 'false';\n    };\n    const trimInlineElementsOnLeftSideOfBlock = (dom, nonEmptyElementsMap, block) => {\n      var _a;\n      const firstChilds = [];\n      if (!block) {\n        return;\n      }\n      let currentNode = block;\n      while (currentNode = currentNode.firstChild) {\n        if (dom.isBlock(currentNode)) {\n          return;\n        }\n        if (isElement$6(currentNode) && !nonEmptyElementsMap[currentNode.nodeName.toLowerCase()]) {\n          firstChilds.push(currentNode);\n        }\n      }\n      let i = firstChilds.length;\n      while (i--) {\n        currentNode = firstChilds[i];\n        if (!currentNode.hasChildNodes() || currentNode.firstChild === currentNode.lastChild && ((_a = currentNode.firstChild) === null || _a === void 0 ? void 0 : _a.nodeValue) === '') {\n          dom.remove(currentNode);\n        } else {\n          if (isEmptyAnchor(dom, currentNode)) {\n            dom.remove(currentNode);\n          }\n        }\n      }\n    };\n    const normalizeZwspOffset = (start, container, offset) => {\n      if (!isText$a(container)) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    const includeZwspInRange = rng => {\n      const newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    const trimLeadingLineBreaks = node => {\n      let currentNode = node;\n      do {\n        if (isText$a(currentNode)) {\n          currentNode.data = currentNode.data.replace(/^[\\r\\n]+/, '');\n        }\n        currentNode = currentNode.firstChild;\n      } while (currentNode);\n    };\n    const wrapSelfAndSiblingsInDefaultBlock = (editor, newBlockName, rng, container, offset) => {\n      var _a, _b;\n      const dom = editor.dom;\n      const editableRoot = (_a = getEditableRoot(dom, container)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      let parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (!parentBlock.hasChildNodes()) {\n          const newBlock = dom.create(newBlockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        let node = container;\n        while (node && node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        let startNode;\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        const startNodeName = (_b = startNode === null || startNode === void 0 ? void 0 : startNode.parentElement) === null || _b === void 0 ? void 0 : _b.nodeName;\n        if (startNode && startNodeName && editor.schema.isValidChild(startNodeName, newBlockName.toLowerCase())) {\n          const startNodeParent = startNode.parentNode;\n          const newBlock = dom.create(newBlockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNodeParent.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            const next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    const addBrToBlockIfNeeded = (dom, block) => {\n      block.normalize();\n      const lastChild = block.lastChild;\n      if (!lastChild || isElement$6(lastChild) && /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    const shouldEndContainer = (editor, container) => {\n      const optionValue = shouldEndContainerOnEmptyBlock(editor);\n      if (isNullable(container)) {\n        return false;\n      } else if (isString(optionValue)) {\n        return contains$2(Tools.explode(optionValue), container.nodeName.toLowerCase());\n      } else {\n        return optionValue;\n      }\n    };\n    const insert$3 = (editor, evt) => {\n      let container;\n      let offset;\n      let parentBlockName;\n      let containerBlock;\n      let isAfterLastNodeInContainer = false;\n      const dom = editor.dom;\n      const schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      const rng = editor.selection.getRng();\n      const newBlockName = getForcedRootBlock(editor);\n      const start = SugarElement.fromDom(rng.startContainer);\n      const child = child$1(start, rng.startOffset);\n      const isCef = child.exists(element => isHTMLElement$1(element) && !isEditable$2(element));\n      const collapsedAndCef = rng.collapsed && isCef;\n      const createNewBlock$1 = (name, styles) => {\n        return createNewBlock(editor, container, parentBlock, editableRoot, shouldKeepStyles(editor), name, styles);\n      };\n      const isCaretAtStartOrEndOfBlock = start => {\n        const normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$a(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.data.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$6(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        const walker = new DomTreeWalker(container, parentBlock);\n        if (isText$a(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.data.length) {\n            walker.next();\n          }\n        }\n        let node;\n        while (node = walker.current()) {\n          if (isElement$6(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              const name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$a(node) && !isWhitespaceText(node.data)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      const insertNewBlockAfter = () => {\n        let block;\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          block = createNewBlock$1(newBlockName);\n        } else {\n          block = createNewBlock$1();\n        }\n        if (shouldEndContainer(editor, containerBlock) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock, undefined, { includeZwsp: true })) {\n          block = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(block, parentBlock);\n        }\n        moveToCaretPosition(editor, block);\n        return block;\n      };\n      normalize$2(dom, rng).each(normRng => {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      const shiftKey = !!(evt && evt.shiftKey);\n      const ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$6(container) && container.hasChildNodes() && !collapsedAndCef) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$a(container)) {\n          offset = container.data.length;\n        } else {\n          offset = 0;\n        }\n      }\n      const editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot || isWithinNonEditableList(editor, container)) {\n        return;\n      }\n      if (!shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      let parentBlock = dom.getParent(container, dom.isBlock) || dom.getRoot();\n      containerBlock = isNonNullable(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.parentNode) ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      const containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        const liBlock = containerBlock;\n        parentBlock = liBlock;\n        containerBlock = liBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (isElement$6(containerBlock) && isLastEmptyBlockInDetails(editor, shiftKey, parentBlock)) {\n        return insertNewLine(editor, createNewBlock$1, parentBlock);\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName) && isElement$6(containerBlock)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$4(editor, createNewBlock$1, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (!collapsedAndCef && (parentBlock === editor.getBody() || !canSplitBlock(dom, parentBlock))) {\n        return;\n      }\n      const parentBlockParent = parentBlock.parentNode;\n      let newBlock;\n      if (collapsedAndCef) {\n        newBlock = createNewBlock$1(newBlockName);\n        child.fold(() => {\n          append$1(start, SugarElement.fromDom(newBlock));\n        }, child => {\n          before$3(child, SugarElement.fromDom(newBlock));\n        });\n        editor.selection.setCursorLocation(newBlock, 0);\n      } else if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock(false)) {\n        newBlock = insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true) && parentBlockParent) {\n        newBlock = parentBlockParent.insertBefore(createNewBlock$1(), parentBlock);\n        const isNearChildren = hasChildNodes(SugarElement.fromDom(rng.startContainer)) && rng.collapsed;\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') || isNearChildren ? newBlock : parentBlock);\n      } else {\n        const tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        const fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.dispatch('NewBlock', { newBlock });\n    };\n    const fakeEventName$1 = 'insertParagraph';\n    const blockbreak = {\n      insert: insert$3,\n      fakeEventName: fakeEventName$1\n    };\n\n    const hasRightSideContent = (schema, container, parentBlock) => {\n      const walker = new DomTreeWalker(container, parentBlock);\n      let node;\n      const nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || isText$a(node) && node.length > 0) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const moveSelectionToBr = (editor, brElm, extraBr) => {\n      const rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    const insertBrAtCaret = (editor, evt) => {\n      const selection = editor.selection;\n      const dom = editor.dom;\n      const rng = selection.getRng();\n      let brElm;\n      let extraBr = false;\n      normalize$2(dom, rng).each(normRng => {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      let offset = rng.startOffset;\n      let container = rng.startContainer;\n      if (isElement$6(container) && container.hasChildNodes()) {\n        const isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$a(container)) {\n          offset = container.data.length;\n        } else {\n          offset = 0;\n        }\n      }\n      let parentBlock = dom.getParent(container, dom.isBlock);\n      const containerBlock = parentBlock && parentBlock.parentNode ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      const containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      const isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (isText$a(container) && offset >= container.data.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock || dom.getRoot())) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    const insertBrBefore = (editor, inline) => {\n      const br = SugarElement.fromTag('br');\n      before$3(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    const insertBrAfter = (editor, inline) => {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$4(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      const br = SugarElement.fromTag('br');\n      after$4(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    const isBeforeBr = pos => {\n      return isBr$6(pos.getNode());\n    };\n    const hasBrAfter = (rootNode, startNode) => {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(pos => {\n          return isBr$6(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    const isAnchorLink = elm => {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    const isInsideAnchor = location => {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    const readInlineAnchorLocation = editor => {\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    const insertBrOutsideAnchor = (editor, location) => {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    const insert$2 = (editor, evt) => {\n      const anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    const fakeEventName = 'insertLineBreak';\n    const linebreak = {\n      insert: insert$2,\n      fakeEventName\n    };\n\n    const matchesSelector = (editor, selector) => {\n      return getParentBlock$1(editor).filter(parentBlock => {\n        return selector.length > 0 && is$1(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    const shouldInsertBr = editor => {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    const shouldBlockNewLine$1 = editor => {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    const newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    const shouldBlockNewLine = (editor, _shiftKey) => {\n      return shouldBlockNewLine$1(editor);\n    };\n    const inListBlock = requiredState => {\n      return (editor, _shiftKey) => {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    const inBlock = (blockName, requiredState) => (editor, _shiftKey) => {\n      const state = getParentBlockName(editor) === blockName.toUpperCase();\n      return state === requiredState;\n    };\n    const inCefBlock = editor => {\n      const editableRoot = getEditableRoot(editor.dom, editor.selection.getStart());\n      return isNullable(editableRoot);\n    };\n    const inPreBlock = requiredState => inBlock('pre', requiredState);\n    const inSummaryBlock = () => inBlock('summary', true);\n    const shouldPutBrInPre = requiredState => {\n      return (editor, _shiftKey) => {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    const inBrContext = (editor, _shiftKey) => {\n      return shouldInsertBr(editor);\n    };\n    const hasShiftKey = (_editor, shiftKey) => {\n      return shiftKey;\n    };\n    const canInsertIntoEditableRoot = editor => {\n      const forcedRootBlock = getForcedRootBlock(editor);\n      const rootEditable = getEditableRoot(editor.dom, editor.selection.getStart());\n      return isNonNullable(rootEditable) && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock);\n    };\n    const isInRootWithEmptyOrCEF = editor => {\n      const rng = editor.selection.getRng();\n      const start = SugarElement.fromDom(rng.startContainer);\n      const child = child$1(start, rng.startOffset);\n      const isCefOpt = child.map(element => isHTMLElement$1(element) && !isEditable$2(element));\n      return rng.collapsed && isCefOpt.getOr(true);\n    };\n    const match = (predicates, action) => {\n      return (editor, shiftKey) => {\n        const isMatch = foldl(predicates, (res, p) => {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    const getAction = (editor, evt) => {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([\n          inPreBlock(true),\n          inCefBlock\n        ], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([inBrContext], newLineAction.br()),\n        match([hasShiftKey], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block()),\n        match([isInRootWithEmptyOrCEF], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    const insertBreak = (breakType, editor, evt) => {\n      if (!editor.selection.isCollapsed()) {\n        execEditorDeleteCommand(editor);\n      }\n      if (isNonNullable(evt)) {\n        const event = fireBeforeInputEvent(editor, breakType.fakeEventName);\n        if (event.isDefaultPrevented()) {\n          return;\n        }\n      }\n      breakType.insert(editor, evt);\n      if (isNonNullable(evt)) {\n        fireInputEvent(editor, breakType.fakeEventName);\n      }\n    };\n    const insert$1 = (editor, evt) => {\n      const br = () => insertBreak(linebreak, editor, evt);\n      const block = () => insertBreak(blockbreak, editor, evt);\n      const logicalAction = getAction(editor, evt);\n      switch (getNewlineBehavior(editor)) {\n      case 'linebreak':\n        logicalAction.fold(br, br, noop);\n        break;\n      case 'block':\n        logicalAction.fold(block, block, noop);\n        break;\n      case 'invert':\n        logicalAction.fold(block, br, noop);\n        break;\n      default:\n        logicalAction.fold(br, block, noop);\n        break;\n      }\n    };\n\n    const platform$1 = detect$2();\n    const isIOSSafari = platform$1.os.isiOS() && platform$1.browser.isSafari();\n    const handleEnterKeyEvent = (editor, event) => {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(() => {\n        insert$1(editor, event);\n      });\n    };\n    const isCaretAfterKoreanCharacter = rng => {\n      if (!rng.collapsed) {\n        return false;\n      }\n      const startContainer = rng.startContainer;\n      if (isText$a(startContainer)) {\n        const koreanCharRegex = /^[\\uAC00-\\uD7AF\\u1100-\\u11FF\\u3130-\\u318F\\uA960-\\uA97F\\uD7B0-\\uD7FF]$/;\n        const char = startContainer.data.charAt(rng.startOffset - 1);\n        return koreanCharRegex.test(char);\n      } else {\n        return false;\n      }\n    };\n    const setup$i = editor => {\n      let iOSSafariKeydownBookmark = Optional.none();\n      const iOSSafariKeydownOverride = editor => {\n        iOSSafariKeydownBookmark = Optional.some(editor.selection.getBookmark());\n        editor.undoManager.add();\n      };\n      const iOSSafariKeyupOverride = (editor, event) => {\n        editor.undoManager.undo();\n        iOSSafariKeydownBookmark.fold(noop, b => editor.selection.moveToBookmark(b));\n        handleEnterKeyEvent(editor, event);\n        iOSSafariKeydownBookmark = Optional.none();\n      };\n      editor.on('keydown', event => {\n        if (event.keyCode === VK.ENTER) {\n          if (isIOSSafari && isCaretAfterKoreanCharacter(editor.selection.getRng())) {\n            iOSSafariKeydownOverride(editor);\n          } else {\n            handleEnterKeyEvent(editor, event);\n          }\n        }\n      });\n      editor.on('keyup', event => {\n        if (event.keyCode === VK.ENTER) {\n          iOSSafariKeydownBookmark.each(() => iOSSafariKeyupOverride(editor, event));\n        }\n      });\n    };\n\n    const executeKeydownOverride$2 = (editor, caret, evt) => {\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        ...!isMac ? [\n          {\n            keyCode: VK.HOME,\n            action: action(selectToEndPoint, editor, false),\n            ctrlKey: true,\n            shiftKey: true\n          },\n          {\n            keyCode: VK.END,\n            action: action(selectToEndPoint, editor, true),\n            ctrlKey: true,\n            shiftKey: true\n          }\n        ] : [],\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$h = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n    };\n\n    const setup$g = editor => {\n      editor.on('input', e => {\n        if (!e.isComposing) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    const platform = detect$2();\n    const executeKeyupAction = (editor, caret, evt) => {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    const stopImmediatePropagation = e => e.stopImmediatePropagation();\n    const isPageUpDown = evt => evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    const setNodeChangeBlocker = (blocked, editor, block) => {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    const setup$f = (editor, caret) => {\n      if (platform.os.isMacOS()) {\n        return;\n      }\n      const blocked = Cell(false);\n      editor.on('keydown', evt => {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    const setup$e = editor => {\n      editor.on('beforeinput', e => {\n        if (!editor.selection.isEditable() || exists(e.getTargetRanges(), rng => !isEditableRange(editor.dom, rng))) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    const insertTextAtPosition = (text, pos) => {\n      const container = pos.container();\n      const offset = pos.offset();\n      if (isText$a(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(elm => {\n          const textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$4(elm, textNode);\n          } else {\n            before$3(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    const insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    const insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    const insertSpaceOrNbspAtPosition = (root, pos, schema) => needsToHaveNbsp(root, pos, schema) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n    const locationToCaretPosition = root => location => location.fold(element => prevPosition(root.dom, CaretPosition.before(element)), element => firstPositionIn(element), element => lastPositionIn(element), element => nextPosition(root.dom, CaretPosition.after(element)));\n    const insertInlineBoundarySpaceOrNbsp = (root, pos, schema) => checkPos => needsToHaveNbsp(root, checkPos, schema) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n    const setSelection = editor => pos => {\n      editor.selection.setRng(pos.toRange());\n      editor.nodeChanged();\n    };\n    const isInsideSummary = (domUtils, node) => domUtils.isEditable(domUtils.getParent(node, 'summary'));\n    const insertSpaceOrNbspAtSelection = editor => {\n      const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      const root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        const isInlineTarget$1 = curry(isInlineTarget, editor);\n        const caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).map(checkPos => () => insertInlineBoundarySpaceOrNbsp(root, pos, editor.schema)(checkPos).each(setSelection(editor)));\n      } else {\n        return Optional.none();\n      }\n    };\n    const insertSpaceInSummaryAtSelectionOnFirefox = editor => {\n      const insertSpaceThunk = () => {\n        const root = SugarElement.fromDom(editor.getBody());\n        if (!editor.selection.isCollapsed()) {\n          editor.getDoc().execCommand('Delete');\n        }\n        const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        insertSpaceOrNbspAtPosition(root, pos, editor.schema).each(setSelection(editor));\n      };\n      return someIf(Env.browser.isFirefox() && editor.selection.isEditable() && isInsideSummary(editor.dom, editor.selection.getRng().startContainer), insertSpaceThunk);\n    };\n\n    const executeKeydownOverride$1 = (editor, evt) => {\n      executeWithDelayedAction([\n        {\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        },\n        {\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceInSummaryAtSelectionOnFirefox, editor)\n        }\n      ], evt).each(applyAction => {\n        evt.preventDefault();\n        const event = fireBeforeInputEvent(editor, 'insertText', { data: ' ' });\n        if (!event.isDefaultPrevented()) {\n          applyAction();\n          fireInputEvent(editor, 'insertText', { data: ' ' });\n        }\n      });\n    };\n    const setup$d = editor => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$1(editor, evt);\n        }\n      });\n    };\n\n    const tableTabNavigation = editor => {\n      if (hasTableTabNavigation(editor)) {\n        return [\n          {\n            keyCode: VK.TAB,\n            action: action(handleTab, editor, true)\n          },\n          {\n            keyCode: VK.TAB,\n            shiftKey: true,\n            action: action(handleTab, editor, false)\n          }\n        ];\n      } else {\n        return [];\n      }\n    };\n    const executeKeydownOverride = (editor, evt) => {\n      execute([...tableTabNavigation(editor)], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$c = editor => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    const setup$b = editor => {\n      editor.addShortcut('Meta+P', '', 'mcePrint');\n      setup$k(editor);\n      if (isRtc(editor)) {\n        return Cell(null);\n      } else {\n        const caret = setupSelectedState(editor);\n        setup$e(editor);\n        setup$m(editor);\n        setup$l(editor, caret);\n        setup$j(editor, caret);\n        setup$i(editor);\n        setup$d(editor);\n        setup$g(editor);\n        setup$c(editor);\n        setup$h(editor, caret);\n        setup$f(editor, caret);\n        return caret;\n      }\n    };\n\n    class NodeChange {\n      constructor(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        let lastRng;\n        const self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', e => {\n            const nativeRng = editor.selection.getRng();\n            const fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.dispatch('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', () => {\n          editor.dispatch('SelectionChange');\n        });\n        editor.on('SelectionChange', () => {\n          const startElm = editor.selection.getStart(true);\n          if (!startElm) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', e => {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, () => {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      nodeChanged(args = {}) {\n        const selection = this.editor.selection;\n        let node;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          const root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          const parents = [];\n          this.editor.dom.getParent(node, node => {\n            if (node === root) {\n              return true;\n            } else {\n              parents.push(node);\n              return false;\n            }\n          });\n          this.editor.dispatch('NodeChange', {\n            ...args,\n            element: node,\n            parents\n          });\n        }\n      }\n      isSameElementPath(startElm) {\n        let i;\n        const editor = this.editor;\n        const currentPath = reverse(editor.dom.getParents(startElm, always, editor.getBody()));\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      }\n    }\n\n    const imageId = generate$1('image');\n    const getDragImage = transfer => {\n      const dt = transfer;\n      return Optional.from(dt[imageId]);\n    };\n    const setDragImage = (transfer, imageData) => {\n      const dt = transfer;\n      dt[imageId] = imageData;\n    };\n\n    const eventId = generate$1('event');\n    const getEvent = transfer => {\n      const dt = transfer;\n      return Optional.from(dt[eventId]);\n    };\n    const mkSetEventFn = type => transfer => {\n      const dt = transfer;\n      dt[eventId] = type;\n    };\n    const setEvent = (transfer, type) => mkSetEventFn(type)(transfer);\n    const setDragstartEvent = mkSetEventFn(0);\n    const setDropEvent = mkSetEventFn(2);\n    const setDragendEvent = mkSetEventFn(1);\n    const checkEvent = expectedType => transfer => {\n      const dt = transfer;\n      return Optional.from(dt[eventId]).exists(type => type === expectedType);\n    };\n    const isInDragStartEvent = checkEvent(0);\n\n    const createEmptyFileList = () => Object.freeze({\n      length: 0,\n      item: _ => null\n    });\n\n    const modeId = generate$1('mode');\n    const getMode = transfer => {\n      const dt = transfer;\n      return Optional.from(dt[modeId]);\n    };\n    const mkSetModeFn = mode => transfer => {\n      const dt = transfer;\n      dt[modeId] = mode;\n    };\n    const setMode$1 = (transfer, mode) => mkSetModeFn(mode)(transfer);\n    const setReadWriteMode = mkSetModeFn(0);\n    const setReadOnlyMode = mkSetModeFn(2);\n    const setProtectedMode = mkSetModeFn(1);\n    const checkMode = expectedMode => transfer => {\n      const dt = transfer;\n      return Optional.from(dt[modeId]).exists(mode => mode === expectedMode);\n    };\n    const isInReadWriteMode = checkMode(0);\n    const isInProtectedMode = checkMode(1);\n\n    const normalizeItems = (dataTransfer, itemsImpl) => ({\n      ...itemsImpl,\n      get length() {\n        return itemsImpl.length;\n      },\n      add: (data, type) => {\n        if (isInReadWriteMode(dataTransfer)) {\n          if (isString(data)) {\n            if (!isUndefined(type)) {\n              return itemsImpl.add(data, type);\n            }\n          } else {\n            return itemsImpl.add(data);\n          }\n        }\n        return null;\n      },\n      remove: idx => {\n        if (isInReadWriteMode(dataTransfer)) {\n          itemsImpl.remove(idx);\n        }\n      },\n      clear: () => {\n        if (isInReadWriteMode(dataTransfer)) {\n          itemsImpl.clear();\n        }\n      }\n    });\n\n    const validDropEffects = [\n      'none',\n      'copy',\n      'link',\n      'move'\n    ];\n    const validEffectAlloweds = [\n      'none',\n      'copy',\n      'copyLink',\n      'copyMove',\n      'link',\n      'linkMove',\n      'move',\n      'all',\n      'uninitialized'\n    ];\n    const createDataTransfer = () => {\n      const dataTransferImpl = new window.DataTransfer();\n      let dropEffect = 'move';\n      let effectAllowed = 'all';\n      const dataTransfer = {\n        get dropEffect() {\n          return dropEffect;\n        },\n        set dropEffect(effect) {\n          if (contains$2(validDropEffects, effect)) {\n            dropEffect = effect;\n          }\n        },\n        get effectAllowed() {\n          return effectAllowed;\n        },\n        set effectAllowed(allowed) {\n          if (isInDragStartEvent(dataTransfer) && contains$2(validEffectAlloweds, allowed)) {\n            effectAllowed = allowed;\n          }\n        },\n        get items() {\n          return normalizeItems(dataTransfer, dataTransferImpl.items);\n        },\n        get files() {\n          if (isInProtectedMode(dataTransfer)) {\n            return createEmptyFileList();\n          } else {\n            return dataTransferImpl.files;\n          }\n        },\n        get types() {\n          return dataTransferImpl.types;\n        },\n        setDragImage: (image, x, y) => {\n          if (isInReadWriteMode(dataTransfer)) {\n            setDragImage(dataTransfer, {\n              image,\n              x,\n              y\n            });\n            dataTransferImpl.setDragImage(image, x, y);\n          }\n        },\n        getData: format => {\n          if (isInProtectedMode(dataTransfer)) {\n            return '';\n          } else {\n            return dataTransferImpl.getData(format);\n          }\n        },\n        setData: (format, data) => {\n          if (isInReadWriteMode(dataTransfer)) {\n            dataTransferImpl.setData(format, data);\n          }\n        },\n        clearData: format => {\n          if (isInReadWriteMode(dataTransfer)) {\n            dataTransferImpl.clearData(format);\n          }\n        }\n      };\n      setReadWriteMode(dataTransfer);\n      return dataTransfer;\n    };\n    const cloneDataTransfer = original => {\n      const clone = createDataTransfer();\n      const originalMode = getMode(original);\n      setReadOnlyMode(original);\n      setDragstartEvent(clone);\n      clone.dropEffect = original.dropEffect;\n      clone.effectAllowed = original.effectAllowed;\n      getDragImage(original).each(imageData => clone.setDragImage(imageData.image, imageData.x, imageData.y));\n      each$e(original.types, type => {\n        if (type !== 'Files') {\n          clone.setData(type, original.getData(type));\n        }\n      });\n      each$e(original.files, file => clone.items.add(file));\n      getEvent(original).each(type => {\n        setEvent(clone, type);\n      });\n      originalMode.each(mode => {\n        setMode$1(original, mode);\n        setMode$1(clone, mode);\n      });\n      return clone;\n    };\n\n    const getHtmlData = dataTransfer => {\n      const html = dataTransfer.getData('text/html');\n      return html === '' ? Optional.none() : Optional.some(html);\n    };\n    const setHtmlData = (dataTransfer, html) => dataTransfer.setData('text/html', html);\n\n    const internalMimeType = 'x-tinymce/html';\n    const internalHtmlMime = constant(internalMimeType);\n    const internalMark = '<!-- ' + internalMimeType + ' -->';\n    const mark = html => internalMark + html;\n    const unmark = html => html.replace(internalMark, '');\n    const isMarked = html => html.indexOf(internalMark) !== -1;\n\n    const isPlainText = text => {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    const openContainer = (rootTag, rootAttrs) => {\n      let tag = '<' + rootTag;\n      const attrs = mapToArray(rootAttrs, (value, key) => key + '=\"' + Entities.encodeAllRaw(value) + '\"');\n      if (attrs.length) {\n        tag += ' ' + attrs.join(' ');\n      }\n      return tag + '>';\n    };\n    const toBlockElements = (text, rootTag, rootAttrs) => {\n      const blocks = text.split(/\\n\\n/);\n      const tagOpen = openContainer(rootTag, rootAttrs);\n      const tagClose = '</' + rootTag + '>';\n      const paragraphs = map$3(blocks, p => {\n        return p.split(/\\n/).join('<br />');\n      });\n      const stitch = p => {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : map$3(paragraphs, stitch).join('');\n    };\n\n    const pasteBinDefaultContent = '%MCEPASTEBIN%';\n    const create$6 = (editor, lastRngCell) => {\n      const {dom, selection} = editor;\n      const body = editor.getBody();\n      lastRngCell.set(selection.getRng());\n      const pasteBinElm = dom.add(editor.getBody(), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (Env.browser.isFirefox()) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', e => {\n        e.stopPropagation();\n      });\n      pasteBinElm.focus();\n      selection.select(pasteBinElm, true);\n    };\n    const remove = (editor, lastRngCell) => {\n      const dom = editor.dom;\n      if (getEl(editor)) {\n        let pasteBinClone;\n        const lastRng = lastRngCell.get();\n        while (pasteBinClone = getEl(editor)) {\n          dom.remove(pasteBinClone);\n          dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    const getEl = editor => editor.dom.get('mcepastebin');\n    const isPasteBin = elm => isNonNullable(elm) && elm.id === 'mcepastebin';\n    const getHtml = editor => {\n      const dom = editor.dom;\n      const copyAndRemove = (toElm, fromElm) => {\n        toElm.appendChild(fromElm);\n        dom.remove(fromElm, true);\n      };\n      const [pasteBinElm, ...pasteBinClones] = filter$5(editor.getBody().childNodes, isPasteBin);\n      each$e(pasteBinClones, pasteBinClone => {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      const dirtyWrappers = dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (let i = dirtyWrappers.length - 1; i >= 0; i--) {\n        const cleanWrapper = dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    const isDefaultPasteBinContent = content => content === pasteBinDefaultContent;\n    const PasteBin = editor => {\n      const lastRng = Cell(null);\n      return {\n        create: () => create$6(editor, lastRng),\n        remove: () => remove(editor, lastRng),\n        getEl: () => getEl(editor),\n        getHtml: () => getHtml(editor),\n        getLastRng: lastRng.get\n      };\n    };\n\n    const filter$1 = (content, items) => {\n      Tools.each(items, v => {\n        if (is$4(v, RegExp)) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    };\n    const innerText = html => {\n      const schema = Schema();\n      const domParser = DomParser({}, schema);\n      let text = '';\n      const voidElements = schema.getVoidElements();\n      const ignoreElements = Tools.makeMap('script noscript style textarea video audio iframe object', ' ');\n      const blockElements = schema.getBlockElements();\n      const walk = node => {\n        const name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (voidElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!(node.name in schema.getVoidElements())) {\n          let currentNode = node.firstChild;\n          if (currentNode) {\n            do {\n              walk(currentNode);\n            } while (currentNode = currentNode.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      };\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    };\n    const trimHtml = html => {\n      const trimSpaces = (all, s1, s2) => {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      };\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    };\n    const createIdGenerator = prefix => {\n      let count = 0;\n      return () => {\n        return prefix + count++;\n      };\n    };\n    const getImageMimeType = ext => {\n      const lowerExt = ext.toLowerCase();\n      const mimeOverrides = {\n        jpg: 'jpeg',\n        jpe: 'jpeg',\n        jfi: 'jpeg',\n        jif: 'jpeg',\n        jfif: 'jpeg',\n        pjpeg: 'jpeg',\n        pjp: 'jpeg',\n        svg: 'svg+xml'\n      };\n      return Tools.hasOwn(mimeOverrides, lowerExt) ? 'image/' + mimeOverrides[lowerExt] : 'image/' + lowerExt;\n    };\n\n    const preProcess = (editor, html) => {\n      const parser = DomParser({\n        sanitize: shouldSanitizeXss(editor),\n        sandbox_iframes: shouldSandboxIframes(editor)\n      }, editor.schema);\n      parser.addNodeFilter('meta', nodes => {\n        Tools.each(nodes, node => {\n          node.remove();\n        });\n      });\n      const fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return HtmlSerializer({ validate: true }, editor.schema).serialize(fragment);\n    };\n    const processResult = (content, cancelled) => ({\n      content,\n      cancelled\n    });\n    const postProcessFilter = (editor, html, internal) => {\n      const tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      const postProcessArgs = firePastePostProcess(editor, tempBody, internal);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    const filterContent = (editor, content, internal) => {\n      const preProcessArgs = firePastePreProcess(editor, content, internal);\n      const filteredContent = preProcess(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    const process = (editor, html, internal) => {\n      return filterContent(editor, html, internal);\n    };\n\n    const pasteHtml$1 = (editor, html) => {\n      editor.insertContent(html, {\n        merge: shouldPasteMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    const isAbsoluteUrl = url => /^https?:\\/\\/[\\w\\-\\/+=.,!;:&%@^~(){}?#]+$/i.test(url);\n    const isImageUrl = (editor, url) => {\n      return isAbsoluteUrl(url) && exists(getAllowedImageFileTypes(editor), type => endsWith(url.toLowerCase(), `.${ type.toLowerCase() }`));\n    };\n    const createImage = (editor, url, pasteHtmlFn) => {\n      editor.undoManager.extra(() => {\n        pasteHtmlFn(editor, url);\n      }, () => {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    const createLink = (editor, url, pasteHtmlFn) => {\n      editor.undoManager.extra(() => {\n        pasteHtmlFn(editor, url);\n      }, () => {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    const linkSelection = (editor, html, pasteHtmlFn) => !editor.selection.isCollapsed() && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    const insertImage = (editor, html, pasteHtmlFn) => isImageUrl(editor, html) ? createImage(editor, html, pasteHtmlFn) : false;\n    const smartInsertContent = (editor, html) => {\n      Tools.each([\n        linkSelection,\n        insertImage,\n        pasteHtml$1\n      ], action => {\n        return !action(editor, html, pasteHtml$1);\n      });\n    };\n    const insertContent = (editor, html, pasteAsText) => {\n      if (pasteAsText || !isSmartPasteEnabled(editor)) {\n        pasteHtml$1(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    const uniqueId = createIdGenerator('mceclip');\n    const createPasteDataTransfer = html => {\n      const dataTransfer = createDataTransfer();\n      setHtmlData(dataTransfer, html);\n      setReadOnlyMode(dataTransfer);\n      return dataTransfer;\n    };\n    const doPaste = (editor, content, internal, pasteAsText, shouldSimulateInputEvent) => {\n      const res = process(editor, content, internal);\n      if (!res.cancelled) {\n        const content = res.content;\n        const doPasteAction = () => insertContent(editor, content, pasteAsText);\n        if (shouldSimulateInputEvent) {\n          const args = fireBeforeInputEvent(editor, 'insertFromPaste', { dataTransfer: createPasteDataTransfer(content) });\n          if (!args.isDefaultPrevented()) {\n            doPasteAction();\n            fireInputEvent(editor, 'insertFromPaste');\n          }\n        } else {\n          doPasteAction();\n        }\n      }\n    };\n    const pasteHtml = (editor, html, internalFlag, shouldSimulateInputEvent) => {\n      const internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false, shouldSimulateInputEvent);\n    };\n    const pasteText = (editor, text, shouldSimulateInputEvent) => {\n      const encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      const normalizedText = normalize$4(encodedText, getPasteTabSpaces(editor));\n      const html = toBlockElements(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true, shouldSimulateInputEvent);\n    };\n    const getDataTransferItems = dataTransfer => {\n      const items = {};\n      if (dataTransfer && dataTransfer.types) {\n        for (let i = 0; i < dataTransfer.types.length; i++) {\n          const contentType = dataTransfer.types[i];\n          try {\n            items[contentType] = dataTransfer.getData(contentType);\n          } catch (ex) {\n            items[contentType] = '';\n          }\n        }\n      }\n      return items;\n    };\n    const hasContentType = (clipboardContent, mimeType) => mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    const hasHtmlOrText = content => hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    const extractFilename = (editor, str) => {\n      const m = str.match(/([\\s\\S]+?)(?:\\.[a-z0-9.]+)$/i);\n      return isNonNullable(m) ? editor.dom.encode(m[1]) : undefined;\n    };\n    const createBlobInfo = (editor, blobCache, file, base64) => {\n      const id = uniqueId();\n      const useFileName = shouldReuseFileName(editor) && isNonNullable(file.name);\n      const name = useFileName ? extractFilename(editor, file.name) : id;\n      const filename = useFileName ? file.name : undefined;\n      const blobInfo = blobCache.create(id, file, base64, name, filename);\n      blobCache.add(blobInfo);\n      return blobInfo;\n    };\n    const pasteImage = (editor, imageItem) => {\n      parseDataUri(imageItem.uri).each(({data, type, base64Encoded}) => {\n        const base64 = base64Encoded ? data : btoa(data);\n        const file = imageItem.file;\n        const blobCache = editor.editorUpload.blobCache;\n        const existingBlobInfo = blobCache.getByData(base64, type);\n        const blobInfo = existingBlobInfo !== null && existingBlobInfo !== void 0 ? existingBlobInfo : createBlobInfo(editor, blobCache, file, base64);\n        pasteHtml(editor, `<img src=\"${ blobInfo.blobUri() }\">`, false, true);\n      });\n    };\n    const isClipboardEvent = event => event.type === 'paste';\n    const readFilesAsDataUris = items => Promise.all(map$3(items, file => {\n      return blobToDataUri(file).then(uri => ({\n        file,\n        uri\n      }));\n    }));\n    const isImage = editor => {\n      const allowedExtensions = getAllowedImageFileTypes(editor);\n      return file => startsWith(file.type, 'image/') && exists(allowedExtensions, extension => {\n        return getImageMimeType(extension) === file.type;\n      });\n    };\n    const getImagesFromDataTransfer = (editor, dataTransfer) => {\n      const items = dataTransfer.items ? bind$3(from(dataTransfer.items), item => {\n        return item.kind === 'file' ? [item.getAsFile()] : [];\n      }) : [];\n      const files = dataTransfer.files ? from(dataTransfer.files) : [];\n      return filter$5(items.length > 0 ? items : files, isImage(editor));\n    };\n    const pasteImageData = (editor, e, rng) => {\n      const dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (shouldPasteDataImages(editor) && dataTransfer) {\n        const images = getImagesFromDataTransfer(editor, dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readFilesAsDataUris(images).then(fileResults => {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each$e(fileResults, result => {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    const isBrokenAndroidClipboardEvent = e => {\n      var _a, _b;\n      return Env.os.isAndroid() && ((_b = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.items) === null || _b === void 0 ? void 0 : _b.length) === 0;\n    };\n    const isKeyboardPasteEvent = e => VK.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    const insertClipboardContent = (editor, clipboardContent, html, plainTextMode, shouldSimulateInputEvent) => {\n      let content = trimHtml(html);\n      const isInternal = hasContentType(clipboardContent, internalHtmlMime()) || isMarked(html);\n      const isPlainTextHtml = !isInternal && isPlainText(content);\n      const isAbsoluteUrl$1 = isAbsoluteUrl(content);\n      if (isDefaultPasteBinContent(content) || !content.length || isPlainTextHtml && !isAbsoluteUrl$1) {\n        plainTextMode = true;\n      }\n      if (plainTextMode || isAbsoluteUrl$1) {\n        if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n          content = clipboardContent['text/plain'];\n        } else {\n          content = innerText(content);\n        }\n      }\n      if (isDefaultPasteBinContent(content)) {\n        return;\n      }\n      if (plainTextMode) {\n        pasteText(editor, content, shouldSimulateInputEvent);\n      } else {\n        pasteHtml(editor, content, isInternal, shouldSimulateInputEvent);\n      }\n    };\n    const registerEventHandlers = (editor, pasteBin, pasteFormat) => {\n      let keyboardPastePlainTextState;\n      const getLastRng = () => pasteBin.getLastRng() || editor.selection.getRng();\n      editor.on('keydown', e => {\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n        }\n      });\n      editor.on('paste', e => {\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          return;\n        }\n        const plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        keyboardPastePlainTextState = false;\n        const clipboardContent = getDataTransferItems(e.clipboardData);\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          return;\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          insertClipboardContent(editor, clipboardContent, clipboardContent['text/html'], plainTextMode, true);\n        } else if (hasContentType(clipboardContent, 'text/plain') && hasContentType(clipboardContent, 'text/uri-list')) {\n          e.preventDefault();\n          insertClipboardContent(editor, clipboardContent, clipboardContent['text/plain'], plainTextMode, true);\n        } else {\n          pasteBin.create();\n          Delay.setEditorTimeout(editor, () => {\n            const html = pasteBin.getHtml();\n            pasteBin.remove();\n            insertClipboardContent(editor, clipboardContent, html, plainTextMode, false);\n          }, 0);\n        }\n      });\n    };\n    const registerDataImageFilter = editor => {\n      const isWebKitFakeUrl = src => startsWith(src, 'webkit-fake-url');\n      const isDataUri = src => startsWith(src, 'data:');\n      const isPasteInsert = args => {\n        var _a;\n        return ((_a = args.data) === null || _a === void 0 ? void 0 : _a.paste) === true;\n      };\n      editor.parser.addNodeFilter('img', (nodes, name, args) => {\n        if (!shouldPasteDataImages(editor) && isPasteInsert(args)) {\n          for (const node of nodes) {\n            const src = node.attr('src');\n            if (isString(src) && !node.attr('data-mce-object') && src !== Env.transparentSrc) {\n              if (isWebKitFakeUrl(src)) {\n                node.remove();\n              } else if (!shouldAllowHtmlDataUrls(editor) && isDataUri(src)) {\n                node.remove();\n              }\n            }\n          }\n        }\n      });\n    };\n    const registerEventsAndFilters = (editor, pasteBin, pasteFormat) => {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      registerDataImageFilter(editor);\n    };\n\n    const togglePlainTextPaste = (editor, pasteFormat) => {\n      if (pasteFormat.get() === 'text') {\n        pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n    const register$1 = (editor, pasteFormat) => {\n      editor.addCommand('mceTogglePlainTextPaste', () => {\n        togglePlainTextPaste(editor, pasteFormat);\n      });\n      editor.addCommand('mceInsertClipboardContent', (ui, value) => {\n        if (value.html) {\n          pasteHtml(editor, value.html, value.internal, false);\n        }\n        if (value.text) {\n          pasteText(editor, value.text, false);\n        }\n      });\n    };\n\n    const setHtml5Clipboard = (clipboardData, html, text) => {\n      if (clipboardData) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    const setClipboardData = (evt, data, fallback, done) => {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    const fallback = editor => (html, done) => {\n      const {dom, selection} = editor;\n      const outer = dom.create('div', {\n        'contenteditable': 'false',\n        'data-mce-bogus': 'all'\n      });\n      const inner = dom.create('div', { contenteditable: 'true' }, html);\n      dom.setStyles(outer, {\n        position: 'fixed',\n        top: '0',\n        left: '-3000px',\n        width: '1000px',\n        overflow: 'hidden'\n      });\n      outer.appendChild(inner);\n      dom.add(editor.getBody(), outer);\n      const range = selection.getRng();\n      inner.focus();\n      const offscreenRange = dom.createRng();\n      offscreenRange.selectNodeContents(inner);\n      selection.setRng(offscreenRange);\n      Delay.setEditorTimeout(editor, () => {\n        selection.setRng(range);\n        dom.remove(outer);\n        done();\n      }, 0);\n    };\n    const getData = editor => ({\n      html: mark(editor.selection.getContent({ contextual: true })),\n      text: editor.selection.getContent({ format: 'text' })\n    });\n    const isTableSelection = editor => !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    const hasSelectedContent = editor => !editor.selection.isCollapsed() || isTableSelection(editor);\n    const cut = editor => evt => {\n      if (!evt.isDefaultPrevented() && hasSelectedContent(editor) && editor.selection.isEditable()) {\n        setClipboardData(evt, getData(editor), fallback(editor), () => {\n          if (Env.browser.isChromium() || Env.browser.isFirefox()) {\n            const rng = editor.selection.getRng();\n            Delay.setEditorTimeout(editor, () => {\n              editor.selection.setRng(rng);\n              editor.execCommand('Delete');\n            }, 0);\n          } else {\n            editor.execCommand('Delete');\n          }\n        });\n      }\n    };\n    const copy = editor => evt => {\n      if (!evt.isDefaultPrevented() && hasSelectedContent(editor)) {\n        setClipboardData(evt, getData(editor), fallback(editor), noop);\n      }\n    };\n    const register = editor => {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    const getCaretRangeFromEvent = (editor, e) => {\n      var _a, _b;\n      return RangeUtils.getCaretRangeFromPoint((_a = e.clientX) !== null && _a !== void 0 ? _a : 0, (_b = e.clientY) !== null && _b !== void 0 ? _b : 0, editor.getDoc());\n    };\n    const isPlainTextFileUrl = content => {\n      const plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    const setFocusedRange = (editor, rng) => {\n      editor.focus();\n      if (rng) {\n        editor.selection.setRng(rng);\n      }\n    };\n    const hasImage = dataTransfer => exists(dataTransfer.files, file => /^image\\//.test(file.type));\n    const needsCustomInternalDrop = (dom, schema, target, dropContent) => {\n      const parentTransparent = dom.getParent(target, node => isTransparentBlock(schema, node));\n      const inSummary = !isNull(dom.getParent(target, 'summary'));\n      if (inSummary) {\n        return true;\n      } else if (parentTransparent && has$2(dropContent, 'text/html')) {\n        const fragment = new DOMParser().parseFromString(dropContent['text/html'], 'text/html').body;\n        return !isNull(fragment.querySelector(parentTransparent.nodeName.toLowerCase()));\n      } else {\n        return false;\n      }\n    };\n    const setupSummaryDeleteByDragFix = editor => {\n      editor.on('input', e => {\n        const hasNoSummary = el => isNull(el.querySelector('summary'));\n        if (e.inputType === 'deleteByDrag') {\n          const brokenDetailElements = filter$5(editor.dom.select('details'), hasNoSummary);\n          each$e(brokenDetailElements, details => {\n            if (isBr$6(details.firstChild)) {\n              details.firstChild.remove();\n            }\n            const summary = editor.dom.create('summary');\n            summary.appendChild(createPaddingBr().dom);\n            details.prepend(summary);\n          });\n        }\n      });\n    };\n    const setup$a = (editor, draggingInternallyState) => {\n      if (shouldPasteBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', e => {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', e => {\n          const dataTransfer = e.dataTransfer;\n          if (dataTransfer && hasImage(dataTransfer)) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', e => {\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        const rng = getCaretRangeFromEvent(editor, e);\n        if (isNullable(rng)) {\n          return;\n        }\n        const dropContent = getDataTransferItems(e.dataTransfer);\n        const internal = hasContentType(dropContent, internalHtmlMime());\n        if ((!hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && pasteImageData(editor, e, rng)) {\n          return;\n        }\n        const internalContent = dropContent[internalHtmlMime()];\n        const content = internalContent || dropContent['text/html'] || dropContent['text/plain'];\n        const needsInternalDrop = needsCustomInternalDrop(editor.dom, editor.schema, rng.startContainer, dropContent);\n        const isInternalDrop = draggingInternallyState.get();\n        if (isInternalDrop && !needsInternalDrop) {\n          return;\n        }\n        if (content) {\n          e.preventDefault();\n          Delay.setEditorTimeout(editor, () => {\n            editor.undoManager.transact(() => {\n              if (internalContent || isInternalDrop && needsInternalDrop) {\n                editor.execCommand('Delete');\n              }\n              setFocusedRange(editor, rng);\n              const trimmedContent = trimHtml(content);\n              if (dropContent['text/html']) {\n                pasteHtml(editor, trimmedContent, internal, true);\n              } else {\n                pasteText(editor, trimmedContent, true);\n              }\n            });\n          });\n        }\n      });\n      editor.on('dragstart', _e => {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', e => {\n        if (shouldPasteDataImages(editor) && !draggingInternallyState.get()) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n      setupSummaryDeleteByDragFix(editor);\n    };\n\n    const setup$9 = editor => {\n      const processEvent = f => e => {\n        f(editor, e);\n      };\n      const preProcess = getPastePreProcess(editor);\n      if (isFunction(preProcess)) {\n        editor.on('PastePreProcess', processEvent(preProcess));\n      }\n      const postProcess = getPastePostProcess(editor);\n      if (isFunction(postProcess)) {\n        editor.on('PastePostProcess', processEvent(postProcess));\n      }\n    };\n\n    const addPreProcessFilter = (editor, filterFunc) => {\n      editor.on('PastePreProcess', e => {\n        e.content = filterFunc(editor, e.content, e.internal);\n      });\n    };\n    const rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n    const rgbToHex = value => Tools.trim(value).replace(rgbRegExp, rgbaToHexString).toLowerCase();\n    const removeWebKitStyles = (editor, content, internal) => {\n      const webKitStylesOption = getPasteWebkitStyles(editor);\n      if (internal || webKitStylesOption === 'all' || !shouldPasteRemoveWebKitStyles(editor)) {\n        return content;\n      }\n      const webKitStyles = webKitStylesOption ? webKitStylesOption.split(/[, ]/) : [];\n      if (webKitStyles && webKitStylesOption !== 'none') {\n        const dom = editor.dom, node = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, (all, before, value, after) => {\n          const inputStyles = dom.parseStyle(dom.decode(value));\n          const outputStyles = {};\n          for (let i = 0; i < webKitStyles.length; i++) {\n            const inputValue = inputStyles[webKitStyles[i]];\n            let compareInput = inputValue;\n            let currentValue = dom.getStyle(node, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              compareInput = rgbToHex(compareInput);\n              currentValue = rgbToHex(currentValue);\n            }\n            if (currentValue !== compareInput) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          const outputStyle = dom.serializeStyle(outputStyles, 'span');\n          if (outputStyle) {\n            return before + ' style=\"' + outputStyle + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, (all, before, value, after) => {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    };\n    const setup$8 = editor => {\n      if (Env.browser.isChromium() || Env.browser.isSafari()) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n    };\n\n    const setup$7 = editor => {\n      const draggingInternallyState = Cell(false);\n      const pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n      const pasteBin = PasteBin(editor);\n      setup$8(editor);\n      register$1(editor, pasteFormat);\n      setup$9(editor);\n      editor.on('PreInit', () => {\n        register(editor);\n        setup$a(editor, draggingInternallyState);\n        registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n    };\n\n    const preventSummaryToggle = editor => {\n      editor.on('click', e => {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    const filterDetails = editor => {\n      editor.parser.addNodeFilter('details', elms => {\n        const initialStateOption = getDetailsInitialState(editor);\n        each$e(elms, details => {\n          if (initialStateOption === 'expanded') {\n            details.attr('open', 'open');\n          } else if (initialStateOption === 'collapsed') {\n            details.attr('open', null);\n          }\n        });\n      });\n      editor.serializer.addNodeFilter('details', elms => {\n        const serializedStateOption = getDetailsSerializedState(editor);\n        each$e(elms, details => {\n          if (serializedStateOption === 'expanded') {\n            details.attr('open', 'open');\n          } else if (serializedStateOption === 'collapsed') {\n            details.attr('open', null);\n          }\n        });\n      });\n    };\n    const setup$6 = editor => {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    const isBr = isBr$6;\n    const isText = isText$a;\n    const isContentEditableFalse$2 = elm => isContentEditableFalse$b(elm.dom);\n    const isContentEditableTrue = elm => isContentEditableTrue$3(elm.dom);\n    const isRoot = rootNode => elm => eq(SugarElement.fromDom(rootNode), elm);\n    const getClosestScope = (node, rootNode, schema) => closest$4(SugarElement.fromDom(node), elm => isContentEditableTrue(elm) || schema.isBlock(name(elm)), isRoot(rootNode)).getOr(SugarElement.fromDom(rootNode)).dom;\n    const getClosestCef = (node, rootNode) => closest$4(SugarElement.fromDom(node), isContentEditableFalse$2, isRoot(rootNode));\n    const findEdgeCaretCandidate = (startNode, scope, forward) => {\n      const walker = new DomTreeWalker(startNode, scope);\n      const next = forward ? walker.next.bind(walker) : walker.prev.bind(walker);\n      let result = startNode;\n      for (let current = forward ? startNode : next(); current && !isBr(current); current = next()) {\n        if (isCaretCandidate$3(current)) {\n          result = current;\n        }\n      }\n      return result;\n    };\n    const findClosestBlockRange = (startRng, rootNode, schema) => {\n      const startPos = CaretPosition.fromRangeStart(startRng);\n      const clickNode = startPos.getNode();\n      const scope = getClosestScope(clickNode, rootNode, schema);\n      const startNode = findEdgeCaretCandidate(clickNode, scope, false);\n      const endNode = findEdgeCaretCandidate(clickNode, scope, true);\n      const rng = document.createRange();\n      getClosestCef(startNode, scope).fold(() => {\n        if (isText(startNode)) {\n          rng.setStart(startNode, 0);\n        } else {\n          rng.setStartBefore(startNode);\n        }\n      }, cef => rng.setStartBefore(cef.dom));\n      getClosestCef(endNode, scope).fold(() => {\n        if (isText(endNode)) {\n          rng.setEnd(endNode, endNode.data.length);\n        } else {\n          rng.setEndAfter(endNode);\n        }\n      }, cef => rng.setEndAfter(cef.dom));\n      return rng;\n    };\n    const onTripleClickSelect = editor => {\n      const rng = findClosestBlockRange(editor.selection.getRng(), editor.getBody(), editor.schema);\n      editor.selection.setRng(normalize(rng));\n    };\n    const setup$5 = editor => {\n      editor.on('mousedown', e => {\n        if (e.detail >= 3) {\n          e.preventDefault();\n          onTripleClickSelect(editor);\n        }\n      });\n    };\n\n    var FakeCaretPosition;\n    (function (FakeCaretPosition) {\n      FakeCaretPosition['Before'] = 'before';\n      FakeCaretPosition['After'] = 'after';\n    }(FakeCaretPosition || (FakeCaretPosition = {})));\n    const distanceToRectLeft = (clientRect, clientX) => Math.abs(clientRect.left - clientX);\n    const distanceToRectRight = (clientRect, clientX) => Math.abs(clientRect.right - clientX);\n    const isInsideY = (clientY, clientRect) => clientY >= clientRect.top && clientY <= clientRect.bottom;\n    const collidesY = (r1, r2) => r1.top < r2.bottom && r1.bottom > r2.top;\n    const isOverlapping = (r1, r2) => {\n      const overlap = overlapY(r1, r2) / Math.min(r1.height, r2.height);\n      return collidesY(r1, r2) && overlap > 0.5;\n    };\n    const splitRectsPerAxis = (rects, y) => {\n      const intersectingRects = filter$5(rects, rect => isInsideY(y, rect));\n      return boundingClientRectFromRects(intersectingRects).fold(() => [\n        [],\n        rects\n      ], boundingRect => {\n        const {\n          pass: horizontal,\n          fail: vertical\n        } = partition$2(rects, rect => isOverlapping(rect, boundingRect));\n        return [\n          horizontal,\n          vertical\n        ];\n      });\n    };\n    const clientInfo = (rect, clientX) => {\n      return {\n        node: rect.node,\n        position: distanceToRectLeft(rect, clientX) < distanceToRectRight(rect, clientX) ? FakeCaretPosition.Before : FakeCaretPosition.After\n      };\n    };\n    const horizontalDistance = (rect, x, _y) => x > rect.left && x < rect.right ? 0 : Math.min(Math.abs(rect.left - x), Math.abs(rect.right - x));\n    const closestChildCaretCandidateNodeRect = (children, clientX, clientY, findCloserTextNode) => {\n      const caretCandidateRect = rect => {\n        if (isCaretCandidate$3(rect.node)) {\n          return Optional.some(rect);\n        } else if (isElement$6(rect.node)) {\n          return closestChildCaretCandidateNodeRect(from(rect.node.childNodes), clientX, clientY, false);\n        } else {\n          return Optional.none();\n        }\n      };\n      const tryFindSecondBestTextNode = (closest, sndClosest, distance) => {\n        return caretCandidateRect(sndClosest).filter(rect => {\n          const deltaDistance = Math.abs(distance(closest, clientX, clientY) - distance(rect, clientX, clientY));\n          return deltaDistance < 2 && isText$a(rect.node);\n        });\n      };\n      const findClosestCaretCandidateNodeRect = (rects, distance) => {\n        const sortedRects = sort(rects, (r1, r2) => distance(r1, clientX, clientY) - distance(r2, clientX, clientY));\n        return findMap(sortedRects, caretCandidateRect).map(closest => {\n          if (findCloserTextNode && !isText$a(closest.node) && sortedRects.length > 1) {\n            return tryFindSecondBestTextNode(closest, sortedRects[1], distance).getOr(closest);\n          } else {\n            return closest;\n          }\n        });\n      };\n      const [horizontalRects, verticalRects] = splitRectsPerAxis(getClientRects(children), clientY);\n      const {\n        pass: above,\n        fail: below\n      } = partition$2(verticalRects, rect => rect.top < clientY);\n      return findClosestCaretCandidateNodeRect(horizontalRects, horizontalDistance).orThunk(() => findClosestCaretCandidateNodeRect(below, distanceToRectEdgeFromXY)).orThunk(() => findClosestCaretCandidateNodeRect(above, distanceToRectEdgeFromXY));\n    };\n    const traverseUp = (rootElm, scope, clientX, clientY) => {\n      const helper = (scope, prevScope) => {\n        const isDragGhostContainer = node => isElement$6(node) && node.classList.contains('mce-drag-container');\n        const childNodesWithoutGhost = filter$5(scope.dom.childNodes, not(isDragGhostContainer));\n        return prevScope.fold(() => closestChildCaretCandidateNodeRect(childNodesWithoutGhost, clientX, clientY, true), prevScope => {\n          const uncheckedChildren = filter$5(childNodesWithoutGhost, node => node !== prevScope.dom);\n          return closestChildCaretCandidateNodeRect(uncheckedChildren, clientX, clientY, true);\n        }).orThunk(() => {\n          const parent = eq(scope, rootElm) ? Optional.none() : parentElement(scope);\n          return parent.bind(newScope => helper(newScope, Optional.some(scope)));\n        });\n      };\n      return helper(scope, Optional.none());\n    };\n    const closestCaretCandidateNodeRect = (root, clientX, clientY) => {\n      const rootElm = SugarElement.fromDom(root);\n      const ownerDoc = documentOrOwner(rootElm);\n      const elementAtPoint = SugarElement.fromPoint(ownerDoc, clientX, clientY).filter(elm => contains(rootElm, elm));\n      const element = elementAtPoint.getOr(rootElm);\n      return traverseUp(rootElm, element, clientX, clientY);\n    };\n    const closestFakeCaretCandidate = (root, clientX, clientY) => closestCaretCandidateNodeRect(root, clientX, clientY).filter(rect => isFakeCaretTarget(rect.node)).map(rect => clientInfo(rect, clientX));\n\n    const getAbsolutePosition = elm => {\n      var _a, _b;\n      const clientRect = elm.getBoundingClientRect();\n      const doc = elm.ownerDocument;\n      const docElem = doc.documentElement;\n      const win = doc.defaultView;\n      return {\n        top: clientRect.top + ((_a = win === null || win === void 0 ? void 0 : win.scrollY) !== null && _a !== void 0 ? _a : 0) - docElem.clientTop,\n        left: clientRect.left + ((_b = win === null || win === void 0 ? void 0 : win.scrollX) !== null && _b !== void 0 ? _b : 0) - docElem.clientLeft\n      };\n    };\n    const getBodyPosition = editor => editor.inline ? getAbsolutePosition(editor.getBody()) : {\n      left: 0,\n      top: 0\n    };\n    const getScrollPosition = editor => {\n      const body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    const getBodyScroll = editor => {\n      const body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      const inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      const iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    const getMousePosition = (editor, event) => {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        const iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        const scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    const calculatePosition = (bodyPosition, scrollPosition, mousePosition) => ({\n      pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n      pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n    });\n    const calc = (editor, event) => calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n\n    const getTargetProps = target => ({\n      target,\n      srcElement: target\n    });\n    const makeDndEventFromMouseEvent = (type, mouseEvent, target, dataTransfer) => ({\n      ...mouseEvent,\n      dataTransfer,\n      type,\n      ...getTargetProps(target)\n    });\n    const makeDndEvent = (type, target, dataTransfer) => {\n      const fail = die('Function not supported on simulated event.');\n      const event = {\n        bubbles: true,\n        cancelBubble: false,\n        cancelable: true,\n        composed: false,\n        currentTarget: null,\n        defaultPrevented: false,\n        eventPhase: 0,\n        isTrusted: true,\n        returnValue: false,\n        timeStamp: 0,\n        type,\n        composedPath: fail,\n        initEvent: fail,\n        preventDefault: noop,\n        stopImmediatePropagation: noop,\n        stopPropagation: noop,\n        AT_TARGET: window.Event.AT_TARGET,\n        BUBBLING_PHASE: window.Event.BUBBLING_PHASE,\n        CAPTURING_PHASE: window.Event.CAPTURING_PHASE,\n        NONE: window.Event.NONE,\n        altKey: false,\n        button: 0,\n        buttons: 0,\n        clientX: 0,\n        clientY: 0,\n        ctrlKey: false,\n        metaKey: false,\n        movementX: 0,\n        movementY: 0,\n        offsetX: 0,\n        offsetY: 0,\n        pageX: 0,\n        pageY: 0,\n        relatedTarget: null,\n        screenX: 0,\n        screenY: 0,\n        shiftKey: false,\n        x: 0,\n        y: 0,\n        detail: 0,\n        view: null,\n        which: 0,\n        initUIEvent: fail,\n        initMouseEvent: fail,\n        getModifierState: fail,\n        dataTransfer,\n        ...getTargetProps(target)\n      };\n      return event;\n    };\n    const makeDataTransferCopyForDragEvent = (dataTransfer, eventType) => {\n      const copy = cloneDataTransfer(dataTransfer);\n      if (eventType === 'dragstart') {\n        setDragstartEvent(copy);\n        setReadWriteMode(copy);\n      } else if (eventType === 'drop') {\n        setDropEvent(copy);\n        setReadOnlyMode(copy);\n      } else {\n        setDragendEvent(copy);\n        setProtectedMode(copy);\n      }\n      return copy;\n    };\n    const makeDragEvent = (type, target, dataTransfer, mouseEvent) => {\n      const dataTransferForDispatch = makeDataTransferCopyForDragEvent(dataTransfer, type);\n      return isUndefined(mouseEvent) ? makeDndEvent(type, target, dataTransferForDispatch) : makeDndEventFromMouseEvent(type, mouseEvent, target, dataTransferForDispatch);\n    };\n\n    const scrollPixelsPerInterval = 32;\n    const scrollIntervalValue = 100;\n    const mouseRangeToTriggerScrollInsideEditor = 8;\n    const mouseRangeToTriggerScrollOutsideEditor = 16;\n    const isContentEditableFalse$1 = isContentEditableFalse$b;\n    const isContentEditable = or(isContentEditableFalse$1, isContentEditableTrue$3);\n    const isDraggable = (dom, rootElm, elm) => isContentEditableFalse$1(elm) && elm !== rootElm && dom.isEditable(elm.parentElement);\n    const isValidDropTarget = (editor, targetElement, dragElement) => {\n      if (isNullable(targetElement)) {\n        return false;\n      } else if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      } else {\n        return editor.dom.isEditable(targetElement);\n      }\n    };\n    const createGhost = (editor, elm, width, height) => {\n      const dom = editor.dom;\n      const clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width,\n        height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      const ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width,\n        height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    const appendGhostToBody = (ghostElm, bodyElm) => {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    const scrollEditor = (direction, amount) => win => () => {\n      const current = direction === 'left' ? win.scrollX : win.scrollY;\n      win.scroll({\n        [direction]: current + amount,\n        behavior: 'smooth'\n      });\n    };\n    const scrollLeft = scrollEditor('left', -scrollPixelsPerInterval);\n    const scrollRight = scrollEditor('left', scrollPixelsPerInterval);\n    const scrollUp = scrollEditor('top', -scrollPixelsPerInterval);\n    const scrollDown = scrollEditor('top', scrollPixelsPerInterval);\n    const moveGhost = (ghostElm, position, width, height, maxX, maxY, mouseY, mouseX, contentAreaContainer, win, state, mouseEventOriginatedFromWithinTheEditor) => {\n      let overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n      const clientHeight = contentAreaContainer.clientHeight;\n      const clientWidth = contentAreaContainer.clientWidth;\n      const outerMouseY = mouseY + contentAreaContainer.getBoundingClientRect().top;\n      const outerMouseX = mouseX + contentAreaContainer.getBoundingClientRect().left;\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging && mouseEventOriginatedFromWithinTheEditor) {\n          if (mouseY + mouseRangeToTriggerScrollInsideEditor >= clientHeight) {\n            state.intervalId.set(scrollDown(win));\n          } else if (mouseY - mouseRangeToTriggerScrollInsideEditor <= 0) {\n            state.intervalId.set(scrollUp(win));\n          } else if (mouseX + mouseRangeToTriggerScrollInsideEditor >= clientWidth) {\n            state.intervalId.set(scrollRight(win));\n          } else if (mouseX - mouseRangeToTriggerScrollInsideEditor <= 0) {\n            state.intervalId.set(scrollLeft(win));\n          } else if (outerMouseY + mouseRangeToTriggerScrollOutsideEditor >= window.innerHeight) {\n            state.intervalId.set(scrollDown(window));\n          } else if (outerMouseY - mouseRangeToTriggerScrollOutsideEditor <= 0) {\n            state.intervalId.set(scrollUp(window));\n          } else if (outerMouseX + mouseRangeToTriggerScrollOutsideEditor >= window.innerWidth) {\n            state.intervalId.set(scrollRight(window));\n          } else if (outerMouseX - mouseRangeToTriggerScrollOutsideEditor <= 0) {\n            state.intervalId.set(scrollLeft(window));\n          }\n        }\n      });\n    };\n    const removeElement = elm => {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    const removeElementWithPadding = (dom, elm) => {\n      const parentBlock = dom.getParent(elm.parentNode, dom.isBlock);\n      removeElement(elm);\n      if (parentBlock && parentBlock !== dom.getRoot() && dom.isEmpty(parentBlock)) {\n        fillWithPaddingBr(SugarElement.fromDom(parentBlock));\n      }\n    };\n    const isLeftMouseButtonPressed = e => e.button === 0;\n    const applyRelPos = (state, position) => ({\n      pageX: position.pageX - state.relX,\n      pageY: position.pageY + 5\n    });\n    const start = (state, editor) => e => {\n      if (isLeftMouseButtonPressed(e)) {\n        const ceElm = find$2(editor.dom.getParents(e.target), isContentEditable).getOr(null);\n        if (isNonNullable(ceElm) && isDraggable(editor.dom, editor.getBody(), ceElm)) {\n          const elmPos = editor.dom.getPos(ceElm);\n          const bodyElm = editor.getBody();\n          const docElm = editor.getDoc().documentElement;\n          state.set({\n            element: ceElm,\n            dataTransfer: createDataTransfer(),\n            dragging: false,\n            screenX: e.screenX,\n            screenY: e.screenY,\n            maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n            maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n            relX: e.pageX - elmPos.x,\n            relY: e.pageY - elmPos.y,\n            width: ceElm.offsetWidth,\n            height: ceElm.offsetHeight,\n            ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight),\n            intervalId: repeatable(scrollIntervalValue)\n          });\n        }\n      }\n    };\n    const placeCaretAt = (editor, clientX, clientY) => {\n      editor._selectionOverrides.hideFakeCaret();\n      closestFakeCaretCandidate(editor.getBody(), clientX, clientY).fold(() => editor.selection.placeCaretAt(clientX, clientY), caretInfo => {\n        const range = editor._selectionOverrides.showCaret(1, caretInfo.node, caretInfo.position === FakeCaretPosition.Before, false);\n        if (range) {\n          editor.selection.setRng(range);\n        } else {\n          editor.selection.placeCaretAt(clientX, clientY);\n        }\n      });\n    };\n    const dispatchDragEvent = (editor, type, target, dataTransfer, mouseEvent) => {\n      if (type === 'dragstart') {\n        setHtmlData(dataTransfer, editor.dom.getOuterHTML(target));\n      }\n      const event = makeDragEvent(type, target, dataTransfer, mouseEvent);\n      const args = editor.dispatch(type, event);\n      return args;\n    };\n    const move = (state, editor) => {\n      const throttledPlaceCaretAt = first$1((clientX, clientY) => placeCaretAt(editor, clientX, clientY), 0);\n      editor.on('remove', throttledPlaceCaretAt.cancel);\n      const state_ = state;\n      return e => state.on(state => {\n        const movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (!state.dragging && movement > 10) {\n          const args = dispatchDragEvent(editor, 'dragstart', state.element, state.dataTransfer, e);\n          if (isNonNullable(args.dataTransfer)) {\n            state.dataTransfer = args.dataTransfer;\n          }\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          const mouseEventOriginatedFromWithinTheEditor = e.currentTarget === editor.getDoc().documentElement;\n          const targetPos = applyRelPos(state, calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY, e.clientY, e.clientX, editor.getContentAreaContainer(), editor.getWin(), state_, mouseEventOriginatedFromWithinTheEditor);\n          throttledPlaceCaretAt.throttle(e.clientX, e.clientY);\n        }\n      });\n    };\n    const getRawTarget = selection => {\n      const sel = selection.getSel();\n      if (isNonNullable(sel)) {\n        const rng = sel.getRangeAt(0);\n        const startContainer = rng.startContainer;\n        return isText$a(startContainer) ? startContainer.parentNode : startContainer;\n      } else {\n        return null;\n      }\n    };\n    const drop = (state, editor) => e => {\n      state.on(state => {\n        var _a;\n        state.intervalId.clear();\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            const dropTarget = (_a = editor.getDoc().elementFromPoint(e.clientX, e.clientY)) !== null && _a !== void 0 ? _a : editor.getBody();\n            const args = dispatchDragEvent(editor, 'drop', dropTarget, state.dataTransfer, e);\n            if (!args.isDefaultPrevented()) {\n              editor.undoManager.transact(() => {\n                removeElementWithPadding(editor.dom, state.element);\n                getHtmlData(state.dataTransfer).each(content => editor.insertContent(content));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n          dispatchDragEvent(editor, 'dragend', editor.getBody(), state.dataTransfer, e);\n        }\n      });\n      removeDragState(state);\n    };\n    const stopDragging = (state, editor, e) => {\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging) {\n          e.fold(() => dispatchDragEvent(editor, 'dragend', state.element, state.dataTransfer), mouseEvent => dispatchDragEvent(editor, 'dragend', state.element, state.dataTransfer, mouseEvent));\n        }\n      });\n      removeDragState(state);\n    };\n    const stop = (state, editor) => e => stopDragging(state, editor, Optional.some(e));\n    const removeDragState = state => {\n      state.on(state => {\n        state.intervalId.clear();\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    const bindFakeDragEvents = editor => {\n      const state = value$2();\n      const pageDom = DOMUtils.DOM;\n      const rootDocument = document;\n      const dragStartHandler = start(state, editor);\n      const dragHandler = move(state, editor);\n      const dropHandler = drop(state, editor);\n      const dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', () => {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', e => {\n        if (e.keyCode === VK.ESC) {\n          stopDragging(state, editor, Optional.none());\n        }\n      });\n    };\n    const blockUnsupportedFileDrop = editor => {\n      const preventFileDrop = e => {\n        if (!e.isDefaultPrevented()) {\n          const dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$2(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      const preventFileDropIfUIElement = e => {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      const setup = () => {\n        const pageDom = DOMUtils.DOM;\n        const dom = editor.dom;\n        const doc = document;\n        const editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        const eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$e(eventNames, name => {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', () => {\n          each$e(eventNames, name => {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', () => {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    const init$2 = editor => {\n      bindFakeDragEvents(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    const setup$4 = editor => {\n      const renderFocusCaret = first$1(() => {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          const rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            const caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', () => {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', () => {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    const setup$3 = editor => {\n      editor.on('init', () => {\n        editor.on('focusin', e => {\n          const target = e.target;\n          if (isMedia$2(target)) {\n            const ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            const node = isContentEditableFalse$b(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(rng => editor.selection.setRng(rng));\n            }\n          }\n        });\n      });\n    };\n\n    const isContentEditableFalse = isContentEditableFalse$b;\n    const getContentEditableRoot = (editor, node) => getContentEditableRoot$1(editor.getBody(), node);\n    const SelectionOverrides = editor => {\n      const selection = editor.selection, dom = editor.dom;\n      const rootNode = editor.getBody();\n      const fakeCaret = FakeCaret(editor, rootNode, dom.isBlock, () => hasFocus(editor));\n      const realSelectionId = 'sel-' + dom.uniqueId();\n      const elementSelectionAttr = 'data-mce-selected';\n      let selectedElement;\n      const isFakeSelectionElement = node => isNonNullable(node) && dom.hasClass(node, 'mce-offscreen-selection');\n      const isFakeSelectionTargetElement = node => node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode) && dom.isEditable(node.parentNode);\n      const setRange = range => {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      const showCaret = (direction, node, before, scrollIntoView = true) => {\n        const e = editor.dispatch('ShowCaret', {\n          target: node,\n          direction,\n          before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      const showBlockCaretContainer = blockCaretContainer => {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      const registerEvents = () => {\n        editor.on('click', e => {\n          if (!dom.isEditable(e.target)) {\n            e.preventDefault();\n            editor.focus();\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        editor.on('tap', e => {\n          const targetElm = e.target;\n          const contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', e => {\n          const targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (!isXYInContentArea(editor, e.clientX, e.clientY)) {\n            return;\n          }\n          removeElementSelection();\n          hideFakeCaret();\n          const closestContentEditable = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(closestContentEditable)) {\n            e.preventDefault();\n            selectNode(editor, closestContentEditable).each(setElementSelection);\n          } else {\n            closestFakeCaretCandidate(rootNode, e.clientX, e.clientY).each(caretInfo => {\n              e.preventDefault();\n              const range = showCaret(1, caretInfo.node, caretInfo.position === FakeCaretPosition.Before, false);\n              setRange(range);\n              if (isHTMLElement(closestContentEditable)) {\n                closestContentEditable.focus();\n              } else {\n                editor.getBody().focus();\n              }\n            });\n          }\n        });\n        editor.on('keypress', e => {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', e => {\n          let rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', e => {\n          e.range = normalizeVoidElementSelection(e.range);\n          const rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        const isPasteBin = node => isElement$6(node) && node.id === 'mcepastebin';\n        editor.on('AfterSetSelectionRange', e => {\n          const rng = e.range;\n          const parent = rng.startContainer.parentElement;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parent)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parent)) {\n            removeElementSelection();\n          }\n        });\n        init$2(editor);\n        setup$4(editor);\n        setup$3(editor);\n      };\n      const isWithinCaretContainer = node => isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      const isRangeInCaretContainer = rng => isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      const normalizeVoidElementSelection = rng => {\n        const voidElements = editor.schema.getVoidElements();\n        const newRng = dom.createRng();\n        const startContainer = rng.startContainer;\n        const startOffset = rng.startOffset;\n        const endContainer = rng.endContainer;\n        const endOffset = rng.endOffset;\n        if (has$2(voidElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(voidElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      const setupOffscreenSelection = (node, targetClone) => {\n        const body = SugarElement.fromDom(editor.getBody());\n        const doc = editor.getDoc();\n        const realSelectionContainer = descendant$1(body, '#' + realSelectionId).getOrThunk(() => {\n          const newContainer = SugarElement.fromHtml('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>', doc);\n          set$3(newContainer, 'id', realSelectionId);\n          append$1(body, newContainer);\n          return newContainer;\n        });\n        const newRange = dom.createRng();\n        empty(realSelectionContainer);\n        append(realSelectionContainer, [\n          SugarElement.fromText(nbsp, doc),\n          SugarElement.fromDom(targetClone),\n          SugarElement.fromText(nbsp, doc)\n        ]);\n        newRange.setStart(realSelectionContainer.dom.firstChild, 1);\n        newRange.setEnd(realSelectionContainer.dom.lastChild, 0);\n        setAll(realSelectionContainer, { top: dom.getPos(node, editor.getBody()).y + 'px' });\n        focus$1(realSelectionContainer);\n        const sel = selection.getSel();\n        if (sel) {\n          sel.removeAllRanges();\n          sel.addRange(newRange);\n        }\n        return newRange;\n      };\n      const selectElement = elm => {\n        const targetClone = elm.cloneNode(true);\n        const e = editor.dispatch('ObjectSelected', {\n          target: elm,\n          targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        const range = setupOffscreenSelection(elm, e.targetClone);\n        const nodeElm = SugarElement.fromDom(elm);\n        each$e(descendants(SugarElement.fromDom(editor.getBody()), `*[${ elementSelectionAttr }]`), elm => {\n          if (!eq(nodeElm, elm)) {\n            remove$a(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      const setElementSelection = (range, forward) => {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            const dir = forward ? 1 : -1;\n            const caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            const beforeNode = caretPosition.getNode(!forward);\n            if (isNonNullable(beforeNode)) {\n              if (isFakeCaretTarget(beforeNode)) {\n                return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n              }\n              if (isCaretContainerInline(beforeNode) && isContentEditableFalse$b(beforeNode.nextSibling)) {\n                const rng = dom.createRng();\n                rng.setStart(beforeNode, 0);\n                rng.setEnd(beforeNode, 0);\n                return rng;\n              }\n            }\n            const afterNode = caretPosition.getNode(forward);\n            if (isNonNullable(afterNode)) {\n              if (isFakeCaretTarget(afterNode)) {\n                return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n              }\n              if (isCaretContainerInline(afterNode) && isContentEditableFalse$b(afterNode.previousSibling)) {\n                const rng = dom.createRng();\n                rng.setStart(afterNode, 1);\n                rng.setEnd(afterNode, 1);\n                return rng;\n              }\n            }\n          }\n          return null;\n        }\n        let startContainer = range.startContainer;\n        let startOffset = range.startOffset;\n        const endOffset = range.endOffset;\n        if (isText$a(startContainer) && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (!isElement$6(startContainer)) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          const node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      const removeElementSelection = () => {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant$1(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$5);\n        selectedElement = null;\n      };\n      const destroy = () => {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      const hideFakeCaret = () => {\n        fakeCaret.hide();\n      };\n      if (!isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret,\n        showBlockCaretContainer,\n        hideFakeCaret,\n        destroy\n      };\n    };\n\n    const getNormalizedTextOffset = (container, offset) => {\n      let normalizedOffset = offset;\n      for (let node = container.previousSibling; isText$a(node); node = node.previousSibling) {\n        normalizedOffset += node.data.length;\n      }\n      return normalizedOffset;\n    };\n    const generatePath = (dom, root, node, offset, normalized) => {\n      if (isText$a(node) && (offset < 0 || offset > node.data.length)) {\n        return [];\n      }\n      const p = normalized && isText$a(node) ? [getNormalizedTextOffset(node, offset)] : [offset];\n      let current = node;\n      while (current !== root && current.parentNode) {\n        p.push(dom.nodeIndex(current, normalized));\n        current = current.parentNode;\n      }\n      return current === root ? p.reverse() : [];\n    };\n    const generatePathRange = (dom, root, startNode, startOffset, endNode, endOffset, normalized = false) => {\n      const start = generatePath(dom, root, startNode, startOffset, normalized);\n      const end = generatePath(dom, root, endNode, endOffset, normalized);\n      return {\n        start,\n        end\n      };\n    };\n    const resolvePath = (root, path) => {\n      const nodePath = path.slice();\n      const offset = nodePath.pop();\n      if (!isNumber(offset)) {\n        return Optional.none();\n      } else {\n        const resolvedNode = foldl(nodePath, (optNode, index) => optNode.bind(node => Optional.from(node.childNodes[index])), Optional.some(root));\n        return resolvedNode.bind(node => {\n          if (isText$a(node) && (offset < 0 || offset > node.data.length)) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              node,\n              offset\n            });\n          }\n        });\n      }\n    };\n    const resolvePathRange = (root, range) => resolvePath(root, range.start).bind(({\n      node: startNode,\n      offset: startOffset\n    }) => resolvePath(root, range.end).map(({\n      node: endNode,\n      offset: endOffset\n    }) => {\n      const rng = document.createRange();\n      rng.setStart(startNode, startOffset);\n      rng.setEnd(endNode, endOffset);\n      return rng;\n    }));\n    const generatePathRangeFromRange = (dom, root, range, normalized = false) => generatePathRange(dom, root, range.startContainer, range.startOffset, range.endContainer, range.endOffset, normalized);\n\n    const cleanEmptyNodes = (dom, node, isRoot) => {\n      if (node && dom.isEmpty(node) && !isRoot(node)) {\n        const parent = node.parentNode;\n        dom.remove(node, isText$a(node.firstChild) && isWhitespaceText(node.firstChild.data));\n        cleanEmptyNodes(dom, parent, isRoot);\n      }\n    };\n    const deleteRng = (dom, rng, isRoot, clean = true) => {\n      const startParent = rng.startContainer.parentNode;\n      const endParent = rng.endContainer.parentNode;\n      rng.deleteContents();\n      if (clean && !isRoot(rng.startContainer)) {\n        if (isText$a(rng.startContainer) && rng.startContainer.data.length === 0) {\n          dom.remove(rng.startContainer);\n        }\n        if (isText$a(rng.endContainer) && rng.endContainer.data.length === 0) {\n          dom.remove(rng.endContainer);\n        }\n        cleanEmptyNodes(dom, startParent, isRoot);\n        if (startParent !== endParent) {\n          cleanEmptyNodes(dom, endParent, isRoot);\n        }\n      }\n    };\n    const getParentBlock = (editor, rng) => Optional.from(editor.dom.getParent(rng.startContainer, editor.dom.isBlock));\n    const resolveFromDynamicPatterns = (patternSet, block, beforeText) => {\n      const dynamicPatterns = patternSet.dynamicPatternsLookup({\n        text: beforeText,\n        block\n      });\n      return {\n        ...patternSet,\n        blockPatterns: getBlockPatterns(dynamicPatterns).concat(patternSet.blockPatterns),\n        inlinePatterns: getInlinePatterns(dynamicPatterns).concat(patternSet.inlinePatterns)\n      };\n    };\n    const getBeforeText = (dom, block, node, offset) => {\n      const rng = dom.createRng();\n      rng.setStart(block, 0);\n      rng.setEnd(node, offset);\n      return rng.toString();\n    };\n\n    const startsWithSingleSpace = s => /^\\s[^\\s]/.test(s);\n    const stripPattern = (dom, block, pattern) => {\n      const firstTextNode = textAfter(block, 0, block);\n      firstTextNode.each(spot => {\n        const node = spot.container;\n        scanRight(node, pattern.start.length, block).each(end => {\n          const rng = dom.createRng();\n          rng.setStart(node, 0);\n          rng.setEnd(end.container, end.offset);\n          deleteRng(dom, rng, e => e === block);\n        });\n        const text = SugarElement.fromDom(node);\n        const textContent = get$3(text);\n        if (startsWithSingleSpace(textContent)) {\n          set(text, textContent.slice(1));\n        }\n      });\n    };\n    const applyPattern$1 = (editor, match) => {\n      const dom = editor.dom;\n      const pattern = match.pattern;\n      const rng = resolvePathRange(dom.getRoot(), match.range).getOrDie('Unable to resolve path range');\n      const isBlockFormatName = (name, formatter) => {\n        const formatSet = formatter.get(name);\n        return isArray$1(formatSet) && head(formatSet).exists(format => has$2(format, 'block'));\n      };\n      getParentBlock(editor, rng).each(block => {\n        if (pattern.type === 'block-format') {\n          if (isBlockFormatName(pattern.format, editor.formatter)) {\n            editor.undoManager.transact(() => {\n              stripPattern(editor.dom, block, pattern);\n              editor.formatter.apply(pattern.format);\n            });\n          }\n        } else if (pattern.type === 'block-command') {\n          editor.undoManager.transact(() => {\n            stripPattern(editor.dom, block, pattern);\n            editor.execCommand(pattern.cmd, false, pattern.value);\n          });\n        }\n      });\n      return true;\n    };\n    const sortPatterns$1 = patterns => sort(patterns, (a, b) => b.start.length - a.start.length);\n    const findPattern$1 = (patterns, text) => {\n      const sortedPatterns = sortPatterns$1(patterns);\n      const nuText = text.replace(nbsp, ' ');\n      return find$2(sortedPatterns, pattern => text.indexOf(pattern.start) === 0 || nuText.indexOf(pattern.start) === 0);\n    };\n    const findPatterns$1 = (editor, block, patternSet, normalizedMatches) => {\n      var _a;\n      const dom = editor.dom;\n      const forcedRootBlock = getForcedRootBlock(editor);\n      if (!dom.is(block, forcedRootBlock)) {\n        return [];\n      }\n      const blockText = (_a = block.textContent) !== null && _a !== void 0 ? _a : '';\n      return findPattern$1(patternSet.blockPatterns, blockText).map(pattern => {\n        if (Tools.trim(blockText).length === pattern.start.length) {\n          return [];\n        }\n        return [{\n            pattern,\n            range: generatePathRange(dom, dom.getRoot(), block, 0, block, 0, normalizedMatches)\n          }];\n      }).getOr([]);\n    };\n    const applyMatches$1 = (editor, matches) => {\n      if (matches.length === 0) {\n        return;\n      }\n      const bookmark = editor.selection.getBookmark();\n      each$e(matches, match => applyPattern$1(editor, match));\n      editor.selection.moveToBookmark(bookmark);\n    };\n\n    const newMarker = (dom, id) => dom.create('span', {\n      'data-mce-type': 'bookmark',\n      id\n    });\n    const rangeFromMarker = (dom, marker) => {\n      const rng = dom.createRng();\n      rng.setStartAfter(marker.start);\n      rng.setEndBefore(marker.end);\n      return rng;\n    };\n    const createMarker = (dom, markerPrefix, pathRange) => {\n      const rng = resolvePathRange(dom.getRoot(), pathRange).getOrDie('Unable to resolve path range');\n      const startNode = rng.startContainer;\n      const endNode = rng.endContainer;\n      const textEnd = rng.endOffset === 0 ? endNode : endNode.splitText(rng.endOffset);\n      const textStart = rng.startOffset === 0 ? startNode : startNode.splitText(rng.startOffset);\n      const startParentNode = textStart.parentNode;\n      const endParentNode = textEnd.parentNode;\n      return {\n        prefix: markerPrefix,\n        end: endParentNode.insertBefore(newMarker(dom, markerPrefix + '-end'), textEnd),\n        start: startParentNode.insertBefore(newMarker(dom, markerPrefix + '-start'), textStart)\n      };\n    };\n    const removeMarker = (dom, marker, isRoot) => {\n      cleanEmptyNodes(dom, dom.get(marker.prefix + '-end'), isRoot);\n      cleanEmptyNodes(dom, dom.get(marker.prefix + '-start'), isRoot);\n    };\n\n    const isReplacementPattern = pattern => pattern.start.length === 0;\n    const matchesPattern = patternContent => (element, offset) => {\n      const text = element.data;\n      const searchText = text.substring(0, offset);\n      const startEndIndex = searchText.lastIndexOf(patternContent.charAt(patternContent.length - 1));\n      const startIndex = searchText.lastIndexOf(patternContent);\n      if (startIndex !== -1) {\n        return startIndex + patternContent.length;\n      } else if (startEndIndex !== -1) {\n        return startEndIndex + 1;\n      } else {\n        return -1;\n      }\n    };\n    const findPatternStartFromSpot = (dom, pattern, block, spot) => {\n      const startPattern = pattern.start;\n      const startSpot = repeatLeft(dom, spot.container, spot.offset, matchesPattern(startPattern), block);\n      return startSpot.bind(spot => {\n        var _a, _b;\n        const startPatternIndex = (_b = (_a = block.textContent) === null || _a === void 0 ? void 0 : _a.indexOf(startPattern)) !== null && _b !== void 0 ? _b : -1;\n        const isCompleteMatch = startPatternIndex !== -1 && spot.offset >= startPatternIndex + startPattern.length;\n        if (isCompleteMatch) {\n          const rng = dom.createRng();\n          rng.setStart(spot.container, spot.offset - startPattern.length);\n          rng.setEnd(spot.container, spot.offset);\n          return Optional.some(rng);\n        } else {\n          const offset = spot.offset - startPattern.length;\n          return scanLeft(spot.container, offset, block).map(nextSpot => {\n            const rng = dom.createRng();\n            rng.setStart(nextSpot.container, nextSpot.offset);\n            rng.setEnd(spot.container, spot.offset);\n            return rng;\n          }).filter(rng => rng.toString() === startPattern).orThunk(() => findPatternStartFromSpot(dom, pattern, block, point(spot.container, 0)));\n        }\n      });\n    };\n    const findPatternStart = (dom, pattern, node, offset, block, requireGap = false) => {\n      if (pattern.start.length === 0 && !requireGap) {\n        const rng = dom.createRng();\n        rng.setStart(node, offset);\n        rng.setEnd(node, offset);\n        return Optional.some(rng);\n      }\n      return textBefore(node, offset, block).bind(spot => {\n        const start = findPatternStartFromSpot(dom, pattern, block, spot);\n        return start.bind(startRange => {\n          var _a;\n          if (requireGap) {\n            if (startRange.endContainer === spot.container && startRange.endOffset === spot.offset) {\n              return Optional.none();\n            } else if (spot.offset === 0 && ((_a = startRange.endContainer.textContent) === null || _a === void 0 ? void 0 : _a.length) === startRange.endOffset) {\n              return Optional.none();\n            }\n          }\n          return Optional.some(startRange);\n        });\n      });\n    };\n    const findPattern = (editor, block, details, normalizedMatches) => {\n      const dom = editor.dom;\n      const root = dom.getRoot();\n      const pattern = details.pattern;\n      const endNode = details.position.container;\n      const endOffset = details.position.offset;\n      return scanLeft(endNode, endOffset - details.pattern.end.length, block).bind(spot => {\n        const endPathRng = generatePathRange(dom, root, spot.container, spot.offset, endNode, endOffset, normalizedMatches);\n        if (isReplacementPattern(pattern)) {\n          return Optional.some({\n            matches: [{\n                pattern,\n                startRng: endPathRng,\n                endRng: endPathRng\n              }],\n            position: spot\n          });\n        } else {\n          const resultsOpt = findPatternsRec(editor, details.remainingPatterns, spot.container, spot.offset, block, normalizedMatches);\n          const results = resultsOpt.getOr({\n            matches: [],\n            position: spot\n          });\n          const pos = results.position;\n          const start = findPatternStart(dom, pattern, pos.container, pos.offset, block, resultsOpt.isNone());\n          return start.map(startRng => {\n            const startPathRng = generatePathRangeFromRange(dom, root, startRng, normalizedMatches);\n            return {\n              matches: results.matches.concat([{\n                  pattern,\n                  startRng: startPathRng,\n                  endRng: endPathRng\n                }]),\n              position: point(startRng.startContainer, startRng.startOffset)\n            };\n          });\n        }\n      });\n    };\n    const findPatternsRec = (editor, patterns, node, offset, block, normalizedMatches) => {\n      const dom = editor.dom;\n      return textBefore(node, offset, dom.getRoot()).bind(endSpot => {\n        const text = getBeforeText(dom, block, node, offset);\n        for (let i = 0; i < patterns.length; i++) {\n          const pattern = patterns[i];\n          if (!endsWith(text, pattern.end)) {\n            continue;\n          }\n          const patternsWithoutCurrent = patterns.slice();\n          patternsWithoutCurrent.splice(i, 1);\n          const result = findPattern(editor, block, {\n            pattern,\n            remainingPatterns: patternsWithoutCurrent,\n            position: endSpot\n          }, normalizedMatches);\n          if (result.isNone() && offset > 0) {\n            return findPatternsRec(editor, patterns, node, offset - 1, block, normalizedMatches);\n          }\n          if (result.isSome()) {\n            return result;\n          }\n        }\n        return Optional.none();\n      });\n    };\n    const applyPattern = (editor, pattern, patternRange) => {\n      editor.selection.setRng(patternRange);\n      if (pattern.type === 'inline-format') {\n        each$e(pattern.format, format => {\n          editor.formatter.apply(format);\n        });\n      } else {\n        editor.execCommand(pattern.cmd, false, pattern.value);\n      }\n    };\n    const applyReplacementPattern = (editor, pattern, marker, isRoot) => {\n      const markerRange = rangeFromMarker(editor.dom, marker);\n      deleteRng(editor.dom, markerRange, isRoot);\n      applyPattern(editor, pattern, markerRange);\n    };\n    const applyPatternWithContent = (editor, pattern, startMarker, endMarker, isRoot) => {\n      const dom = editor.dom;\n      const markerEndRange = rangeFromMarker(dom, endMarker);\n      const markerStartRange = rangeFromMarker(dom, startMarker);\n      deleteRng(dom, markerStartRange, isRoot);\n      deleteRng(dom, markerEndRange, isRoot);\n      const patternMarker = {\n        prefix: startMarker.prefix,\n        start: startMarker.end,\n        end: endMarker.start\n      };\n      const patternRange = rangeFromMarker(dom, patternMarker);\n      applyPattern(editor, pattern, patternRange);\n    };\n    const addMarkers = (dom, matches) => {\n      const markerPrefix = generate$1('mce_textpattern');\n      const matchesWithEnds = foldr(matches, (acc, match) => {\n        const endMarker = createMarker(dom, markerPrefix + `_end${ acc.length }`, match.endRng);\n        return acc.concat([{\n            ...match,\n            endMarker\n          }]);\n      }, []);\n      return foldr(matchesWithEnds, (acc, match) => {\n        const idx = matchesWithEnds.length - acc.length - 1;\n        const startMarker = isReplacementPattern(match.pattern) ? match.endMarker : createMarker(dom, markerPrefix + `_start${ idx }`, match.startRng);\n        return acc.concat([{\n            ...match,\n            startMarker\n          }]);\n      }, []);\n    };\n    const sortPatterns = patterns => sort(patterns, (a, b) => b.end.length - a.end.length);\n    const getBestMatches = (matches, matchesWithSortedPatterns) => {\n      const hasSameMatches = forall(matches, match => exists(matchesWithSortedPatterns, sortedMatch => match.pattern.start === sortedMatch.pattern.start && match.pattern.end === sortedMatch.pattern.end));\n      if (matches.length === matchesWithSortedPatterns.length) {\n        if (hasSameMatches) {\n          return matches;\n        } else {\n          return matchesWithSortedPatterns;\n        }\n      }\n      return matches.length > matchesWithSortedPatterns.length ? matches : matchesWithSortedPatterns;\n    };\n    const findPatterns = (editor, block, node, offset, patternSet, normalizedMatches) => {\n      const matches = findPatternsRec(editor, patternSet.inlinePatterns, node, offset, block, normalizedMatches).fold(() => [], result => result.matches);\n      const matchesWithSortedPatterns = findPatternsRec(editor, sortPatterns(patternSet.inlinePatterns), node, offset, block, normalizedMatches).fold(() => [], result => result.matches);\n      return getBestMatches(matches, matchesWithSortedPatterns);\n    };\n    const applyMatches = (editor, matches) => {\n      if (matches.length === 0) {\n        return;\n      }\n      const dom = editor.dom;\n      const bookmark = editor.selection.getBookmark();\n      const matchesWithMarkers = addMarkers(dom, matches);\n      each$e(matchesWithMarkers, match => {\n        const block = dom.getParent(match.startMarker.start, dom.isBlock);\n        const isRoot = node => node === block;\n        if (isReplacementPattern(match.pattern)) {\n          applyReplacementPattern(editor, match.pattern, match.endMarker, isRoot);\n        } else {\n          applyPatternWithContent(editor, match.pattern, match.startMarker, match.endMarker, isRoot);\n        }\n        removeMarker(dom, match.endMarker, isRoot);\n        removeMarker(dom, match.startMarker, isRoot);\n      });\n      editor.selection.moveToBookmark(bookmark);\n    };\n\n    const handleEnter = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      return getParentBlock(editor, rng).map(block => {\n        var _a;\n        const offset = Math.max(0, rng.startOffset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, (_a = block.textContent) !== null && _a !== void 0 ? _a : '');\n        const inlineMatches = findPatterns(editor, block, rng.startContainer, offset, dynamicPatternSet, true);\n        const blockMatches = findPatterns$1(editor, block, dynamicPatternSet, true);\n        if (blockMatches.length > 0 || inlineMatches.length > 0) {\n          editor.undoManager.add();\n          editor.undoManager.extra(() => {\n            editor.execCommand('mceInsertNewLine');\n          }, () => {\n            insert$5(editor);\n            applyMatches(editor, inlineMatches);\n            applyMatches$1(editor, blockMatches);\n            const range = editor.selection.getRng();\n            const spot = textBefore(range.startContainer, range.startOffset, editor.dom.getRoot());\n            editor.execCommand('mceInsertNewLine');\n            spot.each(s => {\n              const node = s.container;\n              if (node.data.charAt(s.offset - 1) === zeroWidth) {\n                node.deleteData(s.offset - 1, 1);\n                cleanEmptyNodes(editor.dom, node.parentNode, e => e === editor.dom.getRoot());\n              }\n            });\n          });\n          return true;\n        }\n        return false;\n      }).getOr(false);\n    };\n    const handleInlineKey = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      getParentBlock(editor, rng).map(block => {\n        const offset = Math.max(0, rng.startOffset - 1);\n        const beforeText = getBeforeText(editor.dom, block, rng.startContainer, offset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, beforeText);\n        const inlineMatches = findPatterns(editor, block, rng.startContainer, offset, dynamicPatternSet, false);\n        if (inlineMatches.length > 0) {\n          editor.undoManager.transact(() => {\n            applyMatches(editor, inlineMatches);\n          });\n        }\n      });\n    };\n    const checkKeyEvent = (codes, event, predicate) => {\n      for (let i = 0; i < codes.length; i++) {\n        if (predicate(codes[i], event)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const checkKeyCode = (codes, event) => checkKeyEvent(codes, event, (code, event) => {\n      return code === event.keyCode && !VK.modifierPressed(event);\n    });\n    const checkCharCode = (chars, event) => checkKeyEvent(chars, event, (chr, event) => {\n      return chr.charCodeAt(0) === event.charCode;\n    });\n\n    const setup$2 = editor => {\n      const charCodes = [\n        ',',\n        '.',\n        ';',\n        ':',\n        '!',\n        '?'\n      ];\n      const keyCodes = [32];\n      const getPatternSet = () => createPatternSet(getTextPatterns(editor), getTextPatternsLookup(editor));\n      const hasDynamicPatterns = () => hasTextPatternsLookup(editor);\n      editor.on('keydown', e => {\n        if (e.keyCode === 13 && !VK.modifierPressed(e) && editor.selection.isCollapsed()) {\n          const patternSet = getPatternSet();\n          const hasPatterns = patternSet.inlinePatterns.length > 0 || patternSet.blockPatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns && handleEnter(editor, patternSet)) {\n            e.preventDefault();\n          }\n        }\n      }, true);\n      const handleInlineTrigger = () => {\n        if (editor.selection.isCollapsed()) {\n          const patternSet = getPatternSet();\n          const hasPatterns = patternSet.inlinePatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns) {\n            handleInlineKey(editor, patternSet);\n          }\n        }\n      };\n      editor.on('keyup', e => {\n        if (checkKeyCode(keyCodes, e)) {\n          handleInlineTrigger();\n        }\n      });\n      editor.on('keypress', e => {\n        if (checkCharCode(charCodes, e)) {\n          Delay.setEditorTimeout(editor, handleInlineTrigger);\n        }\n      });\n    };\n\n    const setup$1 = editor => {\n      setup$2(editor);\n    };\n\n    const Quirks = editor => {\n      const each = Tools.each;\n      const BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      const browser = Env.browser;\n      const isGecko = browser.isFirefox();\n      const isWebKit = browser.isChromium() || browser.isSafari();\n      const isiOS = Env.deviceType.isiPhone() || Env.deviceType.isiPad();\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      const setEditorCommandState = (cmd, state) => {\n        try {\n          editor.getDoc().execCommand(cmd, false, String(state));\n        } catch (ex) {\n        }\n      };\n      const isDefaultPrevented = e => {\n        return e.isDefaultPrevented();\n      };\n      const emptyEditorWhenDeleting = () => {\n        const serializeRng = rng => {\n          const body = dom.create('body');\n          const contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        const allContentsSelected = rng => {\n          const selection = serializeRng(rng);\n          const allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          const allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', e => {\n          const keyCode = e.keyCode;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE) && editor.selection.isEditable()) {\n            const isCollapsed = editor.selection.isCollapsed();\n            const body = editor.getBody();\n            if (isCollapsed && !isEmpty$2(SugarElement.fromDom(body))) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      const selectAll = () => {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      const documentElementEditingFocus = () => {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', e => {\n            let rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      const removeHrOnBackspace = () => {\n        editor.on('keydown', e => {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              const node = selection.getNode();\n              const previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      const focusBody = () => {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', e => {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              const body = editor.getBody();\n              body.blur();\n              Delay.setEditorTimeout(editor, () => {\n                body.focus();\n              });\n            }\n          });\n        }\n      };\n      const selectControlElements = () => {\n        const visualAidsAnchorClass = getVisualAidsAnchorClass(editor);\n        editor.on('click', e => {\n          const target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.isEditable(target)) {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, visualAidsAnchorClass) && target.childNodes.length === 0 && dom.isEditable(target.parentNode)) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      const removeStylesWhenDeletingAcrossBlockElements = () => {\n        const getAttributeApplyFunction = () => {\n          const template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return () => {\n            const target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, attr => {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        const isSelectionAcrossElements = () => {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', e => {\n          let applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          } else {\n            return true;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', e => {\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            const applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, () => {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      const disableBackspaceIntoATable = () => {\n        editor.on('keydown', e => {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              const previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n          return true;\n        });\n      };\n      const removeBlockQuoteOnBackSpace = () => {\n        editor.on('keydown', e => {\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          let rng = selection.getRng();\n          const container = rng.startContainer;\n          const offset = rng.startOffset;\n          const root = dom.getRoot();\n          let parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.nodeName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', undefined, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      const setGeckoEditingOptions = () => {\n        const setOpts = () => {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      const addBrAfterLastLinks = () => {\n        const fixLinks = () => {\n          each(dom.select('a:not([data-mce-block])'), node => {\n            var _a;\n            let parentNode = node.parentNode;\n            const root = dom.getRoot();\n            if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.lastChild) === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (((_a = parentNode.parentNode) === null || _a === void 0 ? void 0 : _a.lastChild) !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', e => {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      const setDefaultBlockType = () => {\n        editor.on('init', () => {\n          setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n        });\n      };\n      const isAllContentSelected = editor => {\n        const body = editor.getBody();\n        const rng = editor.selection.getRng();\n        return rng.startContainer === rng.endContainer && rng.startContainer === body && rng.startOffset === 0 && rng.endOffset === body.childNodes.length;\n      };\n      const normalizeSelection = () => {\n        editor.on('keyup focusin mouseup', e => {\n          if (!VK.modifierPressed(e) && !isAllContentSelected(editor)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      const showBrokenImageIcon = () => {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      const restoreFocusOnKeyDown = () => {\n        if (!editor.inline) {\n          editor.on('keydown', () => {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      const bodyHeight = () => {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', e => {\n            let rng;\n            if (e.target.nodeName === 'HTML') {\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      const blockCmdArrowNavigation = () => {\n        if (isMac) {\n          editor.on('keydown', e => {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              const selection = editor.selection.getSel();\n              selection.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      const tapLinksAndImages = () => {\n        editor.on('click', e => {\n          let elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      const blockFormSubmitInsideEditor = () => {\n        editor.on('init', () => {\n          editor.dom.bind(editor.getBody(), 'submit', e => {\n            e.preventDefault();\n          });\n        });\n      };\n      const removeAppleInterchangeBrs = () => {\n        parser.addNodeFilter('br', nodes => {\n          let i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      const refreshContentEditable = noop;\n      const isHidden = () => {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        const sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      const setupRtc = () => {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (isiOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      const dropDragEndEvent = () => {\n        editor.on('drop', event => {\n          var _a;\n          const data = (_a = event.dataTransfer) === null || _a === void 0 ? void 0 : _a.getData('text/html');\n          if (isString(data) && /^<img[^>]*>$/.test(data)) {\n            editor.dispatch('dragend', new window.DragEvent('dragend', event));\n          }\n        });\n      };\n      const setup = () => {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (isiOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n          dropDragEndEvent();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable,\n        isHidden\n      };\n    };\n\n    const DOM$6 = DOMUtils.DOM;\n    const appendStyle = (editor, text) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const container = getStyleContainer(getRootNode(body));\n      const style = SugarElement.fromTag('style');\n      set$3(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', () => {\n        remove$5(style);\n      });\n    };\n    const getRootName = editor => editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    const removeUndefined = obj => filter$4(obj, v => isUndefined(v) === false);\n    const mkParserSettings = editor => {\n      const getOption = editor.options.get;\n      const blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: getOption('allow_conditional_comments'),\n        allow_html_data_urls: getOption('allow_html_data_urls'),\n        allow_svg_data_urls: getOption('allow_svg_data_urls'),\n        allow_html_in_named_anchor: getOption('allow_html_in_named_anchor'),\n        allow_script_urls: getOption('allow_script_urls'),\n        allow_unsafe_link_target: getOption('allow_unsafe_link_target'),\n        convert_unsafe_embeds: getOption('convert_unsafe_embeds'),\n        convert_fonts_to_spans: getOption('convert_fonts_to_spans'),\n        fix_list_elements: getOption('fix_list_elements'),\n        font_size_legacy_values: getOption('font_size_legacy_values'),\n        forced_root_block: getOption('forced_root_block'),\n        forced_root_block_attrs: getOption('forced_root_block_attrs'),\n        preserve_cdata: getOption('preserve_cdata'),\n        inline_styles: getOption('inline_styles'),\n        root_name: getRootName(editor),\n        sandbox_iframes: getOption('sandbox_iframes'),\n        sanitize: getOption('xss_sanitization'),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc()\n      });\n    };\n    const mkSchemaSettings = editor => {\n      const getOption = editor.options.get;\n      return removeUndefined({\n        custom_elements: getOption('custom_elements'),\n        extended_valid_elements: getOption('extended_valid_elements'),\n        invalid_elements: getOption('invalid_elements'),\n        invalid_styles: getOption('invalid_styles'),\n        schema: getOption('schema'),\n        valid_children: getOption('valid_children'),\n        valid_classes: getOption('valid_classes'),\n        valid_elements: getOption('valid_elements'),\n        valid_styles: getOption('valid_styles'),\n        verify_html: getOption('verify_html'),\n        padd_empty_block_inline_children: getOption('format_empty_lines')\n      });\n    };\n    const mkSerializerSettings = editor => {\n      const getOption = editor.options.get;\n      return {\n        ...mkParserSettings(editor),\n        ...mkSchemaSettings(editor),\n        ...removeUndefined({\n          remove_trailing_brs: getOption('remove_trailing_brs'),\n          pad_empty_with_br: getOption('pad_empty_with_br'),\n          url_converter: getOption('url_converter'),\n          url_converter_scope: getOption('url_converter_scope'),\n          element_format: getOption('element_format'),\n          entities: getOption('entities'),\n          entity_encoding: getOption('entity_encoding'),\n          indent: getOption('indent'),\n          indent_after: getOption('indent_after'),\n          indent_before: getOption('indent_before')\n        })\n      };\n    };\n    const createParser = editor => {\n      const parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', (nodes, name) => {\n        const dom = editor.dom;\n        const internalName = 'data-mce-' + name;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (shouldPreserveCData(editor)) {\n        parser.addNodeFilter('#cdata', nodes => {\n          var _a;\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode((_a = node.value) !== null && _a !== void 0 ? _a : '') + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', nodes => {\n        let i = nodes.length;\n        const nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          const node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1));\n          }\n        }\n      });\n      return parser;\n    };\n    const autoFocus = editor => {\n      const autoFocus = getAutoFocus(editor);\n      if (autoFocus) {\n        Delay.setEditorTimeout(editor, () => {\n          let focusEditor;\n          if (autoFocus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(autoFocus);\n          }\n          if (focusEditor && !focusEditor.destroyed) {\n            focusEditor.focus();\n            focusEditor.selection.scrollIntoView();\n          }\n        }, 100);\n      }\n    };\n    const moveSelectionToFirstCaretPosition = editor => {\n      const root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(pos => {\n          const node = pos.getNode();\n          const caretPos = isTable$2(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    const initEditor = editor => {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      const initInstanceCallback = getInitInstanceCallback(editor);\n      if (isFunction(initInstanceCallback)) {\n        initInstanceCallback.call(editor, editor);\n      }\n      autoFocus(editor);\n    };\n    const getStyleSheetLoader$1 = editor => editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    const makeStylesheetLoadingPromises = (editor, css, framedFonts) => {\n      const {\n        pass: bundledCss,\n        fail: normalCss\n      } = partition$2(css, name => tinymce.Resource.has(toContentSkinResourceName(name)));\n      const bundledPromises = bundledCss.map(url => {\n        const css = tinymce.Resource.get(toContentSkinResourceName(url));\n        if (isString(css)) {\n          return Promise.resolve(getStyleSheetLoader$1(editor).loadRawCss(url, css));\n        }\n        return Promise.resolve();\n      });\n      const promises = [\n        ...bundledPromises,\n        getStyleSheetLoader$1(editor).loadAll(normalCss)\n      ];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([editor.ui.styleSheetLoader.loadAll(framedFonts)]);\n      }\n    };\n    const loadContentCss = editor => {\n      const styleSheetLoader = getStyleSheetLoader$1(editor);\n      const fontCss = getFontCss(editor);\n      const css = editor.contentCSS;\n      const removeCss = () => {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      const loaded = () => {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        let contentCssText = '';\n        Tools.each(editor.contentStyles, style => {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      const allStylesheets = Promise.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      const contentStyle = getContentStyle(editor);\n      if (contentStyle) {\n        appendStyle(editor, contentStyle);\n      }\n      return allStylesheets;\n    };\n    const preInit = editor => {\n      const doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!shouldBrowserSpellcheck(editor)) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      const directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      const protect = getProtect(editor);\n      if (protect) {\n        editor.on('BeforeSetContent', e => {\n          Tools.each(protect, pattern => {\n            e.content = e.content.replace(pattern, str => {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', () => {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', e => {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    const loadInitialContent = editor => {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    const initEditorWithInitialContent = editor => {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    const startProgress = editor => {\n      let canceled = false;\n      const progressTimeout = setTimeout(() => {\n        if (!canceled) {\n          editor.setProgressState(true);\n        }\n      }, 500);\n      return () => {\n        clearTimeout(progressTimeout);\n        canceled = true;\n        editor.setProgressState(false);\n      };\n    };\n    const contentBodyLoaded = editor => {\n      const targetElm = editor.getElement();\n      let doc = editor.getDoc();\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      const body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = isReadOnly$1(editor);\n      editor._editableRoot = hasEditableRoot$1(editor);\n      if (!editor.readonly && editor.hasEditableRoot()) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = 'true';\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: editor.inline,\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: e => {\n          editor.dispatch('SetAttrib', e);\n        },\n        force_hex_color: shouldForceHexColor(editor)\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$p(editor);\n      setup$6(editor);\n      setup$n(editor);\n      if (!isRtc(editor)) {\n        setup$5(editor);\n        setup$1(editor);\n      }\n      const caret = setup$b(editor);\n      setup$q(editor, caret);\n      setup$o(editor);\n      setup$r(editor);\n      setup$7(editor);\n      const setupRtcThunk = setup$t(editor);\n      preInit(editor);\n      setupRtcThunk.fold(() => {\n        const cancelProgress = startProgress(editor);\n        loadContentCss(editor).then(() => {\n          initEditorWithInitialContent(editor);\n          cancelProgress();\n        });\n      }, setupRtc => {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(() => {\n          setupRtc().then(_rtcMode => {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n            bindEvents(editor);\n          }, err => {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n            bindEvents(editor);\n          });\n        });\n      });\n    };\n\n    const filter = always;\n    const bind = (element, event, handler) => bind$2(element, event, filter, handler);\n\n    const DOM$5 = DOMUtils.DOM;\n    const createIframeElement = (id, title, customAttrs, tabindex) => {\n      const iframe = SugarElement.fromTag('iframe');\n      tabindex.each(t => set$3(iframe, 'tabindex', t));\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title\n      });\n      add$2(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    const getIframeHtml = editor => {\n      let iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      const bodyId = getBodyId(editor);\n      const bodyClass = getBodyClass(editor);\n      const translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + `<body id=\"${ bodyId }\" class=\"mce-content-body ${ bodyClass }\" data-id=\"${ editor.id }\" aria-label=\"${ translatedAriaText }\">` + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    const createIframe = (editor, boxInfo) => {\n      const iframeTitle = editor.translate('Rich Text Area');\n      const tabindex = getOpt(SugarElement.fromDom(editor.getElement()), 'tabindex').bind(toInt);\n      const ifr = createIframeElement(editor.id, iframeTitle, getIframeAttrs(editor), tabindex).dom;\n      ifr.onload = () => {\n        ifr.onload = null;\n        editor.dispatch('load');\n      };\n      editor.contentAreaContainer = boxInfo.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(boxInfo.iframeContainer, ifr);\n    };\n    const setupIframeBody = editor => {\n      const iframe = editor.iframeElement;\n      const ready = () => {\n        editor.contentDocument = iframe.contentDocument;\n        contentBodyLoaded(editor);\n      };\n      if (shouldUseDocumentWrite(editor) || Env.browser.isFirefox()) {\n        const doc = editor.getDoc();\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n        ready();\n      } else {\n        const binder = bind(SugarElement.fromDom(iframe), 'load', () => {\n          binder.unbind();\n          ready();\n        });\n        iframe.srcdoc = editor.iframeHTML;\n      }\n    };\n    const init$1 = (editor, boxInfo) => {\n      createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        boxInfo.editorContainer.style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      editor.getElement().style.visibility = editor.orgVisibility;\n      setupIframeBody(editor);\n    };\n\n    const DOM$4 = DOMUtils.DOM;\n    const initPlugin = (editor, initializedPlugins, plugin) => {\n      const Plugin = PluginManager.get(plugin);\n      const pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          const pluginInstance = Plugin(editor, pluginUrl) || {};\n          editor.plugins[plugin] = pluginInstance;\n          if (isFunction(pluginInstance.init)) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    const trimLegacyPrefix = name => {\n      return name.replace(/^\\-/, '');\n    };\n    const initPlugins = editor => {\n      const initializedPlugins = [];\n      each$e(getPlugins(editor), name => {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    const initIcons = editor => {\n      const iconPackName = Tools.trim(getIconPackName(editor));\n      const currentIcons = editor.ui.registry.getAll().icons;\n      const loadIcons = {\n        ...IconManager.get('default').icons,\n        ...IconManager.get(iconPackName).icons\n      };\n      each$d(loadIcons, (svgData, icon) => {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    const initTheme = editor => {\n      const theme = getTheme(editor);\n      if (isString(theme)) {\n        const Theme = ThemeManager.get(theme);\n        editor.theme = Theme(editor, ThemeManager.urls[theme]) || {};\n        if (isFunction(editor.theme.init)) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''));\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    const initModel = editor => {\n      const model = getModel(editor);\n      const Model = ModelManager.get(model);\n      editor.model = Model(editor, ModelManager.urls[model]);\n    };\n    const renderFromLoadedTheme = editor => {\n      const render = editor.theme.renderUI;\n      return render ? render() : renderThemeFalse(editor);\n    };\n    const renderFromThemeFunc = editor => {\n      const elm = editor.getElement();\n      const theme = getTheme(editor);\n      const info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    const createThemeFalseResult = (element, iframe) => {\n      return {\n        editorContainer: element,\n        iframeContainer: iframe,\n        api: {}\n      };\n    };\n    const renderThemeFalseIframe = targetElement => {\n      const iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer, iframeContainer);\n    };\n    const renderThemeFalse = editor => {\n      const targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    const renderThemeUi = editor => {\n      const elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    const augmentEditorUiApi = (editor, api) => {\n      const uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        isEnabled: Optional.from(api.isEnabled).getOr(always),\n        setEnabled: state => {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.setEnabled).each(f => f(state));\n          }\n        }\n      };\n      editor.ui = {\n        ...editor.ui,\n        ...uiApiFacade\n      };\n    };\n    const init = async editor => {\n      editor.dispatch('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initModel(editor);\n      initPlugins(editor);\n      const renderInfo = await renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      editor.editorContainer = renderInfo.editorContainer;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        contentBodyLoaded(editor);\n      } else {\n        init$1(editor, {\n          editorContainer: renderInfo.editorContainer,\n          iframeContainer: renderInfo.iframeContainer\n        });\n      }\n    };\n\n    const DOM$3 = DOMUtils.DOM;\n    const hasSkipLoadPrefix = name => name.charAt(0) === '-';\n    const loadLanguage = (scriptLoader, editor) => {\n      const languageCode = getLanguageCode(editor);\n      const languageUrl = getLanguageUrl(editor);\n      if (!I18n.hasCode(languageCode) && languageCode !== 'en') {\n        const url = isNotEmpty(languageUrl) ? languageUrl : `${ editor.editorManager.baseURL }/langs/${ languageCode }.js`;\n        scriptLoader.add(url).catch(() => {\n          languageLoadError(editor, url, languageCode);\n        });\n      }\n    };\n    const loadTheme = (editor, suffix) => {\n      const theme = getTheme(editor);\n      if (isString(theme) && !hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n        const themeUrl = getThemeUrl(editor);\n        const url = themeUrl ? editor.documentBaseURI.toAbsolute(themeUrl) : `themes/${ theme }/theme${ suffix }.js`;\n        ThemeManager.load(theme, url).catch(() => {\n          themeLoadError(editor, url, theme);\n        });\n      }\n    };\n    const loadModel = (editor, suffix) => {\n      const model = getModel(editor);\n      if (model !== 'plugin' && !has$2(ModelManager.urls, model)) {\n        const modelUrl = getModelUrl(editor);\n        const url = isString(modelUrl) ? editor.documentBaseURI.toAbsolute(modelUrl) : `models/${ model }/model${ suffix }.js`;\n        ModelManager.load(model, url).catch(() => {\n          modelLoadError(editor, url, model);\n        });\n      }\n    };\n    const getIconsUrlMetaFromUrl = editor => Optional.from(getIconsUrl(editor)).filter(isNotEmpty).map(url => ({\n      url,\n      name: Optional.none()\n    }));\n    const getIconsUrlMetaFromName = (editor, name, suffix) => Optional.from(name).filter(name => isNotEmpty(name) && !IconManager.has(name)).map(name => ({\n      url: `${ editor.editorManager.baseURL }/icons/${ name }/icons${ suffix }.js`,\n      name: Optional.some(name)\n    }));\n    const loadIcons = (scriptLoader, editor, suffix) => {\n      const defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      const customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(() => getIconsUrlMetaFromName(editor, getIconPackName(editor), ''));\n      each$e(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), urlMeta => {\n        scriptLoader.add(urlMeta.url).catch(() => {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    const loadPlugins = (editor, suffix) => {\n      const loadPlugin = (name, url) => {\n        PluginManager.load(name, url).catch(() => {\n          pluginLoadError(editor, url, name);\n        });\n      };\n      each$d(getExternalPlugins$1(editor), (url, name) => {\n        loadPlugin(name, url);\n        editor.options.set('plugins', getPlugins(editor).concat(name));\n      });\n      each$e(getPlugins(editor), plugin => {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin] && !hasSkipLoadPrefix(plugin)) {\n          loadPlugin(plugin, `plugins/${ plugin }/plugin${ suffix }.js`);\n        }\n      });\n    };\n    const isThemeLoaded = editor => {\n      const theme = getTheme(editor);\n      return !isString(theme) || isNonNullable(ThemeManager.get(theme));\n    };\n    const isModelLoaded = editor => {\n      const model = getModel(editor);\n      return isNonNullable(ModelManager.get(model));\n    };\n    const loadScripts = (editor, suffix) => {\n      const scriptLoader = ScriptLoader.ScriptLoader;\n      const initEditor = () => {\n        if (!editor.removed && isThemeLoaded(editor) && isModelLoaded(editor)) {\n          init(editor);\n        }\n      };\n      loadTheme(editor, suffix);\n      loadModel(editor, suffix);\n      loadLanguage(scriptLoader, editor);\n      loadIcons(scriptLoader, editor, suffix);\n      loadPlugins(editor, suffix);\n      scriptLoader.loadQueue().then(initEditor, initEditor);\n    };\n    const getStyleSheetLoader = (element, editor) => instance.forElement(element, {\n      contentCssCors: hasContentCssCors(editor),\n      referrerPolicy: getReferrerPolicy(editor)\n    });\n    const render = editor => {\n      const id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      const readyHandler = () => {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      const element = SugarElement.fromDom(editor.getElement());\n      const snapshot = clone$4(element);\n      editor.on('remove', () => {\n        eachr(element.dom.attributes, attr => remove$a(element, attr.name));\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline$1(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      const form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = e => {\n          editor.dispatch(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', () => {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = () => {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', e => {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', () => {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = () => {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    const setEditableRoot = (editor, state) => {\n      if (editor._editableRoot !== state) {\n        editor._editableRoot = state;\n        if (!editor.readonly) {\n          editor.getBody().contentEditable = String(editor.hasEditableRoot());\n          editor.nodeChanged();\n        }\n        fireEditableRootStateChange(editor, state);\n      }\n    };\n    const hasEditableRoot = editor => editor._editableRoot;\n\n    const sectionResult = (sections, settings) => ({\n      sections: constant(sections),\n      options: constant(settings)\n    });\n    const deviceDetection = detect$2().deviceType;\n    const isPhone = deviceDetection.isPhone();\n    const isTablet = deviceDetection.isTablet();\n    const normalizePlugins = plugins => {\n      if (isNullable(plugins)) {\n        return [];\n      } else {\n        const pluginNames = isArray$1(plugins) ? plugins : plugins.split(/[ ,]/);\n        const trimmedPlugins = map$3(pluginNames, trim$4);\n        return filter$5(trimmedPlugins, isNotEmpty);\n      }\n    };\n    const extractSections = (keys, options) => {\n      const result = bifilter(options, (value, key) => {\n        return contains$2(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    const getSection = (sectionResult, name, defaults = {}) => {\n      const sections = sectionResult.sections();\n      const sectionOptions = get$a(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionOptions);\n    };\n    const hasSection = (sectionResult, name) => {\n      return has$2(sectionResult.sections(), name);\n    };\n    const getSectionConfig = (sectionResult, name) => {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    const getMobileOverrideOptions = (mobileOptions, isPhone) => {\n      const defaultMobileOptions = {\n        table_grid: false,\n        object_resizing: false,\n        resize: false,\n        toolbar_mode: get$a(mobileOptions, 'toolbar_mode').getOr('scrolling'),\n        toolbar_sticky: false\n      };\n      const defaultPhoneOptions = { menubar: false };\n      return {\n        ...defaultMobileOptions,\n        ...isPhone ? defaultPhoneOptions : {}\n      };\n    };\n    const getExternalPlugins = (overrideOptions, options) => {\n      var _a;\n      const userDefinedExternalPlugins = (_a = options.external_plugins) !== null && _a !== void 0 ? _a : {};\n      if (overrideOptions && overrideOptions.external_plugins) {\n        return Tools.extend({}, overrideOptions.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    const combinePlugins = (forcedPlugins, plugins) => [\n      ...normalizePlugins(forcedPlugins),\n      ...normalizePlugins(plugins)\n    ];\n    const getPlatformPlugins = (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) => {\n      if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    const processPlugins = (isMobileDevice, sectionResult, defaultOverrideOptions, options) => {\n      const forcedPlugins = normalizePlugins(defaultOverrideOptions.forced_plugins);\n      const desktopPlugins = normalizePlugins(options.plugins);\n      const mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      const mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      const platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      const combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(options, {\n        forced_plugins: forcedPlugins,\n        plugins: combinedPlugins\n      });\n    };\n    const isOnMobile = (isMobileDevice, sectionResult) => {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    const combineOptions = (isMobileDevice, isPhone, defaultOptions, defaultOverrideOptions, options) => {\n      var _a;\n      const deviceOverrideOptions = isMobileDevice ? { mobile: getMobileOverrideOptions((_a = options.mobile) !== null && _a !== void 0 ? _a : {}, isPhone) } : {};\n      const sectionResult = extractSections(['mobile'], deepMerge(deviceOverrideOptions, options));\n      const extendedOptions = Tools.extend(defaultOptions, defaultOverrideOptions, sectionResult.options(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, { external_plugins: getExternalPlugins(defaultOverrideOptions, sectionResult.options()) });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideOptions, extendedOptions);\n    };\n    const normalizeOptions = (defaultOverrideOptions, options) => combineOptions(isPhone || isTablet, isPhone, options, defaultOverrideOptions, options);\n\n    const addVisual = (editor, elm) => addVisual$1(editor, elm);\n\n    const registerExecCommands$3 = editor => {\n      const toggleFormat = (name, value) => {\n        editor.formatter.toggle(name, value);\n        editor.nodeChanged();\n      };\n      const toggleAlign = align => () => {\n        each$e('left,center,right,justify'.split(','), name => {\n          if (align !== name) {\n            editor.formatter.remove('align' + name);\n          }\n        });\n        if (align !== 'none') {\n          toggleFormat('align' + align);\n        }\n      };\n      editor.editorCommands.addCommands({\n        JustifyLeft: toggleAlign('left'),\n        JustifyCenter: toggleAlign('center'),\n        JustifyRight: toggleAlign('right'),\n        JustifyFull: toggleAlign('justify'),\n        JustifyNone: toggleAlign('none')\n      });\n    };\n    const registerQueryStateCommands$1 = editor => {\n      const alignStates = name => () => {\n        const selection = editor.selection;\n        const nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n        return exists(nodes, node => isNonNullable(editor.formatter.matchNode(node, name)));\n      };\n      editor.editorCommands.addCommands({\n        JustifyLeft: alignStates('alignleft'),\n        JustifyCenter: alignStates('aligncenter'),\n        JustifyRight: alignStates('alignright'),\n        JustifyFull: alignStates('alignjustify')\n      }, 'state');\n    };\n    const registerCommands$b = editor => {\n      registerExecCommands$3(editor);\n      registerQueryStateCommands$1(editor);\n    };\n\n    const registerCommands$a = editor => {\n      editor.editorCommands.addCommands({\n        'Cut,Copy,Paste': command => {\n          const doc = editor.getDoc();\n          let failed;\n          try {\n            doc.execCommand(command);\n          } catch (ex) {\n            failed = true;\n          }\n          if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n            failed = true;\n          }\n          if (failed || !doc.queryCommandSupported(command)) {\n            let msg = editor.translate(`Your browser doesn't support direct access to the clipboard. ` + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n            if (Env.os.isMacOS() || Env.os.isiOS()) {\n              msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n            }\n            editor.notificationManager.open({\n              text: msg,\n              type: 'error'\n            });\n          }\n        }\n      });\n    };\n\n    const trimOrPadLeftRight = (dom, rng, html, schema) => {\n      const root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng), schema)) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng), schema)) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    const processValue$1 = value => {\n      if (typeof value !== 'string') {\n        const details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    const trimOrPad = (editor, value) => {\n      const selection = editor.selection;\n      const dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        return trimOrPadLeftRight(dom, selection.getRng(), value, editor.schema);\n      } else {\n        return value;\n      }\n    };\n    const insertAtCaret = (editor, value) => {\n      if (editor.selection.isEditable()) {\n        const {content, details} = processValue$1(value);\n        preProcessSetContent(editor, {\n          ...details,\n          content: trimOrPad(editor, content),\n          format: 'html',\n          set: false,\n          selection: true\n        }).each(args => {\n          const insertedContent = insertContent$1(editor, args.content, details);\n          postProcessSetContent(editor, insertedContent, args);\n          editor.addVisual();\n        });\n      }\n    };\n\n    const registerCommands$9 = editor => {\n      editor.editorCommands.addCommands({\n        mceCleanup: () => {\n          const bm = editor.selection.getBookmark();\n          editor.setContent(editor.getContent());\n          editor.selection.moveToBookmark(bm);\n        },\n        insertImage: (_command, _ui, value) => {\n          insertAtCaret(editor, editor.dom.createHTML('img', { src: value }));\n        },\n        insertHorizontalRule: () => {\n          editor.execCommand('mceInsertContent', false, '<hr>');\n        },\n        insertText: (_command, _ui, value) => {\n          insertAtCaret(editor, editor.dom.encode(value));\n        },\n        insertHTML: (_command, _ui, value) => {\n          insertAtCaret(editor, value);\n        },\n        mceInsertContent: (_command, _ui, value) => {\n          insertAtCaret(editor, value);\n        },\n        mceSetContent: (_command, _ui, value) => {\n          editor.setContent(value);\n        },\n        mceReplaceContent: (_command, _ui, value) => {\n          editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n        },\n        mceNewDocument: () => {\n          editor.setContent(getNewDocumentContent(editor));\n        }\n      });\n    };\n\n    const legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    const isFont = isTag('font');\n    const getSpecifiedFontProp = (propName, rootElm, elm) => {\n      const getProperty = elm => getRaw(elm, propName).orThunk(() => {\n        if (isFont(elm)) {\n          return get$a(legacyPropNames, propName).bind(legacyPropName => getOpt(elm, legacyPropName));\n        } else {\n          return Optional.none();\n        }\n      });\n      const isRoot = elm => eq(SugarElement.fromDom(rootElm), elm);\n      return closest$1(SugarElement.fromDom(elm), elm => getProperty(elm), isRoot);\n    };\n    const normalizeFontFamily = fontFamily => fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    const getComputedFontProp = (propName, elm) => Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    const getFontProp = propName => (rootElm, elm) => Optional.from(elm).map(SugarElement.fromDom).filter(isElement$7).bind(element => getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom))).getOr('');\n    const getFontSize = getFontProp('font-size');\n    const getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    const findFirstCaretElement = editor => firstPositionIn(editor.getBody()).bind(caret => {\n      const container = caret.container();\n      return Optional.from(isText$a(container) ? container.parentNode : container);\n    });\n    const getCaretElement = editor => Optional.from(editor.selection.getRng()).bind(rng => {\n      const root = editor.getBody();\n      const atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n      return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n    });\n    const bindRange = (editor, binder) => getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$7).bind(binder);\n    const mapRange = (editor, mapper) => bindRange(editor, compose1(Optional.some, mapper));\n\n    const fromFontSizeNumber = (editor, value) => {\n      if (/^[0-9.]+$/.test(value)) {\n        const fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          const fontSizes = getFontStyleValues(editor);\n          const fontClasses = getFontSizeClasses(editor);\n          if (fontClasses.length > 0) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    const normalizeFontNames = font => {\n      const fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, font => {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, `'`))) {\n          return `'${ font }'`;\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    const fontNameAction = (editor, value) => {\n      const font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    const fontNameQuery = editor => mapRange(editor, elm => getFontFamily(editor.getBody(), elm.dom)).getOr('');\n    const fontSizeAction = (editor, value) => {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    const fontSizeQuery = editor => mapRange(editor, elm => getFontSize(editor.getBody(), elm.dom)).getOr('');\n\n    const lineHeightQuery = editor => mapRange(editor, elm => {\n      const root = SugarElement.fromDom(editor.getBody());\n      const specifiedStyle = closest$1(elm, elm => getRaw(elm, 'line-height'), curry(eq, root));\n      const computedStyle = () => {\n        const lineHeight = parseFloat(get$7(elm, 'line-height'));\n        const fontSize = parseFloat(get$7(elm, 'font-size'));\n        return String(lineHeight / fontSize);\n      };\n      return specifiedStyle.getOrThunk(computedStyle);\n    }).getOr('');\n    const lineHeightAction = (editor, lineHeight) => {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    const registerExecCommands$2 = editor => {\n      const toggleFormat = (name, value) => {\n        editor.formatter.toggle(name, value);\n        editor.nodeChanged();\n      };\n      editor.editorCommands.addCommands({\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': command => {\n          toggleFormat(command);\n        },\n        'ForeColor,HiliteColor': (command, _ui, value) => {\n          toggleFormat(command, { value });\n        },\n        'BackColor': (_command, _ui, value) => {\n          toggleFormat('hilitecolor', { value });\n        },\n        'FontName': (_command, _ui, value) => {\n          fontNameAction(editor, value);\n        },\n        'FontSize': (_command, _ui, value) => {\n          fontSizeAction(editor, value);\n        },\n        'LineHeight': (_command, _ui, value) => {\n          lineHeightAction(editor, value);\n        },\n        'Lang': (command, _ui, lang) => {\n          var _a;\n          toggleFormat(command, {\n            value: lang.code,\n            customValue: (_a = lang.customCode) !== null && _a !== void 0 ? _a : null\n          });\n        },\n        'RemoveFormat': command => {\n          editor.formatter.remove(command);\n        },\n        'mceBlockQuote': () => {\n          toggleFormat('blockquote');\n        },\n        'FormatBlock': (_command, _ui, value) => {\n          toggleFormat(isString(value) ? value : 'p');\n        },\n        'mceToggleFormat': (_command, _ui, value) => {\n          toggleFormat(value);\n        }\n      });\n    };\n    const registerQueryValueCommands = editor => {\n      const isFormatMatch = name => editor.formatter.match(name);\n      editor.editorCommands.addCommands({\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': command => isFormatMatch(command),\n        'mceBlockQuote': () => isFormatMatch('blockquote')\n      }, 'state');\n      editor.editorCommands.addQueryValueHandler('FontName', () => fontNameQuery(editor));\n      editor.editorCommands.addQueryValueHandler('FontSize', () => fontSizeQuery(editor));\n      editor.editorCommands.addQueryValueHandler('LineHeight', () => lineHeightQuery(editor));\n    };\n    const registerCommands$8 = editor => {\n      registerExecCommands$2(editor);\n      registerQueryValueCommands(editor);\n    };\n\n    const registerCommands$7 = editor => {\n      editor.editorCommands.addCommands({\n        mceAddUndoLevel: () => {\n          editor.undoManager.add();\n        },\n        mceEndUndoLevel: () => {\n          editor.undoManager.add();\n        },\n        Undo: () => {\n          editor.undoManager.undo();\n        },\n        Redo: () => {\n          editor.undoManager.redo();\n        }\n      });\n    };\n\n    const registerCommands$6 = editor => {\n      editor.editorCommands.addCommands({\n        Indent: () => {\n          indent(editor);\n        },\n        Outdent: () => {\n          outdent(editor);\n        }\n      });\n      editor.editorCommands.addCommands({ Outdent: () => canOutdent(editor) }, 'state');\n    };\n\n    const registerCommands$5 = editor => {\n      const applyLinkToSelection = (_command, _ui, value) => {\n        const linkDetails = isString(value) ? { href: value } : value;\n        const anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n        if (isObject(linkDetails) && isString(linkDetails.href)) {\n          linkDetails.href = linkDetails.href.replace(/ /g, '%20');\n          if (!anchor || !linkDetails.href) {\n            editor.formatter.remove('link');\n          }\n          if (linkDetails.href) {\n            editor.formatter.apply('link', linkDetails, anchor);\n          }\n        }\n      };\n      editor.editorCommands.addCommands({\n        unlink: () => {\n          if (editor.selection.isEditable()) {\n            if (editor.selection.isCollapsed()) {\n              const elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          }\n        },\n        mceInsertLink: applyLinkToSelection,\n        createLink: applyLinkToSelection\n      });\n    };\n\n    const registerExecCommands$1 = editor => {\n      editor.editorCommands.addCommands({\n        'InsertUnorderedList,InsertOrderedList': command => {\n          editor.getDoc().execCommand(command);\n          const listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n          if (listElm) {\n            const listParent = listElm.parentNode;\n            if (listParent && /^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n              const bm = editor.selection.getBookmark();\n              editor.dom.split(listParent, listElm);\n              editor.selection.moveToBookmark(bm);\n            }\n          }\n        }\n      });\n    };\n    const registerQueryStateCommands = editor => {\n      editor.editorCommands.addCommands({\n        'InsertUnorderedList,InsertOrderedList': command => {\n          const list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n          return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n        }\n      }, 'state');\n    };\n    const registerCommands$4 = editor => {\n      registerExecCommands$1(editor);\n      registerQueryStateCommands(editor);\n    };\n\n    const getTopParentBlock = (editor, node, root, container) => {\n      const dom = editor.dom;\n      const selector = node => dom.isBlock(node) && node.parentElement === root;\n      const topParentBlock = selector(node) ? node : dom.getParent(container, selector, root);\n      return Optional.from(topParentBlock).map(SugarElement.fromDom);\n    };\n    const insert = (editor, before) => {\n      const dom = editor.dom;\n      const rng = editor.selection.getRng();\n      const node = before ? editor.selection.getStart() : editor.selection.getEnd();\n      const container = before ? rng.startContainer : rng.endContainer;\n      const root = getEditableRoot(dom, container);\n      if (!root || !root.isContentEditable) {\n        return;\n      }\n      const insertFn = before ? before$3 : after$4;\n      const newBlockName = getForcedRootBlock(editor);\n      getTopParentBlock(editor, node, root, container).each(parentBlock => {\n        const newBlock = createNewBlock(editor, container, parentBlock.dom, root, false, newBlockName);\n        insertFn(parentBlock, SugarElement.fromDom(newBlock));\n        editor.selection.setCursorLocation(newBlock, 0);\n        editor.dispatch('NewBlock', { newBlock });\n        fireInputEvent(editor, 'insertParagraph');\n      });\n    };\n    const insertBefore = editor => insert(editor, true);\n    const insertAfter = editor => insert(editor, false);\n\n    const registerCommands$3 = editor => {\n      editor.editorCommands.addCommands({\n        InsertNewBlockBefore: () => {\n          insertBefore(editor);\n        },\n        InsertNewBlockAfter: () => {\n          insertAfter(editor);\n        }\n      });\n    };\n\n    const registerCommands$2 = editor => {\n      editor.editorCommands.addCommands({\n        insertParagraph: () => {\n          insertBreak(blockbreak, editor);\n        },\n        mceInsertNewLine: (_command, _ui, value) => {\n          insert$1(editor, value);\n        },\n        InsertLineBreak: (_command, _ui, _value) => {\n          insertBreak(linebreak, editor);\n        }\n      });\n    };\n\n    const registerCommands$1 = editor => {\n      editor.editorCommands.addCommands({\n        mceSelectNodeDepth: (_command, _ui, value) => {\n          let counter = 0;\n          editor.dom.getParent(editor.selection.getNode(), node => {\n            if (isElement$6(node) && counter++ === value) {\n              editor.selection.select(node);\n              return false;\n            } else {\n              return true;\n            }\n          }, editor.getBody());\n        },\n        mceSelectNode: (_command, _ui, value) => {\n          editor.selection.select(value);\n        },\n        selectAll: () => {\n          const editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$3);\n          if (editingHost) {\n            const rng = editor.dom.createRng();\n            rng.selectNodeContents(editingHost);\n            editor.selection.setRng(rng);\n          }\n        }\n      });\n    };\n\n    const registerExecCommands = editor => {\n      editor.editorCommands.addCommands({\n        mceRemoveNode: (_command, _ui, value) => {\n          const node = value !== null && value !== void 0 ? value : editor.selection.getNode();\n          if (node !== editor.getBody()) {\n            const bm = editor.selection.getBookmark();\n            editor.dom.remove(node, true);\n            editor.selection.moveToBookmark(bm);\n          }\n        },\n        mcePrint: () => {\n          editor.getWin().print();\n        },\n        mceFocus: (_command, _ui, value) => {\n          focus(editor, value === true);\n        },\n        mceToggleVisualAid: () => {\n          editor.hasVisual = !editor.hasVisual;\n          editor.addVisual();\n        }\n      });\n    };\n    const registerCommands = editor => {\n      registerCommands$b(editor);\n      registerCommands$a(editor);\n      registerCommands$7(editor);\n      registerCommands$1(editor);\n      registerCommands$9(editor);\n      registerCommands$5(editor);\n      registerCommands$6(editor);\n      registerCommands$3(editor);\n      registerCommands$2(editor);\n      registerCommands$4(editor);\n      registerCommands$8(editor);\n      registerExecCommands(editor);\n    };\n\n    const selectionSafeCommands = ['toggleview'];\n    const isSelectionSafeCommand = command => contains$2(selectionSafeCommands, command.toLowerCase());\n    class EditorCommands {\n      constructor(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n      }\n      execCommand(command, ui = false, value, args) {\n        const editor = this.editor;\n        const lowerCaseCommand = command.toLowerCase();\n        const skipFocus = args === null || args === void 0 ? void 0 : args.skip_focus;\n        if (editor.removed) {\n          return false;\n        }\n        if (lowerCaseCommand !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(lowerCaseCommand) && !skipFocus) {\n            editor.focus();\n          } else {\n            restore(editor);\n          }\n        }\n        const eventArgs = editor.dispatch('BeforeExecCommand', {\n          command,\n          ui,\n          value\n        });\n        if (eventArgs.isDefaultPrevented()) {\n          return false;\n        }\n        const func = this.commands.exec[lowerCaseCommand];\n        if (isFunction(func)) {\n          func(lowerCaseCommand, ui, value);\n          editor.dispatch('ExecCommand', {\n            command,\n            ui,\n            value\n          });\n          return true;\n        }\n        return false;\n      }\n      queryCommandState(command) {\n        if (!isSelectionSafeCommand(command) && this.editor.quirks.isHidden() || this.editor.removed) {\n          return false;\n        }\n        const lowerCaseCommand = command.toLowerCase();\n        const func = this.commands.state[lowerCaseCommand];\n        if (isFunction(func)) {\n          return func(lowerCaseCommand);\n        }\n        return false;\n      }\n      queryCommandValue(command) {\n        if (!isSelectionSafeCommand(command) && this.editor.quirks.isHidden() || this.editor.removed) {\n          return '';\n        }\n        const lowerCaseCommand = command.toLowerCase();\n        const func = this.commands.value[lowerCaseCommand];\n        if (isFunction(func)) {\n          return func(lowerCaseCommand);\n        }\n        return '';\n      }\n      addCommands(commandList, type = 'exec') {\n        const commands = this.commands;\n        each$d(commandList, (callback, command) => {\n          each$e(command.toLowerCase().split(','), command => {\n            commands[type][command] = callback;\n          });\n        });\n      }\n      addCommand(command, callback, scope) {\n        const lowerCaseCommand = command.toLowerCase();\n        this.commands.exec[lowerCaseCommand] = (_command, ui, value) => callback.call(scope !== null && scope !== void 0 ? scope : this.editor, ui, value);\n      }\n      queryCommandSupported(command) {\n        const lowerCaseCommand = command.toLowerCase();\n        if (this.commands.exec[lowerCaseCommand]) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n      addQueryStateHandler(command, callback, scope) {\n        this.commands.state[command.toLowerCase()] = () => callback.call(scope !== null && scope !== void 0 ? scope : this.editor);\n      }\n      addQueryValueHandler(command, callback, scope) {\n        this.commands.value[command.toLowerCase()] = () => callback.call(scope !== null && scope !== void 0 ? scope : this.editor);\n      }\n    }\n\n    const internalContentEditableAttr = 'data-mce-contenteditable';\n    const toggleClass = (elm, cls, state) => {\n      if (has(elm, cls) && !state) {\n        remove$7(elm, cls);\n      } else if (state) {\n        add$2(elm, cls);\n      }\n    };\n    const setEditorCommandState = (editor, cmd, state) => {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    const setContentEditable = (elm, state) => {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    const switchOffContentEditableTrue = elm => {\n      each$e(descendants(elm, '*[contenteditable=\"true\"]'), elm => {\n        set$3(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    const switchOnContentEditableTrue = elm => {\n      each$e(descendants(elm, `*[${ internalContentEditableAttr }=\"true\"]`), elm => {\n        remove$a(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    const removeFakeSelection = editor => {\n      Optional.from(editor.selection.getNode()).each(elm => {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    const restoreFakeSelection = editor => {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    const toggleReadOnly = (editor, state) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        if (editor.hasEditableRoot()) {\n          setContentEditable(body, true);\n        }\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    const isReadOnly = editor => editor.readonly;\n    const registerFilters = editor => {\n      editor.parser.addAttributeFilter('contenteditable', nodes => {\n        if (isReadOnly(editor)) {\n          each$e(nodes, node => {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, nodes => {\n        if (isReadOnly(editor)) {\n          each$e(nodes, node => {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    const registerReadOnlyContentFilters = editor => {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', () => {\n          registerFilters(editor);\n        });\n      }\n    };\n    const isClickEvent = e => e.type === 'click';\n    const allowedEvents = ['copy'];\n    const isReadOnlyAllowedEvent = e => contains$2(allowedEvents, e.type);\n    const getAnchorHrefOpt = (editor, elm) => {\n      const isRoot = elm => eq(elm, SugarElement.fromDom(editor.getBody()));\n      return closest$3(elm, 'a', isRoot).bind(a => getOpt(a, 'href'));\n    };\n    const processReadonlyEvents = (editor, e) => {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        const elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(href => {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            const targetEl = editor.dom.select(`${ href },[name=\"${ removeLeading(href, '#') }\"]`);\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      } else if (isReadOnlyAllowedEvent(e)) {\n        editor.dispatch(e.type, e);\n      }\n    };\n    const registerReadOnlySelectionBlockers = editor => {\n      editor.on('ShowCaret', e => {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', e => {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    const nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    class EventDispatcher {\n      static isNative(name) {\n        return !!nativeEvents[name.toLowerCase()];\n      }\n      constructor(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      fire(name, args) {\n        return this.dispatch(name, args);\n      }\n      dispatch(name, args) {\n        const lcName = name.toLowerCase();\n        const event = normalize$3(lcName, args !== null && args !== void 0 ? args : {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        const handlers = this.bindings[lcName];\n        if (handlers) {\n          for (let i = 0, l = handlers.length; i < l; i++) {\n            const callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      }\n      on(name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          const wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          const names = name.toLowerCase().split(' ');\n          let i = names.length;\n          while (i--) {\n            const currentName = names[i];\n            let handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = [\n                wrappedCallback,\n                ...handlers\n              ];\n            } else {\n              handlers = [\n                ...handlers,\n                wrappedCallback\n              ];\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      }\n      off(name, callback) {\n        if (name) {\n          const names = name.toLowerCase().split(' ');\n          let i = names.length;\n          while (i--) {\n            const currentName = names[i];\n            let handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$d(this.bindings, (_value, bindingName) => {\n                this.toggleEvent(bindingName, false);\n                delete this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                const filteredHandlers = partition$2(handlers, handler => handler.func === callback);\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$e(filteredHandlers.pass, handler => {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$d(this.bindings, (_value, name) => {\n            this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      }\n      once(name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      }\n      has(name) {\n        name = name.toLowerCase();\n        const binding = this.bindings[name];\n        return !(!binding || binding.length === 0);\n      }\n    }\n\n    const getEventDispatcher = obj => {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: (name, state) => {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    const Observable = {\n      fire(name, args, bubble) {\n        return this.dispatch(name, args, bubble);\n      },\n      dispatch(name, args, bubble) {\n        const self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return normalize$3(name.toLowerCase(), args !== null && args !== void 0 ? args : {}, self);\n        }\n        const dispatcherArgs = getEventDispatcher(self).dispatch(name, args);\n        if (bubble !== false && self.parent) {\n          let parent = self.parent();\n          while (parent && !dispatcherArgs.isPropagationStopped()) {\n            parent.dispatch(name, dispatcherArgs, false);\n            parent = parent.parent ? parent.parent() : undefined;\n          }\n        }\n        return dispatcherArgs;\n      },\n      on(name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off(name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once(name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners(name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    const DOM$2 = DOMUtils.DOM;\n    let customEventRootDelegates;\n    const getEventTarget = (editor, eventName) => {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      const eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    const isListening = editor => !editor.hidden && !isReadOnly(editor);\n    const fireEvent = (editor, eventName, e) => {\n      if (isListening(editor)) {\n        editor.dispatch(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    const bindEventDelegate = (editor, eventName) => {\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      const eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', () => {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$d(customEventRootDelegates, (_value, name) => {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        const delegate = e => {\n          const target = e.target;\n          const editors = editor.editorManager.get();\n          let i = editors.length;\n          while (i--) {\n            const body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        const delegate = e => {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    const EditorObservable = {\n      ...Observable,\n      bindPendingEventDelegates() {\n        const self = this;\n        Tools.each(self._pendingNativeEvents, name => {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent(name, state) {\n        const self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized && self.delegates) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents() {\n        const self = this;\n        const body = self.getBody();\n        const dom = self.dom;\n        if (self.delegates) {\n          each$d(self.delegates, (value, name) => {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    };\n\n    const stringListProcessor = value => {\n      if (isString(value)) {\n        return {\n          value: value.split(/[ ,]/),\n          valid: true\n        };\n      } else if (isArrayOf(value, isString)) {\n        return {\n          value,\n          valid: true\n        };\n      } else {\n        return {\n          valid: false,\n          message: `The value must be a string[] or a comma/space separated string.`\n        };\n      }\n    };\n    const getBuiltInProcessor = type => {\n      const validator = (() => {\n        switch (type) {\n        case 'array':\n          return isArray$1;\n        case 'boolean':\n          return isBoolean;\n        case 'function':\n          return isFunction;\n        case 'number':\n          return isNumber;\n        case 'object':\n          return isObject;\n        case 'string':\n          return isString;\n        case 'string[]':\n          return stringListProcessor;\n        case 'object[]':\n          return val => isArrayOf(val, isObject);\n        case 'regexp':\n          return val => is$4(val, RegExp);\n        default:\n          return always;\n        }\n      })();\n      return value => processValue(value, validator, `The value must be a ${ type }.`);\n    };\n    const isBuiltInSpec = spec => isString(spec.processor);\n    const getErrorMessage = (message, result) => {\n      const additionalText = isEmpty$3(result.message) ? '' : `. ${ result.message }`;\n      return message + additionalText;\n    };\n    const isValidResult = result => result.valid;\n    const processValue = (value, processor, message = '') => {\n      const result = processor(value);\n      if (isBoolean(result)) {\n        return result ? {\n          value: value,\n          valid: true\n        } : {\n          valid: false,\n          message\n        };\n      } else {\n        return result;\n      }\n    };\n    const processDefaultValue = (name, defaultValue, processor) => {\n      if (!isUndefined(defaultValue)) {\n        const result = processValue(defaultValue, processor);\n        if (isValidResult(result)) {\n          return result.value;\n        } else {\n          console.error(getErrorMessage(`Invalid default value passed for the \"${ name }\" option`, result));\n        }\n      }\n      return undefined;\n    };\n    const create$5 = (editor, initialOptions) => {\n      const registry = {};\n      const values = {};\n      const setValue = (name, value, processor) => {\n        const result = processValue(value, processor);\n        if (isValidResult(result)) {\n          values[name] = result.value;\n          return true;\n        } else {\n          console.warn(getErrorMessage(`Invalid value passed for the ${ name } option`, result));\n          return false;\n        }\n      };\n      const register = (name, spec) => {\n        const processor = isBuiltInSpec(spec) ? getBuiltInProcessor(spec.processor) : spec.processor;\n        const defaultValue = processDefaultValue(name, spec.default, processor);\n        registry[name] = {\n          ...spec,\n          default: defaultValue,\n          processor\n        };\n        const initValue = get$a(values, name).orThunk(() => get$a(initialOptions, name));\n        initValue.each(value => setValue(name, value, processor));\n      };\n      const isRegistered = name => has$2(registry, name);\n      const get = name => get$a(values, name).orThunk(() => get$a(registry, name).map(spec => spec.default)).getOrUndefined();\n      const set = (name, value) => {\n        if (!isRegistered(name)) {\n          console.warn(`\"${ name }\" is not a registered option. Ensure the option has been registered before setting a value.`);\n          return false;\n        } else {\n          const spec = registry[name];\n          if (spec.immutable) {\n            console.error(`\"${ name }\" is an immutable option and cannot be updated`);\n            return false;\n          } else {\n            return setValue(name, value, spec.processor);\n          }\n        }\n      };\n      const unset = name => {\n        const registered = isRegistered(name);\n        if (registered) {\n          delete values[name];\n        }\n        return registered;\n      };\n      const isSet = name => has$2(values, name);\n      return {\n        register,\n        isRegistered,\n        get,\n        set,\n        unset,\n        isSet\n      };\n    };\n\n    const defaultModes = [\n      'design',\n      'readonly'\n    ];\n    const switchToMode = (editor, activeMode, availableModes, mode) => {\n      const oldMode = availableModes[activeMode.get()];\n      const newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error(`problem while activating editor mode ${ mode }:`, e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    const setMode = (editor, availableModes, activeMode, mode) => {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error(`Editor mode '${ mode }' is invalid`);\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', () => switchToMode(editor, activeMode, availableModes, mode));\n      }\n    };\n    const registerMode = (availableModes, mode, api) => {\n      if (contains$2(defaultModes, mode)) {\n        throw new Error(`Cannot override default mode ${ mode }`);\n      }\n      return {\n        ...availableModes,\n        [mode]: {\n          ...api,\n          deactivate: () => {\n            try {\n              api.deactivate();\n            } catch (e) {\n              console.error(`problem while deactivating editor mode ${ mode }:`, e);\n            }\n          }\n        }\n      };\n    };\n\n    const create$4 = editor => {\n      const activeMode = Cell('design');\n      const availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: () => isReadOnly(editor),\n        set: mode => setMode(editor, availableModes.get(), activeMode, mode),\n        get: () => activeMode.get(),\n        register: (mode, api) => {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    const each$2 = Tools.each, explode = Tools.explode;\n    const keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    const modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    const isModifier = key => key in modifierNames;\n    const parseShortcut = pattern => {\n      const shortcut = {};\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      each$2(explode(pattern.toLowerCase(), '+'), value => {\n        if (isModifier(value)) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      const id = [shortcut.keyCode];\n      let key;\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (isMac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (isMac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    class Shortcuts {\n      constructor(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        const self = this;\n        editor.on('keyup keypress keydown', e => {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$2(self.shortcuts, shortcut => {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      add(pattern, desc, cmdFunc, scope) {\n        const self = this;\n        const func = self.normalizeCommandFunc(cmdFunc);\n        each$2(explode(Tools.trim(pattern)), pattern => {\n          const shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      }\n      remove(pattern) {\n        const shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      }\n      normalizeCommandFunc(cmdFunc) {\n        const self = this;\n        const cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return () => {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return () => {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      }\n      createShortcut(pattern, desc, cmdFunc, scope) {\n        const shortcuts = Tools.map(explode(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      }\n      hasModifier(e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      }\n      isFunctionKey(e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      }\n      matchShortcut(e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      }\n      executeShortcutAction(shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      }\n    }\n\n    const create$3 = () => {\n      const buttons = {};\n      const menuItems = {};\n      const popups = {};\n      const icons = {};\n      const contextMenus = {};\n      const contextToolbars = {};\n      const sidebars = {};\n      const views = {};\n      const add = (collection, type) => (name, spec) => {\n        collection[name.toLowerCase()] = {\n          ...spec,\n          type\n        };\n      };\n      const addIcon = (name, svgData) => icons[name.toLowerCase()] = svgData;\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addView: add(views, 'views'),\n        addIcon,\n        getAll: () => ({\n          buttons,\n          menuItems,\n          icons,\n          popups,\n          contextMenus,\n          contextToolbars,\n          sidebars,\n          views\n        })\n      };\n    };\n\n    const registry = () => {\n      const bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        addView: bridge.addView,\n        getAll: bridge.getAll\n      };\n    };\n\n    const DOM$1 = DOMUtils.DOM;\n    const extend = Tools.extend, each$1 = Tools.each;\n    class Editor {\n      constructor(id, options, editorManager) {\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.composing = false;\n        this.destroyed = false;\n        this.hasHiddenInput = false;\n        this.iframeElement = null;\n        this.initialized = false;\n        this.readonly = false;\n        this.removed = false;\n        this.startContent = '';\n        this._pendingNativeEvents = [];\n        this._skinLoaded = false;\n        this._editableRoot = true;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend(this, EditorObservable);\n        const self = this;\n        this.id = id;\n        this.hidden = false;\n        const normalizedOptions = normalizeOptions(editorManager.defaultOptions, options);\n        this.options = create$5(self, normalizedOptions);\n        register$7(self);\n        const getOption = this.options.get;\n        if (getOption('deprecation_warnings')) {\n          logWarnings(options, normalizedOptions);\n        }\n        const suffix = getOption('suffix');\n        if (suffix) {\n          editorManager.suffix = suffix;\n        }\n        this.suffix = editorManager.suffix;\n        const baseUrl = getOption('base_url');\n        if (baseUrl) {\n          editorManager._setBaseUrl(baseUrl);\n        }\n        this.baseUri = editorManager.baseURI;\n        const referrerPolicy = getReferrerPolicy(self);\n        if (referrerPolicy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(referrerPolicy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(referrerPolicy);\n        }\n        const contentCssCors = hasContentCssCors(self);\n        if (isNonNullable(contentCssCors)) {\n          DOMUtils.DOM.styleSheetLoader._setContentCssCors(contentCssCors);\n        }\n        AddOnManager.languageLoad = getOption('language_load');\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(getDocumentBaseUrl(self), { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = isInline$1(self);\n        this.hasVisual = isVisualAidsEnabled(self);\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        registerCommands(this);\n        const cacheSuffix = getOption('cache_suffix');\n        if (cacheSuffix) {\n          Env.cacheSuffix = cacheSuffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          setEnabled: noop,\n          isEnabled: always\n        };\n        this.mode = create$4(self);\n        editorManager.dispatch('SetupEditor', { editor: this });\n        const setupCallback = getSetupCallback(self);\n        if (isFunction(setupCallback)) {\n          setupCallback.call(self, self);\n        }\n      }\n      render() {\n        render(this);\n      }\n      focus(skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      }\n      hasFocus() {\n        return hasFocus(this);\n      }\n      translate(text) {\n        return I18n.translate(text);\n      }\n      getParam(name, defaultVal, type) {\n        const options = this.options;\n        if (!options.isRegistered(name)) {\n          if (isNonNullable(type)) {\n            options.register(name, {\n              processor: type,\n              default: defaultVal\n            });\n          } else {\n            options.register(name, {\n              processor: always,\n              default: defaultVal\n            });\n          }\n        }\n        return !options.isSet(name) && !isUndefined(defaultVal) ? defaultVal : options.get(name);\n      }\n      hasPlugin(name, loaded) {\n        const hasPlugin = contains$2(getPlugins(this), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      }\n      nodeChanged(args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      }\n      addCommand(name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      }\n      addQueryStateHandler(name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      }\n      addQueryValueHandler(name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      }\n      addShortcut(pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      }\n      execCommand(cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      }\n      queryCommandState(cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      }\n      queryCommandValue(cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      }\n      queryCommandSupported(cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      }\n      show() {\n        const self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.dispatch('show');\n        }\n      }\n      hide() {\n        const self = this;\n        if (!self.hidden) {\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.dispatch('hide');\n        }\n      }\n      isHidden() {\n        return this.hidden;\n      }\n      setProgressState(state, time) {\n        this.dispatch('ProgressState', {\n          state,\n          time\n        });\n      }\n      load(args = {}) {\n        const self = this;\n        const elm = self.getElement();\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          const loadArgs = {\n            ...args,\n            load: true\n          };\n          const value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          const html = self.setContent(value, loadArgs);\n          if (!loadArgs.no_events) {\n            self.dispatch('LoadContent', {\n              ...loadArgs,\n              element: elm\n            });\n          }\n          return html;\n        } else {\n          return '';\n        }\n      }\n      save(args = {}) {\n        const self = this;\n        let elm = self.getElement();\n        if (!elm || !self.initialized || self.removed) {\n          return '';\n        }\n        const getArgs = {\n          ...args,\n          save: true,\n          element: elm\n        };\n        let html = self.getContent(getArgs);\n        const saveArgs = {\n          ...getArgs,\n          content: html\n        };\n        if (!saveArgs.no_events) {\n          self.dispatch('SaveContent', saveArgs);\n        }\n        if (saveArgs.format === 'raw') {\n          self.dispatch('RawSaveContent', saveArgs);\n        }\n        html = saveArgs.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          const form = DOM$1.getParent(self.id, 'form');\n          if (form) {\n            each$1(form.elements, elm => {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              } else {\n                return true;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        saveArgs.element = getArgs.element = elm = null;\n        if (saveArgs.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      }\n      setContent(content, args) {\n        return setContent(this, content, args);\n      }\n      getContent(args) {\n        return getContent(this, args);\n      }\n      insertContent(content, args) {\n        if (args) {\n          content = extend({ content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      }\n      resetContent(initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      }\n      isDirty() {\n        return !this.isNotDirty;\n      }\n      setDirty(state) {\n        const oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.dispatch('dirty');\n        }\n      }\n      getContainer() {\n        const self = this;\n        if (!self.container) {\n          self.container = self.editorContainer || DOM$1.get(self.id + '_parent');\n        }\n        return self.container;\n      }\n      getContentAreaContainer() {\n        return this.contentAreaContainer;\n      }\n      getElement() {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      }\n      getWin() {\n        const self = this;\n        if (!self.contentWindow) {\n          const elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      }\n      getDoc() {\n        const self = this;\n        if (!self.contentDocument) {\n          const win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      }\n      getBody() {\n        var _a, _b;\n        const doc = this.getDoc();\n        return (_b = (_a = this.bodyElement) !== null && _a !== void 0 ? _a : doc === null || doc === void 0 ? void 0 : doc.body) !== null && _b !== void 0 ? _b : null;\n      }\n      convertURL(url, name, elm) {\n        const self = this, getOption = self.options.get;\n        const urlConverterCallback = getUrlConverterCallback(self);\n        if (isFunction(urlConverterCallback)) {\n          return urlConverterCallback.call(self, url, elm, true, name);\n        }\n        if (!getOption('convert_urls') || elm === 'link' || isObject(elm) && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        const urlObject = new URI(url);\n        if (urlObject.protocol !== 'http' && urlObject.protocol !== 'https' && urlObject.protocol !== '') {\n          return url;\n        }\n        if (getOption('relative_urls')) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, getOption('remove_script_host'));\n        return url;\n      }\n      addVisual(elm) {\n        addVisual(this, elm);\n      }\n      setEditableRoot(state) {\n        setEditableRoot(this, state);\n      }\n      hasEditableRoot() {\n        return hasEditableRoot(this);\n      }\n      remove() {\n        remove$1(this);\n      }\n      destroy(automatic) {\n        destroy(this, automatic);\n      }\n      uploadImages() {\n        return this.editorUpload.uploadImages();\n      }\n      _scanForImages() {\n        return this.editorUpload.scanForImages();\n      }\n    }\n\n    const DOM = DOMUtils.DOM;\n    const each = Tools.each;\n    let boundGlobalEvents = false;\n    let beforeUnloadDelegate;\n    let editors = [];\n    const globalEventDelegate = e => {\n      const type = e.type;\n      each(EditorManager.get(), editor => {\n        switch (type) {\n        case 'scroll':\n          editor.dispatch('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.dispatch('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    const toggleGlobalEvents = state => {\n      if (state !== boundGlobalEvents) {\n        const DOM = DOMUtils.DOM;\n        if (state) {\n          DOM.bind(window, 'resize', globalEventDelegate);\n          DOM.bind(window, 'scroll', globalEventDelegate);\n        } else {\n          DOM.unbind(window, 'resize', globalEventDelegate);\n          DOM.unbind(window, 'scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    const removeEditorFromList = targetEditor => {\n      const oldEditors = editors;\n      editors = filter$5(editors, editor => {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    const purgeDestroyedEditor = editor => {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n      }\n    };\n    const isQuirksMode = document.compatMode !== 'CSS1Compat';\n    const EditorManager = {\n      ...Observable,\n      baseURI: null,\n      baseURL: null,\n      defaultOptions: {},\n      documentBaseURL: null,\n      suffix: null,\n      majorVersion: '6',\n      minorVersion: '8.6',\n      releaseDate: 'TBD',\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      setup() {\n        const self = this;\n        let baseURL = '';\n        let suffix = '';\n        let documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        const preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          const scripts = document.getElementsByTagName('script');\n          for (let i = 0; i < scripts.length; i++) {\n            const src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            const srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            const src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$w(self);\n      },\n      overrideDefaults(defaultOptions) {\n        const baseUrl = defaultOptions.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        const suffix = defaultOptions.suffix;\n        if (suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultOptions = defaultOptions;\n        const pluginBaseUrls = defaultOptions.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$d(pluginBaseUrls, (pluginBaseUrl, pluginName) => {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init(options) {\n        const self = this;\n        let result;\n        const invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        const isInvalidInlineTarget = (options, elm) => options.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        const createId = elm => {\n          let id = elm.id;\n          if (!id) {\n            id = get$a(elm, 'name').filter(name => !DOM.get(name)).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        const execCallback = name => {\n          const callback = options[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        const findTargets = options => {\n          if (Env.browser.isIE() || Env.browser.isEdge()) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          } else if (isString(options.selector)) {\n            return DOM.select(options.selector);\n          } else if (isNonNullable(options.target)) {\n            return [options.target];\n          } else {\n            return [];\n          }\n        };\n        let provideResults = editors => {\n          result = editors;\n        };\n        const initEditors = () => {\n          let initCount = 0;\n          const editors = [];\n          let targets;\n          const createEditor = (id, options, targetElm) => {\n            const editor = new Editor(id, options, self);\n            editors.push(editor);\n            editor.on('init', () => {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = unique$1(findTargets(options));\n          Tools.each(targets, elm => {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, elm => {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each(targets, elm => {\n              if (isInvalidInlineTarget(options, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), options, elm);\n              }\n            });\n          }\n        };\n        DOM.bind(window, 'ready', initEditors);\n        return new Promise(resolve => {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = editors => {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get(id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find$2(editors, editor => {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add(editor) {\n        const self = this;\n        const existingEditor = self.get(editor.id);\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (existingEditor === null) {\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.dispatch('AddEditor', { editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = e => {\n            const event = self.dispatch('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor(id, options) {\n        return this.add(new Editor(id, options, this));\n      },\n      remove(selector) {\n        const self = this;\n        let editor;\n        if (!selector) {\n          for (let i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each(DOM.select(selector), elm => {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.dispatch('RemoveEditor', { editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand(cmd, ui, value) {\n        var _a;\n        const self = this;\n        const editorId = isObject(value) ? (_a = value.id) !== null && _a !== void 0 ? _a : value.index : value;\n        switch (cmd) {\n        case 'mceAddEditor': {\n            if (!self.get(editorId)) {\n              const editorOptions = value.options;\n              new Editor(editorId, editorOptions, self).render();\n            }\n            return true;\n          }\n        case 'mceRemoveEditor': {\n            const editor = self.get(editorId);\n            if (editor) {\n              editor.remove();\n            }\n            return true;\n          }\n        case 'mceToggleEditor': {\n            const editor = self.get(editorId);\n            if (!editor) {\n              self.execCommand('mceAddEditor', false, value);\n              return true;\n            }\n            if (editor.isHidden()) {\n              editor.show();\n            } else {\n              editor.hide();\n            }\n            return true;\n          }\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: () => {\n        each(editors, editor => {\n          editor.save();\n        });\n      },\n      addI18n: (code, items) => {\n        I18n.add(code, items);\n      },\n      translate: text => {\n        return I18n.translate(text);\n      },\n      setActive(editor) {\n        const activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.dispatch('deactivate', { relatedTarget: editor });\n          }\n          editor.dispatch('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl(baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    };\n    EditorManager.setup();\n\n    const setup = () => {\n      const dataValue = value$2();\n      const FakeClipboardItem = items => ({\n        items,\n        types: keys(items),\n        getType: type => get$a(items, type).getOrUndefined()\n      });\n      const write = data => {\n        dataValue.set(data);\n      };\n      const read = () => dataValue.get().getOrUndefined();\n      const clear = dataValue.clear;\n      return {\n        FakeClipboardItem,\n        write,\n        read,\n        clear\n      };\n    };\n    const FakeClipboard = setup();\n\n    const min = Math.min, max = Math.max, round = Math.round;\n    const relativePosition = (rect, targetRect, rel) => {\n      let x = targetRect.x;\n      let y = targetRect.y;\n      const w = rect.w;\n      const h = rect.h;\n      const targetW = targetRect.w;\n      const targetH = targetRect.h;\n      const relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    const findBestRelativePosition = (rect, targetRect, constrainRect, rels) => {\n      for (let i = 0; i < rels.length; i++) {\n        const pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    const inflate = (rect, w, h) => {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    const intersect = (rect, cropRect) => {\n      const x1 = max(rect.x, cropRect.x);\n      const y1 = max(rect.y, cropRect.y);\n      const x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      const y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    const clamp = (rect, clampRect, fixedSize) => {\n      let x1 = rect.x;\n      let y1 = rect.y;\n      let x2 = rect.x + rect.w;\n      let y2 = rect.y + rect.h;\n      const cx2 = clampRect.x + clampRect.w;\n      const cy2 = clampRect.y + clampRect.h;\n      const underflowX1 = max(0, clampRect.x - x1);\n      const underflowY1 = max(0, clampRect.y - y1);\n      const overflowX2 = max(0, x2 - cx2);\n      const overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    const create$2 = (x, y, w, h) => {\n      return {\n        x,\n        y,\n        w,\n        h\n      };\n    };\n    const fromClientRect = clientRect => {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    const Rect = {\n      inflate,\n      relativePosition,\n      findBestRelativePosition,\n      intersect,\n      clamp,\n      create: create$2,\n      fromClientRect\n    };\n\n    const awaiter = (resolveCb, rejectCb, timeout = 1000) => {\n      let done = false;\n      let timer = null;\n      const complete = completer => (...args) => {\n        if (!done) {\n          done = true;\n          if (timer !== null) {\n            clearTimeout(timer);\n            timer = null;\n          }\n          completer.apply(null, args);\n        }\n      };\n      const resolve = complete(resolveCb);\n      const reject = complete(rejectCb);\n      const start = (...args) => {\n        if (!done && timer === null) {\n          timer = setTimeout(() => reject.apply(null, args), timeout);\n        }\n      };\n      return {\n        start,\n        resolve,\n        reject\n      };\n    };\n    const create$1 = () => {\n      const tasks = {};\n      const resultFns = {};\n      const resources = {};\n      const load = (id, url) => {\n        const loadErrMsg = `Script at URL \"${ url }\" failed to load`;\n        const runErrMsg = `Script at URL \"${ url }\" did not call \\`tinymce.Resource.add('${ id }', data)\\` within 1 second`;\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          const task = new Promise((resolve, reject) => {\n            const waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url).then(() => waiter.start(runErrMsg), () => waiter.reject(loadErrMsg));\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      const add = (id, data) => {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = Promise.resolve(data);\n        resources[id] = data;\n      };\n      const has = id => {\n        return id in resources;\n      };\n      const unload = id => {\n        delete tasks[id];\n      };\n      const get = id => resources[id];\n      return {\n        load,\n        add,\n        has,\n        get,\n        unload\n      };\n    };\n    const Resource = create$1();\n\n    const create = () => (() => {\n      let data = {};\n      let keys = [];\n      const storage = {\n        getItem: key => {\n          const item = data[key];\n          return item ? item : null;\n        },\n        setItem: (key, value) => {\n          keys.push(key);\n          data[key] = String(value);\n        },\n        key: index => {\n          return keys[index];\n        },\n        removeItem: key => {\n          keys = keys.filter(k => k === key);\n          delete data[key];\n        },\n        clear: () => {\n          keys = [];\n          data = {};\n        },\n        length: 0\n      };\n      Object.defineProperty(storage, 'length', {\n        get: () => keys.length,\n        configurable: false,\n        enumerable: false\n      });\n      return storage;\n    })();\n\n    let localStorage;\n    try {\n      const test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    const publicApi = {\n      geom: { Rect },\n      util: {\n        Delay,\n        Tools,\n        VK,\n        URI,\n        EventDispatcher,\n        Observable,\n        I18n,\n        LocalStorage,\n        ImageUploader\n      },\n      dom: {\n        EventUtils,\n        TreeWalker: DomTreeWalker,\n        TextSeeker,\n        DOMUtils,\n        ScriptLoader,\n        RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader,\n        ControlSelection,\n        BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles,\n        Entities,\n        Node: AstNode,\n        Schema,\n        DomParser,\n        Writer,\n        Serializer: HtmlSerializer\n      },\n      Env,\n      AddOnManager,\n      Annotator,\n      Formatter,\n      UndoManager,\n      EditorCommands,\n      WindowManager,\n      NotificationManager,\n      EditorObservable,\n      Shortcuts,\n      Editor,\n      FocusManager,\n      EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager,\n      ThemeManager,\n      ModelManager,\n      IconManager,\n      Resource,\n      FakeClipboard,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      walk: Tools.walk,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix\n    };\n    const tinymce$1 = Tools.extend(EditorManager, publicApi);\n\n    const exportToModuleLoaders = tinymce => {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    const exportToWindowGlobal = tinymce => {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce$1);\n    exportToModuleLoaders(tinymce$1);\n\n})();\n"],"names":["typeOf$1","x","isEquatableType","sort$1","xs","compareFn","clone","contramap","eqa","f","eq$2","y","tripleEq","eqString","eqArray","len","i","eqSortedArray","eqRecord","kx","ky","q","eqAny","tx","ty","getPrototypeOf$2","hasProto","v","constructor","predicate","_a","typeOf","o","proto","isType$1","type","value","isSimpleType","eq$1","t","a","is$4","isObject","isString","isPlainObject","isArray$1","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","noop","compose","fa","fb","args","compose1","fbc","fab","constant","identity","tripleEquals","b","curry","fn","initialArgs","restArgs","all","not","die","msg","apply$1","call","never","always","Optional","tag","onNone","onSome","mapper","binder","replacement","thunk","message","worker","nativeSlice","nativeIndexOf","nativePush","rawIndexOf","ts","indexOf$1","r","contains$2","exists","map$3","each$e","eachr","partition$2","pass","fail","filter$5","foldr","acc","foldl","findUntil$1","until","find$2","findIndex$2","flatten","bind$3","forall","reverse","difference","a1","a2","mapToObject","sort","comparator","copy","get$b","head","last$3","from","findMap","arr","unique$1","isDuplicated","keys","hasOwnProperty$1","each$d","obj","props","k","map$2","tupleMap","tuple","objAcc","internalFilter","onTrue","onFalse","bifilter","filter$4","mapToArray","name","values","get$a","key","has$2","hasNonNullableKey","equal$1","eq","stringArray","isArrayLike","isArray","toArray$1","array","l","each$c","cb","s","n","map$1","callback","out","item","index","filter$3","indexOf","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","last$2","cached","called","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","firstMatch","regexes","find$1","agent","group","nu$3","detect$5","versionRegexes","cleanedAgent","unknown$2","major","minor","Version","detectBrowser$1","browsers","userAgentData","uaBrand","lcBrand","info","detect$4","candidates","candidate","detectBrowser","version","detectOs","oses","removeFromStart","str","numChars","checkRange","substr","start","removeLeading","prefix","startsWith","contains$1","end","idx","endsWith","suffix","blank","trim$4","lTrim","rTrim","isNotEmpty","isEmpty$3","repeat","count","toInt","radix","num","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chromium","ie","opera","firefox","safari","unknown$1","nu$2","current","isBrowser","Browser","windows","ios","android","linux","macos","solaris","freebsd","chromeos","unknown","nu$1","isOS","OperatingSystem","PlatformDetection","userAgentDataOpt","deviceType","query","platform$4","detect$2","platform$3","browser$3","os$1","windowsPhone","Env","whiteSpaceRegExp$1","trim$3","is$3","makeMap$4","items","delim","map","resolvedItems","hasOwnProperty","extend$3","exts","ext","walk$4","Tools","path","d","url","cacheSuffix","is$2","lhs","rhs","left","equals","lift2","cat","push","oa","ob","lift3","oc","someIf","Global","parts","scope","resolve$2","p","unsafe","getOrDie","actual","getPrototypeOf$1","sandHTMLElement","isPrototypeOf","COMMENT","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","element","type$1","isType","isComment$1","isHTMLElement$1","isElement$7","isText$b","isDocument$2","isDocumentFragment$1","isTag","e","rawSet","dom","set$3","setAll$1","attrs","get$9","getOpt","has$1","remove$a","hasNone","clone$4","attr","read$4","add$4","id","nu","remove$9","supports","get$8","add$3","clazz","remove$8","toggle$2","add$2","cleanClass","remove$7","toggle$1","result","has","fromHtml$1","html","div","fromDom$2","fromTag","node","fromText","text","SugarElement","docElm","toArray","recurse","cur","is$1","selector","elem","bypassSelector","base","one","e1","e2","contains","d1","d2","owner$1","documentOrOwner","dos","documentElement","defaultView","parent","parentElement","parents$1","isRoot","stop","ret","rawParent","siblings","filterSelf","elements","children$1","prevSibling","nextSibling","prevSiblings","nextSiblings","child$1","cs","firstChild","lastChild","childNodesCount","hasChildNodes","getHead","doc","isShadowRoot","supported","isSupported$1","getRootNode","getStyleContainer","getContentContainer","getShadowRoot","getShadowHost","getOriginalEventTarget","event","el","isOpenShadowHost","composedPath","inBody","ClosestOrAncestor","is","ancestor","ancestor$4","closest$4","test","sibling$1","child","descendant$2","descend","res","ancestor$3","descendant$1","closest$3","closest$2","isEditable$2","assumeEditable","editable","getRaw$1","isSupported","internalSet","property","internalRemove","set$2","setAll","css","get$7","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","remove$6","reflow","before$3","marker","after$4","append$1","prepend","wrap$2","wrapper","after$3","append","empty","rogue","remove$5","unwrap","children","fromHtml","fromDom$1","nodes","get$6","set$1","content","docDom","fragment","contentElements","getOuter","container","mkEvent","prevent","kill","fromRawEvent","rawEvent","handle$1","filter","handler","useCapture","wrapped","unbind","bind$2","top","SugarPosition","boxPosition","box","firstDefinedOrZero","absolute","body","win","scrollTop","scrollLeft","clientTop","clientLeft","viewport","get$5","_DOC","to","intoView","alignToTop","get$4","_win","bounds","width","height","getBounds","scroll","visualViewport","descendants$1","descendants","ancestor$2","DomTreeWalker","startNode","rootNode","shallow","startName","siblingName","sibling","isNodeType","isRestrictedNode","isElement$6","isHTMLElement","isSVGElement","matchNodeName","lowerCasedName","matchNodeNames","names","lowerCasedNames","nodeName","matchStyleValues","computed","hasAttribute","attrName","hasAttributeValue","attrValue","isBogus$2","isBogusAll$1","isTable$2","hasContentEditableState","isTextareaOrInput","isText$a","isCData","isPi","isComment","isDocument$1","isDocumentFragment","isBr$6","isImg","isContentEditableTrue$3","isContentEditableFalse$b","isTableCell$3","isTableCellOrCaption","isMedia$2","isListItem$2","isDetails","isSummary$1","zeroWidth","nbsp","isZwsp$2","char","removeZwsp","api$1","get","getOption","get$3","set","tableCells","tableSections","textBlocks","listItems$1","lists","wsElements","lazyLookup","lookup","isTable$1","isBr$5","isTextBlock$2","isList","isListItem$1","isTableSection","isTableCell$2","isWsPreserveElement","getLastChildren$1","elm","rawNode","removeTrailingBr","allBrs","brs","createPaddingBr","br","fillWithPaddingBr","trimBlockTrailingBr","schema","lastChildPrevSibling","ZWSP$1","isZwsp$1","trim$2","insert$5","editor","isElement$5","isText$9","isCaretContainerBlock$1","isCaretContainerInline","isCaretContainer$2","hasContent","insertInline$1","before","textNode","parentNode","endsWithCaretContainer$1","startsWithCaretContainer$1","isBeforeInline","pos","isAfterInline","insertBlock","blockName","blockNode","trimBogusBr","lastBr","showCaretContainerBlock","caretContainer","isRangeInCaretContainerBlock","range","isContentEditableTrue$2","isContentEditableFalse$a","isBr$4","isText$8","isInvalidTextElement","isAtomicInline","isTable","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isInEditable","root","tempNode","isAtomicContentEditableFalse","isAtomic$1","isEditableCaretCandidate$1","whiteSpaceRegExp","isWhitespaceText","isZwsp","c","isCollapsibleWhitespace$1","isNewLineChar","isNewline","normalize$4","tabSpaces","isStartOfContent","isEndOfContent","tabSpace","normalizedText","hasWhitespacePreserveParent","rootElement","isWhitespace$1","isNamedAnchor","isContent$1","isBookmark","isBogus$1","isBogusAll","hasNonEditableParent","isEmptyNode","targetNode","skipBogus","brCount","walker","isEmpty$2","isNonHtmlElementRootName","isNonHtmlElementRoot","toScopeType","namespaceElements","createNamespaceTracker","scopes","peek","currentScope","transparentBlockAttr","elementNames","makeSelectorFromSchemaMap","ns","updateTransparent","blocksSelector","transparent","updateBlockStateOnChildren","transparentSelector","trimEdge","leftSide","childPropertyName","split$2","parentElm","splitElm","beforeFragment","afterFragment","splitInvalidChildren","transparentBlocks","blocksElements","isBlock","transparentBlock","parentBlock","invalidChildren","stateScope","unwrapInvalidChildren","isTransparentBlock","block","isTransparentInline","updateChildren","updateElement","isTransparentElement","updateCaret","caretParent","parents","hasBlockAttr","isTransparentElementName","isTransparentAstBlock","browser$2","firstElement","getTableCaptionDeltaY","caption","bodyTop","captionTop","captionHeight","hasChild","getPos","rootElm","offsetParent","castOffsetParent","StyleSheetLoader","documentOrShadowRoot","settings","idCount","loadedStates","edos","_setReferrerPolicy","referrerPolicy","_setContentCssCors","contentCssCors","addStyle","removeStyle","styleContainer","getOrCreateState","load","success","failure","link","urlWithSuffix","state","resolve","callbacks","status","passed","failed","linkElem","loadRawCss","styleElem","loadAll","urls","results","unload","instance","referenceElement","rootDom","sl","isSpan","isInlineContent","surroundedByInlineContent","prev","next","prevIsInline","nextIsInline","isBookmarkNode$2","isKeepTextNode","isKeepElement","isDocument","trimNode","currentChildren","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","nativeDecode","buildEntitiesLookup","itemList","chr","entity","namedEntities","encodeRaw","encodeAllRaw","encodeNumeric","encodeNamed","entities","resolveEntities","Entities","entitiesMap","encodeNamedAndNumeric","encodeCustomNamed","nameMap","numeric","split$1","patternToRegExp","parseCustomElementsRules","customElementRegExp","rule","matches","inline","cloneName","getElementSetsAsStrings","globalAttributes","blockContent","phrasingContent","transparentContent","flowContent","makeSchema","addElement","attributes","add","childNames","ni","allAttributes","addAttrs","schemaItem","prefixToOperation","parseValidChildrenRules","childRuleRegExp","operation","validChildren","parseValidElementsAttrDataIntoElement","attrData","targetElement","attrRuleRegExp","hasPatternsRegExp","attributesOrder","attrType","attrPrefix","attrPattern","cloneAttributesInto","parseValidElementsRules","globalElement","validElements","elementRuleRegExp","elementName","outputName","attrsPrefix","mapCache","makeMap$2","each$b","extend$2","explode$2","createMap","defaultValue","extendWith","getTextRootBlockElements","compileElementMap","mode","styles","Schema","patternElements","customElementsMap","specialElements","createLookupTable","option","newValue","schemaType","schemaItems","validStyles","invalidStyles","validClasses","whitespaceElementsMap","selfClosingElementsMap","voidElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","headings","textBlockElementsMap","blockElementsMap","textInlineElementsMap","transparentElementsMap","wrapBlockElementsMap","addValidElements","aliasName","patternElement","setValidElements","addCustomElements","customElements","customRule","elmName","addValidChildren","getElementRule","_val","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getTextBlockElements","getTextInlineElements","getVoidElements","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhitespaceElements","getTransparentElements","getWrapBlockElements","getSpecialElements","isValidChild","isValid","attrPatterns","isInline","isWrapper","getCustomElements","hexColour","normalizeHex","hex","toHex","component","fromRgba","rgbaColour","rgbRegex","rgbaRegex","red","green","blue","alpha","fromStringValues","g","fromString","rgbaString","rgbMatch","rgbaMatch","toString","rgba","rgbaToHexString","color","h","Styles","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","encodingItems","self","isEncoded","urlConverter","urlConverterScope","compress","noJoin","right","bottom","canCompress","compress2","encode","decode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","match","url2","url3","str2","scriptUrl","serializeStyles","elemName","validStyleList","styleList","styleMap","deprecated","isNativeEvent","hasIsDefaultPrevented","needsNormalizing","clone$3","originalEvent","data","keyArg","normalize$3","fallbackTarget","eventExpandoPrefix","mouseEventRe","addEvent","capture","removeEvent","isMouseEvent","fix","eventDoc","mouseEvent","bindOnReady","eventUtils","isDocReady","readyHandler","EventUtils","callbackList","defaultNativeHandler","evt","namesList","nativeHandler","fakeName","eventMap","ci","newCallbackList","each$a","grep","internalStyleName","numericalCssMap","legacySetAttribute","camelCaseToHyphens","findNodeIndex","normalized","lastNodeType","nodeType","updateInternalStyleAttr","rawValue","convertStyleToString","cssValue","cssName","applyStyle$1","$elm","normalizedName","setupAttrHooks","getContext","keepValues","keepUrlHook","sugarElm","internalName","attrHooks","DOMUtils","addedStyles","files","counter","stdMode","boxModel","styleSheetLoader","boundEvents","events","_get","getAttrib","defaultVal","hook","getAttribs","setAttrib","run","val","originalValue","deep","getRoot","getViewPort","argWin","vp","getPos$1","setStyle","setStyles","stylesArg","getStyle","getSize","w","getRect","size","elms","getParents","collect","resolvedRoot","selectorVal","getParent","_findSib","func","getNext","getPrev","isParentNode","select","_b","context","setAttribs","setHTML","create","newElm","createHTML","outHtml","createFragment","frag","remove","keepChildren","$node","removeAllAttribs","parseStyle","cssText","serializeStyle","styleElm","loadCSS","toggleClass","cls","classes","addClass","removeClass","hasClass","show","hide","isHidden","uniqueId","getOuterHTML","setOuterHTML","insertAfter","reference","referenceNode","replace","oldElm","replacee","rename","attrNode","findCommonAncestor","ps","pe","isNonEmptyElement","isEmpty","options","whitespaceElements","nonEmptyElements","bogusVal","createRng","split","replacementElm","bind","rv","boundTarget","boundName","boundFunc","dispatch","fire","getContentEditable","contentEditable","_","DOM$b","QUEUED","LOADING","LOADED","FAILED","ScriptLoader","reject","cleanup","done","error","queue","scripts","execCallbacks","processResults","failures","reason","processQueue","nextQueuedItem","uniqueScripts","Cell","initial","firstIndex","isRaw","isTokenised","currentCode","getLanguageData","I18n","newCode","code","langData","lcNames","translation","lcName","getLangData","textStr","removeContext","substitued","$1","$2","dir","AddOnManager","_listeners","runListeners","matchedListeners","listener","isLoaded","isAdded","loadLanguagePack","languages","language","wrappedLanguages","requireLangPack","waitFor","addOn","createUrl","baseUrl","dep","addOnUrl","urlString","singleton","doRevoke","subject","revoke","repeatable","delay","intervalId","functionToRepeat","value$2","first$1","rate","timer","last$1","cancel","annotation","dataAnnotation","dataAnnotationId","dataAnnotationActive","dataAnnotationClasses","dataAnnotationAttributes","isRoot$1","identify","annotationName","rng","an","newStart","uid","findMarkers","isAnnotation","isBogusElement","descendant","findAll","markers","directory","m","nodesAlready","setup$y","registry","changeCallbacks","initData","withCallbacks","updateCallbacks","callbackMap","outputData","fireCallbacks","fireNoAnnotation","toggleActiveAttr","onNodeChange","annotations","setup$x","dataAnnotation$1","identifyParserNode","removeDirectAnnotation","customAttrNames","customClasses","classList","newClassList","create$c","unique","generate$1","time","random","remove$4","clone$2","original","isDeep","shallow$1","deep$1","shallowAs","mutate","TextWalker","isBoundary","walk","direction","TextSeeker","isBlockBoundary","offset","process","newOffset","round$2","clone$1","rect","collapse","toStart","isEqual","rect1","rect2","isValidOverflow","overflowY","isAbove$1","halfHeight","isBelow$1","containsXY","clientX","clientY","boundingClientRectFromRects","rects","prevRect","distanceToRectEdgeFromXY","cx","cy","overlapY","r1","r2","clamp$2","min","max","getSelectedNode","startContainer","startOffset","getNode$1","childNodes","safeOffset","getNodeUnsafe","extendingChars","isExtendingChar","ch","or","and","isElement$4","isCaretCandidate$2","isBlock$2","isFloated","isValidElementCaretCandidate","isNotPre","isText$7","isBr$3","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","getBrClientRect","brNode","nbsp$1","clientRect","getBoundingClientRectWebKitText","sc","ec","so","eo","newRng","getBoundingClientRect$1","isZeroRect","clientRects","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","CaretPosition","isAtStart","isAtEnd","toRange","getClientRects","isVisible","getNode","pos1","pos2","trimEmptyTextNode$1","insertNode","insertFragment","rangeInsertNode","isText$6","isBogus","nodeIndex","normalizedParent","getChildNodes","normalizedTextOffset","equal","normalizedNodeIndex","numTextFragments","createPathItem","parentsUntil$1","create$b","outputOffset","resolvePathItem","findTextPosition","targetOffset","dataLen","resolve$1","paths","nodeOffset","isContentEditableFalse$9","getNormalizedTextOffset$1","trim","trimmedOffset","getPoint","point","after","getLocation","selection","forward","fakeCaret","findIndex","moveEndPoint$1","normalizeTableCellSelection","findSibling","findAdjacentContentEditableFalseElm","getOffsetBookmark","getCaretBookmark","getRangeBookmark","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","getBookmark$2","getUndoBookmark","value$1","applyHelper","constHelper","outputHelper","output","_onError","onValue","Result","onError","_onValue","optional","err","Adt","cases","constructors","adt","acase","keys$1","argLength","foldArgs","branches","branchKeys","reqKey","label","partition$1","errors","isInlinePattern","pattern","isBlockPattern","normalizePattern","formatOrCmd","onFormat","onCommand","formats","format","cmd","command","commandValue","getBlockPatterns","patterns","getInlinePatterns","createPatternSet","dynamicPatternsLookup","fromRawPatterns","fromRawPatternsLookup","lookupFn","ctx","rawPatterns","deviceDetection$1","DOM$a","getHash","isRegExp","stringOrObjectProcessor","bodyOptionProcessor","valid","bodyObj","register$7","registerOption","isInline$1","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre$1","getForcedRootBlock","getForcedRootBlockAttrs","getNewlineBehavior","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getIconPackName","getIconsUrl","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","getLanguageUrl","shouldIndentUseMargin","getIndentation","getContentCss","getContentStyle","getFontCss","getDirectionality","getInlineBoundarySelector","getObjectResizing","getResizeImgProportional","getPlaceholder","getEventRoot","getServiceMessage","getTheme","getThemeUrl","getModel","getModelUrl","isInlineBoundariesEnabled","getFormats","getPreviewStyles","canFormatEmptyLines","getFormatNoneditableSelector","getCustomUiSelector","hasHiddenInput","shouldPatchSubmit","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","getCustomUndoRedoLevels","shouldDisableNodeChange","isReadOnly$1","hasEditableRoot$1","hasContentCssCors","getPlugins","getExternalPlugins$1","shouldBlockUnsupportedDrop","isVisualAidsEnabled","getVisualAidsTableClass","getVisualAidsAnchorClass","getIframeAriaText","getSetupCallback","getInitInstanceCallback","getUrlConverterCallback","getAutoFocus","shouldBrowserSpellcheck","getProtect","shouldPasteBlockDrop","shouldPasteDataImages","getPastePreProcess","getPastePostProcess","getNewDocumentContent","getPasteWebkitStyles","shouldPasteRemoveWebKitStyles","shouldPasteMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getPasteTabSpaces","shouldAllowHtmlDataUrls","getTextPatterns","getTextPatternsLookup","getNonEditableClass","getEditableClass","getNonEditableRegExps","shouldPreserveCData","shouldHighlightOnFocus","shouldSanitizeXss","shouldUseDocumentWrite","hasTextPatternsLookup","getFontStyleValues","getFontSizeClasses","isEncodingXml","getAllowedImageFileTypes","hasTableTabNavigation","getDetailsInitialState","getDetailsSerializedState","shouldForceHexColor","shouldSandboxIframes","isElement$3","isText$5","removeNode$1","trimCount","trimmedText","deleteZwspChars","removeUnchanged","remove$3","removeTextAndReposition","removeElementAndReposition","newPosition","removeTextCaretContainer","removeElementCaretContainer","removeAndReposition","caretContainerNode","isContentEditableFalse$8","isMedia$1","isTableCell$1","inlineFakeCaretSelector","getAbsoluteClientRect","scrollX","scrollY","rootRect","margin","trimInlineCaretContainers","fakeCaretTargetNodes","FakeCaret","hasFocus","lastVisualCaret","cursorInterval","caretBlock","caret","startBlink","isInlineFakeCaretTarget","caretState","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableTrue$1","isContentEditableFalse$7","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$2","isText$4","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","isCefOrCaretContainer","getEditingHost","isCETrue","getParentBlock$3","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$2","normalizeRange","leanLeft","leanRight","location","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getElementFromPrevPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","HDirection","isContentEditableFalse$6","isText$3","isElement$1","isBr$2","isCaretCandidate","isAtomic","isEditableCaretCandidate","getParents$3","nodeAtIndex","getCaretCandidatePosition","moveForwardFromBr","nextNode","findCaretPosition$1","startPos","innerNode","rootContentEditableFalseElm","CaretWalker","walkToPositionIn","position","fromPosition","afterElement","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","isAtBr","shouldSkipPosition","navigate","navigateIgnore","ignoreFilter","positionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID","isCaretNode","getParentCaretContainer","currentNode","isStringPathBookmark","bookmark","isRangeBookmark","isIdBookmark","isIndexBookmark","isPathBookmark","isForwardBookmark","addBogus","resolveCaretPositionBookmark","endPos","insertZwsp","isEmpty$1","tryFindRangePosition","padEmptyCaretContainer","setEndPoint","isValidTextNode","restoreEndPoint","markerParent","keep","otherMarker","resolvePaths","resolveId","spos","epos","resolveIndex","getBookmark$1","moveToBookmark","isBookmarkNode$1","isNbsp","expected","isWhiteSpace","isContent","getRanges$1","ranges","getSelectedNodes","hasMultipleRanges","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","selectedCells","getCellsFromEditor","getClosestTable","cell","getStartNode","getEndNode","getFirstChildren","getLastChildren","hasAllContentsSelected","endNode","moveEndPoint","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","isNode","isElementNode$1","isElementDirectlySelected","selectedAttr","preserveSelection","action","shouldMoveStart","selectedNodeBeforeAction","isSelectedBeforeNodeNoneditable","moveStartToNearestText","selectedNode","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","allowSpaces","isEmptyTextNode$1","isWrapNoneditableTarget","baseDataSelector","formatNoneditableSelector","isWrappableNoneditable","replaceVars","vars","isEq$5","str1","normalizeStyleValue","strValue","style","getTextDecoration","decoration","getParents$2","isFormatPredicate","formatName","isVariableFormatName","isVariableValue","field","fieldValues","areSimilarFormats","otherFormatName","validKeys","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","isBlockFormat","isWrappingBlockFormat","isNonWrappingBlockFormat","isSelectorFormat","isInlineFormat","isMixedFormat","shouldExpandToSelector","getEmptyCaretContainers","isCaretContainerEmpty","isEmptyCaretFormatElement","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","isBogusBr","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","isSelfOrParentBookmark","expandRng","includeTrailingSpace","endContainer","endOffset","walk$3","exclude","firstNode","lastNode","collectSiblings","findEndPoint","walkBoundary","startPoint","endPoint","validBlocks","isZeroWidth","wrapName","applyWordGrab","applyAnnotation","masterUId","decorate","directAnnotation","otherData","attributeNames","makeAnnotation","eDoc","master","annotate","newWrappers","finishWrapper","getOrOpenWrapper","processElements","elems","processElement","processNodes","annotateWithBookmark","initialRng","hasFakeSelection","masterUid","selectionRng","Annotator","changes","removeAnnotations","BookmarkManager","isXYWithinRange","firePreProcess","firePostProcess","fireRemove","fireDetach","fireSwitchMode","fireObjectResizeStart","origin","fireObjectResized","firePreInit","firePostRender","fireInit","firePlaceholderToggle","fireError","errorType","fireFormatApply","fireFormatRemove","fireBeforeSetContent","fireSetContent","fireBeforeGetContent","fireGetContent","fireAutocompleterStart","fireAutocompleterUpdate","fireAutocompleterEnd","firePastePreProcess","internal","firePastePostProcess","firePastePlainTextToggle","fireEditableRootStateChange","VK","elementSelectionAttr","controlElmSelector","abs","round$1","resizeHandles","isTouchEvent","ControlSelection","editableDoc","rootDocument","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","selectedElmX","selectedElmY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","isImage","isEventOnImageOutsideRange","touch","contextMenuSelectImage","getResizeTargets","isResizable","createGhostElement","setSizeProp","targets","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","proportional","resizeHelperX","resizeHelperY","endGhostResize","wasResizeStarted","showResizeRect","targetElm","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","handle","startDrag","handleElm","throttledShowResizeRect","removeSelected","isChildOrEqual","updateResizeRect","controlElm","selectedValue","img","disableGeckoResize","startElm","setStart","situ","setFinish","relativeToNative","startSitu","finishSitu","exactToNative","soffset","finish","foffset","adt$3","fromRange","getRanges","doDiagnose","rev","diagnose","SimRange","caretPositionFromPoint","caretRangeFromPoint","availableSearch","fromPoint$1","adt$2","cata","onBefore","onOn","onAfter","getStart$2","before$1","on","after$1","Situ","adt$1","exactFromRange","simRange","getStart$1","_finishSitu","_soffset","_finish","_foffset","domRange","relative","exact","getWin","SimSelection","beforeSpecial","name$1","preprocessRelative","preprocessExact","preprocess","fromElements","toNative","getDomRange","filtered","getAtPoint","fromPoint","isEq$4","rng1","findParent","hasParent$1","hasParentWithName","isCeFalseCaretContainer","hasBrBeforeAfter","isPrevNode","hasContentEditableFalseParent","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","normalize$2","normRng","splitText","newContainer","RangeUtils","rangeLike","newRange","normalizedRng","api","getOffset","aggregate","properties","cumulativeInclusions","get$2","getDocument","walkUp","navigation","rest","pathTo","Navigation","find","frames","loc","excludeFromDescend","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","last","markerInfo","cleanupFun","createMarker$1","span","elementMarker","withMarker","preserveWith","_s","_e","applyWithMarker","withScrollEvents","withElement","startElement","endElement","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollElementIntoView","scrollRangeIntoView","focus$1","preventScroll","hasFocus$1","active$1","search","clamp$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","readRange","getBookmark","validate","bookmarkToNativeRng","store","newBookmark","getRng","restore","FocusManager","className","wrappedSetTimeout","wrappedSetInterval","Delay","isManualNodeChange","registerPageMouseUp","throttledStore","mouseUpPage","registerMouseUp","registerEditorEvents","register$6","documentFocusInHandler","DOM$9","isEditorUIElement","isEditorContentAreaElement","isUIElement","customSelector","getActiveElement","registerEvents$1","editorManager","toggleContentAreaOnFocus","contentArea","focusedEditor","activeEditor","unregisterDocumentEvents","setup$w","getContentEditableHost","getCollapsedNode","getFocusInElement","normalizeSelection","caretPos","focusBody","hasElementFocus","hasIframeFocus","hasInlineFocus","rawBody","hasUiFocus","hasEditorOrUiFocus","focusEditor","bookmarkRng","contentEditableHost","activateEditor","focus","skipFocus","isEditableRange","getEndpointElement","real","getStart","getEnd$1","skipEmptyTextNodes","forwards","orig","getSelectedBlocks","endElm","selectedBlocks","processRanges","getEnd","isTextNodeWithCursorPosition","isContentEditableFalse$5","elementsWithCursorPosition","isCursorPosition","first","descendantRtl","autocompleteSelector","create$9","findIn","detect$1","remove$2","typeLookup","walk$2","isEmptyTextNode","AstNode","selfAttrs","cloneAttrs","selfAttr","refNode","whitespace","unescapedTextParents","containsZwsp","getTemporaryNodeSelector","tempAttrs","getTemporaryNodes","createZwspCommentWalker","createUnescapedZwspTextWalker","hasZwspComment","hasUnescapedZwspText","hasTemporaryNode","trimTemporaryNodes","emptyAllNodeValuesInWalker","curr","emptyZwspComments","emptyUnescapedZwspTexts","trim$1","conditionalTrims","trimmed","cloned","condition","cleanupBogusElements","bogusElements","cleanupInputNames","inputs","input","trimEmptyContents","emptyRegExp","getPlainTextContent","offscreenDiv","getContentFromBody","getContentInternal","makeMap$1","Writer","indent","indentBefore","indentAfter","htmlOutput","HtmlSerializer","writer","handlers","sortedAttrs","elementRule","nonInheritableStyles","shorthandStyleProps","getStyleProps","isNonInheritableStyle","hasInheritableStyles","getLonghandStyleProps","prop","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","nodeValue","parentValue","nodeStyleProp","propExists","longhandProps","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","dropLast","parentsUntil","parentsAndSelf","navigateIgnoreEmptyTextNodes","isBlock$1","getClosestBlock$1","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr$1","findBr","parentBlocks","isBeforeBr$1","isAfterBr","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isPreValue","isInPre","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","isCefBlock","isSiblingCefBlock","isBeforeCefBlock","nextPos","isNextCefBlock","isAfterCefBlock","prevPos","isPrevCefBlock","needsToHaveNbsp","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","isWhiteSpaceAt","hasNbsp","normalizeNbspMiddle","chars","normalizeNbspAtStart","makeNbsp","firstPos","normalizeNbspInMiddleOfTextNode","newText","normalizeNbspAtEnd","lastPos","normalizeNbsps","normalizeNbspsInEditor","normalize$1","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","needsReposition","reposition","beforeOrStartOf","afterOrEndOf","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwardsFromElm","findCaretPositionForwardsFromElm","findCaretPositionBackwards","findCaretPositionForward","findCaretPosition","findCaretPosOutsideElmAfterDelete","setSelection$1","eqRawNode","paddEmptyBlock","preserveEmptyCaret","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","isInlineElement","deleteElement$2","moveCaret","afterDeletePos","normalizedAfterDeletePos","paddPos","strongRtl","hasStrongRtl","isInlineTarget","isRtl","findInlineParents","findRootInline","hasSameParentBlock","block1","block2","isAtZwsp","normalizePosition","normalizeForwards","normalizeBackwards","execCommandIgnoreInputEvents","inputBlocker","execEditorDeleteCommand","execNativeDeleteCommand","execNativeForwardDeleteCommand","isBeforeRoot","isTextBlockOrListItem","getParentBlock$2","paddEmptyBody","moveSelection","willDeleteLastPositionInElement","fromPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","freefallRtl","deleteRangeContents","lastBlock","additionalCleanupNodes","ancestor$1","isRootFromElement","getTableCells","table","getTable$1","selectionInTableWithNestedTable","details","startTable","endTable","isStartTableParentOfEndTable","isEndTableParentOfStartTable","adjustQuirksInDetails","getTableDetailsFromRange","isStartInTable","isEndInTable","isSameTable","tableCellRng","tableSelection","cells","deleteAction","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","isSingleCellTable","rows","getCellRng","startCell","endCell","getCellRangeFromStartTable","getCellRangeFromEndTable","getTableSelectionFromCellRng","getTableSelections","selectionDetails","sameTableSelection","startTableSelection","endTableSelection","getCellIndex","getSelectedCells","startIndex","endIndex","isSingleCellTableContentSelected","optCellRng","unselectCells","otherContentRng","handleSingleTable","handleMultiTable","startTableSelectedCells","endTableSelectedCells","getActionFromRange","cleanCells","getOutsideBlock","handleEmptyBlock","startInTable","emptyBlock","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","deleteTableElement","deleteCellRange","deleteCaptionRange","emptyElement","deleteTableRange","getParentCaption","deleteRange$3","getParentCell","deleteBetweenCells","fromCell","toCell","isDeleteOfLastCharPos","fromCaption","emptyCaretCaption","validateCaretCaption","toCaption","deleteCaretInsideCaption","deleteCaretCells","deleteCaretCaption","isNearTable","isBeforeOrAfterTable","deleteCaret$3","backspaceDelete$a","getContentEditableRoot$1","internalAttributesPrefixes","each$9","ElementUtils","internalAttributes","compare","attribs","isAttributeInternal","compareObjects","obj1","obj2","attributeName","isHeading","isSummary","traverse","matchNode$1","nodeFilters","attributeFilters","nl","ai","al","findMatchingNodes","childNode","runFilters","matchRecord","filteringAttributes","filter$2","paddEmptyNode","astNode","isPaddedWithNbsp","hasOnlyChild","isPadded","isLineBreakNode","findClosestEditingHost","editableNode","removeOrUnwrapInvalidNode","originalNodeParent","cleanInvalidNodes","onCreate","textBlockElements","nonSplittableElements","fixed","isSplittableElement","newParent","isInvalid","hasClosest","parentName","createRange","normalizeBlockSelectionRange","newEndPos","normalize","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","isListFragment","cleanupDomFragment","domFragment","toDomFragment","serializer","listItems","isPadding","isListItemPadded","isEmptyOrPadded","trimListItems","getParentLi","isParentBlockLi","getSplit","beforeRng","afterRng","findFirstIn","newCaretPos","findLastOf","insertMiddle","li","insertBefore$2","insertAfter$2","insertAtCaret$1","liTarget","liElms","BEGINNING","END","isAt","caretWalker","newPosNode","mergeableWrappedElements","shouldPasteContentOnly","isPastingSingleElement","isWrappedElement","isContentEditable","isPastingInTheSameBlockTag","isPastingInContentEditable","isTableCell","isTableCellContentSelected","validInsertion","trimBrsFromTableCell","reduceInlineTextElements","merge","textInlineElements","elementUtils","markFragmentElements","unmarkFragmentElements","isPartOfFragment","canHaveChildren","moveSelectionToMarker","_c","nextRng","parentEditableElm","findNextCaretRng","isCell","deleteSelectedContent","findMarkerNode","markerNode","notHeadingsInSummary","insertHtmlAtCaret","parser","bookmarkHtml","caretElement","parserArgs","editingHost","toExtract","isTreeNode","setEditorHtml","noSelection","setContentString","padd","forcedRootBlockName","trimmedHtml","setContentTree","setContentInternal","ensureIsRoot","transform","transformed","closest$1","isEq$3","matchesUnInheritedFormatSelector","matchParents","similar","matchedNode","matchNode","matchName","matchItems","itemName","matchAttributes","expectedValue","isEmptyValue","match$2","matchAll","matchedFormatNames","checkedMap","closest","rawElm","canApply","matchAllOnNode","formatNames","matchSimilar","ZWSP","importNode","ownerDocument","findFirstTextNode","createCaretContainer","fill","trimZwspFromCaretContainer","removeCaretContainerNode","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","cleanFormatNode","formatter","validFormats","matchedFormats","fmtName","clonedFormatNode","applyCaretFormat","wordcharRegex","removeCaretFormat","hasContentAfter","expandedRng","parentsAfter","newCaretContainer","cleanedFormatNode","caretTextNode","disableCaretContainer","keyCode","endsWithNbsp","setup$v","createCaretFormat","innerMost","replaceWithCaretFormat","createCaretFormatAtStart$1","isFormatElement","inlineElements","postProcessHooks","isPre","addPostProcessHook","postProcess$1","hasPreSibling","pre","blocks","joinPre","pre1","pre2","sPre2","preBlocks","listItemStyles","hasListStyles","fmt","findExpandedListItemFormat","getExpandedListItemFormat","isRngStartAtStartOfElement","isRngEndAtEndOfElement","isEditableListItem","getFullySelectedBlocks","middle","getFullySelectedListItems","getPartiallySelectedListItems","each$8","isElementNode","findElementSibling","mergeSiblingsNodes","isPrevEditable","isNextEditable","tmpSibling","mergeSiblings","clearChildStyles","_value","processChildElements","unwrapEmptySpan","hasStyle","applyStyle","removeResult","MCE_ATTR_RE","each$7","isEq$2","isTableCellOrRow","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","wrap$1","wrapWithSiblings","isColorFormatAndAnchor","rootBlockElm","forcedRootBlock","processFormatAttrOrStyle","removeEmptyStyleAttributeIfNeeded","removeStyles","compareNode","stylesModified","styleName","styleValue","normalizedStyleValue","removeListStyleFormats","liFmt","removeNodeFormatInternal","preserveAttributes","attrsToPreserve","currentValue","valueOut","findFormatRoot","formatRoot","removeNodeFormatFromClone","newName","wrapAndSplit","lastClone","firstClone","formatRootParent","removeFormatInternal","splitToFormatRoot","isRemoveBookmarkNode","removeFormatOnNode","removeNodeFormat","currentNodeMatches","removeRngStyle","removeFormat$1","each$6","mergeTextDecorationsAndColor","processTextDecorationsAndColor","parentTextDecoration","mergeBackgroundColorAndFontSize","hasFontSize","mergeSubSup","inverseTagDescendants","mergeWithChildren","mergeWithParents","each$5","canFormatBR","validBRParentElements","hasCaretNodeSibling","applyStyles","styleVal","applyFormatAction","isCollapsed","setElementFormat","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","isMatchingWrappingBlock","canRenameBlock","isEditableDescendant","isValidBlockFormatForNode","canWrapNode","isWrappableNoneditableElm","isValidWrapNode","isCaret","isCorrectFormatForNode","currentWrapElm","lastContentEditable","contentEditableValue","getChildCount","mergeStyles","childCount","fake","applyFormat$1","hasVars","setup$u","registeredFormatListeners","updateAndFireChangeCallbacks","nodeOrRange","fallbackElement","matchingNode","matchingFormat","registeredCallbacks","runIfChanged","spec","isSet","addListeners","formatChangeItems","getCurrent","toAppendTo","removeListeners","formatChangedInternal","toggle","explode$1","create$8","filters","newCallbacks","removeAttrs","addFontToSpansFilter","domParser","fontSizes","face","addStrikeFilter","convertToSTag","addFilters","register$5","addNodeFilter","htmlParser","blockElements","prevName","lastParent","blobUriToBlob","extractBase64Data","parseDataUri","uri","base64Encoded","extractedData","buildBlob","dataUriToBlob","uriToBlob","blobToDataUri","blob","reader","count$1","uniqueId$1","processDataUri","dataUri","base64Only","generateBlobInfo","base64","createBlobInfo$1","blobCache","blobInfo","dataUriToBlobInfo","imageToBlobInfo","imageSrc","invalidDataUri","isBogusImage","isInternalImageSource","registerBase64ImageFilter","processImage","inputSrc","isMimeType","mime","createSafeEmbed","src","sandboxIframes","embed","register$4","appendRel","rel","addNoOpener","newRel","classValue","validClassesMap","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create$7","apply","construct","fun","thisValue","Func","arrayForEach","unapply","arrayPop","arrayPush","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","unconstruct","_len","_key","_len2","_key2","addToSet","transformCaseFunc","lcElement","cleanArray","object","newObject","lookupGetter","desc","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","ATTR_NAME","policyName","createDOMPurify","window","DOMPurify","document","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","hooks","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","parentTagName","_forceRemove","_removeAttribute","_initDocument","dirty","leadingWhitespace","dirtyPayload","_createNodeIterator","_isClobbered","_isNode","_executeHook","entryPoint","_sanitizeElements","_isBasicCustomElement","childClone","expr","_isValidAttribute","lcTag","_sanitizeAttributes","hookEvent","namespaceURI","initValue","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","returnNode","nodeIterator","serializedHTML","hookFunction","purify","each$4","queryParts","DEFAULT_PORTS","safeSvgDataUrlElements","blockSvgDataUris","allowSvgDataUrls","decodeUri","encodedUri","isInvalidUri","decodedUri","URI","uriComponents","baseUri","isProtocolRelative","urlMatch","part","pathMatch","relativeUri","tu","uu","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","nb","tr","normalizedPath","baseParts","pathParts","outPath","noProtoHost","filteredUrlAttrs","internalElementAttr","processNode","_d","lcTagName","isInternalElement","bogus","processAttr","ele","shouldKeepAttribute","isBooleanAttribute","isRequiredAttributeOfInternalElement","filterAttributes","setupPurify","namespaceTracker","purify$1","getPurifyConfig","mimeType","config","sanitizeNamespaceElement","xlinkAttrs","getSanitizer","_mimeType","makeMap","extend$1","transferChildren","nativeParent","nsSanitizer","isSpecial","nativeChild","walkTree","preprocessors","postprocessors","traverseOrder","postprocess","whitespaceCleaner","textRootBlockElements","allWhiteSpaceRegExp","startWhiteSpaceRegExp","endWhiteSpaceRegExp","hasWhitespaceParent","isTextRootBlockEmpty","isAtEdgeOfBlock","neighbour","isNodeEmpty","getRootBlockName","DomParser","nodeFilterRegistry","attributeFilterRegistry","defaultedSettings","sanitizer","parseAndSanitizeWithContext","rootName","isSpecialRoot","wrappedHtml","getNodeFilters","removeNodeFilter","addAttributeFilter","getAttributeFilters","removeAttributeFilter","findInvalidChildren","isWrappableNode","addRootBlocks","rootBlockName","rootBlockNode","rootBlock","exports","whitespacePre","whitespacePost","invalidFinder","matchFinder","topLevelChildren","otherChildren","serializeContent","withSerializedContent","fireEvent","parserSettings","serializedContent","eventArgs","preProcessGetContent","postProcessGetContent","preProcessSetContent","processedEventArgs","postProcessSetContent","tableModel","tableRow","cellPosition","getSpan","td","fillout","rowspan","colspan","y2","x2","cellExists","skipCellsX","getWidth","row","findElementPos","extractRows","sx","sy","ex","ey","newRows","slice","subTable","createDomTable","tableElement","tableBody","modelRowsToDomRows","fromDom","tableElm","toDom","subsection","findParentListContainer","getFullySelectedListWrappers","_li","listCont","listElm","listStyles","_style","wrap","innerElm","directListWrappers","commonAnchorContainer","getWrapElements","wrapElements","listWrappers","allWrappers","emptyFragment","getFragmentFromRange","getParentTable","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","getSelectionFragment","read$3","isCollapsibleWhitespace","getInnerText","bin","getContextNodeName","parentBlockOpt","getTextContent","contextNodeName","rangeContentClone","nonRenderedText","parentBlockText","textIndex","hasProceedingSpace","hasTrailingSpace","getSerializedContent","tmpElm","extractSelectedContent","setupArgs$3","getSelectedContentInternal","defaultedArgs","updatedArgs","KEEP","INSERT","DELETE","diff","vDown","vUp","snake","diag","buildScript","start1","end1","start2","end2","script","getMiddleSnake","j","i2","buildSnake","sum","getOuterHtml","insertAt","removeAt","applyDiff","read$2","trimZwsp","write","fragments","currentFragments","lazyTempDocument","hasIframes","createFragmentedLevel","createCompleteLevel","createFromEditor","applyToEditor","level","getLevelContent","getCleanLevelContent","hasEqualContent","level1","level2","hasEqualCleanedContent","isEq$1","isUnlocked","locks","setTyping","undoManager","typing","endTyping","endTypingLevelIgnoreLocks","beforeChange$1","beforeBookmark","addUndoLevel$1","currentLevel","newLevel","lastLevel","bm","customUndoRedoLevels","clear$1","extra$1","callback1","callback2","redo$1","undo$1","reset$1","hasUndo$1","hasRedo$1","transact$1","ignore$1","addVisualInternal","matchedElm","makePlainAdaptor","makeRtcAdaptor","rtcEditor","defaultVars","init","autocompleter","_undoManager","_locks","_index","_node","_similar","_rfl","_details","_format","makeNoopAdaptor","nul","isRtc","getRtcSetup","rtcPlugin","setup$t","editorCast","setup","getRtcInstanceWithFallback","getRtcInstanceWithError","rtcInstance","beforeChange","addUndoLevel","undo","redo","clear","reset","hasUndo","hasRedo","transact","ignore","extra","matchFormat","matchAllFormats","matchNodeFormat","canApplyFormat","closestFormat","applyFormat","removeFormat","toggleFormat","formatChanged","getContent$2","setContent$2","insertContent$1","getSelectedContent","addVisual$1","bindEvents","addAutocompleterDecoration","removeAutocompleterDecoration","getContent$1","removeEmpty","walkPastBookmark","merge$1","outer","inner","outerElm","oldLength","normalizeTextIfRequired","mergeAndNormalizeText","outerNode","rngSetContent","prevText","nextText","setupArgs$2","cleanContent","contextBlock","contextArgs","setContent$1","cleanedContent","deleteFromCallbackMap","SelectorChanged","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","isAttachedToDom","isValidRange","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","setCursorLocation","setRng","getContent","setContent","getRng$1","bookmarkManager","select$1","getSel","isEditable","fakeSelectedElements","tryCompareBoundaryPoints","how","sourceRange","destinationRange","setNode","getSelectedBlocks$1","isForward","anchorNode","focusNode","anchorRange","focusRange","scrollContainer","controlSelection","register$3","trimTrailingBr","isBr","brNode1","brNode2","preProcess$1","oldDoc","clonedNode","impl","shouldFireEvent","process$1","addTempAttr","postProcess","getHtmlFromNode","parseHtml","serializeNode","toHtml","DomSerializerImpl","serialize","DomSerializer","domSerializer","defaultFormat$1","setupArgs$1","defaultFormat","setupArgs","removedOptions","deprecatedOptions","removedPlugins","deprecatedPlugins","getMatchingOptions","searchingFor","settingNames","setting","getRemovedOptions","getDeprecatedOptions","getMatchingPlugins","plugins","pluginNames","plugin","getRemovedPlugins","getDeprecatedPlugins","entry","logRemovedWarnings","rawOptions","normalizedOptions","hasRemovedPlugins","hasRemovedOptions","isLegacyMobileTheme","listJoiner","themesMessage","pluginsMessage","optionsMessage","getPluginDescription","logDeprecatedWarnings","hasDeprecatedPlugins","hasDeprecatedOptions","logWarnings","DOM$8","restoreOriginalStyles","safeDestroy","clearDomReferences","restoreForm","form","remove$1","_selectionOverrides","editorUpload","destroy","automatic","IconManager","iconPack","ModelManager","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","getBoundingClientRect","isInsideElementContentArea","bodyElm","clientWidth","clientHeight","transpose","isXYInContentArea","transposedPoint","fromDomSafe","isEditorAttachedToDom","rawContainer","NotificationManagerImpl","unimplemented","NotificationManager","notifications","getImplementation","theme","getTopNotification","notification","addNotification","closeNotification","otherNotification","open","close","getNotifications","registerEvents","serviceMessage","PluginManager","ThemeManager","WindowManagerImpl","WindowManager","dialogs","funcBind","fireOpenEvent","dialog","fireCloseEvent","addDialog","closeDialog","otherDialog","getTopDialog","storeSelectionAndOpenDialog","openDialog","params","openUrl","alert","windowManagerImpl","confirm","displayNotification","displayError","uploadError","logError","createLoadError","pluginLoadError","iconsLoadError","languageLoadError","themeLoadError","modelLoadError","pluginInitError","initError","console","isContentCssSkinName","toContentSkinResourceName","isBundledCssSkinName","getContentCssUrls","transformToUrls","getFontCssUrls","cssLinks","skinUrl","contentCssFile","appendContentCssFromSettings","getAllImages","ImageScanner","uploadStatus","cachedPromises","images","promises","imageInfo","newPromise","UploadStatus","blobUriStatuses","createStatus","resultUri","hasBlobUri","blobUri","seed","rnd","uuid","BlobCache","cache","mimeToExt","filename","toBlobInfo","findFirst","cachedBlobInfo","Uploader","pendingPromises","pathJoin","path1","path2","defaultHandler","progress","xhr","json","formData","uploadHandler","noUpload","handlerSuccess","handlerFailure","resolvePending","uploadBlobInfo","openNotification","percent","isDefaultHandler","pendingUploadBlobInfo","uploadBlobs","blobInfos","createUploader","ImageUploader","uploader","showNotification","isEmptyForPadding","addPaddingToEmpty","EditorUpload","imageScanner","urlFilters","aliveGuard","cacheInvalidator","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","replaceImageUriInView","image","uploadImages","scanForImages","imageInfos","imagesToRemove","shouldDispatchChange","filteredResult","uploadInfo","removed","sugarElement","parentOpt","uploadImagesAuto","isValidDataUriImage","imgElm","addFilter","resultItem","replaceBlobUris","get$1","strike","_fmt","_itemName","genericBase","cellBase","cellFormats","FormatRegistry","register","unregister","each$3","isPreviewItem","parsedSelectorToHtml","ancestry","createElement","sItem","getRequiredParent","elmRule","parentsRequired","wrapInHtml","ancestors","parentCandidate","ancestorName","parentRequired","siblingElm","parentSiblings","parseSelectorItem","$0","$3","$4","parseSelector","getCssText","previewCss","previewStyles","removeVars","getComputedStyle","preview","previewFrag","previewElm","rawParentFontSize","parentFontSize","setup$s","Formatter","formatChangeState","shouldIgnoreCommand","isFirstTypedCharacter","addNonTypingUndoLevel","isMeta","modKey","isInsertReplacementText","isInsertTextDataNull","isInsertFromPasteOrDrop","addKeyboardShortcuts","UndoManager","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","isNonTypingKeyboardEvent","isTypingKeyboardEvent","isVisuallyEmpty","setup$r","placeholder","updatePlaceholder","showPlaceholder","blockPosition","blockBoundary","getBlockPosition","containerElm","isDifferentBlocks","getClosestHost","hasSameHost","isEditable$1","hasValidBlocks","isValidBlock","skipLastBr","lastPositionInBlock","readFromRange","fromBlockPos","toBlockPos","blockPos","read$1","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","isEmptyBefore","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","newFromBlockDescendants","helper","findInsertionPoint","parentsAndSelf$1","getInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","backspaceDelete$9","deleteRangeMergeBlocks","isRawNodeInTable","isSelectionInTable","isEverythingSelected","noPrevious","noNext","emptyEditor","deleteRange$2","backspaceDelete$8","_forward","showCaret","scrollIntoView","getNodeRange","selectNode","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","trimEmptyTextNode","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","deleteBoundaryText","getNextPosFn","isBeforeFn","nextCaretPosition","normalizedNextCaretPosition","backspaceDelete$7","getEdgeCefPosition","atStart","isCefAtEdgeSelected","isCompoundElement","DeleteAction","isAtContentEditableBlockCaret","caretLocation","isDeleteFromCefDifferentBlocks","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","read","deleteElement$1","moveToElement","moveToPosition","getAncestorCe","backspaceDeleteCaret","deleteOffscreenSelection","backspaceDeleteRange","paddEmptyElement","backspaceDelete$6","deleteCaret$2","backspaceDelete$5","isText$2","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertBefore$1","insertAfter$1","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","getElement","readLocation","getName","outside","inside","isEq","location1","location2","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","findLocationTraverse","findLocationSimple","findLocation$1","hasSelectionModifyApi","moveRel","moveByWord","BreakType","flip","positions","walk$1","getBreakType","currentPos","getPositionsUntil","breakType","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","isAtFirstLine","isAtLastLine","getFirstLinePositions","getLastLinePositions","getClosestPositionAbove","getClosestPositionBelow","isContentEditableFalse$4","distanceToRectLeft$1","distanceToRectRight$1","isNodeClientRect","findClosestClientRect","oldClientRect","oldDistance","newDistance","getNodeClientRects","toArrayWithNode","VDirection","findUntil","walkUntil","isAboveFn","isBeflowFn","line","targetClientRect","aboveLineNumber","lineNumber","isLineNumber","upUntil","downUntil","getLastClientRect","positionsUntil","isBelowFn","isAboveLine","isLine","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","isElement","rangeIsInContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","closestNextLineRect","getLineEndPoint","host","lineInfo","moveToLineEndPoint$3","isElementPosition","setCaretPosition","setSelected","renderCaretLocation","getPositionFromRange","findLocation","isInlineTarget$1","toggleInlines","inlineBoundaries","selectedInlines","targetInlines","safeRemoveCaretContainer","caretValue","renderInsideInlineCaret","inlines","_inline","move$3","moveWord","_caret","setupSelectedState","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","rangeFromPositions","hasOnlyTwoOrLessPositionsLeft","setCaretLocation","deleteFromTo","rescope","backspaceDeleteCollapsed","toPosition","backspaceDelete$4","hasMultipleChildren","getParentsUntil","hasOnlyOneChild","getParentInlinesUntilMultichildInline","getParentInlines","getFormatNodes","parentInlines","isFormatElement$1","getFormatNodesAtStart","deleteLastPosition","deleteCaret$1","isBrInEmptyElement","isEmptyCaret","createCaretFormatAtStart","updateCaretFormat","updateFormats","missingFormats","rangeStartsAtTextContainer","rangeStartsAtStartOfTextContainer","rangeStartParentIsFormatElement","startParent","rangeStartAndEndHaveSameParent","endParent","rangeEndsAtEndOfEndContainer","rangeEndsAtEndOfStartContainer","rangeEndsAfterEndOfStartContainer","rangeEndsAtOrAfterEndOfStartContainer","requiresDeleteRangeOverride","deleteRange$1","backspaceDelete$3","hasAncestorInlineCaret","hasAncestorInlineCaretAtStart","requiresRefreshCaretOverride","refreshCaret","deleteElement","deleteCaret","isNearMedia","backspaceDelete$2","parseIndentValue","getIndentStyleName","useMargin","indentStyleName","indentElement","unit","parsedValue","validateBlocks","intentValue","canOutdent","getBlocksToIndent","isListComponent","parentIsListComponent","indentation","indentUnit","indentValue","outdent","backspaceDelete$1","findAction","deleteCommand","forwardDeleteCommand","setup$q","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","isFarEnough","distX","distY","setup$p","startData","longpressFired","debounceLongpress","isBlockElement","isValidTarget","hasBlockParent","shouldRemoveTextNode","createRootBlock","rootNodeName","restoreSelection","insertEmptyLine","setup$o","checkClassName","replaceMatchWithSpan","prevChar","findStartTagIndex","convertRegExpsToNonEditable","nonEditableRegExps","isValidContent","re","setup$n","contentEditableAttrName","editClass","nonEditClass","hasEditClass","hasNonEditClass","findBlockCaretContainer","showBlockCaretContainer","blockCaretContainer","handleBlockContainer","setup$m","isContentEditableFalse$3","moveToCeFalseHorizontally","moveToCeFalseVertically","createTextBlock","textBlock","exitPreBlock","getVisualCaretPosition$1","newBlock","getHorizontalRange","getVerticalRange","down","flipDirection","moveH$2","moveV$4","moveToLineEndPoint$1","selectToEndPoint","curRng","isTarget","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","moveV$3","moveUp","summary","moveDown","move$2","moveV$2","baseKeyPattern","defaultPatterns","defaultDelayedPatterns","matchesEvent","match$1","matchDelayed","execute","executeWithDelayedAction","moveH$1","moveV$1","moveToLineEndPoint","CellLocation","firstLayer","filterFirstLayer","lookup$1","tags","isRootOrUpperTable","isEligible","newIndex","detect","deflate","getCorners","getYAxisValue","tds","findClosestCorner","corners","newCorner","oldCorner","oldDist","newDist","getClosestCell","isTargetCorner","corner","getBottomValue","getTopValue","isAbove","isBelow","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","hasNextBreak","breakPos","startsWithWrapBreak","startsWithBrBreak","isAtTableCellLine","isAtFirstTableCellLine","isAtLastTableCellLine","isCaretAtStartOrEndOfTable","navigateHorizontally","_td","getClosestAbovePosition","getClosestBelowPosition","getTable","previous","renderBlock","insertFn","navigateVertically","move$1","mover","moveH","moveV","getCellFirstCursorPosition","tabGo","_current","tabForward","tabBackward","handleTab","rootElements","executeKeydownOverride$4","isMac","setup$l","DOM$7","alwaysNext","textBefore","textAfter","scanLeft","scanRight","repeatLeft","isValidTextRange","getText","isWhitespace","stripTrigger","trigger","findTrigger","firstChar","findStart","initRange","minChars","buffer","findTriggerIndex","spot","isText$1","toLast","toLeaf","isPreviousCharContent","leaf","_element","isStartOfWord","getTriggerContext","database","getDatabase","lookupWithContext","fetchOptions","startText","autocompleters","lookupData","ac","SimpleResultType","fold$1","partition","mapError","bind$1","bindError","svalue","serror","SimpleResult","formatObj","formatErrors","es","getErrorInfo","missingRequired","missingKey","missingBranch","branch","custom","chooseFrom","choose$1","chosen","old","deepMerge","baseMerge","merger","objects","curObject","required","defaultedThunk","fallbackThunk","defaulted$1","fallback","asOption","mergeValues","mergeErrors","ResultCombine","partitions","field$1","newKey","presence","customField$1","instantiator","fold","ifField","ifCustom","validator","extract","anyValue$1","requiredAccess","bundle","fallbackAccess","optionAccess","optionDefaultedAccess","opt","extractField","av","bundleAsOption","optValue","ov","extractFields","fields","objOf","_okey","_presence","_instantiator","arrOf","valueOf","extractValue","errs","asRaw","formatError","errInfo","choose","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","customField","validateEnum","requiredOf","requiredString","requiredFunction","requiredArrayOf","optionOf","optionString","optionFunction","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","fetch$1","onAction","onSetup","optionalText","optionalIcon","optionalTooltip","optionalLabel","active","enabled","primary","defaultedColumns","defaultedType","autocompleterSchema","createAutocompleter","baseToolbarButtonFields","baseToolbarToggleButtonFields","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","register$2","popups","dataset","popup","triggers","datasetValues","dv","setupEditorInput","update","setup$k","activeAutocompleter","uiActive","isActive","cancelIfNecessary","commenceIfNecessary","getAutocompleters","doLookup","newContext","lookupInfo","_ui","isSafari","emptyNodeContents","isEntireNodeSelected","getParentDetailsElementAtPos","isInDetailsElement","getDetailsElements","startDetails","endDetails","startSummary","isCaretInTheBeginningOf","isCaretInTheEndOf","isCaretAtStartOfSummary","detailsElements","isCaretAtEndOfSummary","isCaretInFirstPositionInBody","isCaretInLastPositionInBody","setCaretToPosition","moveCaretToDetailsPos","isPartialDelete","containsStart","containsEnd","startInSummary","endInSummary","isPartiallySelectedDetailsElements","shouldPreventDeleteIntoDetails","granularity","parentDetailsAtCaret","inEmptyParentBlock","isFirstBlock","isLastBlock","parentDetailsAtNewPos","shouldPreventDeleteSummaryAction","detailElements","shouldPreventDeleteAction","handleDeleteActionSafari","anchorOffset","focusOffset","applySelection","updateSelection","appendAllChildNodes","backspaceDelete","createAndFireInputEvent","eventType","inputType","specifics","overrides","fireInputEvent","fireBeforeInputEvent","platform$2","isMacOSOriOS","isFirefox","executeKeydownOverride$3","unmodifiedGranularity","getModifiedGranularity","isWord","applyAction","executeKeyupOverride","isBackspaceKeydown","setup$j","firstNonWhiteSpaceNodeSibling","moveToCaretPosition","getEditableRoot","editableRoot","getParentBlock$1","getParentBlockName","isListItemParentBlock","applyAttributes","forcedRootBlockAttrs","attrStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","setForcedBlockAttrs","createNewBlock","keepStyles","newBlockName","parentBlockName","getDetailsRoot","isAtDetailsEdge","isLastEmptyBlockInDetails","shiftKey","insertNewLine","hasFirstChild","isFirstChild","hasParent","isListBlock","isListItem","isNestedList","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","getStyles","insert$4","containerParent","parentBlockStyles","tmpRng","previousChildren","isWithinNonEditableList","parentList","isEmptyAnchor","containerAndSiblingName","canSplitBlock","trimInlineElementsOnLeftSideOfBlock","firstChilds","normalizeZwspOffset","includeZwspInRange","trimLeadingLineBreaks","wrapSelfAndSiblingsInDefaultBlock","startNodeName","startNodeParent","addBrToBlockIfNeeded","shouldEndContainer","optionValue","blockbreak","isAfterLastNodeInContainer","isCef","collapsedAndCef","createNewBlock$1","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","ctrlKey","liBlock","parentBlockParent","isNearChildren","hasRightSideContent","moveSelectionToBr","brElm","extraBr","insertBrAtCaret","isControlKey","insertBrBefore","insertBrAfter","hasBrAfter","isBeforeBr","isAnchorLink","isInsideAnchor","readInlineAnchorLocation","insertBrOutsideAnchor","linebreak","anchorLocation","matchesSelector","shouldInsertBr","shouldBlockNewLine$1","newLineAction","shouldBlockNewLine","_shiftKey","inListBlock","requiredState","inBlock","inCefBlock","inPreBlock","inSummaryBlock","shouldPutBrInPre","inBrContext","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","isInRootWithEmptyOrCEF","isCefOpt","predicates","getAction","insertBreak","insert$1","logicalAction","platform$1","isIOSSafari","handleEnterKeyEvent","isCaretAfterKoreanCharacter","koreanCharRegex","setup$i","iOSSafariKeydownBookmark","iOSSafariKeydownOverride","iOSSafariKeyupOverride","executeKeydownOverride$2","setup$h","setup$g","platform","executeKeyupAction","stopImmediatePropagation","isPageUpDown","setNodeChangeBlocker","blocked","setup$f","setup$e","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertSpaceOrNbspAtPosition","locationToCaretPosition","insertInlineBoundarySpaceOrNbsp","checkPos","setSelection","isInsideSummary","domUtils","insertSpaceOrNbspAtSelection","insertSpaceInSummaryAtSelectionOnFirefox","insertSpaceThunk","executeKeydownOverride$1","setup$d","tableTabNavigation","executeKeydownOverride","setup$c","setup$b","NodeChange","lastRng","nativeRng","fakeRng","currentPath","imageId","getDragImage","transfer","dt","setDragImage","imageData","eventId","getEvent","mkSetEventFn","setEvent","setDragstartEvent","setDropEvent","setDragendEvent","isInDragStartEvent","createEmptyFileList","modeId","getMode","mkSetModeFn","setMode$1","setReadWriteMode","setReadOnlyMode","setProtectedMode","checkMode","expectedMode","isInReadWriteMode","isInProtectedMode","normalizeItems","dataTransfer","itemsImpl","validDropEffects","validEffectAlloweds","createDataTransfer","dataTransferImpl","dropEffect","effectAllowed","effect","allowed","cloneDataTransfer","originalMode","file","getHtmlData","setHtmlData","internalMimeType","internalHtmlMime","internalMark","mark","unmark","isMarked","isPlainText","openContainer","rootTag","rootAttrs","toBlockElements","tagOpen","tagClose","paragraphs","stitch","pasteBinDefaultContent","create$6","lastRngCell","pasteBinElm","getEl","pasteBinClone","isPasteBin","getHtml","copyAndRemove","toElm","fromElm","pasteBinClones","dirtyWrappers","cleanWrapper","isDefaultPasteBinContent","PasteBin","filter$1","innerText","voidElements","ignoreElements","trimHtml","s1","s2","createIdGenerator","getImageMimeType","lowerExt","mimeOverrides","preProcess","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","filteredContent","pasteHtml$1","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","insertContent","pasteAsText","createPasteDataTransfer","doPaste","shouldSimulateInputEvent","doPasteAction","pasteHtml","internalFlag","pasteText","encodedText","getDataTransferItems","contentType","hasContentType","clipboardContent","hasHtmlOrText","extractFilename","createBlobInfo","useFileName","pasteImage","imageItem","existingBlobInfo","isClipboardEvent","readFilesAsDataUris","allowedExtensions","extension","getImagesFromDataTransfer","pasteImageData","fileResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","insertClipboardContent","plainTextMode","isInternal","isPlainTextHtml","isAbsoluteUrl$1","registerEventHandlers","pasteBin","pasteFormat","keyboardPastePlainTextState","getLastRng","registerDataImageFilter","isWebKitFakeUrl","isDataUri","isPasteInsert","registerEventsAndFilters","togglePlainTextPaste","register$1","ui","setHtml5Clipboard","clipboardData","setClipboardData","offscreenRange","getData","isTableSelection","hasSelectedContent","cut","getCaretRangeFromEvent","isPlainTextFileUrl","plainTextContent","setFocusedRange","hasImage","needsCustomInternalDrop","dropContent","parentTransparent","setupSummaryDeleteByDragFix","hasNoSummary","brokenDetailElements","setup$a","draggingInternallyState","internalContent","needsInternalDrop","isInternalDrop","trimmedContent","setup$9","processEvent","addPreProcessFilter","filterFunc","rgbRegExp","rgbToHex","removeWebKitStyles","webKitStylesOption","webKitStyles","inputStyles","outputStyles","inputValue","compareInput","outputStyle","setup$8","setup$7","preventSummaryToggle","filterDetails","initialStateOption","serializedStateOption","setup$6","isText","isContentEditableFalse$2","isContentEditableTrue","getClosestScope","getClosestCef","findEdgeCaretCandidate","findClosestBlockRange","startRng","clickNode","cef","onTripleClickSelect","setup$5","FakeCaretPosition","distanceToRectLeft","distanceToRectRight","isInsideY","collidesY","isOverlapping","overlap","splitRectsPerAxis","intersectingRects","boundingRect","horizontal","vertical","clientInfo","horizontalDistance","_y","closestChildCaretCandidateNodeRect","findCloserTextNode","caretCandidateRect","tryFindSecondBestTextNode","sndClosest","distance","findClosestCaretCandidateNodeRect","sortedRects","horizontalRects","verticalRects","above","below","traverseUp","prevScope","isDragGhostContainer","childNodesWithoutGhost","uncheckedChildren","newScope","closestCaretCandidateNodeRect","ownerDoc","closestFakeCaretCandidate","getAbsolutePosition","docElem","getBodyPosition","getScrollPosition","getBodyScroll","inlineScroll","iframeScroll","getMousePosition","iframePosition","scrollPosition","calculatePosition","bodyPosition","mousePosition","calc","getTargetProps","makeDndEventFromMouseEvent","makeDndEvent","makeDataTransferCopyForDragEvent","makeDragEvent","dataTransferForDispatch","scrollPixelsPerInterval","scrollIntervalValue","mouseRangeToTriggerScrollInsideEditor","mouseRangeToTriggerScrollOutsideEditor","isContentEditableFalse$1","isDraggable","isValidDropTarget","dragElement","createGhost","clonedElm","appendGhostToBody","scrollEditor","amount","scrollRight","scrollUp","scrollDown","moveGhost","maxX","maxY","mouseY","mouseX","contentAreaContainer","mouseEventOriginatedFromWithinTheEditor","overflowX","outerMouseY","outerMouseX","removeElement","removeElementWithPadding","isLeftMouseButtonPressed","applyRelPos","ceElm","elmPos","placeCaretAt","caretInfo","dispatchDragEvent","move","throttledPlaceCaretAt","state_","movement","targetPos","getRawTarget","drop","dropTarget","removeDragState","stopDragging","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","blockUnsupportedFileDrop","preventFileDrop","preventFileDropIfUIElement","editorRoot","eventNames","init$2","setup$4","renderFocusCaret","setup$3","isContentEditableFalse","getContentEditableRoot","SelectionOverrides","realSelectionId","selectedElement","isFakeSelectionElement","isFakeSelectionTargetElement","setRange","removeElementSelection","contentEditableRoot","setElementSelection","hideFakeCaret","closestContentEditable","normalizeVoidElementSelection","isRangeInCaretContainer","isWithinCaretContainer","setupOffscreenSelection","targetClone","realSelectionContainer","selectElement","nodeElm","afterNode","getNormalizedTextOffset","generatePath","generatePathRange","resolvePath","nodePath","optNode","resolvePathRange","generatePathRangeFromRange","cleanEmptyNodes","deleteRng","clean","getParentBlock","resolveFromDynamicPatterns","patternSet","beforeText","dynamicPatterns","getBeforeText","startsWithSingleSpace","stripPattern","textContent","applyPattern$1","isBlockFormatName","formatSet","sortPatterns$1","findPattern$1","sortedPatterns","nuText","findPatterns$1","normalizedMatches","blockText","applyMatches$1","newMarker","rangeFromMarker","createMarker","markerPrefix","pathRange","textEnd","textStart","startParentNode","endParentNode","removeMarker","isReplacementPattern","matchesPattern","patternContent","searchText","startEndIndex","findPatternStartFromSpot","startPattern","startPatternIndex","nextSpot","findPatternStart","requireGap","startRange","findPattern","endPathRng","resultsOpt","findPatternsRec","startPathRng","endSpot","patternsWithoutCurrent","applyPattern","patternRange","applyReplacementPattern","markerRange","applyPatternWithContent","startMarker","endMarker","markerEndRange","markerStartRange","patternMarker","addMarkers","matchesWithEnds","sortPatterns","getBestMatches","matchesWithSortedPatterns","hasSameMatches","sortedMatch","findPatterns","applyMatches","matchesWithMarkers","handleEnter","dynamicPatternSet","inlineMatches","blockMatches","handleInlineKey","checkKeyEvent","codes","checkKeyCode","checkCharCode","setup$2","charCodes","keyCodes","getPatternSet","hasDynamicPatterns","handleInlineTrigger","setup$1","Quirks","each","BACKSPACE","isGecko","isWebKit","isiOS","setEditorCommandState","isDefaultPrevented","emptyEditorWhenDeleting","serializeRng","contents","allContentsSelected","allRng","allSelection","selectAll","documentElementEditingFocus","removeHrOnBackspace","previousSibling","selectControlElements","visualAidsAnchorClass","removeStylesWhenDeletingAcrossBlockElements","getAttributeApplyFunction","isSelectionAcrossElements","disableBackspaceIntoATable","removeBlockQuoteOnBackSpace","setGeckoEditingOptions","setOpts","addBrAfterLastLinks","fixLinks","setDefaultBlockType","isAllContentSelected","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","removeAppleInterchangeBrs","refreshContentEditable","setupRtc","dropDragEndEvent","DOM$6","appendStyle","getRootName","removeUndefined","mkParserSettings","mkSchemaSettings","mkSerializerSettings","createParser","autoFocus","moveSelectionToFirstCaretPosition","initEditor","initInstanceCallback","getStyleSheetLoader$1","makeStylesheetLoadingPromises","framedFonts","bundledCss","normalCss","loadContentCss","fontCss","removeCss","loaded","contentCssText","allStylesheets","contentStyle","preInit","directionality","protect","loadInitialContent","initEditorWithInitialContent","startProgress","canceled","progressTimeout","contentBodyLoaded","setupRtcThunk","cancelProgress","_rtcMode","DOM$5","createIframeElement","title","customAttrs","tabindex","iframe","getIframeHtml","iframeHTML","bodyId","bodyClass","translatedAriaText","createIframe","boxInfo","iframeTitle","ifr","setupIframeBody","ready","init$1","DOM$4","initPlugin","initializedPlugins","Plugin","pluginUrl","pluginInstance","trimLegacyPrefix","initPlugins","initIcons","iconPackName","currentIcons","loadIcons","svgData","icon","initTheme","Theme","initModel","model","Model","renderFromLoadedTheme","render","renderThemeFalse","renderFromThemeFunc","createThemeFalseResult","renderThemeFalseIframe","iframeContainer","renderThemeUi","augmentEditorUiApi","uiApiFacade","renderInfo","DOM$3","hasSkipLoadPrefix","loadLanguage","scriptLoader","languageCode","languageUrl","loadTheme","themeUrl","loadModel","modelUrl","getIconsUrlMetaFromUrl","getIconsUrlMetaFromName","defaultIconsUrl","customIconsUrl","urlMeta","loadPlugins","loadPlugin","isThemeLoaded","isModelLoaded","loadScripts","getStyleSheetLoader","snapshot","setEditableRoot","hasEditableRoot","sectionResult","sections","deviceDetection","normalizePlugins","trimmedPlugins","extractSections","getSection","defaults","sectionOptions","hasSection","getSectionConfig","getMobileOverrideOptions","mobileOptions","getExternalPlugins","overrideOptions","userDefinedExternalPlugins","combinePlugins","forcedPlugins","getPlatformPlugins","isMobileDevice","desktopPlugins","mobilePlugins","processPlugins","defaultOverrideOptions","mobileConfig","platformPlugins","combinedPlugins","isOnMobile","combineOptions","defaultOptions","deviceOverrideOptions","extendedOptions","normalizeOptions","addVisual","registerExecCommands$3","toggleAlign","align","registerQueryStateCommands$1","alignStates","registerCommands$b","registerCommands$a","trimOrPadLeftRight","processValue$1","trimOrPad","insertAtCaret","insertedContent","registerCommands$9","_command","legacyPropNames","isFont","getSpecifiedFontProp","getProperty","legacyPropName","normalizeFontFamily","fontFamily","getComputedFontProp","getFontProp","getFontSize","getFontFamily","findFirstCaretElement","getCaretElement","bindRange","mapRange","fromFontSizeNumber","fontSizeNumber","fontClasses","normalizeFontNames","font","fonts","fontNameAction","fontNameQuery","fontSizeAction","fontSizeQuery","lineHeightQuery","specifiedStyle","computedStyle","lineHeight","fontSize","lineHeightAction","registerExecCommands$2","lang","registerQueryValueCommands","isFormatMatch","registerCommands$8","registerCommands$7","registerCommands$6","registerCommands$5","applyLinkToSelection","linkDetails","anchor","registerExecCommands$1","listParent","registerQueryStateCommands","list","registerCommands$4","getTopParentBlock","topParentBlock","insert","insertBefore","registerCommands$3","registerCommands$2","registerCommands$1","registerExecCommands","registerCommands","selectionSafeCommands","isSelectionSafeCommand","EditorCommands","lowerCaseCommand","commandList","commands","internalContentEditableAttr","setContentEditable","switchOffContentEditableTrue","switchOnContentEditableTrue","removeFakeSelection","restoreFakeSelection","toggleReadOnly","isReadOnly","registerFilters","registerReadOnlyContentFilters","isClickEvent","allowedEvents","isReadOnlyAllowedEvent","getAnchorHrefOpt","processReadonlyEvents","href","targetEl","registerReadOnlySelectionBlockers","nativeEvents","EventDispatcher","wrappedCallback","currentName","bindingName","filteredHandlers","binding","getEventDispatcher","Observable","bubble","dispatcherArgs","DOM$2","customEventRootDelegates","getEventTarget","eventName","eventRoot","isListening","bindEventDelegate","eventRootElm","delegate","editors","EditorObservable","stringListProcessor","getBuiltInProcessor","processValue","isBuiltInSpec","getErrorMessage","additionalText","isValidResult","processor","processDefaultValue","create$5","initialOptions","setValue","isRegistered","registered","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","setMode","registerMode","create$4","each$2","explode","keyCodeLookup","modifierNames","isModifier","parseShortcut","shortcut","Shortcuts","cmdFunc","shortcuts","create$3","buttons","menuItems","icons","contextMenus","contextToolbars","sidebars","views","addIcon","bridge","DOM$1","extend","each$1","Editor","setupCallback","loadArgs","getArgs","saveArgs","initialContent","oldState","urlConverterCallback","urlObject","DOM","boundGlobalEvents","beforeUnloadDelegate","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","purgeDestroyedEditor","isQuirksMode","baseURL","documentBaseURL","srcScript","pluginBaseUrls","pluginBaseUrl","pluginName","invalidInlineTargets","isInvalidInlineTarget","createId","execCallback","findTargets","provideResults","initEditors","initCount","createEditor","existingEditor","editorId","editorOptions","FakeClipboard","dataValue","FakeClipboardItem","round","relativePosition","targetW","targetH","relChars","create$2","findBestRelativePosition","constrainRect","rels","inflate","intersect","cropRect","x1","y1","clamp","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","Rect","awaiter","resolveCb","rejectCb","timeout","complete","completer","Resource","tasks","resultFns","resources","loadErrMsg","runErrMsg","task","waiter","storage","localStorage","LocalStorage","publicApi","tinymce$1","exportToModuleLoaders","tinymce","module"],"mappings":"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","x_google_ignoreList":[0]}